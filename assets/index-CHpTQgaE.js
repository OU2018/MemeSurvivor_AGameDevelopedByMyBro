(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function i(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=i(r);fetch(r.href,c)}})();function Yh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vc={exports:{}},xi={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qf;function Py(){if(qf)return xi;qf=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(o,r,c){var f=null;if(c!==void 0&&(f=""+c),r.key!==void 0&&(f=""+r.key),"key"in r){c={};for(var h in r)h!=="key"&&(c[h]=r[h])}else c=r;return r=c.ref,{$$typeof:e,type:o,key:f,ref:r!==void 0?r:null,props:c}}return xi.Fragment=t,xi.jsx=i,xi.jsxs=i,xi}var Gf;function By(){return Gf||(Gf=1,vc.exports=Py()),vc.exports}var d=By(),xc={exports:{}},ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yf;function Ly(){if(Yf)return ge;Yf=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),v=Symbol.iterator;function x(A){return A===null||typeof A!="object"?null:(A=v&&A[v]||A["@@iterator"],typeof A=="function"?A:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,k={};function C(A,U,ae){this.props=A,this.context=U,this.refs=k,this.updater=ae||T}C.prototype.isReactComponent={},C.prototype.setState=function(A,U){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,U,"setState")},C.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function w(){}w.prototype=C.prototype;function j(A,U,ae){this.props=A,this.context=U,this.refs=k,this.updater=ae||T}var O=j.prototype=new w;O.constructor=j,M(O,C.prototype),O.isPureReactComponent=!0;var V=Array.isArray;function H(){}var X={H:null,A:null,T:null,S:null},ee=Object.prototype.hasOwnProperty;function re(A,U,ae){var oe=ae.ref;return{$$typeof:e,type:A,key:U,ref:oe!==void 0?oe:null,props:ae}}function J(A,U){return re(A.type,U,A.props)}function ue(A){return typeof A=="object"&&A!==null&&A.$$typeof===e}function pe(A){var U={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(ae){return U[ae]})}var be=/\/+/g;function K(A,U){return typeof A=="object"&&A!==null&&A.key!=null?pe(""+A.key):U.toString(36)}function fe(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(H,H):(A.status="pending",A.then(function(U){A.status==="pending"&&(A.status="fulfilled",A.value=U)},function(U){A.status==="pending"&&(A.status="rejected",A.reason=U)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function R(A,U,ae,oe,te){var ve=typeof A;(ve==="undefined"||ve==="boolean")&&(A=null);var Ne=!1;if(A===null)Ne=!0;else switch(ve){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(A.$$typeof){case e:case t:Ne=!0;break;case g:return Ne=A._init,R(Ne(A._payload),U,ae,oe,te)}}if(Ne)return te=te(A),Ne=oe===""?"."+K(A,0):oe,V(te)?(ae="",Ne!=null&&(ae=Ne.replace(be,"$&/")+"/"),R(te,U,ae,"",function(yt){return yt})):te!=null&&(ue(te)&&(te=J(te,ae+(te.key==null||A&&A.key===te.key?"":(""+te.key).replace(be,"$&/")+"/")+Ne)),U.push(te)),1;Ne=0;var Ke=oe===""?".":oe+":";if(V(A))for(var Ge=0;Ge<A.length;Ge++)oe=A[Ge],ve=Ke+K(oe,Ge),Ne+=R(oe,U,ae,ve,te);else if(Ge=x(A),typeof Ge=="function")for(A=Ge.call(A),Ge=0;!(oe=A.next()).done;)oe=oe.value,ve=Ke+K(oe,Ge++),Ne+=R(oe,U,ae,ve,te);else if(ve==="object"){if(typeof A.then=="function")return R(fe(A),U,ae,oe,te);throw U=String(A),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function Y(A,U,ae){if(A==null)return A;var oe=[],te=0;return R(A,oe,"","",function(ve){return U.call(ae,ve,te++)}),oe}function ie(A){if(A._status===-1){var U=A._result;U=U(),U.then(function(ae){(A._status===0||A._status===-1)&&(A._status=1,A._result=ae)},function(ae){(A._status===0||A._status===-1)&&(A._status=2,A._result=ae)}),A._status===-1&&(A._status=0,A._result=U)}if(A._status===1)return A._result.default;throw A._result}var q=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},Z={map:Y,forEach:function(A,U,ae){Y(A,function(){U.apply(this,arguments)},ae)},count:function(A){var U=0;return Y(A,function(){U++}),U},toArray:function(A){return Y(A,function(U){return U})||[]},only:function(A){if(!ue(A))throw Error("React.Children.only expected to receive a single React element child.");return A}};return ge.Activity=b,ge.Children=Z,ge.Component=C,ge.Fragment=i,ge.Profiler=r,ge.PureComponent=j,ge.StrictMode=o,ge.Suspense=p,ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,ge.__COMPILER_RUNTIME={__proto__:null,c:function(A){return X.H.useMemoCache(A)}},ge.cache=function(A){return function(){return A.apply(null,arguments)}},ge.cacheSignal=function(){return null},ge.cloneElement=function(A,U,ae){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var oe=M({},A.props),te=A.key;if(U!=null)for(ve in U.key!==void 0&&(te=""+U.key),U)!ee.call(U,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&U.ref===void 0||(oe[ve]=U[ve]);var ve=arguments.length-2;if(ve===1)oe.children=ae;else if(1<ve){for(var Ne=Array(ve),Ke=0;Ke<ve;Ke++)Ne[Ke]=arguments[Ke+2];oe.children=Ne}return re(A.type,te,oe)},ge.createContext=function(A){return A={$$typeof:f,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:c,_context:A},A},ge.createElement=function(A,U,ae){var oe,te={},ve=null;if(U!=null)for(oe in U.key!==void 0&&(ve=""+U.key),U)ee.call(U,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(te[oe]=U[oe]);var Ne=arguments.length-2;if(Ne===1)te.children=ae;else if(1<Ne){for(var Ke=Array(Ne),Ge=0;Ge<Ne;Ge++)Ke[Ge]=arguments[Ge+2];te.children=Ke}if(A&&A.defaultProps)for(oe in Ne=A.defaultProps,Ne)te[oe]===void 0&&(te[oe]=Ne[oe]);return re(A,ve,te)},ge.createRef=function(){return{current:null}},ge.forwardRef=function(A){return{$$typeof:h,render:A}},ge.isValidElement=ue,ge.lazy=function(A){return{$$typeof:g,_payload:{_status:-1,_result:A},_init:ie}},ge.memo=function(A,U){return{$$typeof:u,type:A,compare:U===void 0?null:U}},ge.startTransition=function(A){var U=X.T,ae={};X.T=ae;try{var oe=A(),te=X.S;te!==null&&te(ae,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(H,q)}catch(ve){q(ve)}finally{U!==null&&ae.types!==null&&(U.types=ae.types),X.T=U}},ge.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},ge.use=function(A){return X.H.use(A)},ge.useActionState=function(A,U,ae){return X.H.useActionState(A,U,ae)},ge.useCallback=function(A,U){return X.H.useCallback(A,U)},ge.useContext=function(A){return X.H.useContext(A)},ge.useDebugValue=function(){},ge.useDeferredValue=function(A,U){return X.H.useDeferredValue(A,U)},ge.useEffect=function(A,U){return X.H.useEffect(A,U)},ge.useEffectEvent=function(A){return X.H.useEffectEvent(A)},ge.useId=function(){return X.H.useId()},ge.useImperativeHandle=function(A,U,ae){return X.H.useImperativeHandle(A,U,ae)},ge.useInsertionEffect=function(A,U){return X.H.useInsertionEffect(A,U)},ge.useLayoutEffect=function(A,U){return X.H.useLayoutEffect(A,U)},ge.useMemo=function(A,U){return X.H.useMemo(A,U)},ge.useOptimistic=function(A,U){return X.H.useOptimistic(A,U)},ge.useReducer=function(A,U,ae){return X.H.useReducer(A,U,ae)},ge.useRef=function(A){return X.H.useRef(A)},ge.useState=function(A){return X.H.useState(A)},ge.useSyncExternalStore=function(A,U,ae){return X.H.useSyncExternalStore(A,U,ae)},ge.useTransition=function(){return X.H.useTransition()},ge.version="19.2.1",ge}var Uf;function Bc(){return Uf||(Uf=1,xc.exports=Ly()),xc.exports}var F=Bc();const zy=Yh(F);var Sc={exports:{}},Si={},Tc={exports:{}},Mc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ff;function qy(){return Ff||(Ff=1,(function(e){function t(R,Y){var ie=R.length;R.push(Y);e:for(;0<ie;){var q=ie-1>>>1,Z=R[q];if(0<r(Z,Y))R[q]=Y,R[ie]=Z,ie=q;else break e}}function i(R){return R.length===0?null:R[0]}function o(R){if(R.length===0)return null;var Y=R[0],ie=R.pop();if(ie!==Y){R[0]=ie;e:for(var q=0,Z=R.length,A=Z>>>1;q<A;){var U=2*(q+1)-1,ae=R[U],oe=U+1,te=R[oe];if(0>r(ae,ie))oe<Z&&0>r(te,ae)?(R[q]=te,R[oe]=ie,q=oe):(R[q]=ae,R[U]=ie,q=U);else if(oe<Z&&0>r(te,ie))R[q]=te,R[oe]=ie,q=oe;else break e}}return Y}function r(R,Y){var ie=R.sortIndex-Y.sortIndex;return ie!==0?ie:R.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var f=Date,h=f.now();e.unstable_now=function(){return f.now()-h}}var p=[],u=[],g=1,b=null,v=3,x=!1,T=!1,M=!1,k=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function O(R){for(var Y=i(u);Y!==null;){if(Y.callback===null)o(u);else if(Y.startTime<=R)o(u),Y.sortIndex=Y.expirationTime,t(p,Y);else break;Y=i(u)}}function V(R){if(M=!1,O(R),!T)if(i(p)!==null)T=!0,H||(H=!0,pe());else{var Y=i(u);Y!==null&&fe(V,Y.startTime-R)}}var H=!1,X=-1,ee=5,re=-1;function J(){return k?!0:!(e.unstable_now()-re<ee)}function ue(){if(k=!1,H){var R=e.unstable_now();re=R;var Y=!0;try{e:{T=!1,M&&(M=!1,w(X),X=-1),x=!0;var ie=v;try{t:{for(O(R),b=i(p);b!==null&&!(b.expirationTime>R&&J());){var q=b.callback;if(typeof q=="function"){b.callback=null,v=b.priorityLevel;var Z=q(b.expirationTime<=R);if(R=e.unstable_now(),typeof Z=="function"){b.callback=Z,O(R),Y=!0;break t}b===i(p)&&o(p),O(R)}else o(p);b=i(p)}if(b!==null)Y=!0;else{var A=i(u);A!==null&&fe(V,A.startTime-R),Y=!1}}break e}finally{b=null,v=ie,x=!1}Y=void 0}}finally{Y?pe():H=!1}}}var pe;if(typeof j=="function")pe=function(){j(ue)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,K=be.port2;be.port1.onmessage=ue,pe=function(){K.postMessage(null)}}else pe=function(){C(ue,0)};function fe(R,Y){X=C(function(){R(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_next=function(R){switch(v){case 1:case 2:case 3:var Y=3;break;default:Y=v}var ie=v;v=Y;try{return R()}finally{v=ie}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(R,Y){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var ie=v;v=R;try{return Y()}finally{v=ie}},e.unstable_scheduleCallback=function(R,Y,ie){var q=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?q+ie:q):ie=q,R){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ie+Z,R={id:g++,callback:Y,priorityLevel:R,startTime:ie,expirationTime:Z,sortIndex:-1},ie>q?(R.sortIndex=ie,t(u,R),i(p)===null&&R===i(u)&&(M?(w(X),X=-1):M=!0,fe(V,ie-q))):(R.sortIndex=Z,t(p,R),T||x||(T=!0,H||(H=!0,pe()))),R},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(R){var Y=v;return function(){var ie=v;v=Y;try{return R.apply(this,arguments)}finally{v=ie}}}})(Mc)),Mc}var Xf;function Gy(){return Xf||(Xf=1,Tc.exports=qy()),Tc.exports}var _c={exports:{}},ht={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wf;function Yy(){if(Wf)return ht;Wf=1;var e=Bc();function t(p){var u="https://react.dev/errors/"+p;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(p,u,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:p,containerInfo:u,implementation:g}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,u){if(p==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return ht.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,ht.createPortal=function(p,u){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return c(p,u,null,g)},ht.flushSync=function(p){var u=f.T,g=o.p;try{if(f.T=null,o.p=2,p)return p()}finally{f.T=u,o.p=g,o.d.f()}},ht.preconnect=function(p,u){typeof p=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,o.d.C(p,u))},ht.prefetchDNS=function(p){typeof p=="string"&&o.d.D(p)},ht.preinit=function(p,u){if(typeof p=="string"&&u&&typeof u.as=="string"){var g=u.as,b=h(g,u.crossOrigin),v=typeof u.integrity=="string"?u.integrity:void 0,x=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;g==="style"?o.d.S(p,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:x}):g==="script"&&o.d.X(p,{crossOrigin:b,integrity:v,fetchPriority:x,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},ht.preinitModule=function(p,u){if(typeof p=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var g=h(u.as,u.crossOrigin);o.d.M(p,{crossOrigin:g,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&o.d.M(p)},ht.preload=function(p,u){if(typeof p=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var g=u.as,b=h(g,u.crossOrigin);o.d.L(p,g,{crossOrigin:b,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},ht.preloadModule=function(p,u){if(typeof p=="string")if(u){var g=h(u.as,u.crossOrigin);o.d.m(p,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:g,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else o.d.m(p)},ht.requestFormReset=function(p){o.d.r(p)},ht.unstable_batchedUpdates=function(p,u){return p(u)},ht.useFormState=function(p,u,g){return f.H.useFormState(p,u,g)},ht.useFormStatus=function(){return f.H.useHostTransitionStatus()},ht.version="19.2.1",ht}var Qf;function Uy(){if(Qf)return _c.exports;Qf=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),_c.exports=Yy(),_c.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f;function Fy(){if($f)return Si;$f=1;var e=Gy(),t=Bc(),i=Uy();function o(a){var s="https://react.dev/errors/"+a;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function c(a){var s=a,l=a;if(a.alternate)for(;s.return;)s=s.return;else{a=s;do s=a,(s.flags&4098)!==0&&(l=s.return),a=s.return;while(a)}return s.tag===3?l:null}function f(a){if(a.tag===13){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function h(a){if(a.tag===31){var s=a.memoizedState;if(s===null&&(a=a.alternate,a!==null&&(s=a.memoizedState)),s!==null)return s.dehydrated}return null}function p(a){if(c(a)!==a)throw Error(o(188))}function u(a){var s=a.alternate;if(!s){if(s=c(a),s===null)throw Error(o(188));return s!==a?null:a}for(var l=a,n=s;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(n=m.return,n!==null){l=n;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return p(m),a;if(y===n)return p(m),s;y=y.sibling}throw Error(o(188))}if(l.return!==n.return)l=m,n=y;else{for(var S=!1,_=m.child;_;){if(_===l){S=!0,l=m,n=y;break}if(_===n){S=!0,n=m,l=y;break}_=_.sibling}if(!S){for(_=y.child;_;){if(_===l){S=!0,l=y,n=m;break}if(_===n){S=!0,n=y,l=m;break}_=_.sibling}if(!S)throw Error(o(189))}}if(l.alternate!==n)throw Error(o(190))}if(l.tag!==3)throw Error(o(188));return l.stateNode.current===l?a:s}function g(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a;for(a=a.child;a!==null;){if(s=g(a),s!==null)return s;a=a.sibling}return null}var b=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),j=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),ee=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),ue=Symbol.iterator;function pe(a){return a===null||typeof a!="object"?null:(a=ue&&a[ue]||a["@@iterator"],typeof a=="function"?a:null)}var be=Symbol.for("react.client.reference");function K(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===be?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case M:return"Fragment";case C:return"Profiler";case k:return"StrictMode";case V:return"Suspense";case H:return"SuspenseList";case re:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case T:return"Portal";case j:return a.displayName||"Context";case w:return(a._context.displayName||"Context")+".Consumer";case O:var s=a.render;return a=a.displayName,a||(a=s.displayName||s.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case X:return s=a.displayName||null,s!==null?s:K(a.type)||"Memo";case ee:s=a._payload,a=a._init;try{return K(a(s))}catch{}}return null}var fe=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},q=[],Z=-1;function A(a){return{current:a}}function U(a){0>Z||(a.current=q[Z],q[Z]=null,Z--)}function ae(a,s){Z++,q[Z]=a.current,a.current=s}var oe=A(null),te=A(null),ve=A(null),Ne=A(null);function Ke(a,s){switch(ae(ve,s),ae(te,a),ae(oe,null),s.nodeType){case 9:case 11:a=(a=s.documentElement)&&(a=a.namespaceURI)?uf(a):0;break;default:if(a=s.tagName,s=s.namespaceURI)s=uf(s),a=ff(s,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}U(oe),ae(oe,a)}function Ge(){U(oe),U(te),U(ve)}function yt(a){a.memoizedState!==null&&ae(Ne,a);var s=oe.current,l=ff(s,a.type);s!==l&&(ae(te,a),ae(oe,l))}function rs(a){te.current===a&&(U(oe),U(te)),Ne.current===a&&(U(Ne),yi._currentValue=ie)}var Tl,Ai;function fa(a){if(Tl===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Tl=s&&s[1]||"",Ai=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tl+a+Ai}var Ml=!1;function _l(a,s){if(!a||Ml)return"";Ml=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(s){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(G){var L=G}Reflect.construct(a,[],$)}else{try{$.call()}catch(G){L=G}a.call($.prototype)}}else{try{throw Error()}catch(G){L=G}($=a())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(G){if(G&&L&&typeof G.stack=="string")return[G.stack,L.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=n.DetermineComponentFrameRoot(),S=y[0],_=y[1];if(S&&_){var E=S.split(`
`),B=_.split(`
`);for(m=n=0;n<E.length&&!E[n].includes("DetermineComponentFrameRoot");)n++;for(;m<B.length&&!B[m].includes("DetermineComponentFrameRoot");)m++;if(n===E.length||m===B.length)for(n=E.length-1,m=B.length-1;1<=n&&0<=m&&E[n]!==B[m];)m--;for(;1<=n&&0<=m;n--,m--)if(E[n]!==B[m]){if(n!==1||m!==1)do if(n--,m--,0>m||E[n]!==B[m]){var W=`
`+E[n].replace(" at new "," at ");return a.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",a.displayName)),W}while(1<=n&&0<=m);break}}}finally{Ml=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?fa(l):""}function ir(a,s){switch(a.tag){case 26:case 27:case 5:return fa(a.type);case 16:return fa("Lazy");case 13:return a.child!==s&&s!==null?fa("Suspense Fallback"):fa("Suspense");case 19:return fa("SuspenseList");case 0:case 15:return _l(a.type,!1);case 11:return _l(a.type.render,!1);case 1:return _l(a.type,!0);case 31:return fa("Activity");default:return""}}function Di(a){try{var s="",l=null;do s+=ir(a,l),l=a,a=a.return;while(a);return s}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var wl=Object.prototype.hasOwnProperty,kl=e.unstable_scheduleCallback,jl=e.unstable_cancelCallback,ym=e.unstable_shouldYield,bm=e.unstable_requestPaint,Ct=e.unstable_now,gm=e.unstable_getCurrentPriorityLevel,qc=e.unstable_ImmediatePriority,Gc=e.unstable_UserBlockingPriority,Ri=e.unstable_NormalPriority,vm=e.unstable_LowPriority,Yc=e.unstable_IdlePriority,xm=e.log,Sm=e.unstable_setDisableYieldValue,Cl=null,Nt=null;function Ra(a){if(typeof xm=="function"&&Sm(a),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode(Cl,a)}catch{}}var Et=Math.clz32?Math.clz32:_m,Tm=Math.log,Mm=Math.LN2;function _m(a){return a>>>=0,a===0?32:31-(Tm(a)/Mm|0)|0}var Oi=256,Ii=262144,Vi=4194304;function ns(a){var s=a&42;if(s!==0)return s;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Hi(a,s,l){var n=a.pendingLanes;if(n===0)return 0;var m=0,y=a.suspendedLanes,S=a.pingedLanes;a=a.warmLanes;var _=n&134217727;return _!==0?(n=_&~y,n!==0?m=ns(n):(S&=_,S!==0?m=ns(S):l||(l=_&~a,l!==0&&(m=ns(l))))):(_=n&~y,_!==0?m=ns(_):S!==0?m=ns(S):l||(l=n&~a,l!==0&&(m=ns(l)))),m===0?0:s!==0&&s!==m&&(s&y)===0&&(y=m&-m,l=s&-s,y>=l||y===32&&(l&4194048)!==0)?s:m}function Nl(a,s){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&s)===0}function wm(a,s){switch(a){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uc(){var a=Vi;return Vi<<=1,(Vi&62914560)===0&&(Vi=4194304),a}function or(a){for(var s=[],l=0;31>l;l++)s.push(a);return s}function El(a,s){a.pendingLanes|=s,s!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function km(a,s,l,n,m,y){var S=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var _=a.entanglements,E=a.expirationTimes,B=a.hiddenUpdates;for(l=S&~l;0<l;){var W=31-Et(l),$=1<<W;_[W]=0,E[W]=-1;var L=B[W];if(L!==null)for(B[W]=null,W=0;W<L.length;W++){var G=L[W];G!==null&&(G.lane&=-536870913)}l&=~$}n!==0&&Fc(a,n,0),y!==0&&m===0&&a.tag!==0&&(a.suspendedLanes|=y&~(S&~s))}function Fc(a,s,l){a.pendingLanes|=s,a.suspendedLanes&=~s;var n=31-Et(s);a.entangledLanes|=s,a.entanglements[n]=a.entanglements[n]|1073741824|l&261930}function Xc(a,s){var l=a.entangledLanes|=s;for(a=a.entanglements;l;){var n=31-Et(l),m=1<<n;m&s|a[n]&s&&(a[n]|=s),l&=~m}}function Wc(a,s){var l=s&-s;return l=(l&42)!==0?1:rr(l),(l&(a.suspendedLanes|s))!==0?0:l}function rr(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function nr(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Qc(){var a=Y.p;return a!==0?a:(a=window.event,a===void 0?32:If(a.type))}function $c(a,s){var l=Y.p;try{return Y.p=a,s()}finally{Y.p=l}}var Oa=Math.random().toString(36).slice(2),nt="__reactFiber$"+Oa,gt="__reactProps$"+Oa,As="__reactContainer$"+Oa,cr="__reactEvents$"+Oa,jm="__reactListeners$"+Oa,Cm="__reactHandles$"+Oa,Kc="__reactResources$"+Oa,Al="__reactMarker$"+Oa;function dr(a){delete a[nt],delete a[gt],delete a[cr],delete a[jm],delete a[Cm]}function Ds(a){var s=a[nt];if(s)return s;for(var l=a.parentNode;l;){if(s=l[As]||l[nt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(a=vf(a);a!==null;){if(l=a[nt])return l;a=vf(a)}return s}a=l,l=a.parentNode}return null}function Rs(a){if(a=a[nt]||a[As]){var s=a.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return a}return null}function Dl(a){var s=a.tag;if(s===5||s===26||s===27||s===6)return a.stateNode;throw Error(o(33))}function Os(a){var s=a[Kc];return s||(s=a[Kc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ot(a){a[Al]=!0}var Zc=new Set,Jc={};function cs(a,s){Is(a,s),Is(a+"Capture",s)}function Is(a,s){for(Jc[a]=s,a=0;a<s.length;a++)Zc.add(s[a])}var Nm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ed={},td={};function Em(a){return wl.call(td,a)?!0:wl.call(ed,a)?!1:Nm.test(a)?td[a]=!0:(ed[a]=!0,!1)}function Pi(a,s,l){if(Em(s))if(l===null)a.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(s);return;case"boolean":var n=s.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){a.removeAttribute(s);return}}a.setAttribute(s,""+l)}}function Bi(a,s,l){if(l===null)a.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(s);return}a.setAttribute(s,""+l)}}function ha(a,s,l,n){if(n===null)a.removeAttribute(l);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(s,l,""+n)}}function zt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ad(a){var s=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Am(a,s,l){var n=Object.getOwnPropertyDescriptor(a.constructor.prototype,s);if(!a.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var m=n.get,y=n.set;return Object.defineProperty(a,s,{configurable:!0,get:function(){return m.call(this)},set:function(S){l=""+S,y.call(this,S)}}),Object.defineProperty(a,s,{enumerable:n.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){a._valueTracker=null,delete a[s]}}}}function ur(a){if(!a._valueTracker){var s=ad(a)?"checked":"value";a._valueTracker=Am(a,s,""+a[s])}}function sd(a){if(!a)return!1;var s=a._valueTracker;if(!s)return!0;var l=s.getValue(),n="";return a&&(n=ad(a)?a.checked?"true":"false":a.value),a=n,a!==l?(s.setValue(a),!0):!1}function Li(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Dm=/[\n"\\]/g;function qt(a){return a.replace(Dm,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function fr(a,s,l,n,m,y,S,_){a.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?a.type=S:a.removeAttribute("type"),s!=null?S==="number"?(s===0&&a.value===""||a.value!=s)&&(a.value=""+zt(s)):a.value!==""+zt(s)&&(a.value=""+zt(s)):S!=="submit"&&S!=="reset"||a.removeAttribute("value"),s!=null?hr(a,S,zt(s)):l!=null?hr(a,S,zt(l)):n!=null&&a.removeAttribute("value"),m==null&&y!=null&&(a.defaultChecked=!!y),m!=null&&(a.checked=m&&typeof m!="function"&&typeof m!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.name=""+zt(_):a.removeAttribute("name")}function ld(a,s,l,n,m,y,S,_){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(a.type=y),s!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){ur(a);return}l=l!=null?""+zt(l):"",s=s!=null?""+zt(s):l,_||s===a.value||(a.value=s),a.defaultValue=s}n=n??m,n=typeof n!="function"&&typeof n!="symbol"&&!!n,a.checked=_?a.checked:!!n,a.defaultChecked=!!n,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(a.name=S),ur(a)}function hr(a,s,l){s==="number"&&Li(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function Vs(a,s,l,n){if(a=a.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<a.length;l++)m=s.hasOwnProperty("$"+a[l].value),a[l].selected!==m&&(a[l].selected=m),m&&n&&(a[l].defaultSelected=!0)}else{for(l=""+zt(l),s=null,m=0;m<a.length;m++){if(a[m].value===l){a[m].selected=!0,n&&(a[m].defaultSelected=!0);return}s!==null||a[m].disabled||(s=a[m])}s!==null&&(s.selected=!0)}}function id(a,s,l){if(s!=null&&(s=""+zt(s),s!==a.value&&(a.value=s),l==null)){a.defaultValue!==s&&(a.defaultValue=s);return}a.defaultValue=l!=null?""+zt(l):""}function od(a,s,l,n){if(s==null){if(n!=null){if(l!=null)throw Error(o(92));if(fe(n)){if(1<n.length)throw Error(o(93));n=n[0]}l=n}l==null&&(l=""),s=l}l=zt(s),a.defaultValue=l,n=a.textContent,n===l&&n!==""&&n!==null&&(a.value=n),ur(a)}function Hs(a,s){if(s){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=s;return}}a.textContent=s}var Rm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rd(a,s,l){var n=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?n?a.setProperty(s,""):s==="float"?a.cssFloat="":a[s]="":n?a.setProperty(s,l):typeof l!="number"||l===0||Rm.has(s)?s==="float"?a.cssFloat=l:a[s]=(""+l).trim():a[s]=l+"px"}function nd(a,s,l){if(s!=null&&typeof s!="object")throw Error(o(62));if(a=a.style,l!=null){for(var n in l)!l.hasOwnProperty(n)||s!=null&&s.hasOwnProperty(n)||(n.indexOf("--")===0?a.setProperty(n,""):n==="float"?a.cssFloat="":a[n]="");for(var m in s)n=s[m],s.hasOwnProperty(m)&&l[m]!==n&&rd(a,m,n)}else for(var y in s)s.hasOwnProperty(y)&&rd(a,y,s[y])}function mr(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Om=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Im=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function zi(a){return Im.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function ma(){}var pr=null;function yr(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ps=null,Bs=null;function cd(a){var s=Rs(a);if(s&&(a=s.stateNode)){var l=a[gt]||null;e:switch(a=s.stateNode,s.type){case"input":if(fr(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+qt(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var n=l[s];if(n!==a&&n.form===a.form){var m=n[gt]||null;if(!m)throw Error(o(90));fr(n,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<l.length;s++)n=l[s],n.form===a.form&&sd(n)}break e;case"textarea":id(a,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Vs(a,!!l.multiple,s,!1)}}}var br=!1;function dd(a,s,l){if(br)return a(s,l);br=!0;try{var n=a(s);return n}finally{if(br=!1,(Ps!==null||Bs!==null)&&(No(),Ps&&(s=Ps,a=Bs,Bs=Ps=null,cd(s),a)))for(s=0;s<a.length;s++)cd(a[s])}}function Rl(a,s){var l=a.stateNode;if(l===null)return null;var n=l[gt]||null;if(n===null)return null;l=n[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(a=a.type,n=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!n;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(o(231,s,typeof l));return l}var pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gr=!1;if(pa)try{var Ol={};Object.defineProperty(Ol,"passive",{get:function(){gr=!0}}),window.addEventListener("test",Ol,Ol),window.removeEventListener("test",Ol,Ol)}catch{gr=!1}var Ia=null,vr=null,qi=null;function ud(){if(qi)return qi;var a,s=vr,l=s.length,n,m="value"in Ia?Ia.value:Ia.textContent,y=m.length;for(a=0;a<l&&s[a]===m[a];a++);var S=l-a;for(n=1;n<=S&&s[l-n]===m[y-n];n++);return qi=m.slice(a,1<n?1-n:void 0)}function Gi(a){var s=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&s===13&&(a=13)):a=s,a===10&&(a=13),32<=a||a===13?a:0}function Yi(){return!0}function fd(){return!1}function vt(a){function s(l,n,m,y,S){this._reactName=l,this._targetInst=m,this.type=n,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var _ in a)a.hasOwnProperty(_)&&(l=a[_],this[_]=l?l(y):y[_]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Yi:fd,this.isPropagationStopped=fd,this}return b(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),s}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=vt(ds),Il=b({},ds,{view:0,detail:0}),Vm=vt(Il),xr,Sr,Vl,Fi=b({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mr,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Vl&&(Vl&&a.type==="mousemove"?(xr=a.screenX-Vl.screenX,Sr=a.screenY-Vl.screenY):Sr=xr=0,Vl=a),xr)},movementY:function(a){return"movementY"in a?a.movementY:Sr}}),hd=vt(Fi),Hm=b({},Fi,{dataTransfer:0}),Pm=vt(Hm),Bm=b({},Il,{relatedTarget:0}),Tr=vt(Bm),Lm=b({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),zm=vt(Lm),qm=b({},ds,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Gm=vt(qm),Ym=b({},ds,{data:0}),md=vt(Ym),Um={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wm(a){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(a):(a=Xm[a])?!!s[a]:!1}function Mr(){return Wm}var Qm=b({},Il,{key:function(a){if(a.key){var s=Um[a.key]||a.key;if(s!=="Unidentified")return s}return a.type==="keypress"?(a=Gi(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Fm[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mr,charCode:function(a){return a.type==="keypress"?Gi(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Gi(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),$m=vt(Qm),Km=b({},Fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pd=vt(Km),Zm=b({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mr}),Jm=vt(Zm),ep=b({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),tp=vt(ep),ap=b({},Fi,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),sp=vt(ap),lp=b({},ds,{newState:0,oldState:0}),ip=vt(lp),op=[9,13,27,32],_r=pa&&"CompositionEvent"in window,Hl=null;pa&&"documentMode"in document&&(Hl=document.documentMode);var rp=pa&&"TextEvent"in window&&!Hl,yd=pa&&(!_r||Hl&&8<Hl&&11>=Hl),bd=" ",gd=!1;function vd(a,s){switch(a){case"keyup":return op.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ls=!1;function np(a,s){switch(a){case"compositionend":return xd(s);case"keypress":return s.which!==32?null:(gd=!0,bd);case"textInput":return a=s.data,a===bd&&gd?null:a;default:return null}}function cp(a,s){if(Ls)return a==="compositionend"||!_r&&vd(a,s)?(a=ud(),qi=vr=Ia=null,Ls=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return yd&&s.locale!=="ko"?null:s.data;default:return null}}var dp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sd(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s==="input"?!!dp[a.type]:s==="textarea"}function Td(a,s,l,n){Ps?Bs?Bs.push(n):Bs=[n]:Ps=n,s=Vo(s,"onChange"),0<s.length&&(l=new Ui("onChange","change",null,l,n),a.push({event:l,listeners:s}))}var Pl=null,Bl=null;function up(a){lf(a,0)}function Xi(a){var s=Dl(a);if(sd(s))return a}function Md(a,s){if(a==="change")return s}var _d=!1;if(pa){var wr;if(pa){var kr="oninput"in document;if(!kr){var wd=document.createElement("div");wd.setAttribute("oninput","return;"),kr=typeof wd.oninput=="function"}wr=kr}else wr=!1;_d=wr&&(!document.documentMode||9<document.documentMode)}function kd(){Pl&&(Pl.detachEvent("onpropertychange",jd),Bl=Pl=null)}function jd(a){if(a.propertyName==="value"&&Xi(Bl)){var s=[];Td(s,Bl,a,yr(a)),dd(up,s)}}function fp(a,s,l){a==="focusin"?(kd(),Pl=s,Bl=l,Pl.attachEvent("onpropertychange",jd)):a==="focusout"&&kd()}function hp(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Xi(Bl)}function mp(a,s){if(a==="click")return Xi(s)}function pp(a,s){if(a==="input"||a==="change")return Xi(s)}function yp(a,s){return a===s&&(a!==0||1/a===1/s)||a!==a&&s!==s}var At=typeof Object.is=="function"?Object.is:yp;function Ll(a,s){if(At(a,s))return!0;if(typeof a!="object"||a===null||typeof s!="object"||s===null)return!1;var l=Object.keys(a),n=Object.keys(s);if(l.length!==n.length)return!1;for(n=0;n<l.length;n++){var m=l[n];if(!wl.call(s,m)||!At(a[m],s[m]))return!1}return!0}function Cd(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Nd(a,s){var l=Cd(a);a=0;for(var n;l;){if(l.nodeType===3){if(n=a+l.textContent.length,a<=s&&n>=s)return{node:l,offset:s-a};a=n}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Cd(l)}}function Ed(a,s){return a&&s?a===s?!0:a&&a.nodeType===3?!1:s&&s.nodeType===3?Ed(a,s.parentNode):"contains"in a?a.contains(s):a.compareDocumentPosition?!!(a.compareDocumentPosition(s)&16):!1:!1}function Ad(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var s=Li(a.document);s instanceof a.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)a=s.contentWindow;else break;s=Li(a.document)}return s}function jr(a){var s=a&&a.nodeName&&a.nodeName.toLowerCase();return s&&(s==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||s==="textarea"||a.contentEditable==="true")}var bp=pa&&"documentMode"in document&&11>=document.documentMode,zs=null,Cr=null,zl=null,Nr=!1;function Dd(a,s,l){var n=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Nr||zs==null||zs!==Li(n)||(n=zs,"selectionStart"in n&&jr(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),zl&&Ll(zl,n)||(zl=n,n=Vo(Cr,"onSelect"),0<n.length&&(s=new Ui("onSelect","select",null,s,l),a.push({event:s,listeners:n}),s.target=zs)))}function us(a,s){var l={};return l[a.toLowerCase()]=s.toLowerCase(),l["Webkit"+a]="webkit"+s,l["Moz"+a]="moz"+s,l}var qs={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},Er={},Rd={};pa&&(Rd=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function fs(a){if(Er[a])return Er[a];if(!qs[a])return a;var s=qs[a],l;for(l in s)if(s.hasOwnProperty(l)&&l in Rd)return Er[a]=s[l];return a}var Od=fs("animationend"),Id=fs("animationiteration"),Vd=fs("animationstart"),gp=fs("transitionrun"),vp=fs("transitionstart"),xp=fs("transitioncancel"),Hd=fs("transitionend"),Pd=new Map,Ar="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ar.push("scrollEnd");function Jt(a,s){Pd.set(a,s),cs(s,[a])}var Wi=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Gt=[],Gs=0,Dr=0;function Qi(){for(var a=Gs,s=Dr=Gs=0;s<a;){var l=Gt[s];Gt[s++]=null;var n=Gt[s];Gt[s++]=null;var m=Gt[s];Gt[s++]=null;var y=Gt[s];if(Gt[s++]=null,n!==null&&m!==null){var S=n.pending;S===null?m.next=m:(m.next=S.next,S.next=m),n.pending=m}y!==0&&Bd(l,m,y)}}function $i(a,s,l,n){Gt[Gs++]=a,Gt[Gs++]=s,Gt[Gs++]=l,Gt[Gs++]=n,Dr|=n,a.lanes|=n,a=a.alternate,a!==null&&(a.lanes|=n)}function Rr(a,s,l,n){return $i(a,s,l,n),Ki(a)}function hs(a,s){return $i(a,null,null,s),Ki(a)}function Bd(a,s,l){a.lanes|=l;var n=a.alternate;n!==null&&(n.lanes|=l);for(var m=!1,y=a.return;y!==null;)y.childLanes|=l,n=y.alternate,n!==null&&(n.childLanes|=l),y.tag===22&&(a=y.stateNode,a===null||a._visibility&1||(m=!0)),a=y,y=y.return;return a.tag===3?(y=a.stateNode,m&&s!==null&&(m=31-Et(l),a=y.hiddenUpdates,n=a[m],n===null?a[m]=[s]:n.push(s),s.lane=l|536870912),y):null}function Ki(a){if(50<ci)throw ci=0,Gn=null,Error(o(185));for(var s=a.return;s!==null;)a=s,s=a.return;return a.tag===3?a.stateNode:null}var Ys={};function Sp(a,s,l,n){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(a,s,l,n){return new Sp(a,s,l,n)}function Or(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ya(a,s){var l=a.alternate;return l===null?(l=Dt(a.tag,s,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=s,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,s=a.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function Ld(a,s){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,s=l.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),a}function Zi(a,s,l,n,m,y){var S=0;if(n=a,typeof a=="function")Or(a)&&(S=1);else if(typeof a=="string")S=ky(a,l,oe.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case re:return a=Dt(31,l,s,m),a.elementType=re,a.lanes=y,a;case M:return ms(l.children,m,y,s);case k:S=8,m|=24;break;case C:return a=Dt(12,l,s,m|2),a.elementType=C,a.lanes=y,a;case V:return a=Dt(13,l,s,m),a.elementType=V,a.lanes=y,a;case H:return a=Dt(19,l,s,m),a.elementType=H,a.lanes=y,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case j:S=10;break e;case w:S=9;break e;case O:S=11;break e;case X:S=14;break e;case ee:S=16,n=null;break e}S=29,l=Error(o(130,a===null?"null":typeof a,"")),n=null}return s=Dt(S,l,s,m),s.elementType=a,s.type=n,s.lanes=y,s}function ms(a,s,l,n){return a=Dt(7,a,n,s),a.lanes=l,a}function Ir(a,s,l){return a=Dt(6,a,null,s),a.lanes=l,a}function zd(a){var s=Dt(18,null,null,0);return s.stateNode=a,s}function Vr(a,s,l){return s=Dt(4,a.children!==null?a.children:[],a.key,s),s.lanes=l,s.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},s}var qd=new WeakMap;function Yt(a,s){if(typeof a=="object"&&a!==null){var l=qd.get(a);return l!==void 0?l:(s={value:a,source:s,stack:Di(s)},qd.set(a,s),s)}return{value:a,source:s,stack:Di(s)}}var Us=[],Fs=0,Ji=null,ql=0,Ut=[],Ft=0,Va=null,oa=1,ra="";function ba(a,s){Us[Fs++]=ql,Us[Fs++]=Ji,Ji=a,ql=s}function Gd(a,s,l){Ut[Ft++]=oa,Ut[Ft++]=ra,Ut[Ft++]=Va,Va=a;var n=oa;a=ra;var m=32-Et(n)-1;n&=~(1<<m),l+=1;var y=32-Et(s)+m;if(30<y){var S=m-m%5;y=(n&(1<<S)-1).toString(32),n>>=S,m-=S,oa=1<<32-Et(s)+m|l<<m|n,ra=y+a}else oa=1<<y|l<<m|n,ra=a}function Hr(a){a.return!==null&&(ba(a,1),Gd(a,1,0))}function Pr(a){for(;a===Ji;)Ji=Us[--Fs],Us[Fs]=null,ql=Us[--Fs],Us[Fs]=null;for(;a===Va;)Va=Ut[--Ft],Ut[Ft]=null,ra=Ut[--Ft],Ut[Ft]=null,oa=Ut[--Ft],Ut[Ft]=null}function Yd(a,s){Ut[Ft++]=oa,Ut[Ft++]=ra,Ut[Ft++]=Va,oa=s.id,ra=s.overflow,Va=a}var ct=null,ze=null,Ee=!1,Ha=null,Xt=!1,Br=Error(o(519));function Pa(a){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gl(Yt(s,a)),Br}function Ud(a){var s=a.stateNode,l=a.type,n=a.memoizedProps;switch(s[nt]=a,s[gt]=n,l){case"dialog":we("cancel",s),we("close",s);break;case"iframe":case"object":case"embed":we("load",s);break;case"video":case"audio":for(l=0;l<ui.length;l++)we(ui[l],s);break;case"source":we("error",s);break;case"img":case"image":case"link":we("error",s),we("load",s);break;case"details":we("toggle",s);break;case"input":we("invalid",s),ld(s,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":we("invalid",s);break;case"textarea":we("invalid",s),od(s,n.value,n.defaultValue,n.children)}l=n.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||n.suppressHydrationWarning===!0||cf(s.textContent,l)?(n.popover!=null&&(we("beforetoggle",s),we("toggle",s)),n.onScroll!=null&&we("scroll",s),n.onScrollEnd!=null&&we("scrollend",s),n.onClick!=null&&(s.onclick=ma),s=!0):s=!1,s||Pa(a,!0)}function Fd(a){for(ct=a.return;ct;)switch(ct.tag){case 5:case 31:case 13:Xt=!1;return;case 27:case 3:Xt=!0;return;default:ct=ct.return}}function Xs(a){if(a!==ct)return!1;if(!Ee)return Fd(a),Ee=!0,!1;var s=a.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||lc(a.type,a.memoizedProps)),l=!l),l&&ze&&Pa(a),Fd(a),s===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));ze=gf(a)}else if(s===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(317));ze=gf(a)}else s===27?(s=ze,Za(a.type)?(a=cc,cc=null,ze=a):ze=s):ze=ct?Qt(a.stateNode.nextSibling):null;return!0}function ps(){ze=ct=null,Ee=!1}function Lr(){var a=Ha;return a!==null&&(Mt===null?Mt=a:Mt.push.apply(Mt,a),Ha=null),a}function Gl(a){Ha===null?Ha=[a]:Ha.push(a)}var zr=A(null),ys=null,ga=null;function Ba(a,s,l){ae(zr,s._currentValue),s._currentValue=l}function va(a){a._currentValue=zr.current,U(zr)}function qr(a,s,l){for(;a!==null;){var n=a.alternate;if((a.childLanes&s)!==s?(a.childLanes|=s,n!==null&&(n.childLanes|=s)):n!==null&&(n.childLanes&s)!==s&&(n.childLanes|=s),a===l)break;a=a.return}}function Gr(a,s,l,n){var m=a.child;for(m!==null&&(m.return=a);m!==null;){var y=m.dependencies;if(y!==null){var S=m.child;y=y.firstContext;e:for(;y!==null;){var _=y;y=m;for(var E=0;E<s.length;E++)if(_.context===s[E]){y.lanes|=l,_=y.alternate,_!==null&&(_.lanes|=l),qr(y.return,l,a),n||(S=null);break e}y=_.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(o(341));S.lanes|=l,y=S.alternate,y!==null&&(y.lanes|=l),qr(S,l,a),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===a){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function Ws(a,s,l,n){a=null;for(var m=s,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var _=m.type;At(m.pendingProps.value,S.value)||(a!==null?a.push(_):a=[_])}}else if(m===Ne.current){if(S=m.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(a!==null?a.push(yi):a=[yi])}m=m.return}a!==null&&Gr(s,a,l,n),s.flags|=262144}function eo(a){for(a=a.firstContext;a!==null;){if(!At(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function bs(a){ys=a,ga=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function dt(a){return Xd(ys,a)}function to(a,s){return ys===null&&bs(a),Xd(a,s)}function Xd(a,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},ga===null){if(a===null)throw Error(o(308));ga=s,a.dependencies={lanes:0,firstContext:s},a.flags|=524288}else ga=ga.next=s;return l}var Tp=typeof AbortController<"u"?AbortController:function(){var a=[],s=this.signal={aborted:!1,addEventListener:function(l,n){a.push(n)}};this.abort=function(){s.aborted=!0,a.forEach(function(l){return l()})}},Mp=e.unstable_scheduleCallback,_p=e.unstable_NormalPriority,Ze={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yr(){return{controller:new Tp,data:new Map,refCount:0}}function Yl(a){a.refCount--,a.refCount===0&&Mp(_p,function(){a.controller.abort()})}var Ul=null,Ur=0,Qs=0,$s=null;function wp(a,s){if(Ul===null){var l=Ul=[];Ur=0,Qs=Qn(),$s={status:"pending",value:void 0,then:function(n){l.push(n)}}}return Ur++,s.then(Wd,Wd),s}function Wd(){if(--Ur===0&&Ul!==null){$s!==null&&($s.status="fulfilled");var a=Ul;Ul=null,Qs=0,$s=null;for(var s=0;s<a.length;s++)(0,a[s])()}}function kp(a,s){var l=[],n={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return a.then(function(){n.status="fulfilled",n.value=s;for(var m=0;m<l.length;m++)(0,l[m])(s)},function(m){for(n.status="rejected",n.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),n}var Qd=R.S;R.S=function(a,s){Du=Ct(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&wp(a,s),Qd!==null&&Qd(a,s)};var gs=A(null);function Fr(){var a=gs.current;return a!==null?a:Be.pooledCache}function ao(a,s){s===null?ae(gs,gs.current):ae(gs,s.pool)}function $d(){var a=Fr();return a===null?null:{parent:Ze._currentValue,pool:a}}var Ks=Error(o(460)),Xr=Error(o(474)),so=Error(o(542)),lo={then:function(){}};function Kd(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Zd(a,s,l){switch(l=a[l],l===void 0?a.push(s):l!==s&&(s.then(ma,ma),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,e0(a),a;default:if(typeof s.status=="string")s.then(ma,ma);else{if(a=Be,a!==null&&100<a.shellSuspendCounter)throw Error(o(482));a=s,a.status="pending",a.then(function(n){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=n}},function(n){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=n}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw a=s.reason,e0(a),a}throw xs=s,Ks}}function vs(a){try{var s=a._init;return s(a._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(xs=l,Ks):l}}var xs=null;function Jd(){if(xs===null)throw Error(o(459));var a=xs;return xs=null,a}function e0(a){if(a===Ks||a===so)throw Error(o(483))}var Zs=null,Fl=0;function io(a){var s=Fl;return Fl+=1,Zs===null&&(Zs=[]),Zd(Zs,a,s)}function Xl(a,s){s=s.props.ref,a.ref=s!==void 0?s:null}function oo(a,s){throw s.$$typeof===v?Error(o(525)):(a=Object.prototype.toString.call(s),Error(o(31,a==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":a)))}function t0(a){function s(I,D){if(a){var P=I.deletions;P===null?(I.deletions=[D],I.flags|=16):P.push(D)}}function l(I,D){if(!a)return null;for(;D!==null;)s(I,D),D=D.sibling;return null}function n(I){for(var D=new Map;I!==null;)I.key!==null?D.set(I.key,I):D.set(I.index,I),I=I.sibling;return D}function m(I,D){return I=ya(I,D),I.index=0,I.sibling=null,I}function y(I,D,P){return I.index=P,a?(P=I.alternate,P!==null?(P=P.index,P<D?(I.flags|=67108866,D):P):(I.flags|=67108866,D)):(I.flags|=1048576,D)}function S(I){return a&&I.alternate===null&&(I.flags|=67108866),I}function _(I,D,P,Q){return D===null||D.tag!==6?(D=Ir(P,I.mode,Q),D.return=I,D):(D=m(D,P),D.return=I,D)}function E(I,D,P,Q){var he=P.type;return he===M?W(I,D,P.props.children,Q,P.key):D!==null&&(D.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ee&&vs(he)===D.type)?(D=m(D,P.props),Xl(D,P),D.return=I,D):(D=Zi(P.type,P.key,P.props,null,I.mode,Q),Xl(D,P),D.return=I,D)}function B(I,D,P,Q){return D===null||D.tag!==4||D.stateNode.containerInfo!==P.containerInfo||D.stateNode.implementation!==P.implementation?(D=Vr(P,I.mode,Q),D.return=I,D):(D=m(D,P.children||[]),D.return=I,D)}function W(I,D,P,Q,he){return D===null||D.tag!==7?(D=ms(P,I.mode,Q,he),D.return=I,D):(D=m(D,P),D.return=I,D)}function $(I,D,P){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Ir(""+D,I.mode,P),D.return=I,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case x:return P=Zi(D.type,D.key,D.props,null,I.mode,P),Xl(P,D),P.return=I,P;case T:return D=Vr(D,I.mode,P),D.return=I,D;case ee:return D=vs(D),$(I,D,P)}if(fe(D)||pe(D))return D=ms(D,I.mode,P,null),D.return=I,D;if(typeof D.then=="function")return $(I,io(D),P);if(D.$$typeof===j)return $(I,to(I,D),P);oo(I,D)}return null}function L(I,D,P,Q){var he=D!==null?D.key:null;if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return he!==null?null:_(I,D,""+P,Q);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case x:return P.key===he?E(I,D,P,Q):null;case T:return P.key===he?B(I,D,P,Q):null;case ee:return P=vs(P),L(I,D,P,Q)}if(fe(P)||pe(P))return he!==null?null:W(I,D,P,Q,null);if(typeof P.then=="function")return L(I,D,io(P),Q);if(P.$$typeof===j)return L(I,D,to(I,P),Q);oo(I,P)}return null}function G(I,D,P,Q,he){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return I=I.get(P)||null,_(D,I,""+Q,he);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return I=I.get(Q.key===null?P:Q.key)||null,E(D,I,Q,he);case T:return I=I.get(Q.key===null?P:Q.key)||null,B(D,I,Q,he);case ee:return Q=vs(Q),G(I,D,P,Q,he)}if(fe(Q)||pe(Q))return I=I.get(P)||null,W(D,I,Q,he,null);if(typeof Q.then=="function")return G(I,D,P,io(Q),he);if(Q.$$typeof===j)return G(I,D,P,to(D,Q),he);oo(D,Q)}return null}function ne(I,D,P,Q){for(var he=null,Ae=null,de=D,Te=D=0,je=null;de!==null&&Te<P.length;Te++){de.index>Te?(je=de,de=null):je=de.sibling;var De=L(I,de,P[Te],Q);if(De===null){de===null&&(de=je);break}a&&de&&De.alternate===null&&s(I,de),D=y(De,D,Te),Ae===null?he=De:Ae.sibling=De,Ae=De,de=je}if(Te===P.length)return l(I,de),Ee&&ba(I,Te),he;if(de===null){for(;Te<P.length;Te++)de=$(I,P[Te],Q),de!==null&&(D=y(de,D,Te),Ae===null?he=de:Ae.sibling=de,Ae=de);return Ee&&ba(I,Te),he}for(de=n(de);Te<P.length;Te++)je=G(de,I,Te,P[Te],Q),je!==null&&(a&&je.alternate!==null&&de.delete(je.key===null?Te:je.key),D=y(je,D,Te),Ae===null?he=je:Ae.sibling=je,Ae=je);return a&&de.forEach(function(ss){return s(I,ss)}),Ee&&ba(I,Te),he}function me(I,D,P,Q){if(P==null)throw Error(o(151));for(var he=null,Ae=null,de=D,Te=D=0,je=null,De=P.next();de!==null&&!De.done;Te++,De=P.next()){de.index>Te?(je=de,de=null):je=de.sibling;var ss=L(I,de,De.value,Q);if(ss===null){de===null&&(de=je);break}a&&de&&ss.alternate===null&&s(I,de),D=y(ss,D,Te),Ae===null?he=ss:Ae.sibling=ss,Ae=ss,de=je}if(De.done)return l(I,de),Ee&&ba(I,Te),he;if(de===null){for(;!De.done;Te++,De=P.next())De=$(I,De.value,Q),De!==null&&(D=y(De,D,Te),Ae===null?he=De:Ae.sibling=De,Ae=De);return Ee&&ba(I,Te),he}for(de=n(de);!De.done;Te++,De=P.next())De=G(de,I,Te,De.value,Q),De!==null&&(a&&De.alternate!==null&&de.delete(De.key===null?Te:De.key),D=y(De,D,Te),Ae===null?he=De:Ae.sibling=De,Ae=De);return a&&de.forEach(function(Hy){return s(I,Hy)}),Ee&&ba(I,Te),he}function Pe(I,D,P,Q){if(typeof P=="object"&&P!==null&&P.type===M&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case x:e:{for(var he=P.key;D!==null;){if(D.key===he){if(he=P.type,he===M){if(D.tag===7){l(I,D.sibling),Q=m(D,P.props.children),Q.return=I,I=Q;break e}}else if(D.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===ee&&vs(he)===D.type){l(I,D.sibling),Q=m(D,P.props),Xl(Q,P),Q.return=I,I=Q;break e}l(I,D);break}else s(I,D);D=D.sibling}P.type===M?(Q=ms(P.props.children,I.mode,Q,P.key),Q.return=I,I=Q):(Q=Zi(P.type,P.key,P.props,null,I.mode,Q),Xl(Q,P),Q.return=I,I=Q)}return S(I);case T:e:{for(he=P.key;D!==null;){if(D.key===he)if(D.tag===4&&D.stateNode.containerInfo===P.containerInfo&&D.stateNode.implementation===P.implementation){l(I,D.sibling),Q=m(D,P.children||[]),Q.return=I,I=Q;break e}else{l(I,D);break}else s(I,D);D=D.sibling}Q=Vr(P,I.mode,Q),Q.return=I,I=Q}return S(I);case ee:return P=vs(P),Pe(I,D,P,Q)}if(fe(P))return ne(I,D,P,Q);if(pe(P)){if(he=pe(P),typeof he!="function")throw Error(o(150));return P=he.call(P),me(I,D,P,Q)}if(typeof P.then=="function")return Pe(I,D,io(P),Q);if(P.$$typeof===j)return Pe(I,D,to(I,P),Q);oo(I,P)}return typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint"?(P=""+P,D!==null&&D.tag===6?(l(I,D.sibling),Q=m(D,P),Q.return=I,I=Q):(l(I,D),Q=Ir(P,I.mode,Q),Q.return=I,I=Q),S(I)):l(I,D)}return function(I,D,P,Q){try{Fl=0;var he=Pe(I,D,P,Q);return Zs=null,he}catch(de){if(de===Ks||de===so)throw de;var Ae=Dt(29,de,null,I.mode);return Ae.lanes=Q,Ae.return=I,Ae}finally{}}}var Ss=t0(!0),a0=t0(!1),La=!1;function Wr(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qr(a,s){a=a.updateQueue,s.updateQueue===a&&(s.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function za(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function qa(a,s,l){var n=a.updateQueue;if(n===null)return null;if(n=n.shared,(Re&2)!==0){var m=n.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),n.pending=s,s=Ki(a),Bd(a,null,l),s}return $i(a,n,s,l),Ki(a)}function Wl(a,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var n=s.lanes;n&=a.pendingLanes,l|=n,s.lanes=l,Xc(a,l)}}function $r(a,s){var l=a.updateQueue,n=a.alternate;if(n!==null&&(n=n.updateQueue,l===n)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?m=y=S:y=y.next=S,l=l.next}while(l!==null);y===null?m=y=s:y=y.next=s}else m=y=s;l={baseState:n.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:n.shared,callbacks:n.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=s:a.next=s,l.lastBaseUpdate=s}var Kr=!1;function Ql(){if(Kr){var a=$s;if(a!==null)throw a}}function $l(a,s,l,n){Kr=!1;var m=a.updateQueue;La=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,_=m.shared.pending;if(_!==null){m.shared.pending=null;var E=_,B=E.next;E.next=null,S===null?y=B:S.next=B,S=E;var W=a.alternate;W!==null&&(W=W.updateQueue,_=W.lastBaseUpdate,_!==S&&(_===null?W.firstBaseUpdate=B:_.next=B,W.lastBaseUpdate=E))}if(y!==null){var $=m.baseState;S=0,W=B=E=null,_=y;do{var L=_.lane&-536870913,G=L!==_.lane;if(G?(ke&L)===L:(n&L)===L){L!==0&&L===Qs&&(Kr=!0),W!==null&&(W=W.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var ne=a,me=_;L=s;var Pe=l;switch(me.tag){case 1:if(ne=me.payload,typeof ne=="function"){$=ne.call(Pe,$,L);break e}$=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=me.payload,L=typeof ne=="function"?ne.call(Pe,$,L):ne,L==null)break e;$=b({},$,L);break e;case 2:La=!0}}L=_.callback,L!==null&&(a.flags|=64,G&&(a.flags|=8192),G=m.callbacks,G===null?m.callbacks=[L]:G.push(L))}else G={lane:L,tag:_.tag,payload:_.payload,callback:_.callback,next:null},W===null?(B=W=G,E=$):W=W.next=G,S|=L;if(_=_.next,_===null){if(_=m.shared.pending,_===null)break;G=_,_=G.next,G.next=null,m.lastBaseUpdate=G,m.shared.pending=null}}while(!0);W===null&&(E=$),m.baseState=E,m.firstBaseUpdate=B,m.lastBaseUpdate=W,y===null&&(m.shared.lanes=0),Xa|=S,a.lanes=S,a.memoizedState=$}}function s0(a,s){if(typeof a!="function")throw Error(o(191,a));a.call(s)}function l0(a,s){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)s0(l[a],s)}var Js=A(null),ro=A(0);function i0(a,s){a=Ca,ae(ro,a),ae(Js,s),Ca=a|s.baseLanes}function Zr(){ae(ro,Ca),ae(Js,Js.current)}function Jr(){Ca=ro.current,U(Js),U(ro)}var Rt=A(null),Wt=null;function Ga(a){var s=a.alternate;ae(Xe,Xe.current&1),ae(Rt,a),Wt===null&&(s===null||Js.current!==null||s.memoizedState!==null)&&(Wt=a)}function en(a){ae(Xe,Xe.current),ae(Rt,a),Wt===null&&(Wt=a)}function o0(a){a.tag===22?(ae(Xe,Xe.current),ae(Rt,a),Wt===null&&(Wt=a)):Ya()}function Ya(){ae(Xe,Xe.current),ae(Rt,Rt.current)}function Ot(a){U(Rt),Wt===a&&(Wt=null),U(Xe)}var Xe=A(0);function no(a){for(var s=a;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||rc(l)||nc(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xa=0,Se=null,Ve=null,Je=null,co=!1,el=!1,Ts=!1,uo=0,Kl=0,tl=null,jp=0;function Ue(){throw Error(o(321))}function tn(a,s){if(s===null)return!1;for(var l=0;l<s.length&&l<a.length;l++)if(!At(a[l],s[l]))return!1;return!0}function an(a,s,l,n,m,y){return xa=y,Se=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,R.H=a===null||a.memoizedState===null?G0:gn,Ts=!1,y=l(n,m),Ts=!1,el&&(y=n0(s,l,n,m)),r0(a),y}function r0(a){R.H=ei;var s=Ve!==null&&Ve.next!==null;if(xa=0,Je=Ve=Se=null,co=!1,Kl=0,tl=null,s)throw Error(o(300));a===null||et||(a=a.dependencies,a!==null&&eo(a)&&(et=!0))}function n0(a,s,l,n){Se=a;var m=0;do{if(el&&(tl=null),Kl=0,el=!1,25<=m)throw Error(o(301));if(m+=1,Je=Ve=null,a.updateQueue!=null){var y=a.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}R.H=Y0,y=s(l,n)}while(el);return y}function Cp(){var a=R.H,s=a.useState()[0];return s=typeof s.then=="function"?Zl(s):s,a=a.useState()[0],(Ve!==null?Ve.memoizedState:null)!==a&&(Se.flags|=1024),s}function sn(){var a=uo!==0;return uo=0,a}function ln(a,s,l){s.updateQueue=a.updateQueue,s.flags&=-2053,a.lanes&=~l}function on(a){if(co){for(a=a.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}co=!1}xa=0,Je=Ve=Se=null,el=!1,Kl=uo=0,tl=null}function bt(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Se.memoizedState=Je=a:Je=Je.next=a,Je}function We(){if(Ve===null){var a=Se.alternate;a=a!==null?a.memoizedState:null}else a=Ve.next;var s=Je===null?Se.memoizedState:Je.next;if(s!==null)Je=s,Ve=a;else{if(a===null)throw Se.alternate===null?Error(o(467)):Error(o(310));Ve=a,a={memoizedState:Ve.memoizedState,baseState:Ve.baseState,baseQueue:Ve.baseQueue,queue:Ve.queue,next:null},Je===null?Se.memoizedState=Je=a:Je=Je.next=a}return Je}function fo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zl(a){var s=Kl;return Kl+=1,tl===null&&(tl=[]),a=Zd(tl,a,s),s=Se,(Je===null?s.memoizedState:Je.next)===null&&(s=s.alternate,R.H=s===null||s.memoizedState===null?G0:gn),a}function ho(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Zl(a);if(a.$$typeof===j)return dt(a)}throw Error(o(438,String(a)))}function rn(a){var s=null,l=Se.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var n=Se.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(s={data:n.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=fo(),Se.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(a),n=0;n<a;n++)l[n]=J;return s.index++,l}function Sa(a,s){return typeof s=="function"?s(a):s}function mo(a){var s=We();return nn(s,Ve,a)}function nn(a,s,l){var n=a.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=l;var m=a.baseQueue,y=n.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}s.baseQueue=m=y,n.pending=null}if(y=a.baseState,m===null)a.memoizedState=y;else{s=m.next;var _=S=null,E=null,B=s,W=!1;do{var $=B.lane&-536870913;if($!==B.lane?(ke&$)===$:(xa&$)===$){var L=B.revertLane;if(L===0)E!==null&&(E=E.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),$===Qs&&(W=!0);else if((xa&L)===L){B=B.next,L===Qs&&(W=!0);continue}else $={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},E===null?(_=E=$,S=y):E=E.next=$,Se.lanes|=L,Xa|=L;$=B.action,Ts&&l(y,$),y=B.hasEagerState?B.eagerState:l(y,$)}else L={lane:$,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},E===null?(_=E=L,S=y):E=E.next=L,Se.lanes|=$,Xa|=$;B=B.next}while(B!==null&&B!==s);if(E===null?S=y:E.next=_,!At(y,a.memoizedState)&&(et=!0,W&&(l=$s,l!==null)))throw l;a.memoizedState=y,a.baseState=S,a.baseQueue=E,n.lastRenderedState=y}return m===null&&(n.lanes=0),[a.memoizedState,n.dispatch]}function cn(a){var s=We(),l=s.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=a;var n=l.dispatch,m=l.pending,y=s.memoizedState;if(m!==null){l.pending=null;var S=m=m.next;do y=a(y,S.action),S=S.next;while(S!==m);At(y,s.memoizedState)||(et=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),l.lastRenderedState=y}return[y,n]}function c0(a,s,l){var n=Se,m=We(),y=Ee;if(y){if(l===void 0)throw Error(o(407));l=l()}else l=s();var S=!At((Ve||m).memoizedState,l);if(S&&(m.memoizedState=l,et=!0),m=m.queue,fn(f0.bind(null,n,m,a),[a]),m.getSnapshot!==s||S||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,al(9,{destroy:void 0},u0.bind(null,n,m,l,s),null),Be===null)throw Error(o(349));y||(xa&127)!==0||d0(n,s,l)}return l}function d0(a,s,l){a.flags|=16384,a={getSnapshot:s,value:l},s=Se.updateQueue,s===null?(s=fo(),Se.updateQueue=s,s.stores=[a]):(l=s.stores,l===null?s.stores=[a]:l.push(a))}function u0(a,s,l,n){s.value=l,s.getSnapshot=n,h0(s)&&m0(a)}function f0(a,s,l){return l(function(){h0(s)&&m0(a)})}function h0(a){var s=a.getSnapshot;a=a.value;try{var l=s();return!At(a,l)}catch{return!0}}function m0(a){var s=hs(a,2);s!==null&&_t(s,a,2)}function dn(a){var s=bt();if(typeof a=="function"){var l=a;if(a=l(),Ts){Ra(!0);try{l()}finally{Ra(!1)}}}return s.memoizedState=s.baseState=a,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:a},s}function p0(a,s,l,n){return a.baseState=l,nn(a,Ve,typeof n=="function"?n:Sa)}function Np(a,s,l,n,m){if(bo(a))throw Error(o(485));if(a=s.action,a!==null){var y={payload:m,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};R.T!==null?l(!0):y.isTransition=!1,n(y),l=s.pending,l===null?(y.next=s.pending=y,y0(s,y)):(y.next=l.next,s.pending=l.next=y)}}function y0(a,s){var l=s.action,n=s.payload,m=a.state;if(s.isTransition){var y=R.T,S={};R.T=S;try{var _=l(m,n),E=R.S;E!==null&&E(S,_),b0(a,s,_)}catch(B){un(a,s,B)}finally{y!==null&&S.types!==null&&(y.types=S.types),R.T=y}}else try{y=l(m,n),b0(a,s,y)}catch(B){un(a,s,B)}}function b0(a,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(n){g0(a,s,n)},function(n){return un(a,s,n)}):g0(a,s,l)}function g0(a,s,l){s.status="fulfilled",s.value=l,v0(s),a.state=l,s=a.pending,s!==null&&(l=s.next,l===s?a.pending=null:(l=l.next,s.next=l,y0(a,l)))}function un(a,s,l){var n=a.pending;if(a.pending=null,n!==null){n=n.next;do s.status="rejected",s.reason=l,v0(s),s=s.next;while(s!==n)}a.action=null}function v0(a){a=a.listeners;for(var s=0;s<a.length;s++)(0,a[s])()}function x0(a,s){return s}function S0(a,s){if(Ee){var l=Be.formState;if(l!==null){e:{var n=Se;if(Ee){if(ze){t:{for(var m=ze,y=Xt;m.nodeType!==8;){if(!y){m=null;break t}if(m=Qt(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){ze=Qt(m.nextSibling),n=m.data==="F!";break e}}Pa(n)}n=!1}n&&(s=l[0])}}return l=bt(),l.memoizedState=l.baseState=s,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x0,lastRenderedState:s},l.queue=n,l=L0.bind(null,Se,n),n.dispatch=l,n=dn(!1),y=bn.bind(null,Se,!1,n.queue),n=bt(),m={state:s,dispatch:null,action:a,pending:null},n.queue=m,l=Np.bind(null,Se,m,y,l),m.dispatch=l,n.memoizedState=a,[s,l,!1]}function T0(a){var s=We();return M0(s,Ve,a)}function M0(a,s,l){if(s=nn(a,s,x0)[0],a=mo(Sa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var n=Zl(s)}catch(S){throw S===Ks?so:S}else n=s;s=We();var m=s.queue,y=m.dispatch;return l!==s.memoizedState&&(Se.flags|=2048,al(9,{destroy:void 0},Ep.bind(null,m,l),null)),[n,y,a]}function Ep(a,s){a.action=s}function _0(a){var s=We(),l=Ve;if(l!==null)return M0(s,l,a);We(),s=s.memoizedState,l=We();var n=l.queue.dispatch;return l.memoizedState=a,[s,n,!1]}function al(a,s,l,n){return a={tag:a,create:l,deps:n,inst:s,next:null},s=Se.updateQueue,s===null&&(s=fo(),Se.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=a.next=a:(n=l.next,l.next=a,a.next=n,s.lastEffect=a),a}function w0(){return We().memoizedState}function po(a,s,l,n){var m=bt();Se.flags|=a,m.memoizedState=al(1|s,{destroy:void 0},l,n===void 0?null:n)}function yo(a,s,l,n){var m=We();n=n===void 0?null:n;var y=m.memoizedState.inst;Ve!==null&&n!==null&&tn(n,Ve.memoizedState.deps)?m.memoizedState=al(s,y,l,n):(Se.flags|=a,m.memoizedState=al(1|s,y,l,n))}function k0(a,s){po(8390656,8,a,s)}function fn(a,s){yo(2048,8,a,s)}function Ap(a){Se.flags|=4;var s=Se.updateQueue;if(s===null)s=fo(),Se.updateQueue=s,s.events=[a];else{var l=s.events;l===null?s.events=[a]:l.push(a)}}function j0(a){var s=We().memoizedState;return Ap({ref:s,nextImpl:a}),function(){if((Re&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function C0(a,s){return yo(4,2,a,s)}function N0(a,s){return yo(4,4,a,s)}function E0(a,s){if(typeof s=="function"){a=a();var l=s(a);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return a=a(),s.current=a,function(){s.current=null}}function A0(a,s,l){l=l!=null?l.concat([a]):null,yo(4,4,E0.bind(null,s,a),l)}function hn(){}function D0(a,s){var l=We();s=s===void 0?null:s;var n=l.memoizedState;return s!==null&&tn(s,n[1])?n[0]:(l.memoizedState=[a,s],a)}function R0(a,s){var l=We();s=s===void 0?null:s;var n=l.memoizedState;if(s!==null&&tn(s,n[1]))return n[0];if(n=a(),Ts){Ra(!0);try{a()}finally{Ra(!1)}}return l.memoizedState=[n,s],n}function mn(a,s,l){return l===void 0||(xa&1073741824)!==0&&(ke&261930)===0?a.memoizedState=s:(a.memoizedState=l,a=Ou(),Se.lanes|=a,Xa|=a,l)}function O0(a,s,l,n){return At(l,s)?l:Js.current!==null?(a=mn(a,l,n),At(a,s)||(et=!0),a):(xa&42)===0||(xa&1073741824)!==0&&(ke&261930)===0?(et=!0,a.memoizedState=l):(a=Ou(),Se.lanes|=a,Xa|=a,s)}function I0(a,s,l,n,m){var y=Y.p;Y.p=y!==0&&8>y?y:8;var S=R.T,_={};R.T=_,bn(a,!1,s,l);try{var E=m(),B=R.S;if(B!==null&&B(_,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var W=kp(E,n);Jl(a,s,W,Ht(a))}else Jl(a,s,n,Ht(a))}catch($){Jl(a,s,{then:function(){},status:"rejected",reason:$},Ht())}finally{Y.p=y,S!==null&&_.types!==null&&(S.types=_.types),R.T=S}}function Dp(){}function pn(a,s,l,n){if(a.tag!==5)throw Error(o(476));var m=V0(a).queue;I0(a,m,s,ie,l===null?Dp:function(){return H0(a),l(n)})}function V0(a){var s=a.memoizedState;if(s!==null)return s;s={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:ie},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sa,lastRenderedState:l},next:null},a.memoizedState=s,a=a.alternate,a!==null&&(a.memoizedState=s),s}function H0(a){var s=V0(a);s.next===null&&(s=a.alternate.memoizedState),Jl(a,s.next.queue,{},Ht())}function yn(){return dt(yi)}function P0(){return We().memoizedState}function B0(){return We().memoizedState}function Rp(a){for(var s=a.return;s!==null;){switch(s.tag){case 24:case 3:var l=Ht();a=za(l);var n=qa(s,a,l);n!==null&&(_t(n,s,l),Wl(n,s,l)),s={cache:Yr()},a.payload=s;return}s=s.return}}function Op(a,s,l){var n=Ht();l={lane:n,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},bo(a)?z0(s,l):(l=Rr(a,s,l,n),l!==null&&(_t(l,a,n),q0(l,s,n)))}function L0(a,s,l){var n=Ht();Jl(a,s,l,n)}function Jl(a,s,l,n){var m={lane:n,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(bo(a))z0(s,m);else{var y=a.alternate;if(a.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,_=y(S,l);if(m.hasEagerState=!0,m.eagerState=_,At(_,S))return $i(a,s,m,0),Be===null&&Qi(),!1}catch{}finally{}if(l=Rr(a,s,m,n),l!==null)return _t(l,a,n),q0(l,s,n),!0}return!1}function bn(a,s,l,n){if(n={lane:2,revertLane:Qn(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},bo(a)){if(s)throw Error(o(479))}else s=Rr(a,l,n,2),s!==null&&_t(s,a,2)}function bo(a){var s=a.alternate;return a===Se||s!==null&&s===Se}function z0(a,s){el=co=!0;var l=a.pending;l===null?s.next=s:(s.next=l.next,l.next=s),a.pending=s}function q0(a,s,l){if((l&4194048)!==0){var n=s.lanes;n&=a.pendingLanes,l|=n,s.lanes=l,Xc(a,l)}}var ei={readContext:dt,use:ho,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useLayoutEffect:Ue,useInsertionEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useSyncExternalStore:Ue,useId:Ue,useHostTransitionStatus:Ue,useFormState:Ue,useActionState:Ue,useOptimistic:Ue,useMemoCache:Ue,useCacheRefresh:Ue};ei.useEffectEvent=Ue;var G0={readContext:dt,use:ho,useCallback:function(a,s){return bt().memoizedState=[a,s===void 0?null:s],a},useContext:dt,useEffect:k0,useImperativeHandle:function(a,s,l){l=l!=null?l.concat([a]):null,po(4194308,4,E0.bind(null,s,a),l)},useLayoutEffect:function(a,s){return po(4194308,4,a,s)},useInsertionEffect:function(a,s){po(4,2,a,s)},useMemo:function(a,s){var l=bt();s=s===void 0?null:s;var n=a();if(Ts){Ra(!0);try{a()}finally{Ra(!1)}}return l.memoizedState=[n,s],n},useReducer:function(a,s,l){var n=bt();if(l!==void 0){var m=l(s);if(Ts){Ra(!0);try{l(s)}finally{Ra(!1)}}}else m=s;return n.memoizedState=n.baseState=m,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:m},n.queue=a,a=a.dispatch=Op.bind(null,Se,a),[n.memoizedState,a]},useRef:function(a){var s=bt();return a={current:a},s.memoizedState=a},useState:function(a){a=dn(a);var s=a.queue,l=L0.bind(null,Se,s);return s.dispatch=l,[a.memoizedState,l]},useDebugValue:hn,useDeferredValue:function(a,s){var l=bt();return mn(l,a,s)},useTransition:function(){var a=dn(!1);return a=I0.bind(null,Se,a.queue,!0,!1),bt().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,s,l){var n=Se,m=bt();if(Ee){if(l===void 0)throw Error(o(407));l=l()}else{if(l=s(),Be===null)throw Error(o(349));(ke&127)!==0||d0(n,s,l)}m.memoizedState=l;var y={value:l,getSnapshot:s};return m.queue=y,k0(f0.bind(null,n,y,a),[a]),n.flags|=2048,al(9,{destroy:void 0},u0.bind(null,n,y,l,s),null),l},useId:function(){var a=bt(),s=Be.identifierPrefix;if(Ee){var l=ra,n=oa;l=(n&~(1<<32-Et(n)-1)).toString(32)+l,s="_"+s+"R_"+l,l=uo++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=jp++,s="_"+s+"r_"+l.toString(32)+"_";return a.memoizedState=s},useHostTransitionStatus:yn,useFormState:S0,useActionState:S0,useOptimistic:function(a){var s=bt();s.memoizedState=s.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=bn.bind(null,Se,!0,l),l.dispatch=s,[a,s]},useMemoCache:rn,useCacheRefresh:function(){return bt().memoizedState=Rp.bind(null,Se)},useEffectEvent:function(a){var s=bt(),l={impl:a};return s.memoizedState=l,function(){if((Re&2)!==0)throw Error(o(440));return l.impl.apply(void 0,arguments)}}},gn={readContext:dt,use:ho,useCallback:D0,useContext:dt,useEffect:fn,useImperativeHandle:A0,useInsertionEffect:C0,useLayoutEffect:N0,useMemo:R0,useReducer:mo,useRef:w0,useState:function(){return mo(Sa)},useDebugValue:hn,useDeferredValue:function(a,s){var l=We();return O0(l,Ve.memoizedState,a,s)},useTransition:function(){var a=mo(Sa)[0],s=We().memoizedState;return[typeof a=="boolean"?a:Zl(a),s]},useSyncExternalStore:c0,useId:P0,useHostTransitionStatus:yn,useFormState:T0,useActionState:T0,useOptimistic:function(a,s){var l=We();return p0(l,Ve,a,s)},useMemoCache:rn,useCacheRefresh:B0};gn.useEffectEvent=j0;var Y0={readContext:dt,use:ho,useCallback:D0,useContext:dt,useEffect:fn,useImperativeHandle:A0,useInsertionEffect:C0,useLayoutEffect:N0,useMemo:R0,useReducer:cn,useRef:w0,useState:function(){return cn(Sa)},useDebugValue:hn,useDeferredValue:function(a,s){var l=We();return Ve===null?mn(l,a,s):O0(l,Ve.memoizedState,a,s)},useTransition:function(){var a=cn(Sa)[0],s=We().memoizedState;return[typeof a=="boolean"?a:Zl(a),s]},useSyncExternalStore:c0,useId:P0,useHostTransitionStatus:yn,useFormState:_0,useActionState:_0,useOptimistic:function(a,s){var l=We();return Ve!==null?p0(l,Ve,a,s):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:rn,useCacheRefresh:B0};Y0.useEffectEvent=j0;function vn(a,s,l,n){s=a.memoizedState,l=l(n,s),l=l==null?s:b({},s,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var xn={enqueueSetState:function(a,s,l){a=a._reactInternals;var n=Ht(),m=za(n);m.payload=s,l!=null&&(m.callback=l),s=qa(a,m,n),s!==null&&(_t(s,a,n),Wl(s,a,n))},enqueueReplaceState:function(a,s,l){a=a._reactInternals;var n=Ht(),m=za(n);m.tag=1,m.payload=s,l!=null&&(m.callback=l),s=qa(a,m,n),s!==null&&(_t(s,a,n),Wl(s,a,n))},enqueueForceUpdate:function(a,s){a=a._reactInternals;var l=Ht(),n=za(l);n.tag=2,s!=null&&(n.callback=s),s=qa(a,n,l),s!==null&&(_t(s,a,l),Wl(s,a,l))}};function U0(a,s,l,n,m,y,S){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(n,y,S):s.prototype&&s.prototype.isPureReactComponent?!Ll(l,n)||!Ll(m,y):!0}function F0(a,s,l,n){a=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,n),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,n),s.state!==a&&xn.enqueueReplaceState(s,s.state,null)}function Ms(a,s){var l=s;if("ref"in s){l={};for(var n in s)n!=="ref"&&(l[n]=s[n])}if(a=a.defaultProps){l===s&&(l=b({},l));for(var m in a)l[m]===void 0&&(l[m]=a[m])}return l}function X0(a){Wi(a)}function W0(a){console.error(a)}function Q0(a){Wi(a)}function go(a,s){try{var l=a.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(n){setTimeout(function(){throw n})}}function $0(a,s,l){try{var n=a.onCaughtError;n(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Sn(a,s,l){return l=za(l),l.tag=3,l.payload={element:null},l.callback=function(){go(a,s)},l}function K0(a){return a=za(a),a.tag=3,a}function Z0(a,s,l,n){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var y=n.value;a.payload=function(){return m(y)},a.callback=function(){$0(s,l,n)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(a.callback=function(){$0(s,l,n),typeof m!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var _=n.stack;this.componentDidCatch(n.value,{componentStack:_!==null?_:""})})}function Ip(a,s,l,n,m){if(l.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(s=l.alternate,s!==null&&Ws(s,l,m,!0),l=Rt.current,l!==null){switch(l.tag){case 31:case 13:return Wt===null?Eo():l.alternate===null&&Fe===0&&(Fe=3),l.flags&=-257,l.flags|=65536,l.lanes=m,n===lo?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([n]):s.add(n),Fn(a,n,m)),!1;case 22:return l.flags|=65536,n===lo?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([n])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([n]):l.add(n)),Fn(a,n,m)),!1}throw Error(o(435,l.tag))}return Fn(a,n,m),Eo(),!1}if(Ee)return s=Rt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,n!==Br&&(a=Error(o(422),{cause:n}),Gl(Yt(a,l)))):(n!==Br&&(s=Error(o(423),{cause:n}),Gl(Yt(s,l))),a=a.current.alternate,a.flags|=65536,m&=-m,a.lanes|=m,n=Yt(n,l),m=Sn(a.stateNode,n,m),$r(a,m),Fe!==4&&(Fe=2)),!1;var y=Error(o(520),{cause:n});if(y=Yt(y,l),ni===null?ni=[y]:ni.push(y),Fe!==4&&(Fe=2),s===null)return!0;n=Yt(n,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,a=m&-m,l.lanes|=a,a=Sn(l.stateNode,n,a),$r(l,a),!1;case 1:if(s=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Wa===null||!Wa.has(y))))return l.flags|=65536,m&=-m,l.lanes|=m,m=K0(m),Z0(m,a,l,n),$r(l,m),!1}l=l.return}while(l!==null);return!1}var Tn=Error(o(461)),et=!1;function ut(a,s,l,n){s.child=a===null?a0(s,null,l,n):Ss(s,a.child,l,n)}function J0(a,s,l,n,m){l=l.render;var y=s.ref;if("ref"in n){var S={};for(var _ in n)_!=="ref"&&(S[_]=n[_])}else S=n;return bs(s),n=an(a,s,l,S,y,m),_=sn(),a!==null&&!et?(ln(a,s,m),Ta(a,s,m)):(Ee&&_&&Hr(s),s.flags|=1,ut(a,s,n,m),s.child)}function eu(a,s,l,n,m){if(a===null){var y=l.type;return typeof y=="function"&&!Or(y)&&y.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=y,tu(a,s,y,n,m)):(a=Zi(l.type,null,n,s,s.mode,m),a.ref=s.ref,a.return=s,s.child=a)}if(y=a.child,!En(a,m)){var S=y.memoizedProps;if(l=l.compare,l=l!==null?l:Ll,l(S,n)&&a.ref===s.ref)return Ta(a,s,m)}return s.flags|=1,a=ya(y,n),a.ref=s.ref,a.return=s,s.child=a}function tu(a,s,l,n,m){if(a!==null){var y=a.memoizedProps;if(Ll(y,n)&&a.ref===s.ref)if(et=!1,s.pendingProps=n=y,En(a,m))(a.flags&131072)!==0&&(et=!0);else return s.lanes=a.lanes,Ta(a,s,m)}return Mn(a,s,l,n,m)}function au(a,s,l,n){var m=n.children,y=a!==null?a.memoizedState:null;if(a===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,a!==null){for(n=s.child=a.child,m=0;n!==null;)m=m|n.lanes|n.childLanes,n=n.sibling;n=m&~y}else n=0,s.child=null;return su(a,s,y,l,n)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},a!==null&&ao(s,y!==null?y.cachePool:null),y!==null?i0(s,y):Zr(),o0(s);else return n=s.lanes=536870912,su(a,s,y!==null?y.baseLanes|l:l,l,n)}else y!==null?(ao(s,y.cachePool),i0(s,y),Ya(),s.memoizedState=null):(a!==null&&ao(s,null),Zr(),Ya());return ut(a,s,m,l),s.child}function ti(a,s){return a!==null&&a.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function su(a,s,l,n,m){var y=Fr();return y=y===null?null:{parent:Ze._currentValue,pool:y},s.memoizedState={baseLanes:l,cachePool:y},a!==null&&ao(s,null),Zr(),o0(s),a!==null&&Ws(a,s,n,!0),s.childLanes=m,null}function vo(a,s){return s=So({mode:s.mode,children:s.children},a.mode),s.ref=a.ref,a.child=s,s.return=a,s}function lu(a,s,l){return Ss(s,a.child,null,l),a=vo(s,s.pendingProps),a.flags|=2,Ot(s),s.memoizedState=null,a}function Vp(a,s,l){var n=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,a===null){if(Ee){if(n.mode==="hidden")return a=vo(s,n),s.lanes=536870912,ti(null,a);if(en(s),(a=ze)?(a=bf(a,Xt),a=a!==null&&a.data==="&"?a:null,a!==null&&(s.memoizedState={dehydrated:a,treeContext:Va!==null?{id:oa,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},l=zd(a),l.return=s,s.child=l,ct=s,ze=null)):a=null,a===null)throw Pa(s);return s.lanes=536870912,null}return vo(s,n)}var y=a.memoizedState;if(y!==null){var S=y.dehydrated;if(en(s),m)if(s.flags&256)s.flags&=-257,s=lu(a,s,l);else if(s.memoizedState!==null)s.child=a.child,s.flags|=128,s=null;else throw Error(o(558));else if(et||Ws(a,s,l,!1),m=(l&a.childLanes)!==0,et||m){if(n=Be,n!==null&&(S=Wc(n,l),S!==0&&S!==y.retryLane))throw y.retryLane=S,hs(a,S),_t(n,a,S),Tn;Eo(),s=lu(a,s,l)}else a=y.treeContext,ze=Qt(S.nextSibling),ct=s,Ee=!0,Ha=null,Xt=!1,a!==null&&Yd(s,a),s=vo(s,n),s.flags|=4096;return s}return a=ya(a.child,{mode:n.mode,children:n.children}),a.ref=s.ref,s.child=a,a.return=s,a}function xo(a,s){var l=s.ref;if(l===null)a!==null&&a.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(o(284));(a===null||a.ref!==l)&&(s.flags|=4194816)}}function Mn(a,s,l,n,m){return bs(s),l=an(a,s,l,n,void 0,m),n=sn(),a!==null&&!et?(ln(a,s,m),Ta(a,s,m)):(Ee&&n&&Hr(s),s.flags|=1,ut(a,s,l,m),s.child)}function iu(a,s,l,n,m,y){return bs(s),s.updateQueue=null,l=n0(s,n,l,m),r0(a),n=sn(),a!==null&&!et?(ln(a,s,y),Ta(a,s,y)):(Ee&&n&&Hr(s),s.flags|=1,ut(a,s,l,y),s.child)}function ou(a,s,l,n,m){if(bs(s),s.stateNode===null){var y=Ys,S=l.contextType;typeof S=="object"&&S!==null&&(y=dt(S)),y=new l(n,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=xn,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=n,y.state=s.memoizedState,y.refs={},Wr(s),S=l.contextType,y.context=typeof S=="object"&&S!==null?dt(S):Ys,y.state=s.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(vn(s,l,S,n),y.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&xn.enqueueReplaceState(y,y.state,null),$l(s,n,y,m),Ql(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),n=!0}else if(a===null){y=s.stateNode;var _=s.memoizedProps,E=Ms(l,_);y.props=E;var B=y.context,W=l.contextType;S=Ys,typeof W=="object"&&W!==null&&(S=dt(W));var $=l.getDerivedStateFromProps;W=typeof $=="function"||typeof y.getSnapshotBeforeUpdate=="function",_=s.pendingProps!==_,W||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_||B!==S)&&F0(s,y,n,S),La=!1;var L=s.memoizedState;y.state=L,$l(s,n,y,m),Ql(),B=s.memoizedState,_||L!==B||La?(typeof $=="function"&&(vn(s,l,$,n),B=s.memoizedState),(E=La||U0(s,l,E,n,L,B,S))?(W||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=n,s.memoizedState=B),y.props=n,y.state=B,y.context=S,n=E):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),n=!1)}else{y=s.stateNode,Qr(a,s),S=s.memoizedProps,W=Ms(l,S),y.props=W,$=s.pendingProps,L=y.context,B=l.contextType,E=Ys,typeof B=="object"&&B!==null&&(E=dt(B)),_=l.getDerivedStateFromProps,(B=typeof _=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==$||L!==E)&&F0(s,y,n,E),La=!1,L=s.memoizedState,y.state=L,$l(s,n,y,m),Ql();var G=s.memoizedState;S!==$||L!==G||La||a!==null&&a.dependencies!==null&&eo(a.dependencies)?(typeof _=="function"&&(vn(s,l,_,n),G=s.memoizedState),(W=La||U0(s,l,W,n,L,G,E)||a!==null&&a.dependencies!==null&&eo(a.dependencies))?(B||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(n,G,E),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(n,G,E)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===a.memoizedProps&&L===a.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===a.memoizedProps&&L===a.memoizedState||(s.flags|=1024),s.memoizedProps=n,s.memoizedState=G),y.props=n,y.state=G,y.context=E,n=W):(typeof y.componentDidUpdate!="function"||S===a.memoizedProps&&L===a.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===a.memoizedProps&&L===a.memoizedState||(s.flags|=1024),n=!1)}return y=n,xo(a,s),n=(s.flags&128)!==0,y||n?(y=s.stateNode,l=n&&typeof l.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,a!==null&&n?(s.child=Ss(s,a.child,null,m),s.child=Ss(s,null,l,m)):ut(a,s,l,m),s.memoizedState=y.state,a=s.child):a=Ta(a,s,m),a}function ru(a,s,l,n){return ps(),s.flags|=256,ut(a,s,l,n),s.child}var _n={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wn(a){return{baseLanes:a,cachePool:$d()}}function kn(a,s,l){return a=a!==null?a.childLanes&~l:0,s&&(a|=Vt),a}function nu(a,s,l){var n=s.pendingProps,m=!1,y=(s.flags&128)!==0,S;if((S=y)||(S=a!==null&&a.memoizedState===null?!1:(Xe.current&2)!==0),S&&(m=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,a===null){if(Ee){if(m?Ga(s):Ya(),(a=ze)?(a=bf(a,Xt),a=a!==null&&a.data!=="&"?a:null,a!==null&&(s.memoizedState={dehydrated:a,treeContext:Va!==null?{id:oa,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},l=zd(a),l.return=s,s.child=l,ct=s,ze=null)):a=null,a===null)throw Pa(s);return nc(a)?s.lanes=32:s.lanes=536870912,null}var _=n.children;return n=n.fallback,m?(Ya(),m=s.mode,_=So({mode:"hidden",children:_},m),n=ms(n,m,l,null),_.return=s,n.return=s,_.sibling=n,s.child=_,n=s.child,n.memoizedState=wn(l),n.childLanes=kn(a,S,l),s.memoizedState=_n,ti(null,n)):(Ga(s),jn(s,_))}var E=a.memoizedState;if(E!==null&&(_=E.dehydrated,_!==null)){if(y)s.flags&256?(Ga(s),s.flags&=-257,s=Cn(a,s,l)):s.memoizedState!==null?(Ya(),s.child=a.child,s.flags|=128,s=null):(Ya(),_=n.fallback,m=s.mode,n=So({mode:"visible",children:n.children},m),_=ms(_,m,l,null),_.flags|=2,n.return=s,_.return=s,n.sibling=_,s.child=n,Ss(s,a.child,null,l),n=s.child,n.memoizedState=wn(l),n.childLanes=kn(a,S,l),s.memoizedState=_n,s=ti(null,n));else if(Ga(s),nc(_)){if(S=_.nextSibling&&_.nextSibling.dataset,S)var B=S.dgst;S=B,n=Error(o(419)),n.stack="",n.digest=S,Gl({value:n,source:null,stack:null}),s=Cn(a,s,l)}else if(et||Ws(a,s,l,!1),S=(l&a.childLanes)!==0,et||S){if(S=Be,S!==null&&(n=Wc(S,l),n!==0&&n!==E.retryLane))throw E.retryLane=n,hs(a,n),_t(S,a,n),Tn;rc(_)||Eo(),s=Cn(a,s,l)}else rc(_)?(s.flags|=192,s.child=a.child,s=null):(a=E.treeContext,ze=Qt(_.nextSibling),ct=s,Ee=!0,Ha=null,Xt=!1,a!==null&&Yd(s,a),s=jn(s,n.children),s.flags|=4096);return s}return m?(Ya(),_=n.fallback,m=s.mode,E=a.child,B=E.sibling,n=ya(E,{mode:"hidden",children:n.children}),n.subtreeFlags=E.subtreeFlags&65011712,B!==null?_=ya(B,_):(_=ms(_,m,l,null),_.flags|=2),_.return=s,n.return=s,n.sibling=_,s.child=n,ti(null,n),n=s.child,_=a.child.memoizedState,_===null?_=wn(l):(m=_.cachePool,m!==null?(E=Ze._currentValue,m=m.parent!==E?{parent:E,pool:E}:m):m=$d(),_={baseLanes:_.baseLanes|l,cachePool:m}),n.memoizedState=_,n.childLanes=kn(a,S,l),s.memoizedState=_n,ti(a.child,n)):(Ga(s),l=a.child,a=l.sibling,l=ya(l,{mode:"visible",children:n.children}),l.return=s,l.sibling=null,a!==null&&(S=s.deletions,S===null?(s.deletions=[a],s.flags|=16):S.push(a)),s.child=l,s.memoizedState=null,l)}function jn(a,s){return s=So({mode:"visible",children:s},a.mode),s.return=a,a.child=s}function So(a,s){return a=Dt(22,a,null,s),a.lanes=0,a}function Cn(a,s,l){return Ss(s,a.child,null,l),a=jn(s,s.pendingProps.children),a.flags|=2,s.memoizedState=null,a}function cu(a,s,l){a.lanes|=s;var n=a.alternate;n!==null&&(n.lanes|=s),qr(a.return,s,l)}function Nn(a,s,l,n,m,y){var S=a.memoizedState;S===null?a.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:n,tail:l,tailMode:m,treeForkCount:y}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=n,S.tail=l,S.tailMode=m,S.treeForkCount=y)}function du(a,s,l){var n=s.pendingProps,m=n.revealOrder,y=n.tail;n=n.children;var S=Xe.current,_=(S&2)!==0;if(_?(S=S&1|2,s.flags|=128):S&=1,ae(Xe,S),ut(a,s,n,l),n=Ee?ql:0,!_&&a!==null&&(a.flags&128)!==0)e:for(a=s.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&cu(a,l,s);else if(a.tag===19)cu(a,l,s);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(m){case"forwards":for(l=s.child,m=null;l!==null;)a=l.alternate,a!==null&&no(a)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),Nn(s,!1,m,l,y,n);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(a=m.alternate,a!==null&&no(a)===null){s.child=m;break}a=m.sibling,m.sibling=l,l=m,m=a}Nn(s,!0,l,null,y,n);break;case"together":Nn(s,!1,null,null,void 0,n);break;default:s.memoizedState=null}return s.child}function Ta(a,s,l){if(a!==null&&(s.dependencies=a.dependencies),Xa|=s.lanes,(l&s.childLanes)===0)if(a!==null){if(Ws(a,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(a!==null&&s.child!==a.child)throw Error(o(153));if(s.child!==null){for(a=s.child,l=ya(a,a.pendingProps),s.child=l,l.return=s;a.sibling!==null;)a=a.sibling,l=l.sibling=ya(a,a.pendingProps),l.return=s;l.sibling=null}return s.child}function En(a,s){return(a.lanes&s)!==0?!0:(a=a.dependencies,!!(a!==null&&eo(a)))}function Hp(a,s,l){switch(s.tag){case 3:Ke(s,s.stateNode.containerInfo),Ba(s,Ze,a.memoizedState.cache),ps();break;case 27:case 5:yt(s);break;case 4:Ke(s,s.stateNode.containerInfo);break;case 10:Ba(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,en(s),null;break;case 13:var n=s.memoizedState;if(n!==null)return n.dehydrated!==null?(Ga(s),s.flags|=128,null):(l&s.child.childLanes)!==0?nu(a,s,l):(Ga(s),a=Ta(a,s,l),a!==null?a.sibling:null);Ga(s);break;case 19:var m=(a.flags&128)!==0;if(n=(l&s.childLanes)!==0,n||(Ws(a,s,l,!1),n=(l&s.childLanes)!==0),m){if(n)return du(a,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ae(Xe,Xe.current),n)break;return null;case 22:return s.lanes=0,au(a,s,l,s.pendingProps);case 24:Ba(s,Ze,a.memoizedState.cache)}return Ta(a,s,l)}function uu(a,s,l){if(a!==null)if(a.memoizedProps!==s.pendingProps)et=!0;else{if(!En(a,l)&&(s.flags&128)===0)return et=!1,Hp(a,s,l);et=(a.flags&131072)!==0}else et=!1,Ee&&(s.flags&1048576)!==0&&Gd(s,ql,s.index);switch(s.lanes=0,s.tag){case 16:e:{var n=s.pendingProps;if(a=vs(s.elementType),s.type=a,typeof a=="function")Or(a)?(n=Ms(a,n),s.tag=1,s=ou(null,s,a,n,l)):(s.tag=0,s=Mn(null,s,a,n,l));else{if(a!=null){var m=a.$$typeof;if(m===O){s.tag=11,s=J0(null,s,a,n,l);break e}else if(m===X){s.tag=14,s=eu(null,s,a,n,l);break e}}throw s=K(a)||a,Error(o(306,s,""))}}return s;case 0:return Mn(a,s,s.type,s.pendingProps,l);case 1:return n=s.type,m=Ms(n,s.pendingProps),ou(a,s,n,m,l);case 3:e:{if(Ke(s,s.stateNode.containerInfo),a===null)throw Error(o(387));n=s.pendingProps;var y=s.memoizedState;m=y.element,Qr(a,s),$l(s,n,null,l);var S=s.memoizedState;if(n=S.cache,Ba(s,Ze,n),n!==y.cache&&Gr(s,[Ze],l,!0),Ql(),n=S.element,y.isDehydrated)if(y={element:n,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=ru(a,s,n,l);break e}else if(n!==m){m=Yt(Error(o(424)),s),Gl(m),s=ru(a,s,n,l);break e}else{switch(a=s.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(ze=Qt(a.firstChild),ct=s,Ee=!0,Ha=null,Xt=!0,l=a0(s,null,n,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ps(),n===m){s=Ta(a,s,l);break e}ut(a,s,n,l)}s=s.child}return s;case 26:return xo(a,s),a===null?(l=Mf(s.type,null,s.pendingProps,null))?s.memoizedState=l:Ee||(l=s.type,a=s.pendingProps,n=Ho(ve.current).createElement(l),n[nt]=s,n[gt]=a,ft(n,l,a),ot(n),s.stateNode=n):s.memoizedState=Mf(s.type,a.memoizedProps,s.pendingProps,a.memoizedState),null;case 27:return yt(s),a===null&&Ee&&(n=s.stateNode=xf(s.type,s.pendingProps,ve.current),ct=s,Xt=!0,m=ze,Za(s.type)?(cc=m,ze=Qt(n.firstChild)):ze=m),ut(a,s,s.pendingProps.children,l),xo(a,s),a===null&&(s.flags|=4194304),s.child;case 5:return a===null&&Ee&&((m=n=ze)&&(n=hy(n,s.type,s.pendingProps,Xt),n!==null?(s.stateNode=n,ct=s,ze=Qt(n.firstChild),Xt=!1,m=!0):m=!1),m||Pa(s)),yt(s),m=s.type,y=s.pendingProps,S=a!==null?a.memoizedProps:null,n=y.children,lc(m,y)?n=null:S!==null&&lc(m,S)&&(s.flags|=32),s.memoizedState!==null&&(m=an(a,s,Cp,null,null,l),yi._currentValue=m),xo(a,s),ut(a,s,n,l),s.child;case 6:return a===null&&Ee&&((a=l=ze)&&(l=my(l,s.pendingProps,Xt),l!==null?(s.stateNode=l,ct=s,ze=null,a=!0):a=!1),a||Pa(s)),null;case 13:return nu(a,s,l);case 4:return Ke(s,s.stateNode.containerInfo),n=s.pendingProps,a===null?s.child=Ss(s,null,n,l):ut(a,s,n,l),s.child;case 11:return J0(a,s,s.type,s.pendingProps,l);case 7:return ut(a,s,s.pendingProps,l),s.child;case 8:return ut(a,s,s.pendingProps.children,l),s.child;case 12:return ut(a,s,s.pendingProps.children,l),s.child;case 10:return n=s.pendingProps,Ba(s,s.type,n.value),ut(a,s,n.children,l),s.child;case 9:return m=s.type._context,n=s.pendingProps.children,bs(s),m=dt(m),n=n(m),s.flags|=1,ut(a,s,n,l),s.child;case 14:return eu(a,s,s.type,s.pendingProps,l);case 15:return tu(a,s,s.type,s.pendingProps,l);case 19:return du(a,s,l);case 31:return Vp(a,s,l);case 22:return au(a,s,l,s.pendingProps);case 24:return bs(s),n=dt(Ze),a===null?(m=Fr(),m===null&&(m=Be,y=Yr(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=l),m=y),s.memoizedState={parent:n,cache:m},Wr(s),Ba(s,Ze,m)):((a.lanes&l)!==0&&(Qr(a,s),$l(s,null,null,l),Ql()),m=a.memoizedState,y=s.memoizedState,m.parent!==n?(m={parent:n,cache:n},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),Ba(s,Ze,n)):(n=y.cache,Ba(s,Ze,n),n!==m.cache&&Gr(s,[Ze],l,!0))),ut(a,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Ma(a){a.flags|=4}function An(a,s,l,n,m){if((s=(a.mode&32)!==0)&&(s=!1),s){if(a.flags|=16777216,(m&335544128)===m)if(a.stateNode.complete)a.flags|=8192;else if(Pu())a.flags|=8192;else throw xs=lo,Xr}else a.flags&=-16777217}function fu(a,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Cf(s))if(Pu())a.flags|=8192;else throw xs=lo,Xr}function To(a,s){s!==null&&(a.flags|=4),a.flags&16384&&(s=a.tag!==22?Uc():536870912,a.lanes|=s,ol|=s)}function ai(a,s){if(!Ee)switch(a.tailMode){case"hidden":s=a.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var n=null;l!==null;)l.alternate!==null&&(n=l),l=l.sibling;n===null?s||a.tail===null?a.tail=null:a.tail.sibling=null:n.sibling=null}}function qe(a){var s=a.alternate!==null&&a.alternate.child===a.child,l=0,n=0;if(s)for(var m=a.child;m!==null;)l|=m.lanes|m.childLanes,n|=m.subtreeFlags&65011712,n|=m.flags&65011712,m.return=a,m=m.sibling;else for(m=a.child;m!==null;)l|=m.lanes|m.childLanes,n|=m.subtreeFlags,n|=m.flags,m.return=a,m=m.sibling;return a.subtreeFlags|=n,a.childLanes=l,s}function Pp(a,s,l){var n=s.pendingProps;switch(Pr(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(s),null;case 1:return qe(s),null;case 3:return l=s.stateNode,n=null,a!==null&&(n=a.memoizedState.cache),s.memoizedState.cache!==n&&(s.flags|=2048),va(Ze),Ge(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(Xs(s)?Ma(s):a===null||a.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Lr())),qe(s),null;case 26:var m=s.type,y=s.memoizedState;return a===null?(Ma(s),y!==null?(qe(s),fu(s,y)):(qe(s),An(s,m,null,n,l))):y?y!==a.memoizedState?(Ma(s),qe(s),fu(s,y)):(qe(s),s.flags&=-16777217):(a=a.memoizedProps,a!==n&&Ma(s),qe(s),An(s,m,a,n,l)),null;case 27:if(rs(s),l=ve.current,m=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==n&&Ma(s);else{if(!n){if(s.stateNode===null)throw Error(o(166));return qe(s),null}a=oe.current,Xs(s)?Ud(s):(a=xf(m,n,l),s.stateNode=a,Ma(s))}return qe(s),null;case 5:if(rs(s),m=s.type,a!==null&&s.stateNode!=null)a.memoizedProps!==n&&Ma(s);else{if(!n){if(s.stateNode===null)throw Error(o(166));return qe(s),null}if(y=oe.current,Xs(s))Ud(s);else{var S=Ho(ve.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof n.is=="string"?S.createElement("select",{is:n.is}):S.createElement("select"),n.multiple?y.multiple=!0:n.size&&(y.size=n.size);break;default:y=typeof n.is=="string"?S.createElement(m,{is:n.is}):S.createElement(m)}}y[nt]=s,y[gt]=n;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=y;e:switch(ft(y,m,n),m){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Ma(s)}}return qe(s),An(s,s.type,a===null?null:a.memoizedProps,s.pendingProps,l),null;case 6:if(a&&s.stateNode!=null)a.memoizedProps!==n&&Ma(s);else{if(typeof n!="string"&&s.stateNode===null)throw Error(o(166));if(a=ve.current,Xs(s)){if(a=s.stateNode,l=s.memoizedProps,n=null,m=ct,m!==null)switch(m.tag){case 27:case 5:n=m.memoizedProps}a[nt]=s,a=!!(a.nodeValue===l||n!==null&&n.suppressHydrationWarning===!0||cf(a.nodeValue,l)),a||Pa(s,!0)}else a=Ho(a).createTextNode(n),a[nt]=s,s.stateNode=a}return qe(s),null;case 31:if(l=s.memoizedState,a===null||a.memoizedState!==null){if(n=Xs(s),l!==null){if(a===null){if(!n)throw Error(o(318));if(a=s.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(o(557));a[nt]=s}else ps(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qe(s),a=!1}else l=Lr(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=l),a=!0;if(!a)return s.flags&256?(Ot(s),s):(Ot(s),null);if((s.flags&128)!==0)throw Error(o(558))}return qe(s),null;case 13:if(n=s.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(m=Xs(s),n!==null&&n.dehydrated!==null){if(a===null){if(!m)throw Error(o(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));m[nt]=s}else ps(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;qe(s),m=!1}else m=Lr(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Ot(s),s):(Ot(s),null)}return Ot(s),(s.flags&128)!==0?(s.lanes=l,s):(l=n!==null,a=a!==null&&a.memoizedState!==null,l&&(n=s.child,m=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(m=n.alternate.memoizedState.cachePool.pool),y=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(y=n.memoizedState.cachePool.pool),y!==m&&(n.flags|=2048)),l!==a&&l&&(s.child.flags|=8192),To(s,s.updateQueue),qe(s),null);case 4:return Ge(),a===null&&Jn(s.stateNode.containerInfo),qe(s),null;case 10:return va(s.type),qe(s),null;case 19:if(U(Xe),n=s.memoizedState,n===null)return qe(s),null;if(m=(s.flags&128)!==0,y=n.rendering,y===null)if(m)ai(n,!1);else{if(Fe!==0||a!==null&&(a.flags&128)!==0)for(a=s.child;a!==null;){if(y=no(a),y!==null){for(s.flags|=128,ai(n,!1),a=y.updateQueue,s.updateQueue=a,To(s,a),s.subtreeFlags=0,a=l,l=s.child;l!==null;)Ld(l,a),l=l.sibling;return ae(Xe,Xe.current&1|2),Ee&&ba(s,n.treeForkCount),s.child}a=a.sibling}n.tail!==null&&Ct()>jo&&(s.flags|=128,m=!0,ai(n,!1),s.lanes=4194304)}else{if(!m)if(a=no(y),a!==null){if(s.flags|=128,m=!0,a=a.updateQueue,s.updateQueue=a,To(s,a),ai(n,!0),n.tail===null&&n.tailMode==="hidden"&&!y.alternate&&!Ee)return qe(s),null}else 2*Ct()-n.renderingStartTime>jo&&l!==536870912&&(s.flags|=128,m=!0,ai(n,!1),s.lanes=4194304);n.isBackwards?(y.sibling=s.child,s.child=y):(a=n.last,a!==null?a.sibling=y:s.child=y,n.last=y)}return n.tail!==null?(a=n.tail,n.rendering=a,n.tail=a.sibling,n.renderingStartTime=Ct(),a.sibling=null,l=Xe.current,ae(Xe,m?l&1|2:l&1),Ee&&ba(s,n.treeForkCount),a):(qe(s),null);case 22:case 23:return Ot(s),Jr(),n=s.memoizedState!==null,a!==null?a.memoizedState!==null!==n&&(s.flags|=8192):n&&(s.flags|=8192),n?(l&536870912)!==0&&(s.flags&128)===0&&(qe(s),s.subtreeFlags&6&&(s.flags|=8192)):qe(s),l=s.updateQueue,l!==null&&To(s,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==l&&(s.flags|=2048),a!==null&&U(gs),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),va(Ze),qe(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function Bp(a,s){switch(Pr(s),s.tag){case 1:return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 3:return va(Ze),Ge(),a=s.flags,(a&65536)!==0&&(a&128)===0?(s.flags=a&-65537|128,s):null;case 26:case 27:case 5:return rs(s),null;case 31:if(s.memoizedState!==null){if(Ot(s),s.alternate===null)throw Error(o(340));ps()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 13:if(Ot(s),a=s.memoizedState,a!==null&&a.dehydrated!==null){if(s.alternate===null)throw Error(o(340));ps()}return a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 19:return U(Xe),null;case 4:return Ge(),null;case 10:return va(s.type),null;case 22:case 23:return Ot(s),Jr(),a!==null&&U(gs),a=s.flags,a&65536?(s.flags=a&-65537|128,s):null;case 24:return va(Ze),null;case 25:return null;default:return null}}function hu(a,s){switch(Pr(s),s.tag){case 3:va(Ze),Ge();break;case 26:case 27:case 5:rs(s);break;case 4:Ge();break;case 31:s.memoizedState!==null&&Ot(s);break;case 13:Ot(s);break;case 19:U(Xe);break;case 10:va(s.type);break;case 22:case 23:Ot(s),Jr(),a!==null&&U(gs);break;case 24:va(Ze)}}function si(a,s){try{var l=s.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var m=n.next;l=m;do{if((l.tag&a)===a){n=void 0;var y=l.create,S=l.inst;n=y(),S.destroy=n}l=l.next}while(l!==m)}}catch(_){Ie(s,s.return,_)}}function Ua(a,s,l){try{var n=s.updateQueue,m=n!==null?n.lastEffect:null;if(m!==null){var y=m.next;n=y;do{if((n.tag&a)===a){var S=n.inst,_=S.destroy;if(_!==void 0){S.destroy=void 0,m=s;var E=l,B=_;try{B()}catch(W){Ie(m,E,W)}}}n=n.next}while(n!==y)}}catch(W){Ie(s,s.return,W)}}function mu(a){var s=a.updateQueue;if(s!==null){var l=a.stateNode;try{l0(s,l)}catch(n){Ie(a,a.return,n)}}}function pu(a,s,l){l.props=Ms(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(n){Ie(a,s,n)}}function li(a,s){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var n=a.stateNode;break;case 30:n=a.stateNode;break;default:n=a.stateNode}typeof l=="function"?a.refCleanup=l(n):l.current=n}}catch(m){Ie(a,s,m)}}function na(a,s){var l=a.ref,n=a.refCleanup;if(l!==null)if(typeof n=="function")try{n()}catch(m){Ie(a,s,m)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Ie(a,s,m)}else l.current=null}function yu(a){var s=a.type,l=a.memoizedProps,n=a.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break e;case"img":l.src?n.src=l.src:l.srcSet&&(n.srcset=l.srcSet)}}catch(m){Ie(a,a.return,m)}}function Dn(a,s,l){try{var n=a.stateNode;ry(n,a.type,l,s),n[gt]=s}catch(m){Ie(a,a.return,m)}}function bu(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Za(a.type)||a.tag===4}function Rn(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||bu(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Za(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function On(a,s,l){var n=a.tag;if(n===5||n===6)a=a.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(a),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=ma));else if(n!==4&&(n===27&&Za(a.type)&&(l=a.stateNode,s=null),a=a.child,a!==null))for(On(a,s,l),a=a.sibling;a!==null;)On(a,s,l),a=a.sibling}function Mo(a,s,l){var n=a.tag;if(n===5||n===6)a=a.stateNode,s?l.insertBefore(a,s):l.appendChild(a);else if(n!==4&&(n===27&&Za(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(Mo(a,s,l),a=a.sibling;a!==null;)Mo(a,s,l),a=a.sibling}function gu(a){var s=a.stateNode,l=a.memoizedProps;try{for(var n=a.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);ft(s,n,l),s[nt]=a,s[gt]=l}catch(y){Ie(a,a.return,y)}}var _a=!1,tt=!1,In=!1,vu=typeof WeakSet=="function"?WeakSet:Set,rt=null;function Lp(a,s){if(a=a.containerInfo,ac=Yo,a=Ad(a),jr(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var n=l.getSelection&&l.getSelection();if(n&&n.rangeCount!==0){l=n.anchorNode;var m=n.anchorOffset,y=n.focusNode;n=n.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var S=0,_=-1,E=-1,B=0,W=0,$=a,L=null;t:for(;;){for(var G;$!==l||m!==0&&$.nodeType!==3||(_=S+m),$!==y||n!==0&&$.nodeType!==3||(E=S+n),$.nodeType===3&&(S+=$.nodeValue.length),(G=$.firstChild)!==null;)L=$,$=G;for(;;){if($===a)break t;if(L===l&&++B===m&&(_=S),L===y&&++W===n&&(E=S),(G=$.nextSibling)!==null)break;$=L,L=$.parentNode}$=G}l=_===-1||E===-1?null:{start:_,end:E}}else l=null}l=l||{start:0,end:0}}else l=null;for(sc={focusedElem:a,selectionRange:l},Yo=!1,rt=s;rt!==null;)if(s=rt,a=s.child,(s.subtreeFlags&1028)!==0&&a!==null)a.return=s,rt=a;else for(;rt!==null;){switch(s=rt,y=s.alternate,a=s.flags,s.tag){case 0:if((a&4)!==0&&(a=s.updateQueue,a=a!==null?a.events:null,a!==null))for(l=0;l<a.length;l++)m=a[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&y!==null){a=void 0,l=s,m=y.memoizedProps,y=y.memoizedState,n=l.stateNode;try{var ne=Ms(l.type,m);a=n.getSnapshotBeforeUpdate(ne,y),n.__reactInternalSnapshotBeforeUpdate=a}catch(me){Ie(l,l.return,me)}}break;case 3:if((a&1024)!==0){if(a=s.stateNode.containerInfo,l=a.nodeType,l===9)oc(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":oc(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(o(163))}if(a=s.sibling,a!==null){a.return=s.return,rt=a;break}rt=s.return}}function xu(a,s,l){var n=l.flags;switch(l.tag){case 0:case 11:case 15:ka(a,l),n&4&&si(5,l);break;case 1:if(ka(a,l),n&4)if(a=l.stateNode,s===null)try{a.componentDidMount()}catch(S){Ie(l,l.return,S)}else{var m=Ms(l.type,s.memoizedProps);s=s.memoizedState;try{a.componentDidUpdate(m,s,a.__reactInternalSnapshotBeforeUpdate)}catch(S){Ie(l,l.return,S)}}n&64&&mu(l),n&512&&li(l,l.return);break;case 3:if(ka(a,l),n&64&&(a=l.updateQueue,a!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{l0(a,s)}catch(S){Ie(l,l.return,S)}}break;case 27:s===null&&n&4&&gu(l);case 26:case 5:ka(a,l),s===null&&n&4&&yu(l),n&512&&li(l,l.return);break;case 12:ka(a,l);break;case 31:ka(a,l),n&4&&Mu(a,l);break;case 13:ka(a,l),n&4&&_u(a,l),n&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=Qp.bind(null,l),py(a,l))));break;case 22:if(n=l.memoizedState!==null||_a,!n){s=s!==null&&s.memoizedState!==null||tt,m=_a;var y=tt;_a=n,(tt=s)&&!y?ja(a,l,(l.subtreeFlags&8772)!==0):ka(a,l),_a=m,tt=y}break;case 30:break;default:ka(a,l)}}function Su(a){var s=a.alternate;s!==null&&(a.alternate=null,Su(s)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(s=a.stateNode,s!==null&&dr(s)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Ye=null,xt=!1;function wa(a,s,l){for(l=l.child;l!==null;)Tu(a,s,l),l=l.sibling}function Tu(a,s,l){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Cl,l)}catch{}switch(l.tag){case 26:tt||na(l,s),wa(a,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:tt||na(l,s);var n=Ye,m=xt;Za(l.type)&&(Ye=l.stateNode,xt=!1),wa(a,s,l),hi(l.stateNode),Ye=n,xt=m;break;case 5:tt||na(l,s);case 6:if(n=Ye,m=xt,Ye=null,wa(a,s,l),Ye=n,xt=m,Ye!==null)if(xt)try{(Ye.nodeType===9?Ye.body:Ye.nodeName==="HTML"?Ye.ownerDocument.body:Ye).removeChild(l.stateNode)}catch(y){Ie(l,s,y)}else try{Ye.removeChild(l.stateNode)}catch(y){Ie(l,s,y)}break;case 18:Ye!==null&&(xt?(a=Ye,pf(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),ml(a)):pf(Ye,l.stateNode));break;case 4:n=Ye,m=xt,Ye=l.stateNode.containerInfo,xt=!0,wa(a,s,l),Ye=n,xt=m;break;case 0:case 11:case 14:case 15:Ua(2,l,s),tt||Ua(4,l,s),wa(a,s,l);break;case 1:tt||(na(l,s),n=l.stateNode,typeof n.componentWillUnmount=="function"&&pu(l,s,n)),wa(a,s,l);break;case 21:wa(a,s,l);break;case 22:tt=(n=tt)||l.memoizedState!==null,wa(a,s,l),tt=n;break;default:wa(a,s,l)}}function Mu(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{ml(a)}catch(l){Ie(s,s.return,l)}}}function _u(a,s){if(s.memoizedState===null&&(a=s.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{ml(a)}catch(l){Ie(s,s.return,l)}}function zp(a){switch(a.tag){case 31:case 13:case 19:var s=a.stateNode;return s===null&&(s=a.stateNode=new vu),s;case 22:return a=a.stateNode,s=a._retryCache,s===null&&(s=a._retryCache=new vu),s;default:throw Error(o(435,a.tag))}}function _o(a,s){var l=zp(a);s.forEach(function(n){if(!l.has(n)){l.add(n);var m=$p.bind(null,a,n);n.then(m,m)}})}function St(a,s){var l=s.deletions;if(l!==null)for(var n=0;n<l.length;n++){var m=l[n],y=a,S=s,_=S;e:for(;_!==null;){switch(_.tag){case 27:if(Za(_.type)){Ye=_.stateNode,xt=!1;break e}break;case 5:Ye=_.stateNode,xt=!1;break e;case 3:case 4:Ye=_.stateNode.containerInfo,xt=!0;break e}_=_.return}if(Ye===null)throw Error(o(160));Tu(y,S,m),Ye=null,xt=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)wu(s,a),s=s.sibling}var ea=null;function wu(a,s){var l=a.alternate,n=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:St(s,a),Tt(a),n&4&&(Ua(3,a,a.return),si(3,a),Ua(5,a,a.return));break;case 1:St(s,a),Tt(a),n&512&&(tt||l===null||na(l,l.return)),n&64&&_a&&(a=a.updateQueue,a!==null&&(n=a.callbacks,n!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?n:l.concat(n))));break;case 26:var m=ea;if(St(s,a),Tt(a),n&512&&(tt||l===null||na(l,l.return)),n&4){var y=l!==null?l.memoizedState:null;if(n=a.memoizedState,l===null)if(n===null)if(a.stateNode===null){e:{n=a.type,l=a.memoizedProps,m=m.ownerDocument||m;t:switch(n){case"title":y=m.getElementsByTagName("title")[0],(!y||y[Al]||y[nt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(n),m.head.insertBefore(y,m.querySelector("head > title"))),ft(y,n,l),y[nt]=a,ot(y),n=y;break e;case"link":var S=kf("link","href",m).get(n+(l.href||""));if(S){for(var _=0;_<S.length;_++)if(y=S[_],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(_,1);break t}}y=m.createElement(n),ft(y,n,l),m.head.appendChild(y);break;case"meta":if(S=kf("meta","content",m).get(n+(l.content||""))){for(_=0;_<S.length;_++)if(y=S[_],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(_,1);break t}}y=m.createElement(n),ft(y,n,l),m.head.appendChild(y);break;default:throw Error(o(468,n))}y[nt]=a,ot(y),n=y}a.stateNode=n}else jf(m,a.type,a.stateNode);else a.stateNode=wf(m,n,a.memoizedProps);else y!==n?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,n===null?jf(m,a.type,a.stateNode):wf(m,n,a.memoizedProps)):n===null&&a.stateNode!==null&&Dn(a,a.memoizedProps,l.memoizedProps)}break;case 27:St(s,a),Tt(a),n&512&&(tt||l===null||na(l,l.return)),l!==null&&n&4&&Dn(a,a.memoizedProps,l.memoizedProps);break;case 5:if(St(s,a),Tt(a),n&512&&(tt||l===null||na(l,l.return)),a.flags&32){m=a.stateNode;try{Hs(m,"")}catch(ne){Ie(a,a.return,ne)}}n&4&&a.stateNode!=null&&(m=a.memoizedProps,Dn(a,m,l!==null?l.memoizedProps:m)),n&1024&&(In=!0);break;case 6:if(St(s,a),Tt(a),n&4){if(a.stateNode===null)throw Error(o(162));n=a.memoizedProps,l=a.stateNode;try{l.nodeValue=n}catch(ne){Ie(a,a.return,ne)}}break;case 3:if(Lo=null,m=ea,ea=Po(s.containerInfo),St(s,a),ea=m,Tt(a),n&4&&l!==null&&l.memoizedState.isDehydrated)try{ml(s.containerInfo)}catch(ne){Ie(a,a.return,ne)}In&&(In=!1,ku(a));break;case 4:n=ea,ea=Po(a.stateNode.containerInfo),St(s,a),Tt(a),ea=n;break;case 12:St(s,a),Tt(a);break;case 31:St(s,a),Tt(a),n&4&&(n=a.updateQueue,n!==null&&(a.updateQueue=null,_o(a,n)));break;case 13:St(s,a),Tt(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ko=Ct()),n&4&&(n=a.updateQueue,n!==null&&(a.updateQueue=null,_o(a,n)));break;case 22:m=a.memoizedState!==null;var E=l!==null&&l.memoizedState!==null,B=_a,W=tt;if(_a=B||m,tt=W||E,St(s,a),tt=W,_a=B,Tt(a),n&8192)e:for(s=a.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(l===null||E||_a||tt||_s(a)),l=null,s=a;;){if(s.tag===5||s.tag===26){if(l===null){E=l=s;try{if(y=E.stateNode,m)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{_=E.stateNode;var $=E.memoizedProps.style,L=$!=null&&$.hasOwnProperty("display")?$.display:null;_.style.display=L==null||typeof L=="boolean"?"":(""+L).trim()}}catch(ne){Ie(E,E.return,ne)}}}else if(s.tag===6){if(l===null){E=s;try{E.stateNode.nodeValue=m?"":E.memoizedProps}catch(ne){Ie(E,E.return,ne)}}}else if(s.tag===18){if(l===null){E=s;try{var G=E.stateNode;m?yf(G,!0):yf(E.stateNode,!1)}catch(ne){Ie(E,E.return,ne)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===a)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}n&4&&(n=a.updateQueue,n!==null&&(l=n.retryQueue,l!==null&&(n.retryQueue=null,_o(a,l))));break;case 19:St(s,a),Tt(a),n&4&&(n=a.updateQueue,n!==null&&(a.updateQueue=null,_o(a,n)));break;case 30:break;case 21:break;default:St(s,a),Tt(a)}}function Tt(a){var s=a.flags;if(s&2){try{for(var l,n=a.return;n!==null;){if(bu(n)){l=n;break}n=n.return}if(l==null)throw Error(o(160));switch(l.tag){case 27:var m=l.stateNode,y=Rn(a);Mo(a,y,m);break;case 5:var S=l.stateNode;l.flags&32&&(Hs(S,""),l.flags&=-33);var _=Rn(a);Mo(a,_,S);break;case 3:case 4:var E=l.stateNode.containerInfo,B=Rn(a);On(a,B,E);break;default:throw Error(o(161))}}catch(W){Ie(a,a.return,W)}a.flags&=-3}s&4096&&(a.flags&=-4097)}function ku(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var s=a;ku(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),a=a.sibling}}function ka(a,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)xu(a,s.alternate,s),s=s.sibling}function _s(a){for(a=a.child;a!==null;){var s=a;switch(s.tag){case 0:case 11:case 14:case 15:Ua(4,s,s.return),_s(s);break;case 1:na(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&pu(s,s.return,l),_s(s);break;case 27:hi(s.stateNode);case 26:case 5:na(s,s.return),_s(s);break;case 22:s.memoizedState===null&&_s(s);break;case 30:_s(s);break;default:_s(s)}a=a.sibling}}function ja(a,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var n=s.alternate,m=a,y=s,S=y.flags;switch(y.tag){case 0:case 11:case 15:ja(m,y,l),si(4,y);break;case 1:if(ja(m,y,l),n=y,m=n.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(B){Ie(n,n.return,B)}if(n=y,m=n.updateQueue,m!==null){var _=n.stateNode;try{var E=m.shared.hiddenCallbacks;if(E!==null)for(m.shared.hiddenCallbacks=null,m=0;m<E.length;m++)s0(E[m],_)}catch(B){Ie(n,n.return,B)}}l&&S&64&&mu(y),li(y,y.return);break;case 27:gu(y);case 26:case 5:ja(m,y,l),l&&n===null&&S&4&&yu(y),li(y,y.return);break;case 12:ja(m,y,l);break;case 31:ja(m,y,l),l&&S&4&&Mu(m,y);break;case 13:ja(m,y,l),l&&S&4&&_u(m,y);break;case 22:y.memoizedState===null&&ja(m,y,l),li(y,y.return);break;case 30:break;default:ja(m,y,l)}s=s.sibling}}function Vn(a,s){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(a=s.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&Yl(l))}function Hn(a,s){a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&Yl(a))}function ta(a,s,l,n){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ju(a,s,l,n),s=s.sibling}function ju(a,s,l,n){var m=s.flags;switch(s.tag){case 0:case 11:case 15:ta(a,s,l,n),m&2048&&si(9,s);break;case 1:ta(a,s,l,n);break;case 3:ta(a,s,l,n),m&2048&&(a=null,s.alternate!==null&&(a=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==a&&(s.refCount++,a!=null&&Yl(a)));break;case 12:if(m&2048){ta(a,s,l,n),a=s.stateNode;try{var y=s.memoizedProps,S=y.id,_=y.onPostCommit;typeof _=="function"&&_(S,s.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(E){Ie(s,s.return,E)}}else ta(a,s,l,n);break;case 31:ta(a,s,l,n);break;case 13:ta(a,s,l,n);break;case 23:break;case 22:y=s.stateNode,S=s.alternate,s.memoizedState!==null?y._visibility&2?ta(a,s,l,n):ii(a,s):y._visibility&2?ta(a,s,l,n):(y._visibility|=2,sl(a,s,l,n,(s.subtreeFlags&10256)!==0||!1)),m&2048&&Vn(S,s);break;case 24:ta(a,s,l,n),m&2048&&Hn(s.alternate,s);break;default:ta(a,s,l,n)}}function sl(a,s,l,n,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=a,S=s,_=l,E=n,B=S.flags;switch(S.tag){case 0:case 11:case 15:sl(y,S,_,E,m),si(8,S);break;case 23:break;case 22:var W=S.stateNode;S.memoizedState!==null?W._visibility&2?sl(y,S,_,E,m):ii(y,S):(W._visibility|=2,sl(y,S,_,E,m)),m&&B&2048&&Vn(S.alternate,S);break;case 24:sl(y,S,_,E,m),m&&B&2048&&Hn(S.alternate,S);break;default:sl(y,S,_,E,m)}s=s.sibling}}function ii(a,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=a,n=s,m=n.flags;switch(n.tag){case 22:ii(l,n),m&2048&&Vn(n.alternate,n);break;case 24:ii(l,n),m&2048&&Hn(n.alternate,n);break;default:ii(l,n)}s=s.sibling}}var oi=8192;function ll(a,s,l){if(a.subtreeFlags&oi)for(a=a.child;a!==null;)Cu(a,s,l),a=a.sibling}function Cu(a,s,l){switch(a.tag){case 26:ll(a,s,l),a.flags&oi&&a.memoizedState!==null&&jy(l,ea,a.memoizedState,a.memoizedProps);break;case 5:ll(a,s,l);break;case 3:case 4:var n=ea;ea=Po(a.stateNode.containerInfo),ll(a,s,l),ea=n;break;case 22:a.memoizedState===null&&(n=a.alternate,n!==null&&n.memoizedState!==null?(n=oi,oi=16777216,ll(a,s,l),oi=n):ll(a,s,l));break;default:ll(a,s,l)}}function Nu(a){var s=a.alternate;if(s!==null&&(a=s.child,a!==null)){s.child=null;do s=a.sibling,a.sibling=null,a=s;while(a!==null)}}function ri(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var n=s[l];rt=n,Au(n,a)}Nu(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Eu(a),a=a.sibling}function Eu(a){switch(a.tag){case 0:case 11:case 15:ri(a),a.flags&2048&&Ua(9,a,a.return);break;case 3:ri(a);break;case 12:ri(a);break;case 22:var s=a.stateNode;a.memoizedState!==null&&s._visibility&2&&(a.return===null||a.return.tag!==13)?(s._visibility&=-3,wo(a)):ri(a);break;default:ri(a)}}function wo(a){var s=a.deletions;if((a.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var n=s[l];rt=n,Au(n,a)}Nu(a)}for(a=a.child;a!==null;){switch(s=a,s.tag){case 0:case 11:case 15:Ua(8,s,s.return),wo(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,wo(s));break;default:wo(s)}a=a.sibling}}function Au(a,s){for(;rt!==null;){var l=rt;switch(l.tag){case 0:case 11:case 15:Ua(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var n=l.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Yl(l.memoizedState.cache)}if(n=l.child,n!==null)n.return=l,rt=n;else e:for(l=a;rt!==null;){n=rt;var m=n.sibling,y=n.return;if(Su(n),n===l){rt=null;break e}if(m!==null){m.return=y,rt=m;break e}rt=y}}}var qp={getCacheForType:function(a){var s=dt(Ze),l=s.data.get(a);return l===void 0&&(l=a(),s.data.set(a,l)),l},cacheSignal:function(){return dt(Ze).controller.signal}},Gp=typeof WeakMap=="function"?WeakMap:Map,Re=0,Be=null,_e=null,ke=0,Oe=0,It=null,Fa=!1,il=!1,Pn=!1,Ca=0,Fe=0,Xa=0,ws=0,Bn=0,Vt=0,ol=0,ni=null,Mt=null,Ln=!1,ko=0,Du=0,jo=1/0,Co=null,Wa=null,lt=0,Qa=null,rl=null,Na=0,zn=0,qn=null,Ru=null,ci=0,Gn=null;function Ht(){return(Re&2)!==0&&ke!==0?ke&-ke:R.T!==null?Qn():Qc()}function Ou(){if(Vt===0)if((ke&536870912)===0||Ee){var a=Ii;Ii<<=1,(Ii&3932160)===0&&(Ii=262144),Vt=a}else Vt=536870912;return a=Rt.current,a!==null&&(a.flags|=32),Vt}function _t(a,s,l){(a===Be&&(Oe===2||Oe===9)||a.cancelPendingCommit!==null)&&(nl(a,0),$a(a,ke,Vt,!1)),El(a,l),((Re&2)===0||a!==Be)&&(a===Be&&((Re&2)===0&&(ws|=l),Fe===4&&$a(a,ke,Vt,!1)),ca(a))}function Iu(a,s,l){if((Re&6)!==0)throw Error(o(327));var n=!l&&(s&127)===0&&(s&a.expiredLanes)===0||Nl(a,s),m=n?Fp(a,s):Un(a,s,!0),y=n;do{if(m===0){il&&!n&&$a(a,s,0,!1);break}else{if(l=a.current.alternate,y&&!Yp(l)){m=Un(a,s,!1),y=!1;continue}if(m===2){if(y=s,a.errorRecoveryDisabledLanes&y)var S=0;else S=a.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var _=a;m=ni;var E=_.current.memoizedState.isDehydrated;if(E&&(nl(_,S).flags|=256),S=Un(_,S,!1),S!==2){if(Pn&&!E){_.errorRecoveryDisabledLanes|=y,ws|=y,m=4;break e}y=Mt,Mt=m,y!==null&&(Mt===null?Mt=y:Mt.push.apply(Mt,y))}m=S}if(y=!1,m!==2)continue}}if(m===1){nl(a,0),$a(a,s,0,!0);break}e:{switch(n=a,y=m,y){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:$a(n,s,Vt,!Fa);break e;case 2:Mt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(m=ko+300-Ct(),10<m)){if($a(n,s,Vt,!Fa),Hi(n,0,!0)!==0)break e;Na=s,n.timeoutHandle=hf(Vu.bind(null,n,l,Mt,Co,Ln,s,Vt,ws,ol,Fa,y,"Throttled",-0,0),m);break e}Vu(n,l,Mt,Co,Ln,s,Vt,ws,ol,Fa,y,null,-0,0)}}break}while(!0);ca(a)}function Vu(a,s,l,n,m,y,S,_,E,B,W,$,L,G){if(a.timeoutHandle=-1,$=s.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ma},Cu(s,y,$);var ne=(y&62914560)===y?ko-Ct():(y&4194048)===y?Du-Ct():0;if(ne=Cy($,ne),ne!==null){Na=y,a.cancelPendingCommit=ne(Yu.bind(null,a,s,y,l,n,m,S,_,E,W,$,null,L,G)),$a(a,y,S,!B);return}}Yu(a,s,y,l,n,m,S,_,E)}function Yp(a){for(var s=a;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var n=0;n<l.length;n++){var m=l[n],y=m.getSnapshot;m=m.value;try{if(!At(y(),m))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===a)break;for(;s.sibling===null;){if(s.return===null||s.return===a)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function $a(a,s,l,n){s&=~Bn,s&=~ws,a.suspendedLanes|=s,a.pingedLanes&=~s,n&&(a.warmLanes|=s),n=a.expirationTimes;for(var m=s;0<m;){var y=31-Et(m),S=1<<y;n[y]=-1,m&=~S}l!==0&&Fc(a,l,s)}function No(){return(Re&6)===0?(di(0),!1):!0}function Yn(){if(_e!==null){if(Oe===0)var a=_e.return;else a=_e,ga=ys=null,on(a),Zs=null,Fl=0,a=_e;for(;a!==null;)hu(a.alternate,a),a=a.return;_e=null}}function nl(a,s){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,dy(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),Na=0,Yn(),Be=a,_e=l=ya(a.current,null),ke=s,Oe=0,It=null,Fa=!1,il=Nl(a,s),Pn=!1,ol=Vt=Bn=ws=Xa=Fe=0,Mt=ni=null,Ln=!1,(s&8)!==0&&(s|=s&32);var n=a.entangledLanes;if(n!==0)for(a=a.entanglements,n&=s;0<n;){var m=31-Et(n),y=1<<m;s|=a[m],n&=~y}return Ca=s,Qi(),l}function Hu(a,s){Se=null,R.H=ei,s===Ks||s===so?(s=Jd(),Oe=3):s===Xr?(s=Jd(),Oe=4):Oe=s===Tn?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,It=s,_e===null&&(Fe=1,go(a,Yt(s,a.current)))}function Pu(){var a=Rt.current;return a===null?!0:(ke&4194048)===ke?Wt===null:(ke&62914560)===ke||(ke&536870912)!==0?a===Wt:!1}function Bu(){var a=R.H;return R.H=ei,a===null?ei:a}function Lu(){var a=R.A;return R.A=qp,a}function Eo(){Fe=4,Fa||(ke&4194048)!==ke&&Rt.current!==null||(il=!0),(Xa&134217727)===0&&(ws&134217727)===0||Be===null||$a(Be,ke,Vt,!1)}function Un(a,s,l){var n=Re;Re|=2;var m=Bu(),y=Lu();(Be!==a||ke!==s)&&(Co=null,nl(a,s)),s=!1;var S=Fe;e:do try{if(Oe!==0&&_e!==null){var _=_e,E=It;switch(Oe){case 8:Yn(),S=6;break e;case 3:case 2:case 9:case 6:Rt.current===null&&(s=!0);var B=Oe;if(Oe=0,It=null,cl(a,_,E,B),l&&il){S=0;break e}break;default:B=Oe,Oe=0,It=null,cl(a,_,E,B)}}Up(),S=Fe;break}catch(W){Hu(a,W)}while(!0);return s&&a.shellSuspendCounter++,ga=ys=null,Re=n,R.H=m,R.A=y,_e===null&&(Be=null,ke=0,Qi()),S}function Up(){for(;_e!==null;)zu(_e)}function Fp(a,s){var l=Re;Re|=2;var n=Bu(),m=Lu();Be!==a||ke!==s?(Co=null,jo=Ct()+500,nl(a,s)):il=Nl(a,s);e:do try{if(Oe!==0&&_e!==null){s=_e;var y=It;t:switch(Oe){case 1:Oe=0,It=null,cl(a,s,y,1);break;case 2:case 9:if(Kd(y)){Oe=0,It=null,qu(s);break}s=function(){Oe!==2&&Oe!==9||Be!==a||(Oe=7),ca(a)},y.then(s,s);break e;case 3:Oe=7;break e;case 4:Oe=5;break e;case 7:Kd(y)?(Oe=0,It=null,qu(s)):(Oe=0,It=null,cl(a,s,y,7));break;case 5:var S=null;switch(_e.tag){case 26:S=_e.memoizedState;case 5:case 27:var _=_e;if(S?Cf(S):_.stateNode.complete){Oe=0,It=null;var E=_.sibling;if(E!==null)_e=E;else{var B=_.return;B!==null?(_e=B,Ao(B)):_e=null}break t}}Oe=0,It=null,cl(a,s,y,5);break;case 6:Oe=0,It=null,cl(a,s,y,6);break;case 8:Yn(),Fe=6;break e;default:throw Error(o(462))}}Xp();break}catch(W){Hu(a,W)}while(!0);return ga=ys=null,R.H=n,R.A=m,Re=l,_e!==null?0:(Be=null,ke=0,Qi(),Fe)}function Xp(){for(;_e!==null&&!ym();)zu(_e)}function zu(a){var s=uu(a.alternate,a,Ca);a.memoizedProps=a.pendingProps,s===null?Ao(a):_e=s}function qu(a){var s=a,l=s.alternate;switch(s.tag){case 15:case 0:s=iu(l,s,s.pendingProps,s.type,void 0,ke);break;case 11:s=iu(l,s,s.pendingProps,s.type.render,s.ref,ke);break;case 5:on(s);default:hu(l,s),s=_e=Ld(s,Ca),s=uu(l,s,Ca)}a.memoizedProps=a.pendingProps,s===null?Ao(a):_e=s}function cl(a,s,l,n){ga=ys=null,on(s),Zs=null,Fl=0;var m=s.return;try{if(Ip(a,m,s,l,ke)){Fe=1,go(a,Yt(l,a.current)),_e=null;return}}catch(y){if(m!==null)throw _e=m,y;Fe=1,go(a,Yt(l,a.current)),_e=null;return}s.flags&32768?(Ee||n===1?a=!0:il||(ke&536870912)!==0?a=!1:(Fa=a=!0,(n===2||n===9||n===3||n===6)&&(n=Rt.current,n!==null&&n.tag===13&&(n.flags|=16384))),Gu(s,a)):Ao(s)}function Ao(a){var s=a;do{if((s.flags&32768)!==0){Gu(s,Fa);return}a=s.return;var l=Pp(s.alternate,s,Ca);if(l!==null){_e=l;return}if(s=s.sibling,s!==null){_e=s;return}_e=s=a}while(s!==null);Fe===0&&(Fe=5)}function Gu(a,s){do{var l=Bp(a.alternate,a);if(l!==null){l.flags&=32767,_e=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(a=a.sibling,a!==null)){_e=a;return}_e=a=l}while(a!==null);Fe=6,_e=null}function Yu(a,s,l,n,m,y,S,_,E){a.cancelPendingCommit=null;do Do();while(lt!==0);if((Re&6)!==0)throw Error(o(327));if(s!==null){if(s===a.current)throw Error(o(177));if(y=s.lanes|s.childLanes,y|=Dr,km(a,l,y,S,_,E),a===Be&&(_e=Be=null,ke=0),rl=s,Qa=a,Na=l,zn=y,qn=m,Ru=n,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Kp(Ri,function(){return Qu(),null})):(a.callbackNode=null,a.callbackPriority=0),n=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||n){n=R.T,R.T=null,m=Y.p,Y.p=2,S=Re,Re|=4;try{Lp(a,s,l)}finally{Re=S,Y.p=m,R.T=n}}lt=1,Uu(),Fu(),Xu()}}function Uu(){if(lt===1){lt=0;var a=Qa,s=rl,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var n=Y.p;Y.p=2;var m=Re;Re|=4;try{wu(s,a);var y=sc,S=Ad(a.containerInfo),_=y.focusedElem,E=y.selectionRange;if(S!==_&&_&&_.ownerDocument&&Ed(_.ownerDocument.documentElement,_)){if(E!==null&&jr(_)){var B=E.start,W=E.end;if(W===void 0&&(W=B),"selectionStart"in _)_.selectionStart=B,_.selectionEnd=Math.min(W,_.value.length);else{var $=_.ownerDocument||document,L=$&&$.defaultView||window;if(L.getSelection){var G=L.getSelection(),ne=_.textContent.length,me=Math.min(E.start,ne),Pe=E.end===void 0?me:Math.min(E.end,ne);!G.extend&&me>Pe&&(S=Pe,Pe=me,me=S);var I=Nd(_,me),D=Nd(_,Pe);if(I&&D&&(G.rangeCount!==1||G.anchorNode!==I.node||G.anchorOffset!==I.offset||G.focusNode!==D.node||G.focusOffset!==D.offset)){var P=$.createRange();P.setStart(I.node,I.offset),G.removeAllRanges(),me>Pe?(G.addRange(P),G.extend(D.node,D.offset)):(P.setEnd(D.node,D.offset),G.addRange(P))}}}}for($=[],G=_;G=G.parentNode;)G.nodeType===1&&$.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<$.length;_++){var Q=$[_];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Yo=!!ac,sc=ac=null}finally{Re=m,Y.p=n,R.T=l}}a.current=s,lt=2}}function Fu(){if(lt===2){lt=0;var a=Qa,s=rl,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var n=Y.p;Y.p=2;var m=Re;Re|=4;try{xu(a,s.alternate,s)}finally{Re=m,Y.p=n,R.T=l}}lt=3}}function Xu(){if(lt===4||lt===3){lt=0,bm();var a=Qa,s=rl,l=Na,n=Ru;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?lt=5:(lt=0,rl=Qa=null,Wu(a,a.pendingLanes));var m=a.pendingLanes;if(m===0&&(Wa=null),nr(l),s=s.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Cl,s,void 0,(s.current.flags&128)===128)}catch{}if(n!==null){s=R.T,m=Y.p,Y.p=2,R.T=null;try{for(var y=a.onRecoverableError,S=0;S<n.length;S++){var _=n[S];y(_.value,{componentStack:_.stack})}}finally{R.T=s,Y.p=m}}(Na&3)!==0&&Do(),ca(a),m=a.pendingLanes,(l&261930)!==0&&(m&42)!==0?a===Gn?ci++:(ci=0,Gn=a):ci=0,di(0)}}function Wu(a,s){(a.pooledCacheLanes&=s)===0&&(s=a.pooledCache,s!=null&&(a.pooledCache=null,Yl(s)))}function Do(){return Uu(),Fu(),Xu(),Qu()}function Qu(){if(lt!==5)return!1;var a=Qa,s=zn;zn=0;var l=nr(Na),n=R.T,m=Y.p;try{Y.p=32>l?32:l,R.T=null,l=qn,qn=null;var y=Qa,S=Na;if(lt=0,rl=Qa=null,Na=0,(Re&6)!==0)throw Error(o(331));var _=Re;if(Re|=4,Eu(y.current),ju(y,y.current,S,l),Re=_,di(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Cl,y)}catch{}return!0}finally{Y.p=m,R.T=n,Wu(a,s)}}function $u(a,s,l){s=Yt(l,s),s=Sn(a.stateNode,s,2),a=qa(a,s,2),a!==null&&(El(a,2),ca(a))}function Ie(a,s,l){if(a.tag===3)$u(a,a,l);else for(;s!==null;){if(s.tag===3){$u(s,a,l);break}else if(s.tag===1){var n=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Wa===null||!Wa.has(n))){a=Yt(l,a),l=K0(2),n=qa(s,l,2),n!==null&&(Z0(l,n,s,a),El(n,2),ca(n));break}}s=s.return}}function Fn(a,s,l){var n=a.pingCache;if(n===null){n=a.pingCache=new Gp;var m=new Set;n.set(s,m)}else m=n.get(s),m===void 0&&(m=new Set,n.set(s,m));m.has(l)||(Pn=!0,m.add(l),a=Wp.bind(null,a,s,l),s.then(a,a))}function Wp(a,s,l){var n=a.pingCache;n!==null&&n.delete(s),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,Be===a&&(ke&l)===l&&(Fe===4||Fe===3&&(ke&62914560)===ke&&300>Ct()-ko?(Re&2)===0&&nl(a,0):Bn|=l,ol===ke&&(ol=0)),ca(a)}function Ku(a,s){s===0&&(s=Uc()),a=hs(a,s),a!==null&&(El(a,s),ca(a))}function Qp(a){var s=a.memoizedState,l=0;s!==null&&(l=s.retryLane),Ku(a,l)}function $p(a,s){var l=0;switch(a.tag){case 31:case 13:var n=a.stateNode,m=a.memoizedState;m!==null&&(l=m.retryLane);break;case 19:n=a.stateNode;break;case 22:n=a.stateNode._retryCache;break;default:throw Error(o(314))}n!==null&&n.delete(s),Ku(a,l)}function Kp(a,s){return kl(a,s)}var Ro=null,dl=null,Xn=!1,Oo=!1,Wn=!1,Ka=0;function ca(a){a!==dl&&a.next===null&&(dl===null?Ro=dl=a:dl=dl.next=a),Oo=!0,Xn||(Xn=!0,Jp())}function di(a,s){if(!Wn&&Oo){Wn=!0;do for(var l=!1,n=Ro;n!==null;){if(a!==0){var m=n.pendingLanes;if(m===0)var y=0;else{var S=n.suspendedLanes,_=n.pingedLanes;y=(1<<31-Et(42|a)+1)-1,y&=m&~(S&~_),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,tf(n,y))}else y=ke,y=Hi(n,n===Be?y:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(y&3)===0||Nl(n,y)||(l=!0,tf(n,y));n=n.next}while(l);Wn=!1}}function Zp(){Zu()}function Zu(){Oo=Xn=!1;var a=0;Ka!==0&&cy()&&(a=Ka);for(var s=Ct(),l=null,n=Ro;n!==null;){var m=n.next,y=Ju(n,s);y===0?(n.next=null,l===null?Ro=m:l.next=m,m===null&&(dl=l)):(l=n,(a!==0||(y&3)!==0)&&(Oo=!0)),n=m}lt!==0&&lt!==5||di(a),Ka!==0&&(Ka=0)}function Ju(a,s){for(var l=a.suspendedLanes,n=a.pingedLanes,m=a.expirationTimes,y=a.pendingLanes&-62914561;0<y;){var S=31-Et(y),_=1<<S,E=m[S];E===-1?((_&l)===0||(_&n)!==0)&&(m[S]=wm(_,s)):E<=s&&(a.expiredLanes|=_),y&=~_}if(s=Be,l=ke,l=Hi(a,a===s?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),n=a.callbackNode,l===0||a===s&&(Oe===2||Oe===9)||a.cancelPendingCommit!==null)return n!==null&&n!==null&&jl(n),a.callbackNode=null,a.callbackPriority=0;if((l&3)===0||Nl(a,l)){if(s=l&-l,s===a.callbackPriority)return s;switch(n!==null&&jl(n),nr(l)){case 2:case 8:l=Gc;break;case 32:l=Ri;break;case 268435456:l=Yc;break;default:l=Ri}return n=ef.bind(null,a),l=kl(l,n),a.callbackPriority=s,a.callbackNode=l,s}return n!==null&&n!==null&&jl(n),a.callbackPriority=2,a.callbackNode=null,2}function ef(a,s){if(lt!==0&&lt!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(Do()&&a.callbackNode!==l)return null;var n=ke;return n=Hi(a,a===Be?n:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),n===0?null:(Iu(a,n,s),Ju(a,Ct()),a.callbackNode!=null&&a.callbackNode===l?ef.bind(null,a):null)}function tf(a,s){if(Do())return null;Iu(a,s,!0)}function Jp(){uy(function(){(Re&6)!==0?kl(qc,Zp):Zu()})}function Qn(){if(Ka===0){var a=Qs;a===0&&(a=Oi,Oi<<=1,(Oi&261888)===0&&(Oi=256)),Ka=a}return Ka}function af(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:zi(""+a)}function sf(a,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,a.id&&l.setAttribute("form",a.id),s.parentNode.insertBefore(l,s),a=new FormData(a),l.parentNode.removeChild(l),a}function ey(a,s,l,n,m){if(s==="submit"&&l&&l.stateNode===m){var y=af((m[gt]||null).action),S=n.submitter;S&&(s=(s=S[gt]||null)?af(s.formAction):S.getAttribute("formAction"),s!==null&&(y=s,S=null));var _=new Ui("action","action",null,n,m);a.push({event:_,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ka!==0){var E=S?sf(m,S):new FormData(m);pn(l,{pending:!0,data:E,method:m.method,action:y},null,E)}}else typeof y=="function"&&(_.preventDefault(),E=S?sf(m,S):new FormData(m),pn(l,{pending:!0,data:E,method:m.method,action:y},y,E))},currentTarget:m}]})}}for(var $n=0;$n<Ar.length;$n++){var Kn=Ar[$n],ty=Kn.toLowerCase(),ay=Kn[0].toUpperCase()+Kn.slice(1);Jt(ty,"on"+ay)}Jt(Od,"onAnimationEnd"),Jt(Id,"onAnimationIteration"),Jt(Vd,"onAnimationStart"),Jt("dblclick","onDoubleClick"),Jt("focusin","onFocus"),Jt("focusout","onBlur"),Jt(gp,"onTransitionRun"),Jt(vp,"onTransitionStart"),Jt(xp,"onTransitionCancel"),Jt(Hd,"onTransitionEnd"),Is("onMouseEnter",["mouseout","mouseover"]),Is("onMouseLeave",["mouseout","mouseover"]),Is("onPointerEnter",["pointerout","pointerover"]),Is("onPointerLeave",["pointerout","pointerover"]),cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ui="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ui));function lf(a,s){s=(s&4)!==0;for(var l=0;l<a.length;l++){var n=a[l],m=n.event;n=n.listeners;e:{var y=void 0;if(s)for(var S=n.length-1;0<=S;S--){var _=n[S],E=_.instance,B=_.currentTarget;if(_=_.listener,E!==y&&m.isPropagationStopped())break e;y=_,m.currentTarget=B;try{y(m)}catch(W){Wi(W)}m.currentTarget=null,y=E}else for(S=0;S<n.length;S++){if(_=n[S],E=_.instance,B=_.currentTarget,_=_.listener,E!==y&&m.isPropagationStopped())break e;y=_,m.currentTarget=B;try{y(m)}catch(W){Wi(W)}m.currentTarget=null,y=E}}}}function we(a,s){var l=s[cr];l===void 0&&(l=s[cr]=new Set);var n=a+"__bubble";l.has(n)||(of(s,a,2,!1),l.add(n))}function Zn(a,s,l){var n=0;s&&(n|=4),of(l,a,n,s)}var Io="_reactListening"+Math.random().toString(36).slice(2);function Jn(a){if(!a[Io]){a[Io]=!0,Zc.forEach(function(l){l!=="selectionchange"&&(sy.has(l)||Zn(l,!1,a),Zn(l,!0,a))});var s=a.nodeType===9?a:a.ownerDocument;s===null||s[Io]||(s[Io]=!0,Zn("selectionchange",!1,s))}}function of(a,s,l,n){switch(If(s)){case 2:var m=Ay;break;case 8:m=Dy;break;default:m=mc}l=m.bind(null,s,l,a),m=void 0,!gr||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),n?m!==void 0?a.addEventListener(s,l,{capture:!0,passive:m}):a.addEventListener(s,l,!0):m!==void 0?a.addEventListener(s,l,{passive:m}):a.addEventListener(s,l,!1)}function ec(a,s,l,n,m){var y=n;if((s&1)===0&&(s&2)===0&&n!==null)e:for(;;){if(n===null)return;var S=n.tag;if(S===3||S===4){var _=n.stateNode.containerInfo;if(_===m)break;if(S===4)for(S=n.return;S!==null;){var E=S.tag;if((E===3||E===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;_!==null;){if(S=Ds(_),S===null)return;if(E=S.tag,E===5||E===6||E===26||E===27){n=y=S;continue e}_=_.parentNode}}n=n.return}dd(function(){var B=y,W=yr(l),$=[];e:{var L=Pd.get(a);if(L!==void 0){var G=Ui,ne=a;switch(a){case"keypress":if(Gi(l)===0)break e;case"keydown":case"keyup":G=$m;break;case"focusin":ne="focus",G=Tr;break;case"focusout":ne="blur",G=Tr;break;case"beforeblur":case"afterblur":G=Tr;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=hd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Pm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Jm;break;case Od:case Id:case Vd:G=zm;break;case Hd:G=tp;break;case"scroll":case"scrollend":G=Vm;break;case"wheel":G=sp;break;case"copy":case"cut":case"paste":G=Gm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=pd;break;case"toggle":case"beforetoggle":G=ip}var me=(s&4)!==0,Pe=!me&&(a==="scroll"||a==="scrollend"),I=me?L!==null?L+"Capture":null:L;me=[];for(var D=B,P;D!==null;){var Q=D;if(P=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||P===null||I===null||(Q=Rl(D,I),Q!=null&&me.push(fi(D,Q,P))),Pe)break;D=D.return}0<me.length&&(L=new G(L,ne,null,l,W),$.push({event:L,listeners:me}))}}if((s&7)===0){e:{if(L=a==="mouseover"||a==="pointerover",G=a==="mouseout"||a==="pointerout",L&&l!==pr&&(ne=l.relatedTarget||l.fromElement)&&(Ds(ne)||ne[As]))break e;if((G||L)&&(L=W.window===W?W:(L=W.ownerDocument)?L.defaultView||L.parentWindow:window,G?(ne=l.relatedTarget||l.toElement,G=B,ne=ne?Ds(ne):null,ne!==null&&(Pe=c(ne),me=ne.tag,ne!==Pe||me!==5&&me!==27&&me!==6)&&(ne=null)):(G=null,ne=B),G!==ne)){if(me=hd,Q="onMouseLeave",I="onMouseEnter",D="mouse",(a==="pointerout"||a==="pointerover")&&(me=pd,Q="onPointerLeave",I="onPointerEnter",D="pointer"),Pe=G==null?L:Dl(G),P=ne==null?L:Dl(ne),L=new me(Q,D+"leave",G,l,W),L.target=Pe,L.relatedTarget=P,Q=null,Ds(W)===B&&(me=new me(I,D+"enter",ne,l,W),me.target=P,me.relatedTarget=Pe,Q=me),Pe=Q,G&&ne)t:{for(me=ly,I=G,D=ne,P=0,Q=I;Q;Q=me(Q))P++;Q=0;for(var he=D;he;he=me(he))Q++;for(;0<P-Q;)I=me(I),P--;for(;0<Q-P;)D=me(D),Q--;for(;P--;){if(I===D||D!==null&&I===D.alternate){me=I;break t}I=me(I),D=me(D)}me=null}else me=null;G!==null&&rf($,L,G,me,!1),ne!==null&&Pe!==null&&rf($,Pe,ne,me,!0)}}e:{if(L=B?Dl(B):window,G=L.nodeName&&L.nodeName.toLowerCase(),G==="select"||G==="input"&&L.type==="file")var Ae=Md;else if(Sd(L))if(_d)Ae=pp;else{Ae=hp;var de=fp}else G=L.nodeName,!G||G.toLowerCase()!=="input"||L.type!=="checkbox"&&L.type!=="radio"?B&&mr(B.elementType)&&(Ae=Md):Ae=mp;if(Ae&&(Ae=Ae(a,B))){Td($,Ae,l,W);break e}de&&de(a,L,B),a==="focusout"&&B&&L.type==="number"&&B.memoizedProps.value!=null&&hr(L,"number",L.value)}switch(de=B?Dl(B):window,a){case"focusin":(Sd(de)||de.contentEditable==="true")&&(zs=de,Cr=B,zl=null);break;case"focusout":zl=Cr=zs=null;break;case"mousedown":Nr=!0;break;case"contextmenu":case"mouseup":case"dragend":Nr=!1,Dd($,l,W);break;case"selectionchange":if(bp)break;case"keydown":case"keyup":Dd($,l,W)}var Te;if(_r)e:{switch(a){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else Ls?vd(a,l)&&(je="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(je="onCompositionStart");je&&(yd&&l.locale!=="ko"&&(Ls||je!=="onCompositionStart"?je==="onCompositionEnd"&&Ls&&(Te=ud()):(Ia=W,vr="value"in Ia?Ia.value:Ia.textContent,Ls=!0)),de=Vo(B,je),0<de.length&&(je=new md(je,a,null,l,W),$.push({event:je,listeners:de}),Te?je.data=Te:(Te=xd(l),Te!==null&&(je.data=Te)))),(Te=rp?np(a,l):cp(a,l))&&(je=Vo(B,"onBeforeInput"),0<je.length&&(de=new md("onBeforeInput","beforeinput",null,l,W),$.push({event:de,listeners:je}),de.data=Te)),ey($,a,B,l,W)}lf($,s)})}function fi(a,s,l){return{instance:a,listener:s,currentTarget:l}}function Vo(a,s){for(var l=s+"Capture",n=[];a!==null;){var m=a,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Rl(a,l),m!=null&&n.unshift(fi(a,m,y)),m=Rl(a,s),m!=null&&n.push(fi(a,m,y))),a.tag===3)return n;a=a.return}return[]}function ly(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function rf(a,s,l,n,m){for(var y=s._reactName,S=[];l!==null&&l!==n;){var _=l,E=_.alternate,B=_.stateNode;if(_=_.tag,E!==null&&E===n)break;_!==5&&_!==26&&_!==27||B===null||(E=B,m?(B=Rl(l,y),B!=null&&S.unshift(fi(l,B,E))):m||(B=Rl(l,y),B!=null&&S.push(fi(l,B,E)))),l=l.return}S.length!==0&&a.push({event:s,listeners:S})}var iy=/\r\n?/g,oy=/\u0000|\uFFFD/g;function nf(a){return(typeof a=="string"?a:""+a).replace(iy,`
`).replace(oy,"")}function cf(a,s){return s=nf(s),nf(a)===s}function He(a,s,l,n,m,y){switch(l){case"children":typeof n=="string"?s==="body"||s==="textarea"&&n===""||Hs(a,n):(typeof n=="number"||typeof n=="bigint")&&s!=="body"&&Hs(a,""+n);break;case"className":Bi(a,"class",n);break;case"tabIndex":Bi(a,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":Bi(a,l,n);break;case"style":nd(a,n,y);break;case"data":if(s!=="object"){Bi(a,"data",n);break}case"src":case"href":if(n===""&&(s!=="a"||l!=="href")){a.removeAttribute(l);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){a.removeAttribute(l);break}n=zi(""+n),a.setAttribute(l,n);break;case"action":case"formAction":if(typeof n=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(s!=="input"&&He(a,s,"name",m.name,m,null),He(a,s,"formEncType",m.formEncType,m,null),He(a,s,"formMethod",m.formMethod,m,null),He(a,s,"formTarget",m.formTarget,m,null)):(He(a,s,"encType",m.encType,m,null),He(a,s,"method",m.method,m,null),He(a,s,"target",m.target,m,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){a.removeAttribute(l);break}n=zi(""+n),a.setAttribute(l,n);break;case"onClick":n!=null&&(a.onclick=ma);break;case"onScroll":n!=null&&we("scroll",a);break;case"onScrollEnd":n!=null&&we("scrollend",a);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(l=n.__html,l!=null){if(m.children!=null)throw Error(o(60));a.innerHTML=l}}break;case"multiple":a.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":a.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){a.removeAttribute("xlink:href");break}l=zi(""+n),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?a.setAttribute(l,""+n):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":n===!0?a.setAttribute(l,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?a.setAttribute(l,n):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?a.setAttribute(l,n):a.removeAttribute(l);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?a.removeAttribute(l):a.setAttribute(l,n);break;case"popover":we("beforetoggle",a),we("toggle",a),Pi(a,"popover",n);break;case"xlinkActuate":ha(a,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":ha(a,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":ha(a,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":ha(a,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":ha(a,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":ha(a,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":ha(a,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":ha(a,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":ha(a,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":Pi(a,"is",n);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Om.get(l)||l,Pi(a,l,n))}}function tc(a,s,l,n,m,y){switch(l){case"style":nd(a,n,y);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(l=n.__html,l!=null){if(m.children!=null)throw Error(o(60));a.innerHTML=l}}break;case"children":typeof n=="string"?Hs(a,n):(typeof n=="number"||typeof n=="bigint")&&Hs(a,""+n);break;case"onScroll":n!=null&&we("scroll",a);break;case"onScrollEnd":n!=null&&we("scrollend",a);break;case"onClick":n!=null&&(a.onclick=ma);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jc.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),s=l.slice(2,m?l.length-7:void 0),y=a[gt]||null,y=y!=null?y[l]:null,typeof y=="function"&&a.removeEventListener(s,y,m),typeof n=="function")){typeof y!="function"&&y!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(s,n,m);break e}l in a?a[l]=n:n===!0?a.setAttribute(l,""):Pi(a,l,n)}}}function ft(a,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":we("error",a),we("load",a);var n=!1,m=!1,y;for(y in l)if(l.hasOwnProperty(y)){var S=l[y];if(S!=null)switch(y){case"src":n=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:He(a,s,y,S,l,null)}}m&&He(a,s,"srcSet",l.srcSet,l,null),n&&He(a,s,"src",l.src,l,null);return;case"input":we("invalid",a);var _=y=S=m=null,E=null,B=null;for(n in l)if(l.hasOwnProperty(n)){var W=l[n];if(W!=null)switch(n){case"name":m=W;break;case"type":S=W;break;case"checked":E=W;break;case"defaultChecked":B=W;break;case"value":y=W;break;case"defaultValue":_=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(o(137,s));break;default:He(a,s,n,W,l,null)}}ld(a,y,_,E,B,S,m,!1);return;case"select":we("invalid",a),n=S=y=null;for(m in l)if(l.hasOwnProperty(m)&&(_=l[m],_!=null))switch(m){case"value":y=_;break;case"defaultValue":S=_;break;case"multiple":n=_;default:He(a,s,m,_,l,null)}s=y,l=S,a.multiple=!!n,s!=null?Vs(a,!!n,s,!1):l!=null&&Vs(a,!!n,l,!0);return;case"textarea":we("invalid",a),y=m=n=null;for(S in l)if(l.hasOwnProperty(S)&&(_=l[S],_!=null))switch(S){case"value":n=_;break;case"defaultValue":m=_;break;case"children":y=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(o(91));break;default:He(a,s,S,_,l,null)}od(a,n,m,y);return;case"option":for(E in l)if(l.hasOwnProperty(E)&&(n=l[E],n!=null))switch(E){case"selected":a.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:He(a,s,E,n,l,null)}return;case"dialog":we("beforetoggle",a),we("toggle",a),we("cancel",a),we("close",a);break;case"iframe":case"object":we("load",a);break;case"video":case"audio":for(n=0;n<ui.length;n++)we(ui[n],a);break;case"image":we("error",a),we("load",a);break;case"details":we("toggle",a);break;case"embed":case"source":case"link":we("error",a),we("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in l)if(l.hasOwnProperty(B)&&(n=l[B],n!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:He(a,s,B,n,l,null)}return;default:if(mr(s)){for(W in l)l.hasOwnProperty(W)&&(n=l[W],n!==void 0&&tc(a,s,W,n,l,void 0));return}}for(_ in l)l.hasOwnProperty(_)&&(n=l[_],n!=null&&He(a,s,_,n,l,null))}function ry(a,s,l,n){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,S=null,_=null,E=null,B=null,W=null;for(G in l){var $=l[G];if(l.hasOwnProperty(G)&&$!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":E=$;default:n.hasOwnProperty(G)||He(a,s,G,null,n,$)}}for(var L in n){var G=n[L];if($=l[L],n.hasOwnProperty(L)&&(G!=null||$!=null))switch(L){case"type":y=G;break;case"name":m=G;break;case"checked":B=G;break;case"defaultChecked":W=G;break;case"value":S=G;break;case"defaultValue":_=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(137,s));break;default:G!==$&&He(a,s,L,G,n,$)}}fr(a,S,_,E,B,W,y,m);return;case"select":G=S=_=L=null;for(y in l)if(E=l[y],l.hasOwnProperty(y)&&E!=null)switch(y){case"value":break;case"multiple":G=E;default:n.hasOwnProperty(y)||He(a,s,y,null,n,E)}for(m in n)if(y=n[m],E=l[m],n.hasOwnProperty(m)&&(y!=null||E!=null))switch(m){case"value":L=y;break;case"defaultValue":_=y;break;case"multiple":S=y;default:y!==E&&He(a,s,m,y,n,E)}s=_,l=S,n=G,L!=null?Vs(a,!!l,L,!1):!!n!=!!l&&(s!=null?Vs(a,!!l,s,!0):Vs(a,!!l,l?[]:"",!1));return;case"textarea":G=L=null;for(_ in l)if(m=l[_],l.hasOwnProperty(_)&&m!=null&&!n.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:He(a,s,_,null,n,m)}for(S in n)if(m=n[S],y=l[S],n.hasOwnProperty(S)&&(m!=null||y!=null))switch(S){case"value":L=m;break;case"defaultValue":G=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(o(91));break;default:m!==y&&He(a,s,S,m,n,y)}id(a,L,G);return;case"option":for(var ne in l)if(L=l[ne],l.hasOwnProperty(ne)&&L!=null&&!n.hasOwnProperty(ne))switch(ne){case"selected":a.selected=!1;break;default:He(a,s,ne,null,n,L)}for(E in n)if(L=n[E],G=l[E],n.hasOwnProperty(E)&&L!==G&&(L!=null||G!=null))switch(E){case"selected":a.selected=L&&typeof L!="function"&&typeof L!="symbol";break;default:He(a,s,E,L,n,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in l)L=l[me],l.hasOwnProperty(me)&&L!=null&&!n.hasOwnProperty(me)&&He(a,s,me,null,n,L);for(B in n)if(L=n[B],G=l[B],n.hasOwnProperty(B)&&L!==G&&(L!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(L!=null)throw Error(o(137,s));break;default:He(a,s,B,L,n,G)}return;default:if(mr(s)){for(var Pe in l)L=l[Pe],l.hasOwnProperty(Pe)&&L!==void 0&&!n.hasOwnProperty(Pe)&&tc(a,s,Pe,void 0,n,L);for(W in n)L=n[W],G=l[W],!n.hasOwnProperty(W)||L===G||L===void 0&&G===void 0||tc(a,s,W,L,n,G);return}}for(var I in l)L=l[I],l.hasOwnProperty(I)&&L!=null&&!n.hasOwnProperty(I)&&He(a,s,I,null,n,L);for($ in n)L=n[$],G=l[$],!n.hasOwnProperty($)||L===G||L==null&&G==null||He(a,s,$,L,n,G)}function df(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ny(){if(typeof performance.getEntriesByType=="function"){for(var a=0,s=0,l=performance.getEntriesByType("resource"),n=0;n<l.length;n++){var m=l[n],y=m.transferSize,S=m.initiatorType,_=m.duration;if(y&&_&&df(S)){for(S=0,_=m.responseEnd,n+=1;n<l.length;n++){var E=l[n],B=E.startTime;if(B>_)break;var W=E.transferSize,$=E.initiatorType;W&&df($)&&(E=E.responseEnd,S+=W*(E<_?1:(_-B)/(E-B)))}if(--n,s+=8*(y+S)/(m.duration/1e3),a++,10<a)break}}if(0<a)return s/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var ac=null,sc=null;function Ho(a){return a.nodeType===9?a:a.ownerDocument}function uf(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ff(a,s){if(a===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&s==="foreignObject"?0:a}function lc(a,s){return a==="textarea"||a==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ic=null;function cy(){var a=window.event;return a&&a.type==="popstate"?a===ic?!1:(ic=a,!0):(ic=null,!1)}var hf=typeof setTimeout=="function"?setTimeout:void 0,dy=typeof clearTimeout=="function"?clearTimeout:void 0,mf=typeof Promise=="function"?Promise:void 0,uy=typeof queueMicrotask=="function"?queueMicrotask:typeof mf<"u"?function(a){return mf.resolve(null).then(a).catch(fy)}:hf;function fy(a){setTimeout(function(){throw a})}function Za(a){return a==="head"}function pf(a,s){var l=s,n=0;do{var m=l.nextSibling;if(a.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(n===0){a.removeChild(m),ml(s);return}n--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")n++;else if(l==="html")hi(a.ownerDocument.documentElement);else if(l==="head"){l=a.ownerDocument.head,hi(l);for(var y=l.firstChild;y;){var S=y.nextSibling,_=y.nodeName;y[Al]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=S}}else l==="body"&&hi(a.ownerDocument.body);l=m}while(l);ml(s)}function yf(a,s){var l=a;a=0;do{var n=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),n&&n.nodeType===8)if(l=n.data,l==="/$"){if(a===0)break;a--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||a++;l=n}while(l)}function oc(a){var s=a.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":oc(l),dr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function hy(a,s,l,n){for(;a.nodeType===1;){var m=l;if(a.nodeName.toLowerCase()!==s.toLowerCase()){if(!n&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(n){if(!a[Al])switch(s){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(y=a.getAttribute("rel"),y==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(y!==m.rel||a.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||a.getAttribute("title")!==(m.title==null?null:m.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(y=a.getAttribute("src"),(y!==(m.src==null?null:m.src)||a.getAttribute("type")!==(m.type==null?null:m.type)||a.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(s==="input"&&a.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&a.getAttribute("name")===y)return a}else return a;if(a=Qt(a.nextSibling),a===null)break}return null}function my(a,s,l){if(s==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=Qt(a.nextSibling),a===null))return null;return a}function bf(a,s){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!s||(a=Qt(a.nextSibling),a===null))return null;return a}function rc(a){return a.data==="$?"||a.data==="$~"}function nc(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function py(a,s){var l=a.ownerDocument;if(a.data==="$~")a._reactRetry=s;else if(a.data!=="$?"||l.readyState!=="loading")s();else{var n=function(){s(),l.removeEventListener("DOMContentLoaded",n)};l.addEventListener("DOMContentLoaded",n),a._reactRetry=n}}function Qt(a){for(;a!=null;a=a.nextSibling){var s=a.nodeType;if(s===1||s===3)break;if(s===8){if(s=a.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return a}var cc=null;function gf(a){a=a.nextSibling;for(var s=0;a;){if(a.nodeType===8){var l=a.data;if(l==="/$"||l==="/&"){if(s===0)return Qt(a.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}a=a.nextSibling}return null}function vf(a){a=a.previousSibling;for(var s=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return a;s--}else l!=="/$"&&l!=="/&"||s++}a=a.previousSibling}return null}function xf(a,s,l){switch(s=Ho(l),a){case"html":if(a=s.documentElement,!a)throw Error(o(452));return a;case"head":if(a=s.head,!a)throw Error(o(453));return a;case"body":if(a=s.body,!a)throw Error(o(454));return a;default:throw Error(o(451))}}function hi(a){for(var s=a.attributes;s.length;)a.removeAttributeNode(s[0]);dr(a)}var $t=new Map,Sf=new Set;function Po(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ea=Y.d;Y.d={f:yy,r:by,D:gy,C:vy,L:xy,m:Sy,X:My,S:Ty,M:_y};function yy(){var a=Ea.f(),s=No();return a||s}function by(a){var s=Rs(a);s!==null&&s.tag===5&&s.type==="form"?H0(s):Ea.r(a)}var ul=typeof document>"u"?null:document;function Tf(a,s,l){var n=ul;if(n&&typeof s=="string"&&s){var m=qt(s);m='link[rel="'+a+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Sf.has(m)||(Sf.add(m),a={rel:a,crossOrigin:l,href:s},n.querySelector(m)===null&&(s=n.createElement("link"),ft(s,"link",a),ot(s),n.head.appendChild(s)))}}function gy(a){Ea.D(a),Tf("dns-prefetch",a,null)}function vy(a,s){Ea.C(a,s),Tf("preconnect",a,s)}function xy(a,s,l){Ea.L(a,s,l);var n=ul;if(n&&a&&s){var m='link[rel="preload"][as="'+qt(s)+'"]';s==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+qt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+qt(l.imageSizes)+'"]')):m+='[href="'+qt(a)+'"]';var y=m;switch(s){case"style":y=fl(a);break;case"script":y=hl(a)}$t.has(y)||(a=b({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:a,as:s},l),$t.set(y,a),n.querySelector(m)!==null||s==="style"&&n.querySelector(mi(y))||s==="script"&&n.querySelector(pi(y))||(s=n.createElement("link"),ft(s,"link",a),ot(s),n.head.appendChild(s)))}}function Sy(a,s){Ea.m(a,s);var l=ul;if(l&&a){var n=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+qt(n)+'"][href="'+qt(a)+'"]',y=m;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=hl(a)}if(!$t.has(y)&&(a=b({rel:"modulepreload",href:a},s),$t.set(y,a),l.querySelector(m)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(pi(y)))return}n=l.createElement("link"),ft(n,"link",a),ot(n),l.head.appendChild(n)}}}function Ty(a,s,l){Ea.S(a,s,l);var n=ul;if(n&&a){var m=Os(n).hoistableStyles,y=fl(a);s=s||"default";var S=m.get(y);if(!S){var _={loading:0,preload:null};if(S=n.querySelector(mi(y)))_.loading=5;else{a=b({rel:"stylesheet",href:a,"data-precedence":s},l),(l=$t.get(y))&&dc(a,l);var E=S=n.createElement("link");ot(E),ft(E,"link",a),E._p=new Promise(function(B,W){E.onload=B,E.onerror=W}),E.addEventListener("load",function(){_.loading|=1}),E.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Bo(S,s,n)}S={type:"stylesheet",instance:S,count:1,state:_},m.set(y,S)}}}function My(a,s){Ea.X(a,s);var l=ul;if(l&&a){var n=Os(l).hoistableScripts,m=hl(a),y=n.get(m);y||(y=l.querySelector(pi(m)),y||(a=b({src:a,async:!0},s),(s=$t.get(m))&&uc(a,s),y=l.createElement("script"),ot(y),ft(y,"link",a),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},n.set(m,y))}}function _y(a,s){Ea.M(a,s);var l=ul;if(l&&a){var n=Os(l).hoistableScripts,m=hl(a),y=n.get(m);y||(y=l.querySelector(pi(m)),y||(a=b({src:a,async:!0,type:"module"},s),(s=$t.get(m))&&uc(a,s),y=l.createElement("script"),ot(y),ft(y,"link",a),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},n.set(m,y))}}function Mf(a,s,l,n){var m=(m=ve.current)?Po(m):null;if(!m)throw Error(o(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=fl(l.href),l=Os(m).hoistableStyles,n=l.get(s),n||(n={type:"style",instance:null,count:0,state:null},l.set(s,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=fl(l.href);var y=Os(m).hoistableStyles,S=y.get(a);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(a,S),(y=m.querySelector(mi(a)))&&!y._p&&(S.instance=y,S.state.loading=5),$t.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},$t.set(a,l),y||wy(m,a,l,S.state))),s&&n===null)throw Error(o(528,""));return S}if(s&&n!==null)throw Error(o(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=hl(l),l=Os(m).hoistableScripts,n=l.get(s),n||(n={type:"script",instance:null,count:0,state:null},l.set(s,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,a))}}function fl(a){return'href="'+qt(a)+'"'}function mi(a){return'link[rel="stylesheet"]['+a+"]"}function _f(a){return b({},a,{"data-precedence":a.precedence,precedence:null})}function wy(a,s,l,n){a.querySelector('link[rel="preload"][as="style"]['+s+"]")?n.loading=1:(s=a.createElement("link"),n.preload=s,s.addEventListener("load",function(){return n.loading|=1}),s.addEventListener("error",function(){return n.loading|=2}),ft(s,"link",l),ot(s),a.head.appendChild(s))}function hl(a){return'[src="'+qt(a)+'"]'}function pi(a){return"script[async]"+a}function wf(a,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var n=a.querySelector('style[data-href~="'+qt(l.href)+'"]');if(n)return s.instance=n,ot(n),n;var m=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return n=(a.ownerDocument||a).createElement("style"),ot(n),ft(n,"style",m),Bo(n,l.precedence,a),s.instance=n;case"stylesheet":m=fl(l.href);var y=a.querySelector(mi(m));if(y)return s.state.loading|=4,s.instance=y,ot(y),y;n=_f(l),(m=$t.get(m))&&dc(n,m),y=(a.ownerDocument||a).createElement("link"),ot(y);var S=y;return S._p=new Promise(function(_,E){S.onload=_,S.onerror=E}),ft(y,"link",n),s.state.loading|=4,Bo(y,l.precedence,a),s.instance=y;case"script":return y=hl(l.src),(m=a.querySelector(pi(y)))?(s.instance=m,ot(m),m):(n=l,(m=$t.get(y))&&(n=b({},l),uc(n,m)),a=a.ownerDocument||a,m=a.createElement("script"),ot(m),ft(m,"link",n),a.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(n=s.instance,s.state.loading|=4,Bo(n,l.precedence,a));return s.instance}function Bo(a,s,l){for(var n=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=n.length?n[n.length-1]:null,y=m,S=0;S<n.length;S++){var _=n[S];if(_.dataset.precedence===s)y=_;else if(y!==m)break}y?y.parentNode.insertBefore(a,y.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(a,s.firstChild))}function dc(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.title==null&&(a.title=s.title)}function uc(a,s){a.crossOrigin==null&&(a.crossOrigin=s.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=s.referrerPolicy),a.integrity==null&&(a.integrity=s.integrity)}var Lo=null;function kf(a,s,l){if(Lo===null){var n=new Map,m=Lo=new Map;m.set(l,n)}else m=Lo,n=m.get(l),n||(n=new Map,m.set(l,n));if(n.has(a))return n;for(n.set(a,null),l=l.getElementsByTagName(a),m=0;m<l.length;m++){var y=l[m];if(!(y[Al]||y[nt]||a==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(s)||"";S=a+S;var _=n.get(S);_?_.push(y):n.set(S,[y])}}return n}function jf(a,s,l){a=a.ownerDocument||a,a.head.insertBefore(l,s==="title"?a.querySelector("head > title"):null)}function ky(a,s,l){if(l===1||s.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return a=s.disabled,typeof s.precedence=="string"&&a==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Cf(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function jy(a,s,l,n){if(l.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=fl(n.href),y=s.querySelector(mi(m));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(a.count++,a=zo.bind(a),s.then(a,a)),l.state.loading|=4,l.instance=y,ot(y);return}y=s.ownerDocument||s,n=_f(n),(m=$t.get(m))&&dc(n,m),y=y.createElement("link"),ot(y);var S=y;S._p=new Promise(function(_,E){S.onload=_,S.onerror=E}),ft(y,"link",n),l.instance=y}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(a.count++,l=zo.bind(a),s.addEventListener("load",l),s.addEventListener("error",l))}}var fc=0;function Cy(a,s){return a.stylesheets&&a.count===0&&Go(a,a.stylesheets),0<a.count||0<a.imgCount?function(l){var n=setTimeout(function(){if(a.stylesheets&&Go(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4+s);0<a.imgBytes&&fc===0&&(fc=62500*ny());var m=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Go(a,a.stylesheets),a.unsuspend)){var y=a.unsuspend;a.unsuspend=null,y()}},(a.imgBytes>fc?50:800)+s);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(n),clearTimeout(m)}}:null}function zo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Go(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var qo=null;function Go(a,s){a.stylesheets=null,a.unsuspend!==null&&(a.count++,qo=new Map,s.forEach(Ny,a),qo=null,zo.call(a))}function Ny(a,s){if(!(s.state.loading&4)){var l=qo.get(a);if(l)var n=l.get(null);else{l=new Map,qo.set(a,l);for(var m=a.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var S=m[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),n=S)}n&&l.set(null,n)}m=s.instance,S=m.getAttribute("data-precedence"),y=l.get(S)||n,y===n&&l.set(null,m),l.set(S,m),this.count++,n=zo.bind(this),m.addEventListener("load",n),m.addEventListener("error",n),y?y.parentNode.insertBefore(m,y.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(m,a.firstChild)),s.state.loading|=4}}var yi={$$typeof:j,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function Ey(a,s,l,n,m,y,S,_,E){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=or(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=or(0),this.hiddenUpdates=or(null),this.identifierPrefix=n,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function Nf(a,s,l,n,m,y,S,_,E,B,W,$){return a=new Ey(a,s,l,S,E,B,W,$,_),s=1,y===!0&&(s|=24),y=Dt(3,null,null,s),a.current=y,y.stateNode=a,s=Yr(),s.refCount++,a.pooledCache=s,s.refCount++,y.memoizedState={element:n,isDehydrated:l,cache:s},Wr(y),a}function Ef(a){return a?(a=Ys,a):Ys}function Af(a,s,l,n,m,y){m=Ef(m),n.context===null?n.context=m:n.pendingContext=m,n=za(s),n.payload={element:l},y=y===void 0?null:y,y!==null&&(n.callback=y),l=qa(a,n,s),l!==null&&(_t(l,a,s),Wl(l,a,s))}function Df(a,s){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<s?l:s}}function hc(a,s){Df(a,s),(a=a.alternate)&&Df(a,s)}function Rf(a){if(a.tag===13||a.tag===31){var s=hs(a,67108864);s!==null&&_t(s,a,67108864),hc(a,67108864)}}function Of(a){if(a.tag===13||a.tag===31){var s=Ht();s=rr(s);var l=hs(a,s);l!==null&&_t(l,a,s),hc(a,s)}}var Yo=!0;function Ay(a,s,l,n){var m=R.T;R.T=null;var y=Y.p;try{Y.p=2,mc(a,s,l,n)}finally{Y.p=y,R.T=m}}function Dy(a,s,l,n){var m=R.T;R.T=null;var y=Y.p;try{Y.p=8,mc(a,s,l,n)}finally{Y.p=y,R.T=m}}function mc(a,s,l,n){if(Yo){var m=pc(n);if(m===null)ec(a,s,n,Uo,l),Vf(a,n);else if(Oy(m,a,s,l,n))n.stopPropagation();else if(Vf(a,n),s&4&&-1<Ry.indexOf(a)){for(;m!==null;){var y=Rs(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=ns(y.pendingLanes);if(S!==0){var _=y;for(_.pendingLanes|=2,_.entangledLanes|=2;S;){var E=1<<31-Et(S);_.entanglements[1]|=E,S&=~E}ca(y),(Re&6)===0&&(jo=Ct()+500,di(0))}}break;case 31:case 13:_=hs(y,2),_!==null&&_t(_,y,2),No(),hc(y,2)}if(y=pc(n),y===null&&ec(a,s,n,Uo,l),y===m)break;m=y}m!==null&&n.stopPropagation()}else ec(a,s,n,null,l)}}function pc(a){return a=yr(a),yc(a)}var Uo=null;function yc(a){if(Uo=null,a=Ds(a),a!==null){var s=c(a);if(s===null)a=null;else{var l=s.tag;if(l===13){if(a=f(s),a!==null)return a;a=null}else if(l===31){if(a=h(s),a!==null)return a;a=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;a=null}else s!==a&&(a=null)}}return Uo=a,null}function If(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gm()){case qc:return 2;case Gc:return 8;case Ri:case vm:return 32;case Yc:return 268435456;default:return 32}default:return 32}}var bc=!1,Ja=null,es=null,ts=null,bi=new Map,gi=new Map,as=[],Ry="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vf(a,s){switch(a){case"focusin":case"focusout":Ja=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":bi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":gi.delete(s.pointerId)}}function vi(a,s,l,n,m,y){return a===null||a.nativeEvent!==y?(a={blockedOn:s,domEventName:l,eventSystemFlags:n,nativeEvent:y,targetContainers:[m]},s!==null&&(s=Rs(s),s!==null&&Rf(s)),a):(a.eventSystemFlags|=n,s=a.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),a)}function Oy(a,s,l,n,m){switch(s){case"focusin":return Ja=vi(Ja,a,s,l,n,m),!0;case"dragenter":return es=vi(es,a,s,l,n,m),!0;case"mouseover":return ts=vi(ts,a,s,l,n,m),!0;case"pointerover":var y=m.pointerId;return bi.set(y,vi(bi.get(y)||null,a,s,l,n,m)),!0;case"gotpointercapture":return y=m.pointerId,gi.set(y,vi(gi.get(y)||null,a,s,l,n,m)),!0}return!1}function Hf(a){var s=Ds(a.target);if(s!==null){var l=c(s);if(l!==null){if(s=l.tag,s===13){if(s=f(l),s!==null){a.blockedOn=s,$c(a.priority,function(){Of(l)});return}}else if(s===31){if(s=h(l),s!==null){a.blockedOn=s,$c(a.priority,function(){Of(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Fo(a){if(a.blockedOn!==null)return!1;for(var s=a.targetContainers;0<s.length;){var l=pc(a.nativeEvent);if(l===null){l=a.nativeEvent;var n=new l.constructor(l.type,l);pr=n,l.target.dispatchEvent(n),pr=null}else return s=Rs(l),s!==null&&Rf(s),a.blockedOn=l,!1;s.shift()}return!0}function Pf(a,s,l){Fo(a)&&l.delete(s)}function Iy(){bc=!1,Ja!==null&&Fo(Ja)&&(Ja=null),es!==null&&Fo(es)&&(es=null),ts!==null&&Fo(ts)&&(ts=null),bi.forEach(Pf),gi.forEach(Pf)}function Xo(a,s){a.blockedOn===s&&(a.blockedOn=null,bc||(bc=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Iy)))}var Wo=null;function Bf(a){Wo!==a&&(Wo=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Wo===a&&(Wo=null);for(var s=0;s<a.length;s+=3){var l=a[s],n=a[s+1],m=a[s+2];if(typeof n!="function"){if(yc(n||l)===null)continue;break}var y=Rs(l);y!==null&&(a.splice(s,3),s-=3,pn(y,{pending:!0,data:m,method:l.method,action:n},n,m))}}))}function ml(a){function s(E){return Xo(E,a)}Ja!==null&&Xo(Ja,a),es!==null&&Xo(es,a),ts!==null&&Xo(ts,a),bi.forEach(s),gi.forEach(s);for(var l=0;l<as.length;l++){var n=as[l];n.blockedOn===a&&(n.blockedOn=null)}for(;0<as.length&&(l=as[0],l.blockedOn===null);)Hf(l),l.blockedOn===null&&as.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(n=0;n<l.length;n+=3){var m=l[n],y=l[n+1],S=m[gt]||null;if(typeof y=="function")S||Bf(l);else if(S){var _=null;if(y&&y.hasAttribute("formAction")){if(m=y,S=y[gt]||null)_=S.formAction;else if(yc(m)!==null)continue}else _=S.action;typeof _=="function"?l[n+1]=_:(l.splice(n,3),n-=3),Bf(l)}}}function Lf(){function a(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return m=S})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),n||setTimeout(l,20)}function l(){if(!n&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,m=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){n=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function gc(a){this._internalRoot=a}Qo.prototype.render=gc.prototype.render=function(a){var s=this._internalRoot;if(s===null)throw Error(o(409));var l=s.current,n=Ht();Af(l,n,a,s,null,null)},Qo.prototype.unmount=gc.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var s=a.containerInfo;Af(a.current,2,null,a,null,null),No(),s[As]=null}};function Qo(a){this._internalRoot=a}Qo.prototype.unstable_scheduleHydration=function(a){if(a){var s=Qc();a={blockedOn:null,target:a,priority:s};for(var l=0;l<as.length&&s!==0&&s<as[l].priority;l++);as.splice(l,0,a),l===0&&Hf(a)}};var zf=t.version;if(zf!=="19.2.1")throw Error(o(527,zf,"19.2.1"));Y.findDOMNode=function(a){var s=a._reactInternals;if(s===void 0)throw typeof a.render=="function"?Error(o(188)):(a=Object.keys(a).join(","),Error(o(268,a)));return a=u(s),a=a!==null?g(a):null,a=a===null?null:a.stateNode,a};var Vy={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$o.isDisabled&&$o.supportsFiber)try{Cl=$o.inject(Vy),Nt=$o}catch{}}return Si.createRoot=function(a,s){if(!r(a))throw Error(o(299));var l=!1,n="",m=X0,y=W0,S=Q0;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(n=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=Nf(a,1,!1,null,null,l,n,null,m,y,S,Lf),a[As]=s.current,Jn(a),new gc(s)},Si.hydrateRoot=function(a,s,l){if(!r(a))throw Error(o(299));var n=!1,m="",y=X0,S=W0,_=Q0,E=null;return l!=null&&(l.unstable_strictMode===!0&&(n=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(_=l.onRecoverableError),l.formState!==void 0&&(E=l.formState)),s=Nf(a,1,!0,s,l??null,n,m,E,y,S,_,Lf),s.context=Ef(null),l=s.current,n=Ht(),n=rr(n),m=za(n),m.callback=null,qa(l,m,n),l=n,s.current.lanes=l,El(s,l),ca(s),a[As]=s.current,Jn(a),new Qo(s)},Si.version="19.2.1",Si}var Kf;function Xy(){if(Kf)return Sc.exports;Kf=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Sc.exports=Fy(),Sc.exports}var Wy=Xy();const Qy=Yh(Wy);var se=(e=>(e.BOOT="BOOT",e.WELCOME="WELCOME",e.SETTINGS="SETTINGS",e.ENCYCLOPEDIA="ENCYCLOPEDIA",e.ACHIEVEMENTS="ACHIEVEMENTS",e.LEADERBOARD="LEADERBOARD",e.DIFFICULTY_SELECT="DIFFICULTY_SELECT",e.CHARACTER_SELECT="CHARACTER_SELECT",e.STORY="STORY",e.PLAYING="PLAYING",e.WAVE_SUMMARY="WAVE_SUMMARY",e.SHOP="SHOP",e.BOSS_INTRO="BOSS_INTRO",e.ELITE_INTRO="ELITE_INTRO",e.GAME_OVER="GAME_OVER",e.VICTORY="VICTORY",e.LINK_CODE="LINK_CODE",e.SANDBOX="SANDBOX",e))(se||{});const $y={duration:4.5,volume:.7,components:[{type:"sine",startFreq:60,endFreq:30,duration:4,volume:.8,attack:.1,rampType:"exponential"},{type:"sawtooth",startFreq:55,endFreq:55,duration:3.5,volume:.25,attack:.5,filterType:"lowpass",filterFreq:100,filterEndFreq:600,rampType:"linear"},{type:"triangle",startFreq:220,duration:3,volume:.05,attack:1,filterType:"highpass",filterFreq:1e3},{type:"sawtooth",startFreq:56,duration:3.5,volume:.2,attack:.5,filterType:"lowpass",filterFreq:100,filterEndFreq:500}]},Ky={duration:5,volume:.5,components:[{type:"triangle",startFreq:220,duration:4,volume:.15,attack:.5},{type:"triangle",startFreq:261.63,duration:4,volume:.15,attack:.6},{type:"triangle",startFreq:329.63,duration:4,volume:.15,attack:.7},{type:"triangle",startFreq:392,duration:4,volume:.15,attack:.8},{type:"sine",startFreq:493.88,duration:3.5,volume:.1,attack:.9},{type:"sine",startFreq:1174.66,duration:3,volume:.05,attack:.2},{type:"sine",startFreq:1567.98,duration:3,volume:.03,attack:1.5}]},Zy={duration:6,volume:.5,components:[{type:"square",startFreq:60,duration:6,volume:.15,filterFreq:100,filterType:"lowpass"},{type:"sawtooth",startFreq:62,duration:6,volume:.15,filterFreq:120,filterType:"lowpass"},{type:"sine",startFreq:12e3,endFreq:12e3,duration:5,volume:.01}]},Jy={duration:.8,volume:.6,type:"noise",attack:0,filterType:"highpass",startFreq:500,endFreq:5e3,rampType:"exponential"},Ko={boot_engine:$y,boot_studio:Ky,boot_warning:Zy,boot_transition:Jy,player_shoot:[{type:"triangle",startFreq:220,endFreq:50,duration:.15,volume:.1,rampType:"exponential"},{type:"triangle",startFreq:240,endFreq:50,duration:.15,volume:.1,rampType:"exponential"},{type:"triangle",startFreq:200,endFreq:50,duration:.15,volume:.1,rampType:"exponential"}],ui_coin:{type:"sine",startFreq:1200,endFreq:1600,duration:.3,volume:.1,rampType:"exponential"},ui_hit:{type:"triangle",startFreq:100,endFreq:50,duration:.1,volume:.05,rampType:"linear"},ui_typewriter:{type:"sine",startFreq:800,duration:.06,volume:.03,rampType:"exponential"},ui_shield_break:{type:"triangle",startFreq:800,endFreq:200,duration:.3,volume:.1,rampType:"exponential"},ui_powerup:{type:"sine",startFreq:400,endFreq:800,duration:.2,volume:.1,rampType:"linear"},ui_glitch_severe:{duration:3.5,volume:.05,components:[{type:"sawtooth",startFreq:55,duration:3.5,volume:.05,attack:1.5,filterType:"lowpass",filterFreq:120,rampType:"linear"},{type:"noise",duration:3.5,volume:.04,attack:1.5,filterType:"bandpass",filterFreq:1500,rampType:"linear"}]},ui_glitch_minor:{type:"noise",duration:.005,volume:.08,filterType:"highpass",filterFreq:3e3},ui_static_tick:{type:"noise",duration:.02,volume:.02,filterFreq:4e3},ui_power_down:{type:"sine",startFreq:2e3,endFreq:50,duration:.4,volume:.03,rampType:"exponential"},pacman_waka:{type:"triangle",startFreq:300,endFreq:50,duration:.15,volume:.2,rampType:"linear"},pacman_power_up:{duration:1.5,volume:.3,components:[{type:"sine",startFreq:400,endFreq:1200,duration:1.5,volume:.2,rampType:"linear"},{type:"square",startFreq:600,endFreq:800,duration:1.5,volume:.05,rampType:"linear"}]},pacman_eat_ghost:{type:"sawtooth",startFreq:800,endFreq:1600,duration:.2,volume:.3,rampType:"exponential"},revive_error:{duration:.5,volume:.5,components:[{type:"sawtooth",startFreq:50,endFreq:10,duration:.3,volume:.4,distortion:50},{type:"square",startFreq:2e3,endFreq:500,duration:.1,volume:.2,rampType:"exponential"},{type:"noise",duration:.2,volume:.3,filterType:"highpass",filterFreq:1e3}]},revive_inject:{duration:2,volume:.4,components:[{type:"square",startFreq:200,endFreq:1200,duration:2,volume:.1,rampType:"linear"},{type:"sine",startFreq:30,endFreq:100,duration:2,volume:.4,attack:.5},{type:"sawtooth",startFreq:800,endFreq:200,duration:.1,volume:.05}]},revive_reboot:{duration:1.5,volume:.7,components:[{type:"sine",startFreq:150,endFreq:10,duration:1,volume:.6,rampType:"exponential"},{type:"triangle",startFreq:1e3,endFreq:2e3,duration:.5,volume:.2,attack:.05},{type:"noise",duration:.5,volume:.4,filterFreq:500,filterEndFreq:100,filterType:"lowpass"}]},explosion_normal:[{type:"triangle",startFreq:80,endFreq:10,duration:.6,volume:.6,filterFreq:300,filterEndFreq:50,rampType:"exponential"},{type:"sine",startFreq:120,endFreq:20,duration:.4,volume:.8,filterFreq:150,rampType:"exponential"}],explosion_cyber:[{duration:.8,volume:.4,components:[{type:"sine",startFreq:100,endFreq:5,duration:.8,volume:.4,rampType:"exponential"},{type:"noise",duration:.5,volume:.2,filterFreq:800,filterEndFreq:20,rampType:"exponential",distortion:5},{type:"sawtooth",startFreq:1200,endFreq:100,duration:.25,volume:.04,distortion:20,rampType:"exponential"}]},{duration:.6,volume:.4,components:[{type:"triangle",startFreq:140,endFreq:30,duration:.4,volume:.25,rampType:"exponential"},{type:"noise",duration:.3,volume:.15,filterFreq:2e3,filterEndFreq:50,rampType:"exponential",distortion:10},{type:"sawtooth",startFreq:1800,endFreq:100,duration:.15,volume:.03,rampType:"exponential"}]}],neon_launch:{duration:3,volume:.35,components:[{type:"triangle",startFreq:440,endFreq:440,duration:2.5,volume:.2,attack:.5,filterFreq:800,filterType:"lowpass"},{type:"sine",startFreq:880,endFreq:880,duration:2,volume:.05,attack:.2},{type:"sawtooth",startFreq:50,endFreq:80,duration:1.5,volume:.25,filterFreq:150,filterType:"lowpass",attack:.1},{type:"noise",duration:2,volume:.1,filterFreq:400,filterEndFreq:1200,filterType:"bandpass",attack:.5}]},neon_impact:{duration:.4,volume:.6,components:[{type:"sawtooth",startFreq:800,endFreq:100,duration:.2,volume:.15,rampType:"exponential"},{type:"sine",startFreq:150,endFreq:50,duration:.2,volume:.3,rampType:"exponential"}]},shoot_keyboard_man:{type:"sine",startFreq:600,endFreq:300,duration:.1,volume:.02,rampType:"exponential"},shoot_marketing_account:{type:"triangle",startFreq:150,endFreq:50,duration:.15,volume:.025,filterFreq:400,rampType:"linear"},shoot_boss_kpi:{type:"sawtooth",startFreq:80,endFreq:40,duration:.2,volume:.04,filterFreq:200,rampType:"linear"},shoot_boss_glitch:{type:"square",startFreq:120,endFreq:30,duration:.2,volume:.04,filterFreq:500,rampType:"exponential"},shoot_boss_ai:{type:"sawtooth",startFreq:220,endFreq:55,duration:.2,volume:.04,filterFreq:800,rampType:"exponential"},shoot_da_ye:{type:"sine",startFreq:300,endFreq:100,duration:.2,volume:.02,rampType:"exponential"},shoot_chi_gua:{type:"square",startFreq:800,duration:.05,volume:.01,filterFreq:1e3},shoot_default:{type:"triangle",startFreq:300,endFreq:100,duration:.1,volume:.015,rampType:"exponential"}},Zf=[[261.63,329.63,392,493.88],[174.61,220,261.63,329.63],[220,261.63,329.63,392],[196,246.94,293.66,329.63]],Jf=[523.25,587.33,659.25,783.99,880],eh=[261.63,329.63,392,523.25],eb={length:8,chords:[{time:0,duration:4,notes:[130.81,155.56,196,233.08]},{time:4,duration:4,notes:[103.83,130.81,155.56,196]}],melody:[{time:0,freq:783.99,duration:.1,vol:.04},{time:.5,freq:1174.66,duration:.1,vol:.02},{time:4,freq:622.25,duration:.1,vol:.04},{time:4.5,freq:932.33,duration:.1,vol:.02},{time:7,freq:523.25,duration:.1,vol:.03}]},th=[261.63,293.66,329.63,392,440],tb=45,ab=150,ah=[110,110,130.81,146.83,130.81,110,164.81,146.83,130.81,110,110,220,196,220,261.63,220,196,164.81,130.81,146.83,110,87.31,87.31,110,130.81],sh=[220,261.63,196,164.81,146.83,130.81],sb=[523.25,659.25,783.99,1046.5];class lb{constructor(t,i,o,r){this.activeNodes=[],this.activeTimeouts=[],this.currentType="none",this.ctx=t,this.outputGain=i,this.playTone=o,this.getBuffer=r}stop(){this.outputGain.gain.cancelScheduledValues(this.ctx.currentTime),this.activeNodes.forEach(t=>{try{t.stop&&t.stop()}catch{}try{t.disconnect()}catch{}}),this.activeNodes=[],this.activeTimeouts.forEach(clearTimeout),this.activeTimeouts=[],this.currentType="none"}fadeIn(t=2,i=.5){const o=this.ctx.currentTime;this.outputGain.gain.cancelScheduledValues(o),this.outputGain.gain.setValueAtTime(0,o),this.outputGain.gain.linearRampToValueAtTime(i,o+t)}registerNode(...t){this.activeNodes.push(...t)}setTimeout(t,i){const o=window.setTimeout(()=>{const r=this.activeTimeouts.indexOf(o);r>-1&&this.activeTimeouts.splice(r,1),t()},i);return this.activeTimeouts.push(o),o}playAmbient(t){if(this.currentType==="ambient")return;this.stop(),this.currentType="ambient",this.fadeIn(6,.4);let i=0;const o=()=>{if(this.currentType!=="ambient")return;Zf[i].forEach(f=>{const h=this.ctx.createOscillator(),p=this.ctx.createGain();h.type="sine",h.frequency.value=f+(Math.random()-.5)*2;const u=this.ctx.currentTime,g=2+Math.random(),b=4+Math.random();p.gain.setValueAtTime(0,u),p.gain.linearRampToValueAtTime(.03,u+g),p.gain.exponentialRampToValueAtTime(.001,u+g+b),h.connect(p),p.connect(this.outputGain),h.start(u),h.stop(u+g+b+1),this.registerNode(h,p)}),i=(i+1)%Zf.length,this.setTimeout(o,6e3)},r=()=>{if(this.currentType!=="ambient")return;const c=Jf[Math.floor(Math.random()*Jf.length)];this.playTone({type:"triangle",startFreq:c,duration:2,volume:.015,rampType:"linear"}),this.setTimeout(r,2e3+Math.random()*4e3)};o(),r()}playStory(){if(this.currentType==="story")return;this.stop(),this.currentType="story";const t=()=>{const o=this.getBuffer("story_theme");if(o){this.activeTimeouts.forEach(clearTimeout),this.activeTimeouts=[],this.fadeIn(2,.6);const r=this.ctx.createBufferSource();return r.buffer=o,r.loop=!0,r.connect(this.outputGain),r.start(),this.registerNode(r),!0}return!1};if(t())return;console.log("Story BGM not ready, polling..."),this.fadeIn(1,.5);const i=()=>{if(this.currentType!=="story")return;if(t()){console.log("Story BGM loaded, switching.");return}const o=eh[Math.floor(Math.random()*eh.length)]*(Math.random()>.8?2:1);this.playTone({type:"triangle",startFreq:o,duration:.2,volume:.05}),this.setTimeout(i,200)};i()}playBossIntro(){if(this.currentType==="boss")return;this.stop(),this.currentType="boss",this.outputGain.gain.value=.6;const t=()=>{this.currentType==="boss"&&this.playTone({type:"triangle",startFreq:80,endFreq:30,duration:.5,volume:.4,rampType:"exponential"})},i=()=>{if(this.currentType!=="boss")return;const c=this.ctx.createOscillator(),f=this.ctx.createGain();c.type="sawtooth",c.frequency.value=800;const h=this.ctx.createOscillator();h.frequency.value=15;const p=this.ctx.createGain();p.gain.value=20,h.connect(p),p.connect(c.frequency);const u=this.ctx.currentTime;f.gain.setValueAtTime(0,u),f.gain.linearRampToValueAtTime(.03,u+1),f.gain.linearRampToValueAtTime(0,u+2),c.connect(f),f.connect(this.outputGain),c.start(),h.start(),c.stop(u+2.2),h.stop(u+2.2),this.registerNode(c,f,h,p)};let o=0;const r=()=>{this.currentType==="boss"&&(o%4===0&&t(),o%8===6&&t(),o%16===0&&i(),o++,this.setTimeout(r,300))};r()}playShop(){if(this.currentType==="shop")return;this.stop(),this.currentType="shop",this.fadeIn(1,.4);const t=()=>{if(this.currentType!=="shop")return;const i=Math.floor(Math.random()*th.length);let o=th[i];Math.random()>.7&&(o/=2),this.playTone({type:Math.random()>.5?"sine":"triangle",startFreq:o,duration:1,volume:.03}),this.setTimeout(t,[400,600,800][Math.floor(Math.random()*3)])};t()}playBattle(){if(this.currentType==="battle")return;this.stop(),this.currentType="battle",this.fadeIn(2,.5);const t=this.ctx.createOscillator(),i=this.ctx.createGain();t.type="sawtooth",t.frequency.value=tb;const o=this.ctx.createBiquadFilter();o.type="lowpass",o.frequency.value=ab,t.connect(o),o.connect(i),i.connect(this.outputGain),i.gain.value=.02,t.start(),this.registerNode(t,i,o);let r=0;const c=()=>{this.currentType==="battle"&&(this.playTone({type:"square",startFreq:ah[r],duration:.35,volume:.015}),r=(r+1)%ah.length,this.setTimeout(c,180))};c()}playGameOver(){if(this.currentType==="gameover")return;this.stop(),this.currentType="gameover",this.outputGain.gain.value=.5;let t=0;const i=()=>{this.currentType==="gameover"&&(this.playTone({type:"sine",startFreq:sh[t],duration:2.1,volume:.04}),t=(t+1)%sh.length,this.setTimeout(i,1500))};i()}}class ib{constructor(){this.ctx=null,this.masterGain=null,this.bgmGain=null,this.musicDirector=null,this.muted=!1,this.volume=.5,this.noiseBuffer=null,this.bufferCache=new Map,this.lastPlayed={},this.COOLDOWNS={explosion_cyber:80,explosion_normal:80,player_shoot:50,ui_coin:40,ui_hit:50,ui_typewriter:30,neon_impact:80,ui_glitch_minor:80},this.DEFAULT_COOLDOWN=30,this.hoverNodes=[];try{const t=window.AudioContext||window.webkitAudioContext;this.ctx=new t,this.masterGain=this.ctx.createGain(),this.masterGain.connect(this.ctx.destination),this.masterGain.gain.value=this.volume,this.bgmGain=this.ctx.createGain(),this.bgmGain.connect(this.masterGain),this.bgmGain.gain.value=1,this.createNoiseBuffer(),this.musicDirector=new lb(this.ctx,this.bgmGain,this.playTone.bind(this),i=>this.bufferCache.get(i)),this.bakeCommonSounds(),this.bakeStoryBGM()}catch{console.error("Web Audio API not supported")}}createNoiseBuffer(){if(!this.ctx)return;const t=this.ctx.sampleRate*2;this.noiseBuffer=this.ctx.createBuffer(1,t,this.ctx.sampleRate);const i=this.noiseBuffer.getChannelData(0);for(let o=0;o<t;o++)i[o]=Math.random()*2-1}async bakeCommonSounds(){const t=["explosion_cyber","neon_launch","neon_impact","explosion_normal","player_shoot","ui_coin","ui_hit","revive_enter","revive_shatter"];for(const i of t)this.bufferCache.has(i)||await this.bakeAudio(i)}async bakeStoryBGM(){if(this.bufferCache.has("story_theme"))return;const t=eb,i=t.length,o=44100;try{const r=new OfflineAudioContext(2,o*i,o),c=r.createBufferSource(),f=r.createBuffer(1,o*i,o),h=f.getChannelData(0);let p=0;for(let b=0;b<h.length;b++){const v=Math.random()*2-1;h[b]=(p+.02*v)/1.02,p=h[b],h[b]*=3.5}c.buffer=f,c.loop=!0;const u=r.createGain();u.gain.value=.03,c.connect(u),u.connect(r.destination),c.start(),t.chords.forEach(b=>{const v=r.createGain();v.gain.value=.1,v.gain.setValueAtTime(0,b.time),v.gain.linearRampToValueAtTime(.08,b.time+.8),v.gain.setValueAtTime(.08,b.time+b.duration-.8),v.gain.linearRampToValueAtTime(0,b.time+b.duration);const x=r.createBiquadFilter();x.type="lowpass",x.frequency.value=400,b.notes.forEach(T=>{const M=r.createOscillator();M.type="sawtooth",M.frequency.value=T;const k=r.createOscillator();k.type="sawtooth",k.frequency.value=T,k.detune.value=8,M.connect(x),k.connect(x),M.start(b.time),M.stop(b.time+b.duration),k.start(b.time),k.stop(b.time+b.duration)}),x.connect(v),v.connect(r.destination)}),t.melody.forEach(b=>{const v=r.createOscillator();v.type="sine",v.frequency.value=b.freq;const x=r.createGain();x.gain.setValueAtTime(0,b.time),x.gain.linearRampToValueAtTime(b.vol,b.time+.05),x.gain.exponentialRampToValueAtTime(.001,b.time+b.duration);const T=r.createOscillator();T.type="sine",T.frequency.value=b.freq;const M=r.createGain();M.gain.setValueAtTime(0,b.time+.25),M.gain.linearRampToValueAtTime(b.vol*.4,b.time+.3),M.gain.exponentialRampToValueAtTime(.001,b.time+b.duration+.25),v.connect(x),T.connect(M),x.connect(r.destination),M.connect(r.destination),v.start(b.time),v.stop(b.time+b.duration+.1),T.start(b.time+.25),T.stop(b.time+b.duration+.35)});const g=await r.startRendering();this.bufferCache.set("story_theme",g)}catch(r){console.warn("Failed to bake story BGM",r)}}getMaxDuration(t){return t.components?Math.max(...t.components.map(i=>this.getMaxDuration(i))):t.duration}async bakeAudio(t){const i=Ko[t];if(!i)return;const o=Array.isArray(i)?i[0]:i,r=this.getMaxDuration(o)+.2,c=44100;try{const f=new OfflineAudioContext(1,c*r,c);let h=null;this.noiseBuffer&&(h=f.createBuffer(1,this.noiseBuffer.length,this.noiseBuffer.sampleRate),h.getChannelData(0).set(this.noiseBuffer.getChannelData(0))),this.scheduleSound(f,f.destination,o,0,0,h);const p=await f.startRendering();this.bufferCache.set(t,p)}catch(f){console.warn(`Failed to bake audio ${t}`,f)}}setVolume(t){this.volume=Math.max(0,Math.min(1,t)),this.masterGain&&(this.masterGain.gain.value=this.muted?0:this.volume)}resume(){this.ctx&&this.ctx.state==="suspended"&&this.ctx.resume()}setMute(t){this.muted=t,this.masterGain&&(this.masterGain.gain.value=t?0:this.volume),t?this.ctx&&this.ctx.state==="running"&&this.ctx.suspend():this.ctx&&this.ctx.state==="suspended"&&this.ctx.resume()}stopBGM(){this.musicDirector&&this.musicDirector.stop()}makeDistortionCurve(t){const i=typeof t=="number"?t:50,o=44100,r=new Float32Array(o),c=Math.PI/180;for(let f=0;f<o;++f){const h=f*2/o-1;r[f]=(3+i)*h*20*c/(Math.PI+i*Math.abs(h))}return r}startHoverStatic(){if(this.muted||!this.ctx||!this.masterGain)return;this.stopHoverStatic();const t=this.ctx.currentTime;this.noiseBuffer||this.createNoiseBuffer();const i=this.ctx.createBufferSource();i.buffer=this.noiseBuffer,i.loop=!0;const o=this.ctx.createBiquadFilter();o.type="bandpass",o.frequency.setValueAtTime(400,t),o.frequency.linearRampToValueAtTime(600,t+10),o.Q.value=1;const r=this.ctx.createGain();r.gain.setValueAtTime(0,t),r.gain.linearRampToValueAtTime(.025,t+1),i.connect(o),o.connect(r),r.connect(this.masterGain),i.start(t),this.hoverNodes=[i,o,r]}stopHoverStatic(){if(this.hoverNodes.length===0||!this.ctx)return;const t=this.ctx.currentTime,i=this.hoverNodes[this.hoverNodes.length-1];if(i)try{i.gain.cancelScheduledValues(t),i.gain.setValueAtTime(i.gain.value,t),i.gain.exponentialRampToValueAtTime(.001,t+.8)}catch{}const o=this.hoverNodes;this.hoverNodes=[],setTimeout(()=>{o.forEach(r=>{try{r.stop&&r.stop()}catch{}try{r.disconnect()}catch{}})},1e3)}playAtmosphericGlitch(){if(this.muted||!this.ctx||!this.masterGain)return;const t=this.ctx.currentTime,i=2.5+Math.random()*2;this.noiseBuffer||this.createNoiseBuffer();const o=this.ctx.createBufferSource();o.buffer=this.noiseBuffer,o.loop=!0;const r=this.ctx.createBiquadFilter();r.type="bandpass",r.Q.value=1.5,r.frequency.setValueAtTime(1500,t),r.frequency.linearRampToValueAtTime(1200+Math.random()*600,t+i);const c=this.ctx.createGain(),f=.05;c.gain.setValueAtTime(0,t);let h=t;const p=.8,u=.5,g=t+i;for(c.gain.linearRampToValueAtTime(f,h+p),h+=p;h<g-u;){const b=.1+Math.random()*.6,x=Math.random()>.3?f:0;c.gain.setTargetAtTime(x,h,.02),h+=b}c.gain.setTargetAtTime(0,g-u,.1),c.gain.linearRampToValueAtTime(0,g),o.connect(r),r.connect(c),c.connect(this.masterGain),o.start(t),o.stop(g+.5),setTimeout(()=>{o.disconnect(),r.disconnect(),c.disconnect()},(i+1)*1e3)}scheduleSound(t,i,o,r=0,c=0,f=null){const h=r||t.currentTime;if(o.components){o.components.forEach(b=>this.scheduleSound(t,i,b,h,c,f));return}const p=t.createGain();let u;if(o.type==="noise"){const b=f||this.noiseBuffer;if(!b&&t instanceof AudioContext)this.createNoiseBuffer(),u=t.createBufferSource(),u.buffer=this.noiseBuffer;else if(b){const v=t.createBufferSource();v.buffer=b,v.detune.value=c,u=v}else u=t.createOscillator()}else{const b=t.createOscillator();b.type=o.type||"sine",b.detune.value=c,o.startFreq&&(b.frequency.setValueAtTime(o.startFreq,h),o.endFreq&&(o.rampType==="linear"?b.frequency.linearRampToValueAtTime(o.endFreq,h+o.duration):b.frequency.exponentialRampToValueAtTime(o.endFreq,h+o.duration))),u=b}let g=u;if(o.distortion&&o.distortion>0){const b=t.createWaveShaper();b.curve=this.makeDistortionCurve(o.distortion),b.oversample="4x",g.connect(b),g=b}if(o.filterFreq){const b=t.createBiquadFilter();b.type=o.filterType||"lowpass",b.frequency.setValueAtTime(o.filterFreq,h),b.type==="bandpass"&&(b.Q.value=1.5),o.filterEndFreq&&(o.rampType==="linear"?b.frequency.linearRampToValueAtTime(o.filterEndFreq,h+o.duration):b.frequency.exponentialRampToValueAtTime(o.filterEndFreq,h+o.duration)),g.connect(b),g=b}g.connect(p),p.connect(i),o.attack&&o.attack>0?(p.gain.setValueAtTime(0,h),p.gain.linearRampToValueAtTime(o.volume,h+o.attack),p.gain.exponentialRampToValueAtTime(.001,h+o.duration)):(p.gain.setValueAtTime(o.volume,h),p.gain.exponentialRampToValueAtTime(.001,h+o.duration)),u.start(h),u.stop(h+o.duration+.1)}playTone(t,i,o=0){this.muted||!this.ctx||!this.masterGain||this.scheduleSound(this.ctx,this.masterGain,t,i,o,this.noiseBuffer)}play(t){if(this.muted)return;const i=Date.now(),o=this.lastPlayed[t]||0,r=this.COOLDOWNS[t]||this.DEFAULT_COOLDOWN;if(i-o<r)return;this.lastPlayed[t]=i;const c=Ko[t];if(!c)return;const f=(Math.random()-.5)*200;if(this.bufferCache.has(t)&&this.ctx){const p=this.ctx.createBufferSource();p.buffer=this.bufferCache.get(t),p.detune.value=f,p.connect(this.masterGain),p.start();return}const h=Array.isArray(c)?c[Math.floor(Math.random()*c.length)]:c;this.playTone(h,void 0,f)}playCyberExplosion(){this.play("explosion_cyber")}playNeonImpact(){this.play("neon_impact")}playAmbientBGM(){!this.musicDirector||this.muted||this.musicDirector.playAmbient(this.volume)}playStoryBGM(){!this.musicDirector||this.muted||(this.bufferCache.has("story_theme")||this.bakeStoryBGM(),this.musicDirector.playStory())}playBossIntroBGM(){!this.musicDirector||this.muted||this.musicDirector.playBossIntro()}playShopBGM(){!this.musicDirector||this.muted||this.musicDirector.playShop()}playBattleBGM(){!this.musicDirector||this.muted||this.musicDirector.playBattle()}playGameOverBGM(){!this.musicDirector||this.muted||this.musicDirector.playGameOver()}playAchievementSound(){if(this.muted||!this.ctx||!this.masterGain)return;const t=this.ctx.currentTime;sb.forEach((i,o)=>{this.playTone({type:"sine",startFreq:i,duration:.5,volume:.1},t+o*.1)})}playShoot(){this.play("player_shoot")}playEnemyShoot(t){const i=`shoot_${t}`;Ko[i]?this.play(i):this.play("shoot_default")}playHit(){this.play("ui_hit")}playCoin(){this.play("ui_coin")}playTypewriter(){const t={...Ko.ui_typewriter,startFreq:800+Math.random()*200};this.playTone(t)}playExplosion(){this.play("explosion_normal")}playShieldBreak(){this.play("ui_shield_break")}playPowerup(){this.play("ui_powerup")}}const gl=500;let lh=0;const ob=250,Me={getProjectile:e=>{if(e.state.projectilePool.length>0){const t=e.state.projectilePool.pop();return t.active=!0,t.id=Math.random().toString(),t.hitIds=[],t.behaviors=void 0,t.trailConfig=void 0,t.trailHistory=void 0,t.isExplosive=!1,t.isExploding=!1,t.explodeOnExpire=!1,t.isSummon=!1,t.summonType=void 0,t.renderStyle=void 0,t.isStopped=!1,t.pierce=0,t.isInvincible=!1,t.damageWindow=void 0,t.isSweeper=!1,t.swingDirection=void 0,t.maxLife=void 0,t.angle=0,t.bounceCount=0,t.canChain=!1,t.z=0,t.vz=0,t.gravity=0,t.tx=void 0,t.ty=void 0,t.targetId=void 0,t.isCrit=!1,t.isFake=!1,t.isMimic=!1,t}return{id:Math.random().toString(),x:0,y:0,radius:10,emoji:"",vx:0,vy:0,damage:0,life:0,isEnemy:!1,color:"#fff",text:"",pierce:0,hitIds:[],active:!0,isMimic:!1}},releaseProjectile:(e,t)=>{t.active=!1,e.state.projectilePool.push(t)},getEnemy:e=>{if(e.state.enemyPool.length>0){const t=e.state.enemyPool.pop();return t.active=!0,t.id=Math.random().toString(),t.vx=0,t.vy=0,t.isTransitioning=!1,t.stunTimer=0,t.burstQueue=[],t.dashTimer=0,t.isAimingDash=!1,t.warningTimer=0,t.linkedById=void 0,t.captureState=void 0,t.captureTargetId=void 0,t.orbitTargetId=void 0,t.isThrown=!1,t.phase=1,t.subState=void 0,t.skillTimer=0,t.loadedMinionId=null,t.healTargetId=void 0,t.strafeDir=void 0,t.anxietyTimer=0,t.customVars=void 0,t.isUnstable=!1,t}return{id:Math.random().toString(),x:0,y:0,radius:24,emoji:"",hp:0,maxHp:0,config:{},vx:0,vy:0,attackCooldown:0,active:!0}},releaseEnemy:(e,t)=>{t.active=!1,e.state.enemyPool.push(t)},getParticle:e=>{if(e.state.particlePool.length>0){const t=e.state.particlePool.pop();return t.active=!0,t.id=Math.random().toString(),t.scale=1,t.scaleDelta=void 0,t.rotation=0,t.angularVelocity=void 0,t.alpha=1,t.alphaDelta=void 0,t.blendMode=void 0,t.type="circle",t.text=void 0,t.tx=void 0,t.ty=void 0,t}return{id:Math.random().toString(),x:0,y:0,vx:0,vy:0,life:0,maxLife:0,color:"#fff",size:0,active:!0}},releaseParticle:(e,t)=>{t.active=!1,e.state.particlePool.push(t)},getFloatingText:e=>{if(e.state.floatingTextPool.length>0){const t=e.state.floatingTextPool.pop();return t.active=!0,t.id=Math.random().toString(),t.targetId=void 0,t.value=void 0,t.scale=1,t.isCrit=!1,t.mergeCount=0,t}return{id:Math.random().toString(),x:0,y:0,text:"",color:"#fff",life:0,vy:0,active:!0,scale:1,isCrit:!1,mergeCount:0}},releaseFloatingText:(e,t)=>{t.active=!1,e.state.floatingTextPool.push(t)}},ih=(e,t,i=0)=>{let o=1+Math.max(0,Math.log10(e)-2)*.25;o+=Math.min(1,i*.1);let r="#ffffff";return e<200?r="#fef08a":e<1e3?(r="#fbbf24",o*=1.1):e<5e3?(r="#f97316",o*=1.2):e<2e4?(r="#ef4444",o*=1.3):(r="#d8b4fe",o*=1.5),t&&(o*=1.3,e<200&&(r="#fca5a5")),{scale:o,color:r}};function z(e,t,i,o,r="#ffffff",c="damage",f,h=!1){const p=Date.now();if(c==="chat"){if(!(o.includes("BOSS")||r==="#ef4444"||r==="#fcd34d")&&p-lh<ob)return;lh=p}if(c==="damage")for(let b=e.state.floatingTexts.length-1;b>=0;b--){const v=e.state.floatingTexts[b];if(v.type==="damage"&&Math.hypot(v.x-t,v.y-i)<60){const T=v.value!==void 0?v.value:parseInt(v.text),M=parseInt(o);if(!isNaN(M)){const C=(isNaN(T)?0:T)+M;v.value=C,v.mergeCount=(v.mergeCount||0)+1;const w=v.isCrit||h;v.isCrit=w;const j=ih(C,w,v.mergeCount);v.text=`${C}`,C>99999&&(v.text+="!"),v.color=j.color,v.scale=j.scale,v.life=60,v.vy=-4;return}}}if(e.state.floatingTexts.length>20&&c==="damage"&&!h){const g=parseInt(o);if(!isNaN(g)&&g<50)return}if(e.state.floatingTexts.length>40){const g=e.state.floatingTexts.shift();g&&Me.releaseFloatingText(e,g)}const u=Me.getFloatingText(e);if(u.x=t,u.y=i,u.text=o,u.color=r,u.life=60,u.vy=-2,u.type=c,u.targetId=f,u.scale=1,u.isCrit=h,u.mergeCount=0,c==="damage"){const g=parseInt(o.replace(/[^\d-]/g,""));if(!isNaN(g)){u.value=g,u.text=`${g}`;const b=ih(g,h,0);u.scale=b.scale,u.color=b.color}}else u.scale=1.2;e.state.floatingTexts.push(u)}function xe(e,t,i,o,r){if(e.state.particles.length>=gl)return;const c=gl-e.state.particles.length,f=Math.min(r,c);for(let h=0;h<f;h++){const p=Math.random()*Math.PI*2,u=Math.random()*4,g=30+Math.random()*20,b=Me.getParticle(e);b.x=t,b.y=i,b.vx=Math.cos(p)*u,b.vy=Math.sin(p)*u,b.life=g,b.maxLife=g,b.color=o,b.size=2+Math.random()*3,b.type="circle",b.rotation=Math.random()*Math.PI*2,b.angularVelocity=(Math.random()-.5)*.2,b.scale=1,b.scaleDelta=-.01,b.alpha=1,b.alphaDelta=0,e.state.particles.push(b)}}function Zt(e,t){if(e.state.particles.length>=gl)return;const i=t.count||1,o=gl-e.state.particles.length,r=Math.min(i,o),c=t.speed||4;for(let f=0;f<r;f++){const h=Math.random()*Math.PI*2,p=Math.random()*c,u=t.life||45,g=Me.getParticle(e);g.x=t.x||0,g.y=t.y||0,g.vx=Math.cos(h)*p,g.vy=Math.sin(h)*p,g.life=u,g.maxLife=u,g.color=t.color||"#ffffff",g.size=t.size||3,g.type=t.type||"circle",g.rotation=t.rotation||Math.random()*6,g.angularVelocity=t.angularVelocity||(Math.random()-.5)*.2,g.scale=t.scale||1,g.scaleDelta=t.scaleDelta||-.02,g.alpha=t.alpha||1,g.alphaDelta=t.alphaDelta||0,g.blendMode=t.blendMode,g.text=t.text,e.state.particles.push(g)}}function Uh(e,t,i,o,r,c){if(e.state.particles.filter(p=>p.type==="lightning").length>10){if(e.state.particles.length<gl){const p=Me.getParticle(e);p.x=o,p.y=r,p.color=c,p.type="spark",p.life=10,p.maxLife=10,p.size=3+Math.random()*2,p.scaleDelta=-.1,p.blendMode="lighter",e.state.particles.push(p)}return}if(e.state.particles.length>=gl)return;const h=Me.getParticle(e);h.x=t,h.y=i,h.tx=o,h.ty=r,h.color=c,h.type="lightning",h.life=8,h.maxLife=8,h.alpha=1,h.alphaDelta=-.1,e.state.particles.push(h)}const ia={MAX_GLOBAL_DROPS:400,MAX_HEALTH_PACKS:15,MERGE_RADIUS:60,GOLD_LIFETIME:3600,PICKUP_DELAY:45,TIER_1_LIMIT:5,TIER_2_LIMIT:25,TIER_3_LIMIT:100,TIER_4_LIMIT:500},rb={update:e=>{const t=e.state.player,i=e.state.drops,o=e.state.isWaveClearing;if(i.length>ia.MAX_GLOBAL_DROPS){const r=i.find(c=>!c.isVacuuming);r?r.isVacuuming=!0:i.shift()}for(let r=i.length-1;r>=0;r--){const c=i[r];if(c.isVacuuming&&c.vacuumTimer===void 0&&(c.vacuumTimer=60),c.vx!==void 0&&c.vy!==void 0)if(c.isVacuuming)c.x+=c.vx,c.y+=c.vy;else{const v=c.friction||.9;c.vx*=v,c.vy*=v,Math.abs(c.vx)<.1&&(c.vx=0),Math.abs(c.vy)<.1&&(c.vy=0),c.x+=c.vx,c.y+=c.vy}if(c.pickupDelay&&c.pickupDelay>0&&c.pickupDelay--,c.isVacuuming){if(c.vacuumTimer--,c.vacuumTimer<=0){i.splice(r,1);continue}}else o||(c.life--,c.life<=0&&(c.isVacuuming=!0));const f=t.x-c.x,h=t.y-c.y,p=f*f+h*h,u=Math.sqrt(p);let g=c.type==="gold"?180:150;if((o||c.isVacuuming)&&(g=1/0),u<g&&(!c.pickupDelay||c.pickupDelay<=0)){let v=!1;if((o||c.isVacuuming||c.type==="gold"||c.type==="love_heart"||c.type.includes("health")&&t.hp<t.maxHp)&&(v=!0),v){let x=2,T=40;if(c.isVacuuming||o){x=5;const M=25;c.vx=f/u*M,c.vy=h/u*M}else{const M=Math.min(20,800/(u+10));x*=M;const k=f/(u||1),C=h/(u||1);c.vx=(c.vx||0)+k*x,c.vy=(c.vy||0)+C*x;const w=Math.hypot(c.vx,c.vy);w>T&&(c.vx=c.vx/w*T,c.vy=c.vy/w*T)}}}const b=o||c.isVacuuming?t.radius+c.radius+80:t.radius+c.radius+10;if(u<b&&(!c.pickupDelay||c.pickupDelay<=0)){let v=!1;if(c.type==="gold"?(t.gold+=c.value,e.state.waveStats.goldEarned+=c.value,e.audio.playCoin(),v=!0):c.type==="health"?t.hp<t.maxHp&&(t.hp=Math.min(t.maxHp,t.hp+c.value),t.lastHealTime=e.state.timeAlive,z(e,t.x,t.y,`+${c.value}`,"#22c55e"),v=!0):c.type==="big_health"?t.hp<t.maxHp&&(t.hp=Math.min(t.maxHp,t.hp+c.value),t.lastHealTime=e.state.timeAlive,z(e,t.x,t.y,`+${c.value}!!`,"#22c55e"),v=!0):c.type==="love_heart"&&(t.shield+=c.value,z(e,t.x,t.y,`+${c.value}`,"#f472b6"),v=!0),v){c.type!=="gold"&&e.audio.playPowerup(),i.splice(r,1);continue}}}}},nb={spawn:(e,t,i,o)=>{const r=e.state.drops,c=ia.MERGE_RADIUS*ia.MERGE_RADIUS,f=Math.max(0,r.length-50);for(let u=r.length-1;u>=f;u--){const g=r[u];if(g.type==="gold"&&g.life>0){const b=g.x-t,v=g.y-i;if(b*b+v*v<c){g.value+=o,g.life=ia.GOLD_LIFETIME,g.pickupDelay=10,g.vy=-3,g.vx=(Math.random()-.5)*2;return}}}const h=Math.random()*Math.PI*2,p=3+Math.random()*5;e.state.drops.push({id:Math.random().toString(),x:t,y:i,radius:10,emoji:"",type:"gold",value:o,life:ia.GOLD_LIFETIME,vx:Math.cos(h)*p,vy:Math.sin(h)*p-2,friction:.9,pickupDelay:ia.PICKUP_DELAY})}},cb={spawn:(e,t)=>{const i=e.state.drops;if(t.type==="health"||t.type==="big_health"||t.type==="love_heart"){const o=i.filter(r=>r.type==="health"||r.type==="big_health"||r.type==="love_heart");if(o.length>=ia.MAX_HEALTH_PACKS){const r=o[0],c=i.indexOf(r);c>-1&&i.splice(c,1)}}i.push(t)}},wi={update:e=>{rb.update(e)},spawnGold:(e,t,i,o)=>{nb.spawn(e,t,i,o)},spawnPickup:(e,t)=>{cb.spawn(e,t)}},db={keyboard_man:{type:"keyboard_man",name:"",emoji:"",hp:24,speed:2,damage:8,score:15,description:"",behavior:"shooter",tier:"common",projectileChar:"",burstPhrases:["","","","","","","",""],attackPattern:"burst",sizeScale:1,projectileSize:20,projectileColor:"#f87171",deathQuotes:["","","","",""]},tian_gou:{type:"tian_gou",name:"",emoji:"",hp:20,speed:4.5,damage:6,score:8,description:"",behavior:"chase",tier:"common",sizeScale:.8,deathQuotes:["...","","","",""]},tian_gou_frenzy:{type:"tian_gou_frenzy",name:"",emoji:"",hp:30,speed:7,damage:15,score:15,description:"",behavior:"rusher",tier:"common",sizeScale:1,deathQuotes:["!","!","!"],attackPattern:"explode"},spoiler_dog:{type:"spoiler_dog",name:"",emoji:"",hp:18,speed:6,damage:7,score:10,description:"",behavior:"chase",tier:"common",sizeScale:.7,deathQuotes:["...","","..."]},balloon:{type:"balloon",name:"",emoji:"",hp:10,speed:1.5,damage:0,score:1,description:"()",behavior:"balloon",tier:"common",sizeScale:.8,deathQuotes:["!"]},minion:{type:"minion",name:"",emoji:"",hp:32,speed:1.5,damage:4,score:5,description:"",behavior:"minion",tier:"common",sizeScale:1,deathQuotes:["","996","",""]},tao_wa_small:{type:"tao_wa_small",name:"()",emoji:"",hp:20,speed:3,damage:4,score:5,description:"",behavior:"chase",tier:"common",sizeScale:.7,deathQuotes:["",""]},boss_ai_clone:{type:"boss_ai_clone",name:"AI",emoji:"",hp:300,speed:3.5,damage:15,score:0,description:"AI",behavior:"minion",tier:"common",projectileChar:"0",sizeScale:2,projectileSize:15,projectileColor:"#d8b4fe",deathQuotes:["Process killed","PID 0"]},boss_ai_node:{type:"boss_ai_node",name:"",emoji:"",hp:600,speed:2.5,damage:10,score:50,description:"AI",behavior:"minion",tier:"common",sizeScale:1.5,projectileColor:"#d8b4fe",deathQuotes:["Node Offline","Signal Lost"]}},ub={lemon_head:{type:"lemon_head",name:"",emoji:"",hp:28,speed:1.5,damage:8,score:12,description:"",behavior:"chase",tier:"rare",sizeScale:.9,deathQuotes:["","","","",""]},gai_liu_zi:{type:"gai_liu_zi",name:"",emoji:"",hp:28,speed:5,damage:9,score:20,description:"",behavior:"circle",tier:"rare",sizeScale:1.1,deathQuotes:["","","",""]},chi_gua:{type:"chi_gua",name:"",emoji:"",hp:48,speed:.5,damage:12,score:25,description:"",behavior:"turret",tier:"rare",projectileChar:"",projectileSize:22,attackPattern:"single",projectileColor:"#fb923c",sizeScale:1.2,deathQuotes:["","","",""]},marketing_account:{type:"marketing_account",name:"",emoji:"",hp:48,speed:1,damage:12,score:30,description:"",behavior:"shooter",tier:"rare",projectileChar:"",attackPattern:"spread",sizeScale:1.5,projectileSize:24,projectileColor:"#f43f5e",deathQuotes:["","","","",""]},tao_wa_med:{type:"tao_wa_med",name:"()",emoji:"",hp:40,speed:2,damage:8,score:15,description:"",behavior:"chase",tier:"rare",sizeScale:1,deathQuotes:["",""]},river_crab:{type:"river_crab",name:"",emoji:"",hp:121,speed:3,damage:16,score:35,description:"",behavior:"rusher",tier:"rare",sizeScale:1.4,deathQuotes:["","","404"]},hr_specialist:{type:"hr_specialist",name:"HR",emoji:"",hp:55,speed:2,damage:0,score:35,description:"HR50 ()",behavior:"support",tier:"rare",sizeScale:1.1,deathQuotes:["","",""]},micro_manager:{type:"micro_manager",name:"",emoji:"",hp:80,speed:3,damage:10,score:45,description:"",behavior:"linker",tier:"rare",sizeScale:1,deathQuotes:["","",""]},pie_painter:{type:"pie_painter",name:"",emoji:"",hp:70,speed:1.5,damage:10,score:60,description:"3",behavior:"support",tier:"rare",sizeScale:1.2,deathQuotes:["","",""]}},fb={da_ye:{type:"da_ye",name:"",emoji:"",hp:162,speed:1.2,damage:24,score:40,description:"",behavior:"tank",tier:"epic",projectileChar:"",projectileSize:45,projectileRenderStyle:"golden_palm",attackPattern:"explode",projectileColor:"#fbbf24",sizeScale:1.8,deathQuotes:["","","","",""]},clown:{type:"clown",name:"",emoji:"",hp:56,speed:3.5,damage:14,score:25,description:"",behavior:"rusher",tier:"epic",sizeScale:1.2,deathQuotes:["","","","",""]},tao_wa_big:{type:"tao_wa_big",name:"()",emoji:"",hp:72,speed:1.5,damage:12,score:30,description:"",behavior:"chase",tier:"epic",sizeScale:1.5,deathQuotes:["","",""]},product_manager:{type:"product_manager",name:"",emoji:"",hp:90,speed:1,damage:5,score:50,description:"''",behavior:"spawner",tier:"epic",sizeScale:1.3,deathQuotes:["","",""]},leech:{type:"leech",name:"",emoji:"",hp:120,speed:2.2,damage:15,score:80,description:"",behavior:"linker",tier:"epic",sizeScale:1.3,deathQuotes:["...","...","..."]},bonus_chest:{type:"bonus_chest",name:"",emoji:"",hp:30,speed:8,damage:0,score:200,description:"",behavior:"bonus",tier:"epic",sizeScale:1,deathQuotes:["","",""]},delivery_guy:{type:"delivery_guy",name:"",emoji:"",hp:12,speed:7,damage:0,score:30,description:" ()",behavior:"bonus",tier:"epic",sizeScale:1,deathQuotes:["...","",""]},elite_manager:{type:"elite_manager",name:"",emoji:"",hp:900,speed:2,damage:25,score:500,description:"",behavior:"linker",tier:"epic",projectileChar:"",attackPattern:"burst",sizeScale:2.5,projectileSize:25,projectileColor:"rainbow",deathQuotes:["","",""]},elite_hr:{type:"elite_hr",name:"",emoji:"",hp:3e3,speed:3.5,damage:40,score:800,description:"()()",behavior:"rusher",tier:"epic",sizeScale:5,projectileChar:"",projectileRenderStyle:"red_triangle",projectileColor:"#ef4444",projectileSize:25,deathQuotes:["","",""]},cyber_goddess:{type:"cyber_goddess",name:"",emoji:"",hp:600,speed:1.5,damage:15,score:150,description:"+",behavior:"summoner_orbit",tier:"epic",sizeScale:1.8,deathQuotes:["","",""]},capital_crocodile:{type:"capital_crocodile",name:"",emoji:"",hp:900,speed:3,damage:40,score:600,description:"",behavior:"devourer",tier:"epic",sizeScale:2,deathQuotes:["...","",""]}},hb={boss_kpi:{type:"boss_kpi",name:"KPI",emoji:"",hp:45e3,speed:2.5,damage:20,score:1e4,description:" Boss",behavior:"boss",tier:"boss",projectileChar:"",attackPattern:"spiral",sizeScale:5,projectileSize:35,projectileColor:"#ef4444",deathQuotes:["...","...","..."]},boss_glitch:{type:"boss_glitch",name:"Bug",emoji:"",hp:35e3,speed:4,damage:18,score:1e4,description:"Bug",behavior:"boss",tier:"boss",projectileChar:"",attackPattern:"burst",sizeScale:2.2,projectileSize:28,projectileColor:"#10b981",deathQuotes:["Stack Overflow...","Segmentation Fault","404 Not Found"]},boss_ai:{type:"boss_ai",name:"AI",emoji:"",hp:22e3,speed:2.5,damage:22,score:2e4,description:"",behavior:"boss",tier:"boss",projectileChar:"1",attackPattern:"spiral",sizeScale:2.5,projectileSize:20,projectileColor:"#a855f7",deathQuotes:["Shutting down...","Connection lost...","......"]}},Ns={...db,...ub,...fb,...hb};var le=(e=>(e.PLAYER_SHOOT="PLAYER_SHOOT",e.ENEMY_SHOOT="ENEMY_SHOOT",e.PROJECTILE_EXPLODE="PROJECTILE_EXPLODE",e.ENTITY_HIT="ENTITY_HIT",e.ENTITY_DAMAGED="ENTITY_DAMAGED",e.ENTITY_DIE="ENTITY_DIE",e.PLAYER_HURT="PLAYER_HURT",e.SHIELD_BREAK="SHIELD_BREAK",e.WALL_HIT="WALL_HIT",e.PARTICLE_SPAWN="PARTICLE_SPAWN",e.FLOATING_TEXT="FLOATING_TEXT",e.ITEM_PICKUP="ITEM_PICKUP",e.LEVEL_UP="LEVEL_UP",e))(le||{});const Fh=[{id:"membrane_keyboard",title:"",description:" +0.3 /",rarity:"common",category:"upgrade",price:60,icon:"",statTags:["+"],quote:"",effect:e=>{const i=60/e.player.attackSpeed+.3;e.player.attackSpeed=60/i}},{id:"coffee",title:"",description:" +1.0 +0.15 /",rarity:"common",category:"upgrade",price:60,icon:"",tags:["hardcore"],statTags:["+","+"],quote:"",effect:e=>{e.player.projectileSpeed+=1;const t=60/e.player.attackSpeed;e.player.attackSpeed=60/(t+.15)}},{id:"quantum_reading",title:"",description:" +0.5 / 10%",rarity:"common",category:"item",price:150,icon:"",items:[""],tags:["slacker"],statTags:["+","-"],quote:"",effect:e=>{const t=60/e.player.attackSpeed;e.player.attackSpeed=60/(t+.5),e.player.projectileSpeed*=.9,e.player.items.push("")}},{id:"mechanical_keyboard",title:"",description:" +0.7 /",rarity:"excellent",category:"upgrade",price:150,icon:"",tags:["hardcore"],statTags:["+"],quote:"",effect:e=>{const t=60/e.player.attackSpeed;e.player.attackSpeed=60/(t+.7)}},{id:"mouse_macro",title:"",description:" 10% +50%",rarity:"rare",category:"item",price:220,icon:"",items:[""],tags:["slacker"],statTags:["+"],quote:"",effect:e=>{e.player.items.push("")}},{id:"rgb_keyboard",title:"RGB",description:" +1.5 /",rarity:"epic",category:"upgrade",price:350,icon:"",tags:["hardcore"],statTags:["+"],quote:" 200%",effect:e=>{const t=60/e.player.attackSpeed;e.player.attackSpeed=60/(t+1.5)}},{id:"keyboard_cleaner",title:"",description:" +2.0",rarity:"common",category:"upgrade",price:30,icon:"",tags:["slacker"],statTags:["+"],quote:"",effect:e=>{e.player.attackDamage+=2}},{id:"big_lung",title:"",description:" +5.0",rarity:"excellent",category:"upgrade",price:150,icon:"",tags:["market"],statTags:["+"],quote:"",effect:e=>{e.player.attackDamage+=5}},{id:"shared_folder",title:"",description:"+30%",rarity:"excellent",category:"item",price:160,icon:"",items:[""],tags:["tech"],statTags:["+"],quote:"",effect:e=>{e.player.items.push("")}},{id:"ipo",title:"IPO",description:" +30% ()",rarity:"epic",category:"upgrade",price:600,icon:"",tags:["capital"],statTags:["+"],quote:"",effect:e=>{e.player.attackDamage*=1.3}},{id:"binary_thinking",title:"",description:" 300% () 150%",rarity:"rare",category:"upgrade",price:180,maxCount:1,limitReason:"01",icon:"",items:[""],tags:["tech"],statTags:["",""],quote:"X",effect:e=>{e.player.items.push("")}},{id:"firewall_404",title:"404",description:" 15 ",rarity:"epic",category:"item",price:404,icon:"",items:["404"],tags:["tech"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("404"),e.player.customTimers.firewall=0},hooks:{onTick:(e,t)=>{const i=e.state.player;i.customTimers.firewall===void 0&&(i.customTimers.firewall=0);const o=1+(t-1)*.1;i.customTimers.firewall-=o,i.customTimers.firewall<=0&&(i.customTimers.firewall=900,e.state.zones.push({id:Math.random().toString(),x:i.x,y:i.y,radius:600,type:"firewall_wave",life:45,maxLife:45,color:"#3b82f6",emoji:""}),e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-60,text:"404 !",color:"#3b82f6",category:"chat"}),e.audio.playPowerup())}},getDynamicDescription:e=>{if(e===0)return" 15 ";const t=1+(e-1)*.1,i=1+e*.1;return`${t.toFixed(1)}
${i.toFixed(1)} ()`}},{id:"involution_field",title:"",description:" 150  50% ",rarity:"epic",category:"item",price:350,icon:"",items:[""],tags:["hardcore"],statTags:["","+"],quote:"",effect:e=>{e.player.items.push(""),e.player.customTimers.involution=0},hooks:{onTick:(e,t)=>{const i=e.state.player;if(i.customTimers.involution===void 0&&(i.customTimers.involution=0),i.customTimers.involution--,i.customTimers.involution<=0){i.customTimers.involution=60;const o=.5*t,r=$e.getPlayerDamage(i)*o,c=150;for(let f=e.state.enemies.length-1;f>=0;f--){const h=e.state.enemies[f];Math.hypot(h.x-i.x,h.y-i.y)<c+h.radius&&(h.hp-=r,e.state.waveStats.damageDealt+=r,e.emit(le.ENTITY_DAMAGED,{x:h.x,y:h.y,text:`-${Math.floor(r)}`,color:"#a855f7"}),(h.config.behavior==="boss"&&h.phase===1&&h.hp<=0||h.hp<=0)&&(h.hp=0))}}}},getDynamicDescription:e=>e===0?" 50% ":`${50*e}% /
${50*(e+1)}% /`},{id:"retweet_raffle",title:"",description:" 1%  9999 ",rarity:"epic",category:"item",price:288,icon:"",items:[""],tags:["market"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("")}},{id:"wifi_booster",title:"WiFi",description:" +1.0",rarity:"common",category:"item",price:70,icon:"",items:["WiFi"],tags:["tech"],statTags:["+"],quote:"",effect:e=>{e.player.projectileSpeed+=1,e.player.items.push("WiFi")}},{id:"fan_group",title:"",description:" +1 10%",rarity:"rare",category:"upgrade",price:160,icon:"",tags:["tech"],statTags:["+","-"],quote:"",effect:e=>{e.player.projectileCount+=1,e.player.attackDamage*=.9}},{id:"layoff_letter",title:"",description:" 25  1 ",rarity:"mythic",category:"item",price:999,icon:"",items:[""],tags:["capital"],statTags:["","+"],quote:"... ",effect:e=>{e.player.items.push(""),e.player.customTimers||(e.player.customTimers={}),e.player.customTimers.layoff_count=0},hooks:{onKill:(e,t,i)=>{e.state.player.attackDamage+=.04*i}},getDynamicDescription:e=>e===0?" 25  1 ":`+${(.04*e).toFixed(2)} 
+${(.04*(e+1)).toFixed(2)} `},{id:"capital_power",title:"",description:"( 100  +5% )",rarity:"mythic",category:"item",price:777,icon:"",items:[""],tags:["board"],statTags:["+",""],quote:"",effect:e=>{e.player.items.push("")}},{id:"street_lamp",title:"",description:"(5%)",rarity:"mythic",category:"item",price:500,icon:"",items:[""],tags:["board"],statTags:["",""],quote:"",effect:e=>{e.player.lifeSteal+=.05,e.player.items.push("")},getDynamicDescription:e=>` ${e*5}%,  ()`},{id:"quirky_gun",title:"",description:" (2)",rarity:"epic",category:"item",price:400,maxCount:2,icon:"",items:[""],tags:["tech"],statTags:["+"],quote:"BugFeature",effect:e=>{e.player.backwardShots+=1,e.player.items.push("")}}],Xh=[{id:"5g_speed",title:"5G",description:" +0.5",rarity:"common",category:"upgrade",price:60,icon:"",statTags:["+"],quote:"",effect:e=>{e.player.speed+=.5}},{id:"energy_drink",title:"",description:" +0.8",rarity:"common",category:"item",price:80,icon:"",items:[""],tags:["hardcore"],statTags:["+"],quote:"",effect:e=>{e.player.speed+=.8,e.player.items.push("")}},{id:"screen_protector",title:"",description:" +30 1 ",rarity:"common",category:"item",price:60,icon:"",items:[""],statTags:[""],quote:"+100",effect:e=>{e.player.maxShield+=30,e.player.items.push("")}},{id:"blue_screen_glasses",title:"",description:"CD 1",rarity:"excellent",category:"item",price:140,icon:"",items:[""],tags:["tech"],statTags:["",""],quote:"",effect:e=>{e.player.items.push(""),e.player.customTimers.blue_screen_cd=0}},{id:"thick_face",title:"",description:" +30",rarity:"excellent",category:"upgrade",price:80,icon:"",tags:["slacker"],statTags:["+"],quote:"",effect:e=>{e.player.maxHp+=30}},{id:"goji_berry",title:"",description:" +10",rarity:"rare",category:"item",price:200,icon:"",items:[""],tags:["slacker"],statTags:["+",""],quote:"",effect:e=>{e.player.items.push("")},onWaveStart:(e,t)=>{const i=10*t;e.state.player.maxHp+=i,z(e,e.state.player.x,e.state.player.y-70,`+${i}`,"#22c55e","chat")}},{id:"team_building",title:"",description:" 1 ",rarity:"rare",category:"upgrade",price:120,icon:"",tags:["slacker"],statTags:[""],quote:"",effect:e=>{e.player.hpRegen+=1}},{id:"work_fat",title:"",description:" 20% +20% -5%",rarity:"epic",category:"item",price:200,icon:"",items:[""],tags:["slacker"],statTags:["+","-"],quote:"",effect:e=>{e.player.radius*=1.2,e.player.maxHp=Math.ceil(e.player.maxHp*1.2),e.player.hp+=20,e.player.speed*=.95,e.player.items.push("")}},{id:"fish_pond",title:"",description:'""10()',rarity:"epic",category:"item",price:220,icon:"",items:[""],tags:["slacker"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("")},hooks:{onKill:(e,t,i)=>{const o=.08*i;Math.random()<o&&wi.spawnPickup(e,{id:Math.random().toString(),x:t.x,y:t.y,radius:12,emoji:"",type:"love_heart",value:10,life:600})}}},{id:"stress_response",title:"",description:"(10%)",rarity:"epic",category:"item",price:300,icon:"",items:[""],tags:["hardcore","tech"],statTags:["","AOE"],quote:"",effect:e=>{e.player.items.push("")}},{id:"paid_pooping",title:"",description:" 1  2  1 ",rarity:"rare",category:"item",price:200,icon:"",items:[""],tags:["slacker"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("")},hooks:{onTick:(e,t)=>{const i=e.state.player;if(Math.abs(i.vx)>.1||Math.abs(i.vy)>.1)i.standStillTimer=0;else if(i.standStillTimer>60&&i.standStillTimer%60===0){const r=2*t;i.hp<i.maxHp&&(i.hp=Math.min(i.maxHp,i.hp+r),z(e,i.x,i.y-40,`+${r}`,"#22c55e","damage"));const c=1*t;i.gold+=c,e.state.score+=c,e.state.waveStats.goldEarned+=c,z(e,i.x,i.y-60,"","#ffffff")}}}},{id:"hot_coffee_splash",title:"",description:" =  20%",rarity:"rare",category:"item",price:240,icon:"",items:[""],tags:["market"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("")},getDynamicDescription:e=>{if(e===0)return" =  20%";const t=20+(e-1)*10,i=20+e*10;return` ${t}% 
 ${i}% `}},{id:"noise_cancelling_headphones",title:"",description:"+50",rarity:"rare",category:"item",price:500,maxCount:1,icon:"",items:[""],tags:["slacker"],statTags:["",""],quote:"",effect:e=>{e.player.maxShield+=50,e.player.items.push("")}},{id:"golden_parachute",title:"",description:"+100+100",rarity:"epic",category:"item",price:700,icon:"",items:[""],tags:["capital"],statTags:["+",""],quote:"",effect:e=>{e.player.maxHp+=100,e.player.hp+=100,e.player.maxShield+=100,e.player.shield+=100,e.player.items.push("")}},{id:"black_pot",title:"",description:" 50% ",rarity:"rare",category:"item",price:120,icon:"",items:[""],tags:["hardcore"],statTags:[""],quote:"",effect:e=>{e.player.damageReflection+=.5,e.player.items.push("")}},{id:"fishing_guide",title:"",description:" 15%  (60%)",rarity:"rare",category:"item",price:130,maxCount:4,limitReason:"(60%)",icon:"",items:[""],tags:["slacker"],statTags:[""],quote:"",effect:e=>{e.player.dodgeChance+=.15,e.player.items.push("")}},{id:"cyber_amulet",title:"",description:" 3  (1)",rarity:"rare",category:"item",price:220,icon:"",items:[""],tags:["tech"],statTags:[""],quote:"Bug",effect:e=>{e.player.items.push("")}},{id:"fishing_license",title:"",description:" 5 ",rarity:"epic",category:"item",price:260,icon:"",items:[""],tags:["slacker"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("")}}],Wh=[{id:"e_wooden_fish",title:"",description:" 1 ",rarity:"rare",category:"item",price:150,icon:"",items:[""],tags:["slacker"],statTags:[""],quote:"+1+1",effect:e=>{e.player.items.push("")}},{id:"red_envelope",title:"",description:" 6 ",rarity:"rare",category:"item",price:150,icon:"",items:[""],tags:["capital"],statTags:[""],quote:"",effect:e=>{e.player.items.push("")}},{id:"knowledge_pay",title:"",description:"",rarity:"rare",category:"item",price:200,icon:"",items:[""],tags:["capital"],statTags:[""],quote:"",effect:e=>{e.player.items.push("")}},{id:"koi_fish",title:"",description:" +5%",rarity:"rare",category:"item",price:100,icon:"",items:[""],tags:["capital"],statTags:[""],quote:"",effect:e=>{e.player.dropRate+=.05,e.player.items.push("")}},{id:"n_plus_one",title:"N+1 ",description:" 30%  300 ",rarity:"rare",category:"item",price:150,icon:"",items:["N+1"],tags:["capital"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("N+1"),e.player.customVars||(e.player.customVars={}),e.player.customVars.n_plus_one_wave=0},hooks:{onTick:(e,t)=>{const i=e.state.player,o=e.state.currentWave;if(i.customVars.n_plus_one_wave!==o&&i.hp/i.maxHp<.3){i.customVars.n_plus_one_wave=o;const r=300*t;i.gold+=r,e.state.score+=r,e.state.waveStats.goldEarned+=r,e.state.waveStats.bonusGold+=r,e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-80,text:`N+1! +${r}G`,color:"#fbbf24",category:"gold"}),e.audio.playCoin()}}}},{id:"lottery_ticket",title:"",description:" 15 ()",rarity:"rare",category:"item",price:80,icon:"",tags:["capital"],statTags:["",""],quote:"",effect:e=>{const t=Math.random();let i=0;t<1e-4?i=15e4:t<.01?i=1500:t<.05?i=500:t<.15?i=200:t<.4?i=150:t<.7?i=100:i=0,e.player.gold+=i,e.score+=i,e.waveStats.goldEarned+=i,e.waveStats.bonusGold+=i,i>=15e4?e.modalMessage={title:"!!!",text:` ${i} ! !`,type:"win"}:i>0?e.modalMessage={title:"!",text:` ${i} !`,type:"win"}:e.modalMessage={title:"",text:"...",type:"info"}}},{id:"cut_one",title:"",description:"30%30%",rarity:"rare",category:"item",price:150,icon:"",items:[""],tags:["market"],statTags:["",""],quote:"0.001%...",effect:e=>{e.player.items.push("")}},{id:"pig_scam",title:"",description:"5005200",rarity:"rare",category:"item",price:0,icon:"",items:[""],tags:["capital"],statTags:["",""],quote:"",effect:e=>{e.player.gold+=500,e.score+=500,e.player.pigDebts||(e.player.pigDebts=[]),e.player.pigDebts.push(5),e.player.items.push(""),e.modalMessage={title:"?",text:"500! 200%!",type:"win"}}},{id:"crypto_miner",title:"",description:" 4  -15%",rarity:"rare",category:"item",price:200,icon:"",items:[""],tags:["capital"],statTags:["","-"],quote:"",effect:e=>{e.player.speed*=.85,e.player.items.push("")},hooks:{onTick:(e,t)=>{const i=e.state.player;if(i.minerTimer++,i.minerTimer>=60){i.minerTimer=0;const o=t*4;i.gold+=o,e.state.score+=o,e.state.waveStats.goldEarned+=o}}},getDynamicDescription:e=>e===0?" 4  -15%":`${e*4} /
${(e+1)*4} / ()`},{id:"cracked_soft",title:"",description:" 5  50%  5 ",rarity:"epic",category:"item",price:100,maxCount:1,icon:"",items:[""],tags:["tech"],statTags:[""],quote:"...",effect:e=>{e.player.shopDiscount=.5,e.player.items.push("")}},{id:"coupon",title:"",description:"8(3)",rarity:"epic",category:"item",price:300,maxCount:3,icon:"",items:[""],tags:["capital"],statTags:[""],quote:"",effect:e=>{e.player.shopDiscount*=.8,e.player.items.push("")}},{id:"insurance",title:"",description:" 15  (1200)",rarity:"epic",category:"item",price:250,icon:"",items:[""],tags:["capital"],statTags:[""],quote:"",effect:e=>{e.player.items.push("")}}],Qh=[{id:"ppt_master",title:"PPT",description:" 10%  1 ",rarity:"epic",category:"item",price:350,icon:"",items:["PPT"],statTags:[""],quote:"... ()",effect:e=>{e.player.items.push("PPT")}},{id:"wolf_culture",title:"",description:" ( +100% )1",rarity:"epic",category:"item",price:280,maxCount:1,icon:"",items:[""],tags:["hardcore"],statTags:["+",""],quote:"",effect:e=>{e.player.items.push("")}},{id:"health_for_damage",title:"",description:" -30% +50%",rarity:"epic",category:"item",price:350,maxCount:3,icon:"",items:[""],statTags:["+","-"],quote:"KPI",effect:e=>{e.player.maxHp=Math.max(1,Math.floor(e.player.maxHp*.7)),e.player.hp>e.player.maxHp&&(e.player.hp=e.player.maxHp),e.player.attackDamage*=1.5,e.player.items.push("")}},{id:"standing_desk",title:"",description:"+20+50 10%",rarity:"consumable",category:"item",price:800,maxCount:1,icon:"",items:[""],tags:[],statTags:["+","+",""],quote:"",effect:e=>{e.player.items.push(""),e.player.attackDamage+=20,e.player.maxHp+=50,e.player.hp+=50},onWaveStart:(e,t)=>{const i=e.state.player;i.attackDamage+=2,i.maxHp+=5,i.hp+=5,z(e,i.x,i.y-70,"!","#a855f7","chat")}},{id:"involution_king",title:"",description:" +50% +2.5 / +20% 2 ",rarity:"mythic",category:"item",price:600,icon:"",items:[""],tags:["board"],statTags:["",""],quote:"",effect:e=>{e.player.attackDamage*=1.5;const t=60/e.player.attackSpeed;e.player.attackSpeed=60/(t+2.5),e.player.speed*=1.2,e.player.maxHp=Math.max(1,e.player.maxHp-10),e.player.hp>e.player.maxHp&&(e.player.hp=e.player.maxHp),e.player.items.push("")}},{id:"soft_landing",title:"",description:"",rarity:"mythic",category:"item",price:800,icon:"",items:[""],tags:["board"],statTags:[""],quote:"",effect:e=>{e.inflationRate=0,e.player.items.push("")}},{id:"ddl",title:" (DDL)",description:" +100%",rarity:"mythic",category:"item",price:666,icon:"",items:[""],tags:["board"],statTags:["+","-"],quote:"Deadline",effect:e=>{e.player.attackDamage*=2,e.player.maxHp=Math.floor(e.player.maxHp*.5),e.player.hp>e.player.maxHp&&(e.player.hp=e.player.maxHp),e.player.items.push("")}},{id:"brain_drain",title:"",description:" 60%",rarity:"mythic",category:"item",price:600,maxCount:1,icon:"",items:[""],tags:["board"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("")}},{id:"revive_coin",title:"",description:"50%1",rarity:"consumable",category:"item",price:888,maxCount:1,icon:"",items:[""],tags:[],statTags:[""],quote:"",effect:e=>{e.player.items.push("")}},{id:"pay_to_work",title:"",description:" +200% 5 ",rarity:"mythic",category:"item",price:0,icon:"",items:[""],tags:["board"],statTags:["+",""],quote:"... ",effect:e=>{e.player.attackDamage*=3,e.player.items.push("")}},{id:"legacy_code",title:"",description:"+10%+50-5%",rarity:"mythic",category:"item",price:404,icon:"",items:[""],tags:["board"],statTags:["+","","-"],quote:"",effect:e=>{e.player.items.push("")}},{id:"memory_leak",title:"",description:" 10  +5% +2",rarity:"rare",category:"item",price:256,icon:"",items:[""],statTags:["","+"],quote:"... (3) ",effect:e=>{e.player.items.push(""),e.player.customVars||(e.player.customVars={}),e.player.customVars.mem_leak_acc_dmg===void 0&&(e.player.customVars.mem_leak_acc_dmg=0),e.player.customVars.mem_leak_acc_rad===void 0&&(e.player.customVars.mem_leak_acc_rad=0)},hooks:{onTick:(e,t)=>{const i=e.state.player;if(i.memoryLeakTimer||(i.memoryLeakTimer=0),i.memoryLeakTimer++,i.memoryLeakTimer>=600){i.memoryLeakTimer=0;const o=2*t,r=i.radius*(.05*t);i.attackDamage+=o,i.radius+=r,i.customVars||(i.customVars={}),i.customVars.mem_leak_acc_dmg=(i.customVars.mem_leak_acc_dmg||0)+o,i.customVars.mem_leak_acc_rad=(i.customVars.mem_leak_acc_rad||0)+r,e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-80,text:"! ",color:"#8b5cf6",category:"chat"})}}}}],ua={temp_worker:{id:"temp_worker",name:"",emoji:"",color:"#22d3ee",radius:14,hp:15,maxHp:15,damage:15,duration:480,speed:4.5,baseCooldown:600,aiType:"temp_worker",isExplosive:!1,detectRange:400,chargeSpeed:8,tier:"common",description:"",quote:""},intern:{id:"intern",name:"",emoji:"",color:"#3b82f6",radius:15,hp:20,maxHp:20,damage:10,duration:600,speed:2.5,baseCooldown:300,aiType:"intern",fireRate:60,attackRange:400,tier:"common",description:"",quote:"..."},troll:{id:"troll",name:"",emoji:"",color:"#60a5fa",radius:18,hp:10,maxHp:10,damage:80,duration:999999,speed:3,baseCooldown:600,aiType:"troll",isExplosive:!0,maxExplosionRadius:100,detectRange:500,patrolRange:250,patrolSpeed:3,chargeSpeed:12,tier:"rare",description:"",quote:""},troll_mini:{id:"troll_mini",name:"",emoji:"",color:"#38bdf8",radius:13,hp:1,maxHp:1,damage:40,duration:300,speed:5,baseCooldown:0,aiType:"troll_mini",isExplosive:!0,maxExplosionRadius:70,detectRange:450,patrolRange:100,patrolSpeed:5,chargeSpeed:16,trailConfig:{type:"pixel",color:"#38bdf8",interval:3,timer:0},tier:"common",description:"",quote:""},drone:{id:"drone",name:"",emoji:"",color:"#cbd5e1",radius:12,hp:30,maxHp:30,damage:15,duration:600,speed:0,baseCooldown:480,aiType:"drone",isInvincible:!1,tier:"rare",description:"",quote:""},code_mountain:{id:"code_mountain",name:"",emoji:"",color:"#84cc16",radius:40,hp:500,maxHp:500,damage:2,duration:900,speed:1.5,baseCooldown:900,aiType:"code_mountain",isInvincible:!1,tier:"rare",description:"...",quote:""},chatbot:{id:"chatbot",name:"",emoji:"",color:"#a855f7",radius:20,hp:9999,maxHp:9999,damage:5,duration:999999,speed:0,baseCooldown:0,aiType:"chatbot",isInvincible:!0,fireRate:12,attackRange:600,tier:"epic",description:"",quote:"~"},clone:{id:"clone",name:"",emoji:"",color:"#4b5563",radius:16,hp:100,maxHp:100,damage:0,duration:999999,speed:0,baseCooldown:0,aiType:"clone",isInvincible:!0,fireRate:30,attackRange:600,tier:"epic",description:"",quote:""},headhunter:{id:"headhunter",name:"",emoji:"",color:"#10b981",radius:18,hp:9999,maxHp:9999,damage:0,duration:999999,speed:3.5,baseCooldown:0,aiType:"headhunter",isInvincible:!0,fireRate:480,detectRange:600,patrolSpeed:3.5,tier:"epic",description:"",quote:""},hr_pacman:{id:"hr_pacman",name:"",emoji:"",color:"#fbbf24",radius:24,hp:9999,maxHp:9999,damage:80,duration:999999,speed:6.5,baseCooldown:0,aiType:"pacman",isInvincible:!0,detectRange:2e3,trailConfig:{type:"pixel",color:"#ffffff",interval:5,timer:0},tier:"mythic",description:"",quote:"Waka Waka Waka..."}},wt={slacker:{id:"slacker",name:"",description:"",color:"#4ade80",icon:"",levels:[{count:2,effectDesc:" 1% "},{count:4,effectDesc:"0.5"},{count:6,effectDesc:"50%"}]},hardcore:{id:"hardcore",name:"",description:"",color:"#ef4444",icon:"",levels:[{count:2,effectDesc:" +0.5 / +1.5"},{count:4,effectDesc:"(+100%)(+10%)"},{count:6,effectDesc:"996 5% "}]},capital:{id:"capital",name:"",description:"",color:"#facc15",icon:"",levels:[{count:2,effectDesc:"10%(200)"},{count:4,effectDesc:"10+2"},{count:6,effectDesc:"100+5%5% 1 "}]},tech:{id:"tech",name:"",description:"",color:"#3b82f6",icon:"",levels:[{count:2,effectDesc:" 20% "},{count:4,effectDesc:" 50%"},{count:6,effectDesc:" 15 "}]},hr:{id:"hr",name:"",description:"",color:"#22d3ee",icon:"",levels:[{count:2,effectDesc:"+30%()+50%"},{count:4,effectDesc:"-30%+0.1 /"},{count:6,effectDesc:""}]},market:{id:"market",name:"",description:"",color:"#a855f7",icon:"",levels:[{count:2,effectDesc:"+25%"},{count:4,effectDesc:"30%15%2.5"},{count:6,effectDesc:"50%"}]},board:{id:"board",name:"",description:"",color:"#D4AF37",icon:"",levels:[{count:2,effectDesc:"5"},{count:4,effectDesc:"20%BOSS"},{count:6,effectDesc:""}]}},ye={getSynergyCounts:e=>{const t={};return Array.from(new Set(e)).forEach(o=>{const r=kt.find(c=>c.title===o||c.items&&c.items.includes(o));r&&r.tags&&r.tags.forEach(c=>{t[c]=(t[c]||0)+1})}),t},getActiveTiers:e=>{const t={};return Object.entries(e).forEach(([i,o])=>{const r=wt[i];if(!r)return;let c=0;for(const f of r.levels)if(o>=f.count)c=f.count;else break;c>0&&(t[i]=c)}),t},refreshDerivedStats:e=>{const t=ye.getSynergyCounts(e.player.items),i=ye.getActiveTiers(t);e.derivedStats={synergies:t,activeTiers:i}}},mb=["","","","","","","","","","","","","","","","","OK","",""],jt={9527:{id:"9527",name:" 9527",title:"",description:"   108 ",emojiNormal:"",emojiHurt:"",emojiCritical:"",baseStats:{maxHp:100,speed:6,attackDamage:20,attackSpeed:30,projectilePierce:0,projectileCount:1,incomeMultiplier:1,critChance:.05,critDamage:1.5,flatAttackSpeedBonus:0}},"007":{id:"007",name:" 007",title:"",description:"   00 ",emojiNormal:"",emojiHurt:"",emojiCritical:"",bannedTags:["pierce"],baseStats:{maxHp:80,speed:7,attackDamage:24,attackSpeed:51,projectilePierce:0,projectileCount:1,incomeMultiplier:.85,critChance:.1,critDamage:1.5,flatAttackSpeedBonus:0}},1024:{id:"1024",name:" 1024",title:"",description:"...   ",emojiNormal:"",emojiHurt:"",emojiCritical:"",baseStats:{maxHp:60,speed:6,attackDamage:18,attackSpeed:35.3,projectilePierce:2,projectileCount:1,incomeMultiplier:1,critChance:.05,critDamage:1.5,flatAttackSpeedBonus:0}},ev_creator:{id:"ev_creator",name:" EV",title:"",description:" Bug ...  ",emojiNormal:"",emojiHurt:"",emojiCritical:"",baseStats:{maxHp:100,speed:6.5,attackDamage:20,attackSpeed:30,projectilePierce:1,projectileCount:1,incomeMultiplier:1.1,critChance:.05,critDamage:1.5,flatAttackSpeedBonus:0}},cleaner:{id:"cleaner",name:"",title:"",description:"  ",emojiNormal:"",emojiHurt:"",emojiCritical:"",baseStats:{maxHp:120,speed:5.5,attackDamage:30,attackSpeed:45,projectilePierce:999,projectileCount:1,incomeMultiplier:1,critChance:.05,critDamage:1.5,flatAttackSpeedBonus:0}}},oh={keyboard_man:"",tian_gou:"",lemon_head:"",gai_liu_zi:"",chi_gua:"",da_ye:"''",marketing_account:"",clown:"",minion:"",tao_wa_big:"",tao_wa_med:"",tao_wa_small:"",river_crab:"",boss_kpi:"''",involution_king:"",elite_manager:"",elite_hr:"",delivery_guy:"",hr_specialist:"",product_manager:"",micro_manager:"",spoiler_dog:"",cyber_goddess:"",capital_crocodile:"",balloon:"",unknown:"996"},rh=["","","","","","","","6","","",""],pb=[{id:"onboarding",title:"",description:"... ()",icon:"",unlocked:!1,condition:(e,t)=>!0,reward:{gold:1},rewardDescription:": ''"},{id:"probation_fail",title:"",description:" 30 ",icon:"",unlocked:!1,condition:(e,t)=>e.player.isDying&&e.timeAlive<1800,reward:{maxHp:1},rewardDescription:" (+1 HP)"},{id:"too_young",title:"",description:"",icon:"",unlocked:!1,condition:(e,t)=>!1,reward:void 0,rewardDescription:"''"},{id:"probation_pass",title:"",description:" 7 ",icon:"",unlocked:!1,condition:(e,t)=>e.currentWave>=7,reward:{maxHp:10},rewardDescription:" +10"},{id:"wage_slave",title:"",description:" 60 ",icon:"",unlocked:!1,condition:(e,t)=>t.totalTimePlayed>=3600*60,reward:{maxHp:20},rewardDescription:" +20"},{id:"abyss_gazer",title:"",description:"...",icon:"",unlocked:!1,condition:(e,t)=>!1,reward:{maxShield:10},rewardDescription:" +10"},{id:"tank_build",title:"",description:" 400",icon:"",unlocked:!1,condition:(e,t)=>e.player.maxHp>=400,reward:{hpRegen:.5},rewardDescription:" +0.5/"},{id:"speed_demon",title:"",description:" 12 ()",icon:"",unlocked:!1,condition:(e,t)=>e.player.speed>=12,reward:{speed:.5},rewardDescription:" +0.5"},{id:"shield_master",title:"",description:" 200",icon:"",unlocked:!1,condition:(e,t)=>e.player.maxShield>=200,reward:{maxShield:30},rewardDescription:" +30"},{id:"hoarder",title:"",description:" 15 /",icon:"",unlocked:!1,condition:(e,t)=>e.player.items.length>=15,reward:{maxHp:20},rewardDescription:" +20"},{id:"immortal",title:"",description:" 800 (Boss)",icon:"",unlocked:!1,condition:(e,t)=>e.player.maxHp>=800,reward:{damageReflection:.1},rewardDescription:" +10%"},{id:"regen_master",title:"",description:" 5/",icon:"",unlocked:!1,condition:(e,t)=>e.player.hpRegen>=5,reward:{hpRegen:1},rewardDescription:" +1/"}],yb=[{id:"killer_novice",title:"",description:" 100 ",icon:"",unlocked:!1,condition:(e,t)=>t.totalKills>=100,reward:{attackDamage:2},rewardDescription:" +2"},{id:"cleaner_pro",title:"",description:" 2000 ",icon:"",unlocked:!1,condition:(e,t)=>t.totalKills>=2e3,reward:{attackDamage:5},rewardDescription:" +5"},{id:"genocide",title:"",description:" 5000 ",icon:"",unlocked:!1,condition:(e,t)=>t.totalKills>=5e3,reward:{projectilePierce:1},rewardDescription:" +1"},{id:"keyboard_warrior",title:"",description:" 7.5 /",icon:"",unlocked:!1,condition:(e,t)=>e.player.attackSpeed<=8,reward:{attackSpeed:-2},rewardDescription:" +0.3 /"},{id:"one_punch",title:"",description:" 300",icon:"",unlocked:!1,condition:(e,t)=>e.player.attackDamage>=300,reward:{attackDamage:20},rewardDescription:" +20"},{id:"bullet_rain",title:"",description:" 6 ",icon:"",unlocked:!1,condition:(e,t)=>e.player.projectileCount>=6,reward:{projectileCount:1},rewardDescription:" +1"},{id:"sniper",title:"",description:" 15",icon:"",unlocked:!1,condition:(e,t)=>e.player.projectileSpeed>=15,reward:{projectileSpeed:2},rewardDescription:" +2"},{id:"hedgehog",title:"",description:" 100% ()",icon:"",unlocked:!1,condition:(e,t)=>e.player.damageReflection>=1,reward:{damageReflection:.1},rewardDescription:" +10%"},{id:"vampire",title:"",description:" 10%",icon:"",unlocked:!1,condition:(e,t)=>e.player.lifeSteal>=.1,reward:{lifeSteal:.01},rewardDescription:" +1%"},{id:"glass_cannon",title:"",description:" > 100   < 50",icon:"",unlocked:!1,condition:(e,t)=>e.player.attackDamage>100&&e.player.maxHp<50,reward:{attackDamage:10},rewardDescription:" +10"},{id:"kpi_crusher",title:"KPI",description:" 8  KPI ",icon:"",unlocked:!1,condition:(e,t)=>e.waveStats.enemiesKilled>0&&e.currentWave>=8&&!e.isEndless&&e.enemies.length===0,reward:{attackSpeed:-3},rewardDescription:" +0.5 /"},{id:"rectify_workplace",title:"",description:"007 10 ",icon:"",unlocked:!1,condition:(e,t)=>e.player.characterId==="007"&&e.player.maxMultiKill>=10,reward:{explosionRangeMultiplier:.1},rewardDescription:" +10% (007)"},{id:"involution_king",title:"",description:" 20 ",icon:"",unlocked:!1,condition:(e,t)=>e.isEndless&&e.endlessWaveCount>=20,reward:{incomeMultiplier:.2},rewardDescription:" +20%"},{id:"endless_madness",title:"",description:" 40 ",icon:"",unlocked:!1,condition:(e,t)=>e.isEndless&&e.endlessWaveCount>=40,reward:{shopSlots:1},rewardDescription:" +1"},{id:"pacifist",title:"",description:" (BOSS)",icon:"",unlocked:!1,condition:(e,t)=>!1,reward:{hpRegen:.5},rewardDescription:" +0.5/"}],bb=[{id:"capitalist",title:"",description:" 500",icon:"",unlocked:!1,condition:(e,t)=>e.player.gold>=500,reward:{incomeMultiplier:.05},rewardDescription:" +5%"},{id:"accumulate_wealth",title:"",description:" 50,000",icon:"",unlocked:!1,condition:(e,t)=>t.totalGoldEarned>=5e4,reward:{gold:500},rewardDescription:" +500"},{id:"oil_prince",title:"",description:" 3000",icon:"",unlocked:!1,condition:(e,t)=>e.player.gold>=3e3,reward:{shopDiscount:-.05},rewardDescription:" +5%"},{id:"miser",title:"",description:" 8000 ",icon:"",unlocked:!1,condition:(e,t)=>e.player.gold>=8e3,reward:{incomeMultiplier:.1},rewardDescription:" +10%"},{id:"shopping_addict",title:"",description:" 12 ",icon:"",unlocked:!1,condition:(e,t)=>e.refreshCount>=12,reward:{shopSlots:1},rewardDescription:" +1"},{id:"bad_debt",title:"",description:" 3 ",icon:"",unlocked:!1,condition:(e,t)=>e.player.pigDebts&&e.player.pigDebts.length>=3,reward:{gold:250},rewardDescription:" +250"},{id:"luck_dog",title:"",description:" (15)()",icon:"",unlocked:!1,condition:(e,t)=>!1,reward:{gold:300},rewardDescription:" +300"},{id:"big_spender",title:"",description:" 1000 ",icon:"",unlocked:!1,condition:(e,t)=>!1,reward:{gold:200},rewardDescription:" +200"},{id:"item_collector",title:"",description:" 20 ",icon:"",unlocked:!1,condition:(e,t)=>e.player.items.length>=20,reward:{shopDiscount:-.05},rewardDescription:" +5%"},{id:"broke",title:"",description:"  0",icon:"",unlocked:!1,condition:(e,t)=>e.player.isDying&&e.player.gold===0,reward:{shopDiscount:-.05},rewardDescription:" -5%"}],Es=[...pb,...yb,...bb];function gb(e,t){Es.forEach(i=>{t.includes(i.id)&&i.reward&&Object.entries(i.reward).forEach(([o,r])=>{const c=o,f=r;typeof e[c]=="number"&&typeof f=="number"&&(o==="shopUpgradeSlots"||o==="shopItemSlots"?e.shopSlots+=f:e[c]+=f)})}),e.shopDiscount<.1&&(e.shopDiscount=.1),e.attackSpeed<2&&(e.attackSpeed=2),e.hp<e.maxHp&&e.hp>0&&e.gold===0&&e.items.length===0&&(e.hp=e.maxHp)}function Ic(e,t){const i=jt[e]||jt[9527];return{player:{id:"player",characterId:e,x:0,y:0,radius:24,emoji:i.emojiNormal,hp:i.baseStats.maxHp||100,maxHp:i.baseStats.maxHp||100,hpRegen:0,shield:0,maxShield:0,speed:i.baseStats.speed||6,vx:0,vy:0,facingAngle:0,gold:0,goldSpentInShop:0,attackDamage:i.baseStats.attackDamage||15,attackSpeed:i.baseStats.attackSpeed||25,flatAttackSpeedBonus:i.baseStats.flatAttackSpeedBonus||0,projectileSpeed:9,projectileCount:i.baseStats.projectileCount||1,projectileSpread:.2,projectilePierce:i.baseStats.projectilePierce||0,explosionRangeMultiplier:1,backwardShots:0,knockback:.5,lifeSteal:0,dropRate:.02,dodgeChance:0,damageReflection:0,incomeMultiplier:i.baseStats.incomeMultiplier||1,shopDiscount:1,critChance:i.baseStats.critChance||.05,critDamage:i.baseStats.critDamage||1.5,heatValue:0,maxHeat:100,isOverclocked:!1,shopSlots:8,lastShotTime:0,lastDamageTime:0,lastHealTime:0,isRegeneratingShield:!1,invulnerableTime:0,items:[],insuranceGoldEarned:0,pigButcheringTimer:0,pigDebts:[],customTimers:{},standStillTimer:0,minerTimer:0,memoryLeakTimer:0,chatbotTimer:0,droneTimer:0,cloneTimer:0,headhunterTimer:0,codeMountainTimer:0,summonCooldownSpeed:1,isDying:!1,deathTimer:0,speechSentenceIndex:0,speechCharIndex:0,speechPauseTimer:0,swingCount:0,mopAngle:0,maxMultiKill:0},enemies:[],enemyPool:[],projectiles:[],projectilePool:[],floatingTexts:[],floatingTextPool:[],particles:[],particlePool:[],drops:[],zones:[],camera:{x:0,y:0},score:0,highScore:0,timeAlive:0,fps:60,mapWidth:2500,mapHeight:2e3,currentWave:1,waveTimer:0,waveEnded:!1,isWaveClearing:!1,waveTransitionTimer:0,killStreak:0,killStreakTimer:0,isOvertime:!1,isCustomDebugMode:!1,debugEnemyTypes:[],waveStats:{enemiesKilled:0,damageDealt:0,goldEarned:0,damageMitigated:0,bonusGold:0},restockCost:10,refreshCount:0,modalMessage:null,achievementPopup:null,achievementNotificationQueue:[],difficultyId:t,isEndless:!1,endlessWaveCount:0,inflationRate:0,isPaused:!1,shopState:{stock:[]},hasRefreshedThisWave:!1,hasPurchasedThisWave:!1,achievements:[],activeMutators:[],uniqueSpawns:[],reviveSequence:{active:!1,timer:0,phase:"start",lostGold:0},derivedStats:{synergies:{},activeTiers:{}}}}function vb(e){try{const t={...e.state,projectiles:[],particles:[],floatingTexts:[],enemyPool:[],projectilePool:[],particlePool:[],floatingTextPool:[]};localStorage.setItem("meme_game_save",JSON.stringify(t))}catch(t){console.error("Save failed",t)}}function xb(e){var t;try{const i=localStorage.getItem("meme_game_save");if(!i)return!1;const o=JSON.parse(i),r=e.state.achievements,c=e.state.highScore,f=((t=o.player)==null?void 0:t.characterId)||"9527",h=o.difficultyId||"normal",p=Ic(f,h);if(o.shopState&&(o.shopState.upgrades||o.shopState.items)){const b=o.shopState.upgrades||[],v=o.shopState.items||[];o.shopState.stock=[...b,...v],delete o.shopState.upgrades,delete o.shopState.items}if(o.player&&(o.player.shopUpgradeSlots!==void 0||o.player.shopItemSlots!==void 0)){const b=o.player.shopUpgradeSlots||4,v=o.player.shopItemSlots||4;o.player.shopSlots=b+v}e.state={...p,...o},o.shopState&&o.shopState.stock&&(e.state.shopState.stock=o.shopState.stock),e.state.achievements=r;const u=e.state.player;return u.pigDebts===void 0&&(u.pigDebts=[]),u.swingCount===void 0&&(u.swingCount=0),u.mopAngle===void 0&&(u.mopAngle=0),u.maxMultiKill===void 0&&(u.maxMultiKill=0),u.explosionRangeMultiplier===void 0&&(u.explosionRangeMultiplier=1),u.customTimers===void 0&&(u.customTimers={}),u.facingAngle===void 0&&(u.facingAngle=0),u.critChance===void 0&&(u.critChance=.05),u.critDamage===void 0&&(u.critDamage=1.5),u.heatValue===void 0&&(u.heatValue=0),u.maxHeat===void 0&&(u.maxHeat=100),u.isOverclocked===void 0&&(u.isOverclocked=!1),u.flatAttackSpeedBonus===void 0&&(u.flatAttackSpeedBonus=0),u.goldSpentInShop===void 0&&(u.goldSpentInShop=0),u.summonCooldownSpeed===void 0&&(u.summonCooldownSpeed=1),u.lastHealTime===void 0&&(u.lastHealTime=0),e.state.reviveSequence||(e.state.reviveSequence={active:!1,timer:0,phase:"start",lostGold:0}),e.state.killStreak===void 0&&(e.state.killStreak=0),e.state.killStreakTimer===void 0&&(e.state.killStreakTimer=0),e.state.activeMutators||(e.state.activeMutators=[]),e.state.uniqueSpawns||(e.state.uniqueSpawns=[]),e.state.derivedStats||(e.state.derivedStats={synergies:{},activeTiers:{}}),u.pigButcheringTimer>0&&u.pigDebts.length===0&&(u.pigDebts=[u.pigButcheringTimer],u.pigButcheringTimer=0),e.state.enemyPool||(e.state.enemyPool=[]),e.state.projectilePool||(e.state.projectilePool=[]),e.state.particlePool||(e.state.particlePool=[]),e.state.floatingTextPool||(e.state.floatingTextPool=[]),["standStillTimer","minerTimer","memoryLeakTimer","chatbotTimer","droneTimer","cloneTimer","headhunterTimer","codeMountainTimer"].forEach(b=>{u[b]===void 0&&(u[b]=0)}),e.state.hasRefreshedThisWave===void 0&&(e.state.hasRefreshedThisWave=!1),e.state.hasPurchasedThisWave===void 0&&(e.state.hasPurchasedThisWave=!1),e.state.highScore=c,e.state.achievementPopup=null,e.state.achievementNotificationQueue=[],ye.refreshDerivedStats(e.state),e.audio.resume(),!0}catch(i){return console.error("Load failed",i),!1}}function $h(e){try{localStorage.setItem("meme_game_achievements",JSON.stringify(e.state.achievements)),localStorage.setItem("meme_game_highscore",e.state.highScore.toString()),localStorage.setItem("meme_game_total_time",e.totalPlayTime.toString()),localStorage.setItem("meme_game_global_stats",JSON.stringify(e.globalStats))}catch(t){console.error("Failed to save achievements",t)}}function Sb(e){try{const o=localStorage.getItem("meme_game_achievements");o&&(e.state.achievements=JSON.parse(o))}catch(o){console.error("Failed to load achievements",o),e.state.achievements=[]}const t=localStorage.getItem("meme_game_highscore");e.state.highScore=t?parseInt(t):0;const i=localStorage.getItem("meme_game_total_time");e.totalPlayTime=i?parseInt(i):0;try{const o=localStorage.getItem("meme_game_global_stats");o&&(e.globalStats={...e.globalStats,...JSON.parse(o)})}catch(o){console.error("Failed to load global stats",o)}e.state.player&&gb(e.state.player,e.state.achievements)}function Lc(e,t){if(!e.unlockedCompendium.has(t)){e.unlockedCompendium.add(t);try{localStorage.setItem("meme_game_encyclopedia",JSON.stringify(Array.from(e.unlockedCompendium)))}catch(i){console.error("Failed to save encyclopedia",i)}}}function vl(e,t){if(!e.state.achievements.includes(t)){e.state.achievements.push(t),$h(e);const i=Es.find(o=>o.id===t);i&&(e.state.achievementNotificationQueue||(e.state.achievementNotificationQueue=[]),e.state.achievementNotificationQueue.push({title:i.title,description:i.description,icon:i.icon}),e.audio.playAchievementSound())}}function Tb(e){const t={totalGamesPlayed:e.globalStats.totalGamesPlayed,totalKills:e.globalStats.totalKills+e.state.waveStats.enemiesKilled,totalGoldEarned:e.globalStats.totalGoldEarned+e.state.waveStats.goldEarned,totalTimePlayed:e.globalStats.totalTimePlayed+e.state.timeAlive,totalDeaths:e.globalStats.totalDeaths,highestWave:Math.max(e.globalStats.highestWave,e.state.currentWave)},i=Es.filter(r=>r.id!=="all_clear");e.state.achievements.filter(r=>r!=="all_clear").length>=i.length&&!e.state.achievements.includes("all_clear")&&vl(e,"all_clear"),Es.forEach(r=>{e.state.achievements.includes(r.id)||r.condition(e.state,t)&&vl(e,r.id)})}const mt={createSummon:(e,t,i,o)=>{const r=ua[t];if(!r){console.error(`Summon type ${t} not found`);return}e.unlockedCompendium&&Lc(e,t);const c=e.state.player;let f=r.emoji,h=r.radius,p=r.maxHp,u=r.hp,g=r.duration,b=r.color;const v=ye.getSynergyCounts(c.items),T=ye.getActiveTiers(v).hr||0;T>=2&&(p=Math.ceil(p*1.3),u=p,g<999999&&(g=Math.ceil(g*1.5))),t==="clone"&&(f=c.emoji,h=c.radius,u=999999,p=999999,b="#374151");let M=r.fireRate;e.state.activeMutators&&e.state.activeMutators.includes("endless_meetings")&&M&&(M=Math.floor(M*1.3)),c.items.includes("")&&M&&(M=Math.floor(M*.8));let k=r.damage;t==="chatbot"&&c.items.includes("24")&&(M&&(M=Math.floor(M*.66)),k=Math.floor(k*1.5));let C=0;c.items.includes("")&&(p=Math.floor(p*1.5),u=p,C=Math.max(1,Math.floor(p*.05))),t==="intern"&&c.items.includes("")&&(g=999999,p+=50,u=p);let w=r.isExplosive,j=r.maxExplosionRadius;if(c.items.includes("")&&(w=!0,j=Math.max(j||0,150),k=Math.max(k,25)),t==="troll"&&c.items.includes("")&&(j=(j||100)*1.5),c.items.includes("")){const re=1+Math.floor(c.gold/100)*.05;k=Math.floor(k*re)}let O=0;c.items.includes("")&&(O+=.15),T>=6&&(O+=.15);const H=1+c.items.filter(re=>re==="").length*.5;let X=0;t==="clone"&&c.items.includes("")&&(X=c.projectilePierce);const ee={id:Math.random().toString(),x:i,y:o,radius:h,emoji:f,vx:0,vy:0,damage:k,life:g,isEnemy:!1,color:b,text:f,pierce:X,hitIds:[],isSummon:!0,summonType:r.aiType,hp:u,maxHp:p,hpRegen:C,isExplosive:w,maxExplosionRadius:j,isInvincible:r.isInvincible,fireCooldown:0,critChance:O,trailConfig:r.trailConfig,rangeMultiplier:H,detectRangeOverride:r.detectRange?r.detectRange*H:void 0,attackRangeOverride:r.attackRange?r.attackRange*H:void 0,angle:t==="drone"?Math.random()*Math.PI*2:0,active:!0};return t==="hr_pacman"&&(ee.renderStyle="pacman_style",ee.text="",ee.emoji="",ee.behaviors||(ee.behaviors=[])),ee.fireRateOverride=M,e.state.projectiles.push(ee),ee}},Kh=[{id:"temp_contract",title:"",description:" 10  ( = 10 / )",rarity:"common",category:"item",price:80,icon:"",items:[""],tags:["hr"],statTags:[""],quote:"",effect:e=>{e.player.items.push(""),e.player.customTimers||(e.player.customTimers={}),e.player.customTimers.temp_worker=0},hooks:{onTick:(e,t)=>{const i=e.state.player;if(i.customTimers.temp_worker===void 0&&(i.customTimers.temp_worker=0),i.customTimers.temp_worker--,i.customTimers.temp_worker<=0){const o=i.summonCooldownSpeed||1,r=ua.temp_worker.baseCooldown*o,c=Math.max(30,Math.floor(r/t));i.customTimers.temp_worker=c;const f=Math.random()*Math.PI*2;mt.createSummon(e,"temp_worker",i.x+Math.cos(f)*30,i.y+Math.sin(f)*30)}}},getDynamicDescription:e=>{if(e===0)return" 10 ";const t=(10/e).toFixed(1),i=(10/(e+1)).toFixed(1);return` ${t}  1 
 ${i}  1 `}},{id:"paid_trolls",title:"",description:" ( = 10 / )",rarity:"epic",category:"item",price:400,icon:"",items:[""],tags:["hr"],statTags:["",""],quote:"",effect:e=>{e.player.items.push(""),e.player.customTimers||(e.player.customTimers={}),e.player.customTimers.troll=0},hooks:{onTick:(e,t)=>{const i=e.state.player;if(i.customTimers.troll===void 0&&(i.customTimers.troll=0),i.customTimers.troll--,i.customTimers.troll<=0){const o=i.summonCooldownSpeed||1,r=ua.troll.baseCooldown*o,c=Math.max(30,Math.floor(r/t));i.customTimers.troll=c;const f=Math.random()*Math.PI*2;mt.createSummon(e,"troll",i.x+Math.cos(f)*30,i.y+Math.sin(f)*30),(Math.random()<.3||t===1)&&z(e,i.x,i.y-50,"!","#60a5fa","chat")}}},getDynamicDescription:e=>{if(e===0)return"";const t=(10/e).toFixed(1),i=(10/(e+1)).toFixed(1);return` ${t}  1 
 ${i}  1 `}},{id:"the_intern",title:"",description:" 5  ( = 5 / )",rarity:"excellent",category:"item",price:250,icon:"",items:[""],tags:["hr"],statTags:[""],quote:"",effect:e=>{e.player.items.push(""),e.player.customTimers||(e.player.customTimers={}),e.player.customTimers.intern=0},hooks:{onTick:(e,t)=>{const i=e.state.player;if(i.customTimers.intern===void 0&&(i.customTimers.intern=0),i.customTimers.intern--,i.customTimers.intern<=0){const o=i.summonCooldownSpeed||1,r=ua.intern.baseCooldown*o,c=Math.max(30,Math.floor(r/t));i.customTimers.intern=c;const f=Math.random()*Math.PI*2;mt.createSummon(e,"intern",i.x+Math.cos(f)*40,i.y+Math.sin(f)*40),(Math.random()<.3||t===1)&&z(e,i.x,i.y-50,"!","#3b82f6","chat")}}},getDynamicDescription:e=>{if(e===0)return" 5 ";const t=(5/e).toFixed(1),i=(5/(e+1)).toFixed(1);return` ${t}  1 
 ${i}  1 `}},{id:"chatbot",title:"",description:"",rarity:"epic",category:"item",price:380,icon:"",items:[""],tags:["hr"],statTags:["",""],quote:"...",effect:e=>{e.player.items.push("");const t=300,i=(Math.random()-.5)*(e.mapWidth-t),o=(Math.random()-.5)*(e.mapHeight-t),r={state:e};mt.createSummon(r,"chatbot",i,o)},getDynamicDescription:e=>e===0?"":` ${e} 
 ${e+1} `},{id:"outsourcing_team",title:"",description:" 8  ( = 3 * )",rarity:"rare",category:"item",price:300,icon:"",items:[""],tags:["tech"],statTags:["",""],quote:"KPI",effect:e=>{e.player.items.push(""),e.player.droneTimer=0},hooks:{onTick:(e,t)=>{const i=e.state.player;if(i.droneTimer===void 0&&(i.droneTimer=0),i.droneTimer--,i.droneTimer<=0){i.droneTimer=ua.drone.baseCooldown*i.summonCooldownSpeed;const c=(i.items.includes("")?6:3)*t;e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-60,text:`x${c}`,color:"#cbd5e1",category:"chat"});for(let f=0;f<c;f++)mt.createSummon(e,"drone",i.x,i.y)}}},getDynamicDescription:e=>e===0?" 8  3 ":`${3*e}  ()
${3*(e+1)}  ()`},{id:"shadow_clone",title:"",description:"",rarity:"epic",category:"item",price:500,icon:"",items:[""],tags:["hr"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("");const t=300,i=(Math.random()-.5)*(e.mapWidth-t),o=(Math.random()-.5)*(e.mapHeight-t),r={state:e},c=e.player.items.includes("")?2:1;for(let f=0;f<c;f++)mt.createSummon(r,"clone",i+f*20,o+f*20)}},{id:"headhunter",title:"",description:"",rarity:"epic",category:"item",price:500,icon:"",items:[""],tags:["hr"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("");const t={state:e};mt.createSummon(t,"headhunter",e.player.x,e.player.y)}},{id:"legacy_summon",title:"",description:"",rarity:"rare",category:"item",price:350,icon:"",items:[""],tags:["tech"],statTags:["",""],quote:"",effect:e=>{e.player.items.push(""),e.player.codeMountainTimer=0},hooks:{onTick:(e,t)=>{const i=e.state.player;i.codeMountainTimer===void 0&&(i.codeMountainTimer=0),i.codeMountainTimer--;const o=Math.pow(.9,t-1);i.codeMountainTimer<=0&&(i.codeMountainTimer=Math.floor(ua.code_mountain.baseCooldown*i.summonCooldownSpeed*o),e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-60,text:"...",color:"#84cc16",category:"chat"}),mt.createSummon(e,"code_mountain",i.x,i.y))}},getDynamicDescription:e=>{if(e===0)return" 15 ";const t=(15*Math.pow(.9,e-1)).toFixed(1),i=(15*Math.pow(.9,e)).toFixed(1);return` ${t} 
 ${i} `}},{id:"job_poster",title:"",description:" +20% +20%",rarity:"common",category:"item",price:50,icon:"",items:[""],tags:["hr"],statTags:[""],quote:"...",effect:e=>{e.player.items.push("")}},{id:"punch_card",title:"",description:" +10% +10%",rarity:"excellent",category:"item",price:150,icon:"",items:[""],tags:["hr"],statTags:[""],quote:"",effect:e=>{e.player.items.push("")}},{id:"megaphone",title:"",description:" +20%",rarity:"common",category:"item",price:150,icon:"",items:[""],tags:["market"],statTags:[""],quote:"",effect:e=>{e.player.items.push("")}},{id:"performance_review",title:"",description:" 10%  1 ",rarity:"excellent",category:"item",price:180,icon:"",items:[""],tags:["hr"],statTags:[""],quote:"",effect:e=>{e.player.items.push("")}},{id:"team_pizza",title:"",description:" +50% 5% ",rarity:"rare",category:"item",price:250,icon:"",items:[""],tags:["hr"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("")}},{id:"wolf_protocol",title:"",description:"15%  ()",rarity:"rare",category:"item",price:300,icon:"",items:[""],tags:["hr"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("")}},{id:"explosive_contract",title:"",description:"/ 200% ",rarity:"epic",category:"item",price:400,maxCount:1,icon:"",items:[""],tags:["market"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("")}},{id:"stock_options",title:"",description:"( 100  +5%)",rarity:"epic",category:"item",price:450,icon:"",items:[""],tags:["capital"],statTags:["",""],quote:"",effect:e=>{e.player.items.push("")}},{id:"remote_work",title:"",description:" /  +50%",rarity:"rare",category:"item",price:350,icon:"",items:[""],tags:["hr"],statTags:[""],quote:"",effect:e=>{e.player.items.push("")}},{id:"macro",title:"",description:"+50% 2 (1)",rarity:"epic",category:"item",price:450,maxCount:1,icon:"",items:[""],tags:["hr"],statTags:[""],quote:"",effect:e=>{e.player.items.push("")}},{id:"full_time_offer",title:"",description:" +50 ",rarity:"rare",category:"item",price:400,icon:"",items:[""],tags:["hr"],statTags:[""],quote:"",effect:e=>{e.player.items.push("")}},{id:"power_24h",title:"24",description:"/+50% 33%  1 ",rarity:"rare",category:"item",price:350,icon:"",items:["24"],tags:["capital"],statTags:[""],quote:"",effect:e=>{e.player.items.push("24")}},{id:"distributed_computing",title:"",description:"",rarity:"rare",category:"item",price:350,icon:"",items:[""],tags:["tech"],statTags:[""],quote:"",effect:e=>{e.player.items.push("")}},{id:"mirror_server",title:"",description:"",rarity:"mythic",category:"item",price:800,maxCount:1,icon:"",items:[""],tags:["board"],statTags:[""],quote:"",effect:e=>{e.player.items.push("");const t=e.projectiles.filter(i=>i.summonType==="clone").length;if(t>0){const i={state:e},o=300;for(let r=0;r<t;r++){const c=(Math.random()-.5)*(e.mapWidth-o),f=(Math.random()-.5)*(e.mapHeight-o);mt.createSummon(i,"clone",c,f)}}}}],Zh=[{id:"hot_search",title:"",description:" +1",rarity:"rare",category:"upgrade",price:140,icon:"",tags:["market"],statTags:["+"],quote:"",effect:e=>{e.player.projectilePierce+=1}},{id:"algorithm_push",title:"",description:" +1 +15%",rarity:"epic",category:"upgrade",price:300,icon:"",tags:["tech","market"],statTags:["+","+"],quote:"",effect:e=>{e.player.projectilePierce+=1,e.player.projectileSpeed*=1.15}}],Jh=[{id:"shocking_title",title:"",description:"10%",rarity:"excellent",category:"item",price:150,maxCount:1,icon:"",items:[""],tags:["market"],statTags:["","AOE"],quote:"",effect:e=>{e.player.items.push("")}},{id:"viral_marketing",title:"",description:" +1% +25%",rarity:"excellent",category:"item",price:170,icon:"",items:[""],tags:["market"],statTags:["+"],quote:"",effect:e=>{e.player.items.push("")}},{id:"popup_ad",title:"",description:"",rarity:"excellent",category:"item",price:180,icon:"",items:[""],tags:["market"],statTags:[""],quote:"",effect:e=>{e.player.items.push(""),e.player.customTimers||(e.player.customTimers={}),e.player.customTimers.popup_ad=0},onTick:(e,t)=>{const i=e.state.player;i.customTimers.popup_ad===void 0&&(i.customTimers.popup_ad=0),i.customTimers.popup_ad--;const o=Math.max(60,Math.floor(300/t));i.customTimers.popup_ad<=0&&(i.customTimers.popup_ad=o,e.state.projectiles.push({id:Math.random().toString(),x:i.x,y:i.y,radius:12,emoji:"",vx:0,vy:-5,damage:e.state.player.attackDamage*1.5,life:180,isEnemy:!1,color:"#f59e0b",text:"",pierce:0,hitIds:[],active:!0,behaviors:["homing","move_linear","decay_life","check_bounds","explode_on_expire","update_explosion","emit_trail"],isExplosive:!0,explodeOnExpire:!0,maxExplosionRadius:80,renderStyle:"data_spike",trailConfig:{type:"pixel",color:"#f59e0b",interval:4,timer:0}}),Math.random()<.3&&z(e,i.x,i.y-40,"!","#facc15","chat"))},getDynamicDescription:e=>{if(e===0)return"";const t=(5/e).toFixed(1),i=(5/(e+1)).toFixed(1);return` ${t}  1 
 ${i}  1 `}},{id:"live_stream",title:"",description:" 10 ",rarity:"epic",category:"item",price:350,icon:"",items:[""],tags:["market"],statTags:["AOE",""],quote:"321",effect:e=>{e.player.items.push(""),e.player.customTimers||(e.player.customTimers={}),e.player.customTimers.live_stream=0},onTick:(e,t)=>{const i=e.state.player;i.customTimers.live_stream===void 0&&(i.customTimers.live_stream=0),i.customTimers.live_stream--;const o=600;if(i.customTimers.live_stream<=0){i.customTimers.live_stream=o;for(let r=0;r<t;r++){const c=Math.random()*Math.PI*2,f=100+Math.random()*200,h=i.x+Math.cos(c)*f,p=i.y+Math.sin(c)*f;e.state.zones.push({id:Math.random().toString(),x:h,y:p,radius:150,type:"live_stream",life:300,maxLife:300,color:"#a855f7",emoji:""}),z(e,h,p,"!","#a855f7","chat")}}},getDynamicDescription:e=>e===0?" 10  50% ":` 10  ${e} 
 10  ${e+1} `},{id:"brainwashing_loop",title:"",description:"(0.5)",rarity:"epic",category:"item",price:700,icon:"",items:[""],tags:["market"],statTags:[""],quote:"... ... ...DNA",effect:e=>{e.player.items.push("")}}],em=[{id:"infinite_black_card",title:"",description:" > -2000 ",rarity:"mythic",category:"item",price:999,maxCount:1,icon:"",items:[""],tags:["board"],statTags:[""],quote:"",effect:e=>{e.player.items.push("")}},{id:"private_driver",title:"",description:" +5",rarity:"mythic",category:"item",price:1e3,maxCount:1,icon:"",items:[""],tags:["board"],statTags:["","+",""],quote:"",effect:e=>{e.player.speed+=5,e.player.items.push("")}}],kt=[...Fh,...Xh,...Wh,...Qh,...Kh,...Zh,...Jh,...em],nh=["v50","","","","","","","","","","","","","","","","","","","","","","","","","Q","","","CPU","Q","","","","","yyds","emo","","","","","","","","","","","","","","","","","","","","","SOS","1","","","","","","","K","","","","","","","","CityWalk","ie","","","","","","MBTIinfj"],da=[{id:"easy",name:"",description:"",hpMult:.7,damageMult:.7,scoreMult:1,emoji:""},{id:"normal",name:"",description:"",hpMult:1,damageMult:1,scoreMult:1,emoji:""},{id:"hard",name:"996",description:"",hpMult:1.5,damageMult:1.5,scoreMult:1,emoji:""},{id:"ultimate",name:"",description:"",hpMult:2.5,damageMult:2,scoreMult:1,emoji:""}],Kt=[{waveNumber:1,duration:90,enemies:[{type:"tian_gou",weight:5},{type:"keyboard_man",weight:5}],spawnRate:60},{waveNumber:2,duration:90,enemies:[{type:"chi_gua",weight:4},{type:"tian_gou",weight:3},{type:"keyboard_man",weight:3}],spawnRate:50},{waveNumber:3,duration:60,enemies:[{type:"product_manager",weight:4},{type:"clown",weight:3},{type:"tian_gou",weight:5},{type:"keyboard_man",weight:5}],spawnRate:25},{waveNumber:4,duration:60,enemies:[{type:"river_crab",weight:4},{type:"marketing_account",weight:3},{type:"gai_liu_zi",weight:2},{type:"tian_gou",weight:1}],spawnRate:22},{waveNumber:5,duration:60,enemies:[{type:"da_ye",weight:2},{type:"hr_specialist",weight:3},{type:"pie_painter",weight:2},{type:"tian_gou",weight:3}],spawnRate:25},{waveNumber:6,duration:60,enemies:[{type:"lemon_head",weight:3},{type:"micro_manager",weight:2},{type:"marketing_account",weight:3},{type:"river_crab",weight:2}],spawnRate:20},{waveNumber:7,duration:60,enemies:[{type:"tian_gou_frenzy",weight:5},{type:"tian_gou",weight:3},{type:"capital_crocodile",weight:.5},{type:"clown",weight:1.5}],spawnRate:8},{waveNumber:8,duration:99999,enemies:[{type:"boss_kpi",weight:1}],spawnRate:99999,isBossWave:!0}],Mb=[{title:" (HP)",desc:" "},{title:"",desc:"31 "},{title:"",desc:" "},{title:"",desc:" KPI"},{title:"",desc:" "},{title:"",desc:" 150%  "},{title:"",desc:" 1  () "},{title:"",desc:" ..."},{title:"",desc:" "},{title:"",desc:"(+15%) 5%  (Boss) "},{title:"",desc:" 120%  "},{title:"",desc:" 5%  "},{title:"",desc:"()Boss "},{title:"",desc:" "},{title:"",desc:" ()"},{title:"",desc:" 10  2 () "}],$e={getPlayerDamage:e=>{let t=e.attackDamage;e.items.includes("")&&(t*=1+Math.floor(e.gold/100)*.05);const i=ye.getSynergyCounts(e.items),o=ye.getActiveTiers(i);if((o.hardcore||0)>=4){const r=Math.max(0,1-e.hp/e.maxHp);t*=1+r}return(o.capital||0)>=6&&(t*=1+Math.floor(e.gold/100)*.05),t},getPlayerKnockback:e=>{const t=ye.getSynergyCounts(e.items),i=ye.getActiveTiers(t);let o=e.knockback;return(i.market||0)>=2?-2.5:o},getEnemyHpMultiplier:(e,t,i,o)=>{let c=(da.find(f=>f.id===e)||da[1]).hpMult;return c*=1+(t-1)*.1,i&&(c*=Math.pow(1.1,o)),c},getEnemyDamageMultiplier:(e,t,i,o)=>{let c=(da.find(f=>f.id===e)||da[1]).damageMult;return c*=1+(t-1)*.05,i&&(c*=Math.pow(1.1,o)),c},getKillGold:(e,t,i,o)=>{const r=da.find(f=>f.id===t)||da[1];return Math.ceil(e*r.scoreMult*i)},calculateIncomingDamage:(e,t)=>{let i=e;return t.includes("")&&(i=Math.max(1,i-3)),i},shouldDropItem:e=>Math.random()<e,shouldDodge:e=>Math.random()<e,shouldLifesteal:e=>Math.random()<e,shouldTriggerRedEnvelope:e=>e&&Math.random()<.05,shouldTriggerPPTStun:e=>e&&Math.random()<.1,shouldTrigger1024Stun:e=>e&&Math.random()<.15},pt={damagePlayer:(e,t,i="unknown",o,r)=>{const c=e.state.player;if(c.customTimers.lag_rollback_timer&&c.customTimers.lag_rollback_timer>0||t<=0)return;if(c.damageReflection>0){const g=Math.ceil(t*c.damageReflection);let b=null,v=600;for(const x of e.state.enemies)if(x.config.type===i&&x.hp>0&&!x.isTransitioning){const T=Math.hypot(x.x-c.x,x.y-c.y);T<v&&(v=T,b=x)}if(!b){for(const x of e.state.enemies)if(x.hp>0&&!x.isTransitioning){const T=Math.hypot(x.x-c.x,x.y-c.y);T<v&&(v=T,b=x)}}b&&(b.hp-=g,e.emit(le.ENTITY_DAMAGED,{x:b.x,y:b.y,text:`${g}`,color:"#ffffff"}))}if(c.items.includes("")&&o!==void 0&&r!==void 0){const g=c.facingAngle||0,b=Math.atan2(r-c.y,o-c.x);let v=Math.abs(g-b);if(v>Math.PI&&(v=2*Math.PI-v),v<Math.PI/3){e.emit(le.FLOATING_TEXT,{x:c.x,y:c.y-40,text:"!",color:"#60a5fa"}),e.audio.play("ui_shield_break");return}}let f=!0;c.items.includes("")&&c.shield>=t&&(f=!1),f&&(c.lastDamageTime=e.state.timeAlive),t=$e.calculateIncomingDamage(t,c.items),c.items.includes("")&&(c.gold+=1,e.state.score+=1,e.state.waveStats.goldEarned+=1);const h=ye.getSynergyCounts(c.items),p=ye.getActiveTiers(h);if((p.slacker||0)>=6&&(t=Math.ceil(t*.5)),e.state.activeMutators.includes("imposter_syndrome")&&(t=Math.ceil(t*1.3)),c.items.includes("")&&(e.state.zones.push({id:Math.random().toString(),x:c.x,y:c.y,radius:120,type:"coffee_puddle",life:300,maxLife:300,color:"#451a03",emoji:""}),e.emit(le.FLOATING_TEXT,{x:c.x,y:c.y-40,text:"!",color:"#fdba74",category:"chat"})),c.items.includes("")){const g=Math.ceil(c.maxHp*.1),b=8;for(let v=0;v<b;v++){const x=v/b*Math.PI*2,T=Me.getProjectile(e);T.id=Math.random().toString(),T.x=c.x,T.y=c.y,T.radius=16,T.vx=Math.cos(x)*15,T.vy=Math.sin(x)*15,T.damage=g,T.life=60,T.isEnemy=!1,T.color="#ef4444",T.pierce=999,T.hitIds=[],T.active=!0,T.sourceType="stress_response",T.renderStyle="data_spike",e.state.projectiles.push(T)}e.audio.playExplosion()}if((p.capital||0)>=4&&c.gold>0){const g=t*10;if(c.gold>=g){c.gold-=g,e.emit(le.FLOATING_TEXT,{x:c.x,y:c.y-30,text:`-${g}G`,color:"#fbbf24",category:"gold"}),e.emit(le.FLOATING_TEXT,{x:c.x,y:c.y-10,text:"",color:"#facc15"}),c.invulnerableTime=20;return}else{const b=Math.floor(c.gold/10);b>0&&(c.gold=0,t-=b,e.emit(le.FLOATING_TEXT,{x:c.x,y:c.y-30,text:"!",color:"#ef4444"}))}}if(c.shield>0)if(c.items.includes("")&&(!c.customTimers.blue_screen_cd||c.customTimers.blue_screen_cd<=0)&&(c.customTimers.blue_screen_cd=60,e.state.zones.push({id:Math.random().toString(),x:c.x,y:c.y,radius:250,type:"explosion_shockwave",life:15,maxLife:15,color:"#3b82f6",emoji:""}),e.audio.playExplosion(),e.state.enemies.forEach(g=>{if(Math.hypot(g.x-c.x,g.y-c.y)<250&&!g.isTransitioning){const x=Math.atan2(g.y-c.y,g.x-c.x);g.vx+=Math.cos(x)*20,g.vy+=Math.sin(x)*20,g.stunTimer=60,g.hp-=20,e.emit(le.ENTITY_DAMAGED,{x:g.x,y:g.y,text:"-20",color:"#3b82f6"})}})),c.shield>=t){c.shield-=t,e.state.waveStats.damageMitigated+=t,e.emit(le.FLOATING_TEXT,{x:c.x,y:c.y,text:"",color:"#3b82f6"}),e.emit(le.SHIELD_BREAK,{x:c.x,y:c.y}),c.invulnerableTime=20;return}else e.state.waveStats.damageMitigated+=c.shield,t-=c.shield,c.shield=0,e.emit(le.FLOATING_TEXT,{x:c.x,y:c.y,text:"!",color:"#3b82f6"}),e.emit(le.SHIELD_BREAK,{x:c.x,y:c.y});const u=c.items.filter(g=>g==="").length;if(u>0){const g=u*(c.items.includes("")?1200:800);c.insuranceGoldEarned<g&&(c.gold+=10,e.state.score+=10,e.state.waveStats.goldEarned+=10,e.state.waveStats.bonusGold+=10,c.insuranceGoldEarned+=10)}if(c.hp-=t,c.invulnerableTime=40,e.emit(le.PLAYER_HURT,{x:c.x,y:c.y}),c.hp<=0){const g=c.items.indexOf("");if(g!==-1){c.items.splice(g,1),e.state.reviveSequence.active=!0,e.state.reviveSequence.phase="start",e.state.reviveSequence.timer=0,e.state.reviveSequence.lostGold=c.gold;return}else e.state.killer=i}},checkPlayerHit:(e,t)=>{const i=e.state.player;if(Math.hypot(t.x-i.x,t.y-i.y)<t.radius+i.radius*.6){if(t.renderStyle==="charm_heart")return i.charmImmunityTimer&&i.charmImmunityTimer>0?(z(e,i.x,i.y-40,"!","#ffffff"),pt.damagePlayer(e,t.damage,t.sourceType,t.x,t.y),!0):(i.isCharmed=!0,i.charmSourceId=t.sourceType,i.charmTimer=90,z(e,i.x,i.y-60,"  ","#f472b6"),pt.damagePlayer(e,t.damage,t.sourceType,t.x,t.y),!0);let r=i.dodgeChance;const c=ye.getSynergyCounts(i.items);if((ye.getActiveTiers(c).slacker||0)>=4&&i.standStillTimer>30&&(r+=.2),$e.shouldDodge(r))return e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y,text:"",color:"#60a5fa"}),i.items.includes("")&&i.hp<i.maxHp&&(i.hp=Math.min(i.maxHp,i.hp+5),e.emit(le.ENTITY_DAMAGED,{x:i.x,y:i.y-20,text:"+5",color:"#22c55e",isCrit:!1})),!0;if(i.invulnerableTime<=0)return t.sourceType==="glitch_lag_initiator"?((!i.customTimers.lag_rollback_timer||i.customTimers.lag_rollback_timer<=0)&&(i.customVars||(i.customVars={}),i.customVars.lag_anchor={x:Math.floor(i.x),y:Math.floor(i.y)},i.customTimers.lag_rollback_timer=300,e.state.zones.push({id:Math.random().toString(),x:i.x,y:i.y,radius:30,type:"glitch_lag_marker",life:300,maxLife:300,color:"#22d3ee",emoji:""}),e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-60,text:"LAG DETECTED!",color:"#ef4444",category:"chat"}),e.audio.play("ui_glitch_minor")),!0):(pt.damagePlayer(e,t.damage,t.sourceType,t.x,t.y),!0)}return!1},checkExplosionHit:(e,t)=>{const i=e.state.player;Math.hypot(t.x-i.x,t.y-i.y)<t.radius&&i.invulnerableTime<=0&&pt.damagePlayer(e,t.damage*1.5,t.sourceType,t.x,t.y)}},_b={handle:(e,t)=>{if(t.type==="glitch_memory_leak"){const i=e.state.player;if(Math.hypot(i.x-t.x,i.y-t.y)<t.radius&&e.state.timeAlive%60===0&&(pt.damagePlayer(e,5,"memory_leak"),z(e,i.x,i.y,"!","#22c55e")),Math.random()<.1){const r=Math.random()*Math.PI*2,c=Math.random()*t.radius;Zt(e,{x:t.x+Math.cos(r)*c,y:t.y+Math.sin(r)*c,color:"#4ade80",count:1,type:"rect",size:4,life:40,speed:1})}}if(t.type==="ai_laser_link"){const i=e.state.player;if(Math.random()<.08){const g=t.width||1e3,b=t.angle||0,v=(Math.random()-.5)*g,x=t.x+Math.cos(b)*v,T=t.y+Math.sin(b)*v;Zt(e,{x,y:T,color:Math.random()>.5?"#ffffff":"#4ade80",count:1,life:15,speed:2,size:2,type:"spark",blendMode:"lighter"})}const o=i.x-t.x,r=i.y-t.y,c=-(t.angle||0),f=o*Math.cos(c)-r*Math.sin(c),h=o*Math.sin(c)+r*Math.cos(c),p=(t.width||1e3)/2;if(Math.abs(f)<p&&Math.abs(h)<25){const g=h>0?1:-1,b=(t.angle||0)+Math.PI/2,v=25;i.vx+=Math.cos(b)*g*v,i.vy+=Math.sin(b)*g*v,i.invulnerableTime<=0&&(pt.damagePlayer(e,15,"laser_link"),z(e,i.x,i.y,"!","#22d3ee"),e.audio.play("ui_static_tick"))}}if(t.type==="glitch_square"&&t.life===20){e.audio.playExplosion(),e.state.zones.push({id:Math.random().toString(),x:t.x,y:t.y,radius:t.radius*1.5,type:"explosion_shockwave",life:20,maxLife:20,color:t.color,emoji:""});const o=e.state.player,r=(t.width||120)/2;if(o.x>t.x-r&&o.x<t.x+r&&o.y>t.y-r&&o.y<t.y+r&&o.invulnerableTime<=0){const c=t.color==="#ef4444"?40:25;pt.damagePlayer(e,c,"defrag_storm"),z(e,o.x,o.y,"!","#ef4444")}}if(t.type==="explosion_gap"&&t.life<=0){e.audio.playExplosion(),e.state.zones.push({id:Math.random().toString(),x:t.x,y:t.y,radius:t.radius,type:"explosion_shockwave",life:10,maxLife:10,color:"#ef4444",emoji:""});const i=e.state.player;if(Math.hypot(i.x-t.x,i.y-t.y)<t.radius){const r=Math.atan2(i.y-t.y,i.x-t.x);let c=Math.abs(r-(t.gapAngle||0));for(;c>Math.PI;)c=2*Math.PI-c;const f=Math.PI/6;c>f?(pt.damagePlayer(e,40,"glitch_lag"),z(e,i.x,i.y,"!","#ef4444","damage")):z(e,i.x,i.y,"!","#22c55e","chat")}}if(t.type==="laser_beam"&&t.life<60&&e.state.timeAlive%10===0){const i=e.state.player,o=i.x-t.x,r=i.y-t.y,c=-(t.angle||0),f=o*Math.cos(c)-r*Math.sin(c),h=o*Math.sin(c)+r*Math.cos(c),p=t.radius*2,u=t.width||40;Math.abs(f)<p/2&&Math.abs(h)<u/2&&(pt.damagePlayer(e,80,"laser_grid"),z(e,i.x,i.y,"!","#ef4444"))}}},ch={handleSpawner:(e,t,i)=>{t.config.behavior==="spawner"&&(t.stateTimer||(t.stateTimer=0),t.stateTimer++,t.stateTimer%300===0&&(z(e,t.x,t.y-t.radius-20,"!","#a855f7","chat"),i(e,"minion",t.x+(Math.random()-.5)*50,t.y+(Math.random()-.5)*50)))},handleStun:(e,t)=>t.stunTimer&&t.stunTimer>0?(t.stunTimer--,Math.hypot(t.vx,t.vy)>.1?(t.x+=t.vx,t.y+=t.vy,t.vx*=.92,t.vy*=.92):(t.vx=0,t.vy=0,t.isThrown&&(t.isThrown=!1)),!0):!1},dh={handleOrbit:(e,t)=>{if(t.orbitTargetId){const i=e.state.enemies.find(o=>o.id===t.orbitTargetId);if(i){const o=t.config.type==="tian_gou_frenzy",r=o?.1:.05,c=i.radius+(o?100:60);t.orbitAngle=(t.orbitAngle||0)+r;const f=i.x+Math.cos(t.orbitAngle)*c,h=i.y+Math.sin(t.orbitAngle)*c;if(t.x+=(f-t.x)*(o?.2:.1),t.y+=(h-t.y)*(o?.2:.1),o){const p=e.state.player;Math.hypot(p.x-t.x,p.y-t.y)<400&&(t.orbitTargetId=void 0,z(e,t.x,t.y-30,"!","#ef4444"))}return e.state.enemies.forEach(p=>{if(p!==t&&p.orbitTargetId===t.orbitTargetId){const u=t.x-p.x,g=t.y-p.y,b=Math.hypot(u,g);b<40&&b>0&&(t.x+=u/b*2,t.y+=g/b*2)}}),!0}else t.orbitTargetId=void 0}return!1},handleCircleDash:(e,t,i,o,r,c,f)=>{t.dashTimer=(t.dashTimer||0)+1;const h=300,p=240,u=270;let g=t.vx?t.vx/f:0,b=t.vy?t.vy/f:0;if(t.dashTimer<p){if(t.isAimingDash=!1,o<250)g=-(r/o),b=-(c/o);else{const v=Math.atan2(c,r)+Math.PI/2;g=Math.cos(v),b=Math.sin(v)}t.vx=g*f,t.vy=b*f}else if(t.dashTimer<u)t.isAimingDash=!0,t.vx=0,t.vy=0,t.dashTimer===p&&(t.aimX=i.x,t.aimY=i.y);else if(t.dashTimer<h){if(t.isAimingDash=!1,t.dashTimer===u){const v=t.aimX??i.x,x=t.aimY??i.y,T=Math.atan2(x-t.y,v-t.x);t.vx=Math.cos(T)*(f*4.5),t.vy=Math.sin(T)*(f*4.5)}}else t.dashTimer=0,t.aimX=void 0,t.aimY=void 0}},Jo={handleSupportHeal:(e,t)=>{if(t.config.type==="pie_painter"){Jo.handlePiePainter(e,t);return}if(t.config.behavior==="support"){if(t.stateTimer||(t.stateTimer=0),t.stateTimer++,!t.healTargetId||e.state.timeAlive%30===0){let i=null,o=1;const r=450;for(const c of e.state.enemies)if(c!==t&&c.hp<c.maxHp&&c.hp>0&&Math.hypot(c.x-t.x,c.y-t.y)<r){const h=c.hp/c.maxHp;h<o&&(o=h,i=c)}i?t.healTargetId=i.id:t.healTargetId=void 0}if(t.stateTimer%180===0&&t.healTargetId){const i=e.state.enemies.find(o=>o.id===t.healTargetId);if(i&&i.hp<i.maxHp&&i.hp>0){const r=1+(e.state.currentWave-1)*.2,c=Math.floor(50*r);i.hp=Math.min(i.maxHp,i.hp+c),z(e,i.x,i.y,`+${c}`,"#22c55e","damage")}}}},handlePiePainter:(e,t)=>{if(t.config.type==="pie_painter"&&(t.stateTimer||(t.stateTimer=0),t.stateTimer++,t.stateTimer%240===0)){const i=e.state.player,o=(Math.random()-.5)*200,r=(Math.random()-.5)*200,c=Math.max(-e.state.mapWidth/2,Math.min(e.state.mapWidth/2,i.x+o)),f=Math.max(-e.state.mapHeight/2,Math.min(e.state.mapHeight/2,i.y+r));z(e,t.x,t.y-t.radius-20,"!","#fbbf24","chat"),e.state.zones.push({id:Math.random().toString(),x:c,y:f,radius:120,type:"pie_trap",life:180,maxLife:180,color:"#fbbf24",emoji:""})}},handleLemonTrail:(e,t)=>{t.config.type==="lemon_head"&&(t.trailTimer=(t.trailTimer||0)+1,t.trailTimer%15===0&&e.state.zones.push({id:Math.random().toString(),x:t.x,y:t.y,radius:t.radius,type:"acid_trail",life:180,color:"#a3e635",emoji:"",maxLife:180}))}},Le={DEFAULT_WIDTH:2500,DEFAULT_HEIGHT:2e3,constrain:(e,t)=>{const i=e.state.mapWidth,o=e.state.mapHeight,r=i/2-t.radius,c=o/2-t.radius;let f=!1;return t.x<-r&&(t.x=-r,t.vx!==void 0&&t.vx<0&&(t.vx=0),f=!0),t.x>r&&(t.x=r,t.vx!==void 0&&t.vx>0&&(t.vx=0),f=!0),t.y<-c&&(t.y=-c,t.vy!==void 0&&t.vy<0&&(t.vy=0),f=!0),t.y>c&&(t.y=c,t.vy!==void 0&&t.vy>0&&(t.vy=0),f=!0),f},wrap:(e,t)=>{const i=e.state.mapWidth,o=e.state.mapHeight;t.x<-i/2?t.x=i/2:t.x>i/2&&(t.x=-i/2),t.y<-o/2?t.y=o/2:t.y>o/2&&(t.y=-o/2)},checkProjectile:(e,t)=>{if(t.isExploding)return;const i=e.state.mapWidth,o=e.state.mapHeight,r=i/2-t.radius,c=o/2-t.radius;let f=!1;t.x<-r?(t.x=-r,f=!0):t.x>r?(t.x=r,f=!0):t.y<-c?(t.y=-c,f=!0):t.y>c&&(t.y=c,f=!0),f&&(t.explodeOnExpire||t.isExplosive?t.isExploding||(t.isExploding=!0,t.life=15,t.vx=0,t.vy=0,!t.isEnemy&&(e.state.player.characterId==="007"||e.state.player.characterId==="ev_creator")&&(t.renderStyle="cyber_explosion"),e.emit(le.PROJECTILE_EXPLODE,{x:t.x,y:t.y,radius:t.maxExplosionRadius,style:t.renderStyle,isCyber:t.renderStyle==="cyber_explosion"||!t.isEnemy&&(e.state.player.characterId==="007"||e.state.player.characterId==="ev_creator")})):(t.life=0,e.emit(le.WALL_HIT,{x:t.x,y:t.y,color:t.color})))},checkObstacles:(e,t)=>{const i=e.state.zones.filter(o=>o.type==="glitch_bsod_wall");for(const o of i){const r=o.width||100,c=o.height||60,f=r/2,h=c/2,p=o.angle||0,u=t.x-o.x,g=t.y-o.y,b=Math.cos(-p),v=Math.sin(-p),x=u*b-g*v,T=u*v+g*b,M=Math.max(-f,Math.min(x,f)),k=Math.max(-h,Math.min(T,h)),C=x-M,w=T-k,j=C*C+w*w;if(j<t.radius*t.radius){const O=Math.sqrt(j);let V=0,H=0;O===0?Math.abs(x)/f>Math.abs(T)/h?V=x>0?1:-1:H=T>0?1:-1:(V=C/O,H=w/O);const X=t.radius-O,ee=Math.cos(p),re=Math.sin(p),J=V*ee-H*re,ue=V*re+H*ee;t.x+=J*X,t.y+=ue*X,t.vx!==void 0&&(t.vx*=.5),t.vy!==void 0&&(t.vy*=.5)}}}},Ti={handleTianGouPounce:(e,t,i)=>{if(t.config.type!=="tian_gou")return;t.subState||(t.subState="chase"),t.skillTimer||(t.skillTimer=0);const o=Math.hypot(i.x-t.x,i.y-t.y);if(t.subState==="chase")o<250&&t.skillTimer<=0?(t.subState="charging",t.skillTimer=40,t.vx=0,t.vy=0):t.skillTimer>0&&t.skillTimer--;else if(t.subState==="charging"){if(t.skillTimer--,t.vx=0,t.vy=0,t.skillTimer<=0){t.subState="pounce",t.skillTimer=20;const r=Math.atan2(i.y-t.y,i.x-t.x),c=t.config.speed*4.5;t.vx=Math.cos(r)*c,t.vy=Math.sin(r)*c}}else t.subState==="pounce"&&(t.skillTimer--,e.state.timeAlive%3===0&&xe(e,t.x,t.y,"#f472b6",1),t.skillTimer<=0&&(t.subState="chase",t.skillTimer=120,t.vx*=.2,t.vy*=.2))},handleLeechCombat:(e,t,i)=>{if(t.config.type!=="leech")return;if(t.subState||(t.subState="chase"),t.skillTimer||(t.skillTimer=0),t.isOverflowing=!1,t.captureState==="latched"){if(t.isOverflowing=!0,e.state.timeAlive%60===0){pt.damagePlayer(e,5,"leech_bite"),z(e,i.x,i.y-40,"!","#ef4444"),xe(e,i.x,i.y,"#ef4444",3),t.hp<t.maxHp&&(t.hp=Math.min(t.maxHp,t.hp+5),z(e,t.x,t.y-20,"+5","#22c55e","damage"));let h=!1;e.state.enemies.forEach(p=>{p!==t&&p.hp<p.maxHp&&p.hp>0&&Math.hypot(p.x-t.x,p.y-t.y)<150&&(p.hp=Math.min(p.maxHp,p.hp+5),h=!0,Math.random()<.2&&z(e,p.x,p.y-20,"+5","#22c55e","damage"))}),h&&Math.random()<.3&&z(e,t.x,t.y-50,"!","#ef4444","chat")}return}const o=Math.hypot(i.x-t.x,i.y-t.y);if(t.subState==="chase")o<300&&t.skillTimer<=0?(t.subState="charging",t.skillTimer=30,t.vx=0,t.vy=0,z(e,t.x,t.y-30,"!","#ef4444")):t.skillTimer>0&&t.skillTimer--;else if(t.subState==="charging"){if(t.skillTimer--,t.vx=0,t.vy=0,t.skillTimer%5,t.skillTimer<=0){t.subState="pounce",t.skillTimer=20;const r=Math.atan2(i.y-t.y,i.x-t.x),c=25;t.vx=Math.cos(r)*c,t.vy=Math.sin(r)*c}}else t.subState==="pounce"&&(t.skillTimer--,e.state.timeAlive%2===0&&xe(e,t.x,t.y,"#ef4444",2),t.skillTimer<=0&&(t.subState="chase",t.skillTimer=90,t.vx*=.2,t.vy*=.2))},handleDevourer:(e,t,i)=>{if(t.config.behavior!=="devourer")return;t.storedValue===void 0&&(t.storedValue=0),t.swallowCount===void 0&&(t.swallowCount=0),t.customVars||(t.customVars={}),t.customVars.visualBounce===void 0&&(t.customVars.visualBounce=1),t.customVars.visualBounce>1&&(t.customVars.visualBounce=Math.max(1,t.customVars.visualBounce-.03));const r=t.swallowCount>=8;let c=t.x,f=t.y,h=t.config.speed;if(r){c=i.x,f=i.y;const T=Math.max(1,t.radius/70);h=Math.max(.5,t.config.speed/Math.sqrt(T)),e.state.timeAlive%120===0&&z(e,t.x,t.y-t.radius-20,"!!!","#ef4444","chat")}else{let T=null,M=1/0;for(const k of e.state.enemies){if(k===t||k.hp<=0||k.isTransitioning||k.config.behavior==="boss"||k.config.behavior==="devourer"||k.config.tier==="epic"||k.config.tier==="boss")continue;const C=Math.hypot(k.x-t.x,k.y-t.y);C<M&&(M=C,T=k)}if(T)c=T.x,f=T.y,h*=1.2,e.state.timeAlive%60===0&&z(e,t.x,t.y-t.radius-20,"...","#fbbf24");else if(Math.hypot(t.x-i.x,t.y-i.y)<800){const w=Math.atan2(t.y-i.y,t.x-i.x);c=t.x+Math.cos(w)*300,f=t.y+Math.sin(w)*300,h*=1.1,e.state.timeAlive%60===0&&z(e,t.x,t.y-t.radius-20,"...","#94a3b8")}else{const w=e.state.timeAlive*.02+t.id.charCodeAt(0)%100;c=t.x+Math.cos(w)*100,f=t.y+Math.sin(w)*100,h*=.5}}const p=Math.atan2(f-t.y,c-t.x);if(t.vx+=(Math.cos(p)*h-t.vx)*.05,t.vy+=(Math.sin(p)*h-t.vy)*.05,t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t),t.swallowCount>=50)return;const g=t.radius+220,b=t.radius+20;let v=0;const x=2;for(let T=e.state.enemies.length-1;T>=0&&!(v>=x);T--){const M=e.state.enemies[T];if(M===t||M.hp<=0||M.isTransitioning||M.config.behavior==="boss"||M.config.behavior==="devourer"||M.config.tier==="epic"||M.config.tier==="boss")continue;const k=M.x-t.x,C=M.y-t.y,w=Math.hypot(k,C);if(w<g&&(M.x+=(t.x-M.x)*.15,M.y+=(t.y-M.y)*.15,M.vx*=.5,M.vy*=.5,M.stunTimer=2,w<b)){const O=M.config.score||5;t.storedValue+=O,t.swallowCount++;const V=Math.floor(t.maxHp*.2);t.maxHp=Math.floor(t.maxHp*1.05),t.hp=Math.min(t.maxHp,t.hp+V),t.radius=Math.min(350,t.radius+2),t.customVars.visualBounce=1.25,e.state.enemies.splice(T,1),xe(e,M.x,M.y,"#ef4444",8),v++}}v>0&&z(e,t.x,t.y-t.radius,` x${v}`,"#fbbf24","chat")}},st={spawnEnemy:(e,t,i,o)=>{if(!Ns[t]){console.warn(`Enemy type ${t} not found!`);return}Lc(e,t);const r=Ns[t],c=$e.getEnemyHpMultiplier(e.state.difficultyId,e.state.currentWave,e.state.isEndless,e.state.endlessWaveCount),f=r.behavior==="boss"?70:r.sizeScale?24*r.sizeScale:24,h=Me.getEnemy(e);h.x=i,h.y=o,h.radius=f,h.emoji=r.emoji,h.hp=r.hp*c,h.maxHp=r.hp*c,h.config=r,h.vx=0,h.vy=0,h.attackCooldown=60+Math.random()*60,h.attackState=0,h.stateTimer=0,h.phase=1,h.isTransitioning=!1,h.dashTimer=0,h.isAimingDash=!1,h.stunTimer=0,h.burstQueue=[],h.burstTimer=0,h.warningTimer=0,e.state.enemies.push(h)},spawnSingleBullet:(e,t,i,o=!1,r)=>{e.audio.playEnemyShoot(t.config.type);const c=$e.getEnemyDamageMultiplier(e.state.difficultyId,e.state.currentWave,e.state.isEndless,e.state.endlessWaveCount),f=Me.getProjectile(e);f.x=t.x,f.y=t.y,f.radius=t.config.projectileSize||15,f.emoji=r||t.config.projectileChar||"",f.vx=Math.cos(i)*7,f.vy=Math.sin(i)*7,f.damage=t.config.damage*c,f.life=180,f.isEnemy=!0,f.color=t.config.projectileColor||"#ef4444",f.text=r||t.config.projectileChar||"",f.angle=i,f.sourceType=t.config.type,f.isExplosive=o,f.maxExplosionRadius=o?120:0,t.config.projectileRenderStyle?f.renderStyle=t.config.projectileRenderStyle:f.renderStyle=void 0,e.state.projectiles.push(f)}},uh={handleCyberGoddess:(e,t)=>{if(t.config.type!=="cyber_goddess")return;t.stateTimer||(t.stateTimer=0),t.stateTimer++;const i=e.state.enemies.filter(o=>o.orbitTargetId===t.id).length;if(t.stateTimer%240===0&&i<5){z(e,t.x,t.y-t.radius-30,"!","#ef4444","chat");const o=Math.random()*Math.PI*2,r=120;st.spawnEnemy(e,"tian_gou_frenzy",t.x+Math.cos(o)*r,t.y+Math.sin(o)*r);const c=e.state.enemies[e.state.enemies.length-1];c&&c.config.type==="tian_gou_frenzy"&&(c.orbitTargetId=t.id,c.orbitAngle=o)}if(t.charmCooldown||(t.charmCooldown=360),t.charmCooldown--,t.charmCooldown<=0){const o=e.state.player;if(Math.hypot(o.x-t.x,o.y-t.y)<1200){const c=Math.atan2(o.y-t.y,o.x-t.x);z(e,t.x,t.y-60,"~","#f472b6","chat");const f=Me.getProjectile(e);f.x=t.x,f.y=t.y,f.radius=25,f.vx=Math.cos(c)*5,f.vy=Math.sin(c)*5,f.damage=10,f.life=300,f.isEnemy=!0,f.renderStyle="charm_heart",f.sourceType=t.id,f.active=!0,f.behaviors=["move_linear","decay_life","check_bounds","emit_trail"],f.trailConfig={type:"smoke",color:"#f472b6",interval:4,timer:0,size:10},e.state.projectiles.push(f),t.charmCooldown=300+Math.random()*120}}},handleClownBalloon:(e,t,i,o)=>{if(t.config.type!=="clown")return;const r=Math.hypot(i.x-t.x,i.y-t.y);t.attackCooldown>0&&t.attackCooldown--,r<800&&t.attackCooldown<=0&&(z(e,t.x,t.y-t.radius-20,"!","#ef4444","chat"),o(e,"balloon",t.x+(Math.random()-.5)*50,t.y+(Math.random()-.5)*50),t.attackCooldown=300)}},sa={handleSpawner:ch.handleSpawner,handleStun:ch.handleStun,handleOrbit:dh.handleOrbit,handleCircleDash:dh.handleCircleDash,handleSupportHeal:Jo.handleSupportHeal,handlePiePainter:Jo.handlePiePainter,handleLemonTrail:Jo.handleLemonTrail,handleTianGouPounce:Ti.handleTianGouPounce,handleLeechCombat:Ti.handleLeechCombat,handleLeech:Ti.handleLeechCombat,handleDevourer:Ti.handleDevourer,handleCyberGoddess:uh.handleCyberGoddess,handleClownBalloon:uh.handleClownBalloon,handleLinker:(e,t)=>{t.config.type==="leech"&&Ti.handleLeechCombat(e,t,e.state.player)}},Ce={Movement:{minRange:1200,maxRange:2e3,panicRange:700,normalSpeedMult:1,panicSpeedMult:1.8,strafeSpeedMult:.6,separationDist:1500,separationForce:4},Timing:{cycleDuration:1e3,phase1End:360,phase2End:840,captureFireRate:60,coverFireRate:45,trackTime:110,preFireTime:5,recoilTime:45,get shotInterval(){return this.trackTime+this.preFireTime+this.recoilTime}},Combat:{beaconSpeed:75,throwSpeed:95,dragSpeed:15,orbitRadius:140,orbitRotationSpeed:.03,minAmmoRefillThreshold:2,ammoSpawnDistance:100,maxAmmo:6,aimPrediction:35,aimTurnSpeed:.25,aimJitterMagnitude:.25}},wb=(e,t,i,o=1)=>{const r=i.x-t.x,c=i.y-t.y,f=Math.hypot(r,c);(!t.strafeDir||t.skillTimer%120===0)&&(t.strafeDir=Math.random()>.5?1:-1);const h=r/(f||1),p=c/(f||1);let u=t.config.speed*o;if(f<Ce.Movement.panicRange)u=t.config.speed*Ce.Movement.panicSpeedMult,t.vx=-h*u,t.vy=-p*u,e.state.timeAlive%20===0&&xe(e,t.x,t.y,"#a855f7",2);else if(f<Ce.Movement.minRange)t.vx=-h*u,t.vy=-p*u;else if(f>Ce.Movement.maxRange)t.vx=h*u,t.vy=p*u;else{const g=-p*t.strafeDir,b=h*t.strafeDir,v=-.2;t.vx=(g+h*v)*(u*Ce.Movement.strafeSpeedMult),t.vy=(b+p*v)*(u*Ce.Movement.strafeSpeedMult)}e.state.enemies.forEach(g=>{if(g!==t&&g.config.type==="elite_manager"){const b=t.x-g.x,v=t.y-g.y,x=Math.hypot(b,v);if(x<Ce.Movement.separationDist&&x>0){const T=(Ce.Movement.separationDist-x)/Ce.Movement.separationDist,M=b/x*T*Ce.Movement.separationForce,k=v/x*T*Ce.Movement.separationForce;t.vx+=M,t.vy+=k}}}),t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t)},kb=(e,t,i)=>{let o=t-e;for(;o>Math.PI;)o-=Math.PI*2;for(;o<-Math.PI;)o+=Math.PI*2;return e+o*i},jb={update:(e,t,i,o)=>{t.skillTimer||(t.skillTimer=0),t.skillTimer++,t.customVars||(t.customVars={});const r=t.skillTimer%Ce.Timing.cycleDuration,c=e.state.enemies.filter(p=>p.captureState==="orbiting"&&p.captureTargetId===t.id).length;if(r<Ce.Timing.phase1End){if(t.aimAngle=void 0,t.customVars.isLocked=!1,t.customVars.isFiring=!1,t.customVars.chargeLevel=0,t.customVars.laserAlpha=0,t.customVars.smoothAim=void 0,t.customVars.chamberedMinionId=null,wb(e,t,i,Ce.Movement.normalSpeedMult),r%Ce.Timing.coverFireRate===0){const u=Math.atan2(i.y-t.y,i.x-t.x),b=.15+(Math.sin(e.state.timeAlive*.1)*.5+.5)*.25,v=b*4,x=u-v/2;for(let T=0;T<5;T++){const M=x+T*b,k=Me.getProjectile(e);k.x=t.x,k.y=t.y,k.radius=12,k.emoji="",k.vx=Math.cos(M)*7,k.vy=Math.sin(M)*7,k.damage=t.config.damage,k.life=180,k.isEnemy=!0,k.color="#a855f7",k.text="",k.pierce=0,k.sourceType=t.config.type,k.renderStyle="neon_missile",k.active=!0,k.trailHistory=[],e.state.projectiles.push(k)}e.audio.play("shoot_boss_ai")}if(r%Ce.Timing.captureFireRate===0&&c<Ce.Combat.maxAmmo){let p=e.state.enemies.filter(u=>u!==t&&!u.captureState&&!u.linkedById&&!u.isThrown&&u.config.behavior!=="boss"&&u.config.type!=="elite_manager"&&(u.config.type==="river_crab"||u.config.type==="gai_liu_zi"||u.config.behavior==="rusher"||u.config.behavior==="chase"||u.config.behavior==="tank"||u.config.behavior==="minion"));if(p.length<Ce.Combat.minAmmoRefillThreshold){z(e,t.x,t.y-t.radius-40,"!","#a855f7","chat");const u=Math.atan2(t.y-i.y,t.x-i.x),g=Ce.Combat.ammoSpawnDistance,b=100,v=e.state.mapWidth/2-b,x=e.state.mapHeight/2-b,T=O=>Math.max(-v,Math.min(v,O)),M=O=>Math.max(-x,Math.min(x,O));let k=T(t.x+Math.cos(u)*g+30),C=M(t.y+Math.sin(u)*g),w=T(t.x+Math.cos(u)*g-30),j=M(t.y+Math.sin(u)*g);st.spawnEnemy(e,"minion",k,C),st.spawnEnemy(e,"minion",w,j),p=e.state.enemies.filter(O=>O.config.type==="minion"&&!O.captureState&&!O.isThrown)}p.length>0&&(p.sort((u,g)=>Math.hypot(u.x-t.x,u.y-t.y)-Math.hypot(g.x-t.x,g.y-t.y)),p.slice(0,2).forEach(u=>{u.captureState="targeted",u.captureTargetId=t.id;const g=Math.atan2(u.y-t.y,u.x-t.x);e.state.projectiles.push({id:Math.random().toString(),x:t.x,y:t.y,radius:20,emoji:"",vx:Math.cos(g)*Ce.Combat.beaconSpeed,vy:Math.sin(g)*Ce.Combat.beaconSpeed,damage:0,life:999,isEnemy:!0,color:"#a855f7",text:"",pierce:0,hitIds:[],isCaptureBeacon:!0,sourceType:t.id,targetId:u.id,active:!0})}))}r===Ce.Timing.phase1End-60&&z(e,t.x,t.y-t.radius-40,"...","#ef4444","chat")}else if(r<Ce.Timing.phase2End){t.vx=0,t.vy=0;const p=r-Ce.Timing.phase1End,u=Ce.Timing.shotInterval,g=Ce.Timing.trackTime,b=Ce.Timing.preFireTime,v=p%u;if(t.customVars.laserAlpha===void 0&&(t.customVars.laserAlpha=0),v<g){const x=Ce.Combat.aimPrediction,T=i.x+i.vx*x,M=i.y+i.vy*x,k=Math.atan2(M-t.y,T-t.x);t.customVars.smoothAim===void 0&&(t.customVars.smoothAim=k),t.customVars.smoothAim=kb(t.customVars.smoothAim,k,Ce.Combat.aimTurnSpeed);const C=v/g,w=(1-C)*Ce.Combat.aimJitterMagnitude,j=e.state.timeAlive,V=(Math.sin(j*.1)*.6+Math.sin(j*.25)*.4)*w;t.aimAngle=t.customVars.smoothAim+V,t.customVars.lockedAngle=t.aimAngle,t.customVars.isLocked=!1,t.customVars.chargeLevel=C,t.customVars.isFiring=!1,t.customVars.laserAlpha=Math.min(1,t.customVars.laserAlpha+.1);let H=null;if(t.customVars.chamberedMinionId&&(H=e.state.enemies.find(X=>X.id===t.customVars.chamberedMinionId)),(!H||H.hp<=0)&&(H=e.state.enemies.find(X=>X.captureState==="orbiting"&&X.captureTargetId===t.id),H&&(t.customVars.chamberedMinionId=H.id)),H){const X=t.radius+30,ee=t.x+Math.cos(t.aimAngle)*X,re=t.y+Math.sin(t.aimAngle)*X;H.x=ee,H.y=re,H.vx=0,H.vy=0,H.stunTimer=2}v%15===0&&e.audio.play("ui_static_tick")}else if(v<g+b){t.customVars.lockedAngle!==void 0&&(t.aimAngle=t.customVars.lockedAngle),t.customVars.chargeLevel=1,t.customVars.isLocked=!0,t.customVars.laserAlpha=1;const x=e.state.enemies.find(T=>T.id===t.customVars.chamberedMinionId);if(x){const T=t.radius+30,M=t.x+Math.cos(t.aimAngle)*T,k=t.y+Math.sin(t.aimAngle)*T;x.x=M,x.y=k}}else if(v<g+b+1){t.customVars.isFiring=!0;const x=e.state.enemies.find(T=>T.id===t.customVars.chamberedMinionId);if(x){const T=t.customVars.lockedAngle||t.aimAngle;x.vx=Math.cos(T)*Ce.Combat.throwSpeed,x.vy=Math.sin(T)*Ce.Combat.throwSpeed,x.isThrown=!0,x.captureState="free",x.captureTargetId=void 0,x.stunTimer=0,t.customVars.chamberedMinionId=null,e.state.camera.x+=Math.cos(T)*-20,e.state.camera.y+=Math.sin(T)*-20,e.audio.playExplosion(),z(e,t.x,t.y-t.radius-20,"!","#ef4444","chat")}else z(e,t.x,t.y-t.radius-20,"...","#cbd5e1","chat")}else t.customVars.isFiring=!1,t.customVars.laserAlpha=Math.max(0,t.customVars.laserAlpha-.08)}else t.vx=0,t.vy=0,t.aimAngle=void 0,t.customVars.isLocked=!1,t.customVars.chargeLevel=0,t.customVars.laserAlpha=0,t.customVars.smoothAim=void 0,t.customVars.chamberedMinionId=null,r%60===0&&z(e,t.x,t.y-t.radius-30," ...","#22c55e","chat");const f=e.state.enemies.filter(p=>p.captureState==="orbiting"&&p.captureTargetId===t.id&&p.id!==t.customVars.chamberedMinionId),h=t.skillTimer*Ce.Combat.orbitRotationSpeed;f.length>0&&f.forEach((p,u)=>{const g=h+u/f.length*Math.PI*2;p.x=t.x+Math.cos(g)*Ce.Combat.orbitRadius,p.y=t.y+Math.sin(g)*Ce.Combat.orbitRadius,p.vx=0,p.vy=0})}},Cb={update:(e,t)=>{if(t.isStopped&&(t.hp!==void 0?t.hp=0:t.life=0),t.hpRegen&&t.hpRegen>0&&t.hp<t.maxHp&&e.state.timeAlive%60===0&&(t.hp=Math.min(t.maxHp,t.hp+t.hpRegen),z(e,t.x,t.y-20,"","#22c55e")),t.hp!==void 0&&t.hp<=0){if(t.isExplosive||t.summonType==="code_mountain"){if(t.isExploding=!0,t.life=15,t.radius+=10,t.summonType==="code_mountain"?(t.maxExplosionRadius=250,t.damage=100,z(e,t.x,t.y,"REFACTORED!","#84cc16","chat")):t.damage=(t.damage||20)*(e.state.player.items.includes("")?2:1),e.audio.playExplosion(),t.summonType!=="troll_mini"&&t.summonType!=="code_mountain"&&z(e,t.x,t.y,"","#ef4444"),t.hitIds=[],t.summonType==="troll"&&e.state.player.items.includes("")){xe(e,t.x,t.y,"#38bdf8",12),z(e,t.x,t.y-40,"+2!","#38bdf8","chat");const u=()=>{const g=mt.createSummon(e,"troll_mini",t.x,t.y);if(g){const b=Math.random()*Math.PI*2,v=10+Math.random()*5;g.vx=Math.cos(b)*v,g.vy=Math.sin(b)*v,g.aiState="ejecting"}};u(),u()}t.summonType==="troll"&&e.state.zones.push({id:Math.random().toString(),x:t.x,y:t.y,radius:t.radius*.8,type:"scorch",life:60,maxLife:60,color:"#1e3a8a",emoji:""});return}t.life=0;return}const i=ua[t.summonType],o=(i==null?void 0:i.patrolRange)||250,r=t.detectRangeOverride||(i==null?void 0:i.detectRange)||500,c=(i==null?void 0:i.patrolSpeed)||3;let f=(i==null?void 0:i.chargeSpeed)||12;t.summonType==="troll"&&(f=16),t.summonType==="temp_worker"&&(f=9);const h=t.attackRangeOverride||(i==null?void 0:i.attackRange)||400,p=t.fireRateOverride||(i==null?void 0:i.fireRate)||60;if(t.summonType==="temp_worker"){if(t.targetId){const u=e.state.enemies.find(g=>g.id===t.targetId);if(u){const g=Math.atan2(u.y-t.y,u.x-t.x);t.vx=Math.cos(g)*f,t.vy=Math.sin(g)*f}else t.targetId=void 0}else{let u=null,g=1/0;for(const b of e.state.enemies){if(b.isTransitioning)continue;const v=Math.hypot(b.x-t.x,b.y-t.y);v<g&&(g=v,u=b)}if(u&&g<r)t.targetId=u.id;else{const b=Math.random()*Math.PI*2;t.vx+=Math.cos(b)*.5,t.vy+=Math.sin(b)*.5}}t.targetId||(t.vx*=.9,t.vy*=.9),t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t)}else if(t.summonType==="troll"||t.summonType==="troll_mini"){if(t.aiState||(t.aiState="idle"),t.aiState==="ejecting")t.vx*=.92,t.vy*=.92,Math.hypot(t.vx,t.vy)<c&&(t.aiState="idle");else if(t.aiState==="idle"){const u=e.state.player;if(Math.hypot(u.x-t.x,u.y-t.y)>o){const T=Math.atan2(u.y-t.y,u.x-t.x);t.vx+=Math.cos(T)*.2,t.vy+=Math.sin(T)*.2}else t.vx+=(Math.random()-.5)*.5,t.vy+=(Math.random()-.5)*.5;const b=Math.hypot(t.vx,t.vy);b>c&&(t.vx=t.vx/b*c,t.vy=t.vy/b*c);let v=null,x=1/0;for(const T of e.state.enemies){if(T.isTransitioning)continue;const M=Math.hypot(T.x-t.x,T.y-t.y);M<x&&(x=M,v=T)}v&&x<r&&(t.aiState="charge",t.targetId=v.id,z(e,t.x,t.y-30,"!",t.color))}else if(t.aiState==="charge"){const u=e.state.enemies.find(g=>g.id===t.targetId);if(u){const g=Math.atan2(u.y-t.y,u.x-t.x),b=3;t.vx+=Math.cos(g)*b,t.vy+=Math.sin(g)*b;const v=Math.hypot(t.vx,t.vy);v>f&&(t.vx=t.vx/v*f,t.vy=t.vy/v*f),Math.random()<.1&&z(e,t.x,t.y,"!",t.color,"chat")}else t.aiState="idle",t.targetId=void 0}t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t)}else if(t.summonType==="chatbot"){if(t.vx=0,t.vy=0,t.fireCooldown===void 0&&(t.fireCooldown=0),t.fireCooldown--,t.fireCooldown<=0){let u=null,g=1/0;for(const b of e.state.enemies){const v=Math.hypot(b.x-t.x,b.y-t.y);v<g&&(g=v,u=b)}if(u&&g<h){if(e.state.player.items.includes("24")&&Math.random()<.33){if(e.state.player.gold<1){t.fireCooldown=30,z(e,t.x,t.y-20,"!","#ef4444");return}e.state.player.gold--,Math.random()<.5&&z(e,t.x,t.y-20,"-1","#fbbf24","gold")}const b=Math.atan2(u.y-t.y,u.x-t.x);e.state.projectiles.push({id:Math.random().toString(),x:t.x,y:t.y,radius:6,emoji:"",vx:Math.cos(b)*8,vy:Math.sin(b)*8,damage:t.damage||5,life:Math.floor(60*(t.rangeMultiplier||1)),isEnemy:!1,color:"#a855f7",text:"",pierce:0,hitIds:[],angle:b,sourceType:"summon",critChance:t.critChance}),t.fireCooldown=p}}}else if(t.summonType==="intern"){const u=e.state.player,g=u.x-t.x,b=u.y-t.y,v=Math.hypot(g,b);if(v>100?(t.x+=g/v*2.5,t.y+=b/v*2.5):(Math.random()<.05&&(t.vx=(Math.random()-.5)*2,t.vy=(Math.random()-.5)*2),t.x+=t.vx,t.y+=t.vy),Le.constrain(e,t),t.fireCooldown===void 0&&(t.fireCooldown=0),t.fireCooldown--,t.fireCooldown<=0){let x=null,T=1/0;for(const M of e.state.enemies){const k=Math.hypot(M.x-t.x,M.y-t.y);k<T&&(T=k,x=M)}if(x&&T<h){const M=Math.atan2(x.y-t.y,x.x-t.x);e.state.projectiles.push({id:Math.random().toString(),x:t.x,y:t.y,radius:8,emoji:"?",vx:Math.cos(M)*6,vy:Math.sin(M)*6,damage:t.damage||15,life:Math.floor(60*(t.rangeMultiplier||1)),isEnemy:!1,color:"#3b82f6",text:"?",pierce:0,hitIds:[],angle:M,sourceType:"summon",critChance:t.critChance}),t.fireCooldown=p}}}else if(t.summonType==="drone"){const u=e.state.player,b=u.items.includes("")?160:120,v=.05;t.angle=(t.angle||0)+v,t.x=u.x+Math.cos(t.angle)*b,t.y=u.y+Math.sin(t.angle)*b,t.vx=0,t.vy=0}else if(t.summonType==="clone")t.vx=0,t.vy=0;else if(t.summonType==="headhunter"){if(t.aiTimer||(t.aiTimer=0),t.aiTimer--,t.aiTimer<=0){const g=Math.random()*Math.PI*2;t.vx=Math.cos(g)*c,t.vy=Math.sin(g)*c,t.aiTimer=60+Math.floor(Math.random()*60)}const u=200;if(t.x<-e.MAP_WIDTH/2+u&&(t.vx=Math.abs(t.vx)),t.x>e.MAP_WIDTH/2-u&&(t.vx=-Math.abs(t.vx)),t.y<-e.MAP_HEIGHT/2+u&&(t.vy=Math.abs(t.vy)),t.y>e.MAP_HEIGHT/2-u&&(t.vy=-Math.abs(t.vy)),t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t),t.fireCooldown===void 0&&(t.fireCooldown=0),t.fireCooldown--,t.fireCooldown<=0){let g=null,b=1/0;for(const v of e.state.enemies){if(v.config.behavior==="boss"||v.config.tier==="epic"||v.isTransitioning)continue;const x=Math.hypot(v.x-t.x,v.y-t.y);x<r&&x<b&&(b=x,g=v)}if(g){z(e,t.x,t.y-40,"!","#10b981","chat");const v=e.state.enemies.indexOf(g);if(v>-1){e.state.enemies.splice(v,1);const x=Math.random()>.5?"intern":"troll";mt.createSummon(e,x,g.x,g.y)}t.fireCooldown=p}else z(e,t.x,t.y-40,"!","#3b82f6","chat"),mt.createSummon(e,"intern",t.x+(Math.random()-.5)*20,t.y+(Math.random()-.5)*20),t.fireCooldown=Math.floor(p*.7)}}else if(t.summonType==="code_mountain"){t.vx+=(Math.random()-.5)*.2,t.vy+=(Math.random()-.5)*.2,Math.hypot(t.vx,t.vy)>1.5&&(t.vx*=.9,t.vy*=.9),t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t);const g=220;for(const b of e.state.enemies){if(b.isTransitioning||b.config.behavior==="boss")continue;const v=Math.hypot(b.x-t.x,b.y-t.y);if(v<g&&(b.vx*=.4,b.vy*=.4,v<t.radius+b.radius+10&&(b.stunTimer<=0&&Math.random()<.2&&(b.stunTimer=60,z(e,b.x,b.y-20,"!","#84cc16")),e.state.timeAlive%30===0))){const x=t.damage||10;b.hp-=x,e.emit(le.ENTITY_DAMAGED,{x:b.x,y:b.y,text:`-${x}`,color:"#84cc16"})}}}else if(t.summonType==="pacman"){t.customVars||(t.customVars={moveTimer:0,currentDir:{x:1,y:0},powerCharge:0,isPowered:!1,powerTimer:0},t.trailHistory||(t.trailHistory=[])),e.state.timeAlive%60===0&&!t.customVars.isPowered&&(t.customVars.powerCharge+=2),!t.customVars.isPowered&&t.customVars.powerCharge>=100&&(t.customVars.isPowered=!0,t.customVars.powerCharge=0,t.customVars.powerTimer=480,e.state.isPacmanPowered=!0,z(e,t.x,t.y-60,"POWER UP!","#ffffff","chat"),z(e,t.x,t.y-40,"!","#ef4444","chat"),e.audio.play("pacman_power_up"),xe(e,t.x,t.y,"#ffffff",20)),t.customVars.isPowered&&(t.customVars.powerTimer--,t.customVars.powerTimer%30===0&&e.audio.play("pacman_power_up"),t.customVars.powerTimer<=0&&(t.customVars.isPowered=!1,e.state.isPacmanPowered=!1,z(e,t.x,t.y-40,"","#fbbf24","chat"))),e.state.timeAlive%3===0&&(t.trailHistory.push({x:t.x,y:t.y}),t.trailHistory.length>20&&t.trailHistory.shift()),e.state.timeAlive%15===0&&e.audio.play("pacman_waka");const u=(i==null?void 0:i.speed)||6.5,g=t.customVars.isPowered?u*1.5:u;if(t.customVars.moveTimer>0)t.customVars.moveTimer--,t.vx=t.customVars.currentDir.x*g,t.vy=t.customVars.currentDir.y*g;else{let x=null,T=1/0;for(const M of e.state.enemies){if(M.hp<=0||M.isTransitioning)continue;const k=Math.hypot(M.x-t.x,M.y-t.y);k<T&&k<(t.detectRangeOverride||2e3)&&(T=k,x=M)}if(x){const M=x.x-t.x,k=x.y-t.y;Math.abs(M)>Math.abs(k)?t.customVars.currentDir={x:Math.sign(M),y:0}:t.customVars.currentDir={x:0,y:Math.sign(k)}}else{const M=[{x:1,y:0},{x:-1,y:0},{x:0,y:1},{x:0,y:-1}],k=t.customVars.currentDir,C=M.filter(w=>!(w.x===-k.x&&w.y===-k.y));t.customVars.currentDir=C[Math.floor(Math.random()*C.length)]}t.customVars.moveTimer=20,t.vx=t.customVars.currentDir.x*g,t.vy=t.customVars.currentDir.y*g}t.angle=Math.atan2(t.vy,t.vx),t.x+=t.vx,t.y+=t.vy,Le.wrap(e,t);const b=e.state.mapWidth,v=e.state.mapHeight;if(Math.abs(t.x)>b/2-10||Math.abs(t.y)>v/2-10,t.damageTimer===void 0&&(t.damageTimer=0),t.damageTimer>0&&t.damageTimer--,t.damageTimer<=0)for(let x=e.state.enemies.length-1;x>=0;x--){const T=e.state.enemies[x];if(T.hp<=0||T.isTransitioning)continue;const M=Math.hypot(T.x-t.x,T.y-t.y),k=t.radius+T.radius+(t.customVars.isPowered?20:0);if(M<k){let C=t.damage||100;if(t.customVars.isPowered){const w=T.config.behavior==="boss"||T.config.tier==="boss",j=T.config.tier==="epic"||T.config.behavior==="devourer";w||j?(C=150,e.audio.play("ui_static_tick"),z(e,T.x,T.y,"150","#3b82f6","damage")):(C=99999,e.audio.play("pacman_eat_ghost"),z(e,T.x,T.y,"9999","#3b82f6","damage"),xe(e,T.x,T.y,"#3b82f6",10))}else e.audio.play("ui_static_tick"),t.customVars.powerCharge=Math.min(100,t.customVars.powerCharge+5),z(e,t.x,t.y-20,"+5%","#facc15");T.hp-=C,e.state.waveStats.damageDealt+=C,t.customVars.isPowered||e.emit(le.ENTITY_DAMAGED,{x:T.x,y:T.y,text:`-${C}`,color:"#fbbf24",isCrit:!0}),t.radius<48&&(t.radius*=1.01),t.damageTimer=10;break}}}}},Nb=(e,t)=>{if(t.stopTimer=(t.stopTimer||0)-1,t.stopTimer<=0&&(t.isExploding=!0,e.emit(le.PROJECTILE_EXPLODE,{x:t.x,y:t.y,radius:t.maxExplosionRadius,style:t.renderStyle,isCyber:t.renderStyle==="cyber_explosion"||!t.isEnemy&&e.state.player.characterId==="007"}),t.color=t.isEnemy?"#ef4444":"#fbbf24",t.hitIds=[],t.isEnemy&&t.text==="")){const i=t.angle||0,o=r=>{e.state.projectiles.push({id:Math.random().toString(),x:t.x,y:t.y,radius:t.radius*.5,emoji:"",vx:Math.cos(i+r)*6,vy:Math.sin(i+r)*6,damage:t.damage*.7,life:100,isEnemy:!0,color:t.color,text:"",pierce:0,hitIds:[],isExplosive:!1,sourceType:t.sourceType,active:!0})};o(-.4),o(.4)}},aa={move_linear:(e,t)=>{t.x+=t.vx,t.y+=t.vy},friction:(e,t)=>{t.vx*=.95,t.vy*=.95},sine_wave:(e,t)=>{const i=e.state.timeAlive,o=.2,r=3,c=Math.hypot(t.vx,t.vy);if(c>.1){const f=-t.vy/c,h=t.vx/c,p=Math.sin(i*o)*r;t.x+=f*p,t.y+=h*p}},decay_life:(e,t)=>{t.life--},check_bounds:(e,t)=>{Le.checkProjectile(e,t)},stick_to_player:(e,t)=>{t.x=e.state.player.x,t.y=e.state.player.y},homing:(e,t)=>{let i=null,o=null;if(t.isEnemy){const r=e.state.player;i=r.x,o=r.y}else{if(!t.targetId){let r=null,c=600;if(t.targetId){const f=e.state.enemies.find(h=>h.id===t.targetId);f&&f.hp>0&&!f.isTransitioning&&!f.isUnstable?r=f:t.targetId=void 0}if(!r){for(const f of e.state.enemies){if(f.isTransitioning||f.hp<=0||f.isUnstable)continue;const h=Math.hypot(f.x-t.x,f.y-t.y);h<c&&(c=h,r=f)}r&&(t.targetId=r.id)}}if(t.targetId){const r=e.state.enemies.find(c=>c.id===t.targetId);r?(i=r.x,o=r.y):t.targetId=void 0}}if(i!==null&&o!==null){const r=Math.atan2(o-t.y,i-t.x),c=Math.hypot(t.vx,t.vy),f=.15,h=Math.atan2(t.vy,t.vx);let p=r-h;for(;p>Math.PI;)p-=2*Math.PI;for(;p<-Math.PI;)p+=2*Math.PI;const u=h+p*f;t.vx=Math.cos(u)*c,t.vy=Math.sin(u)*c}},neon_fountain:(e,t)=>{if(t.trailHistory||(t.trailHistory=[]),t.fireCooldown&&t.fireCooldown>0){t.fireCooldown--;const o=e.state.player;t.x=o.x,t.y=o.y,t.z=20;return}t.trailHistory.push({x:t.x,y:t.y,z:t.z||0}),t.trailHistory.length>15&&t.trailHistory.shift();const i=.8;if(t.vz=(t.vz||0)-i,t.z=(t.z||0)+t.vz,t.vz>-5&&(t.z||0)>100)t.vx*=.95,t.vy*=.95;else if((t.z||0)>0){if(t.targetId){const p=e.state.enemies.find(u=>u.id===t.targetId);p&&p.hp>0&&!p.isTransitioning?(t.tx=p.x,t.ty=p.y):t.targetId=void 0}let o=t.tx!==void 0?t.tx:t.x,r=t.ty!==void 0?t.ty:t.y;const c=o-t.x,f=r-t.y,h=Math.hypot(c,f);if(h>10){t.vx+=c/h*1.5,t.vy+=f/h*1.5;const u=30,g=Math.hypot(t.vx,t.vy);g>u&&(t.vx=t.vx/g*u,t.vy=t.vy/g*u)}}t.x+=t.vx,t.y+=t.vy,(t.z||0)<=0&&(t.z=0,t.life=0,t.trailHistory.push({x:t.x,y:t.y,z:0}))},isometric_move:(e,t)=>{t.x+=t.vx,t.y+=t.vy,t.z=(t.z||0)+(t.vz||0),t.vz=(t.vz||0)-(t.gravity||.5),t.z<=0&&(t.z=0,t.life=0)},gravity_arc:(e,t)=>{t.vy+=.5},z_gravity_arc:(e,t)=>{t.vy+=.5,t.scale===void 0&&(t.scale=1),t.vy<0?t.scale+=.05:t.scale-=.08,t.scale=Math.max(.6,Math.min(2.5,t.scale))},delayed_homing:(e,t)=>{if(t.aiTimer!==void 0&&t.aiTimer>0&&t.aiTimer--,t.aiTimer===void 0||t.aiTimer<=0||t.vy>5){if(!t.targetId){let i=null,o=1200;for(const r of e.state.enemies){if(r.isTransitioning||r.hp<=0)continue;const c=Math.hypot(r.x-t.x,r.y-t.y);c<o&&(o=c,i=r)}i&&(t.targetId=i.id)}if(t.targetId){const i=e.state.enemies.find(o=>o.id===t.targetId);if(i){const o=Math.atan2(i.y-t.y,i.x-t.x),r=1.5;t.vx+=Math.cos(o)*r,t.vy+=Math.sin(o)*r;const c=30,f=Math.hypot(t.vx,t.vy);f>c&&(t.vx=t.vx/f*c,t.vy=t.vy/f*c)}else t.targetId=void 0}}},explode_on_expire:(e,t)=>{t.life<=0&&!t.isExploding&&(t.isExploding=!0,t.life=t.renderStyle==="neon_missile"?60:30,t.vx=0,t.vy=0,t.hitIds=[],(!t.renderStyle||t.renderStyle==="text")&&(t.renderStyle="cyber_explosion"),e.emit(le.PROJECTILE_EXPLODE,{x:t.x,y:t.y,radius:t.maxExplosionRadius,style:t.renderStyle,isCyber:t.renderStyle==="cyber_explosion"||!t.isEnemy&&e.state.player.characterId==="007"}),t.isEnemy||(t.color="#fbbf24"))},update_explosion:(e,t)=>{if(t.isExploding){const i=t.maxExplosionRadius||100,o=(i-t.radius)*.1;o<.2&&t.radius>=i-2||(t.radius+=Math.max(.5,o))}},emit_trail:(e,t)=>{if(!t.trailConfig)return;const i=t.trailConfig;i.timer--,i.timer<=0&&(i.timer=i.interval,i.type==="pixel"?Zt(e,{x:t.x,y:t.y,color:i.color,count:1,life:15,size:4,type:"rect",speed:0,scaleDelta:-.05,rotation:Math.random()*Math.PI}):i.type==="smoke"?Zt(e,{x:t.x,y:t.y,color:i.color,count:1,life:30,size:i.size||6,type:"circle",speed:.5,alpha:.6,scaleDelta:.02}):i.type==="spark"?Zt(e,{x:t.x,y:t.y,color:i.color,count:1,life:10,size:3,type:"spark",speed:0,blendMode:"lighter"}):i.type==="line"&&Zt(e,{x:t.x,y:t.y,color:i.color,count:1,life:10,size:2,type:"circle",speed:0,alpha:.5}))},sweep_bullets:(e,t)=>{const i=e.state.projectiles;for(let o=i.length-1;o>=0;o--){const r=i[o];if(!r.isEnemy||!r.active||r.life<=0)continue;if(Math.hypot(t.x-r.x,t.y-r.y)<t.radius+r.radius){r.life=0;const f=(t.x+r.x)/2,h=(t.y+r.y)/2,p=["#94a3b8","#bae6fd","#ffffff"];Zt(e,{x:f,y:h,color:p[Math.floor(Math.random()*p.length)],count:8,speed:6,life:25,type:"circle",blendMode:"source-over"})}}}},Eb={update:e=>{const t=e.state.projectiles;for(let i=t.length-1;i>=0;i--){const o=t[i];if(o.ignoreTimer!==void 0&&o.ignoreTimer>0&&(o.ignoreTimer--,o.ignoreTimer<=0&&(o.ignoreId=void 0)),o.isSummon&&!o.isExploding)Cb.update(e,o);else if(o.behaviors&&o.behaviors.length>0)for(const r of o.behaviors)aa[r]&&aa[r](e,o);else o.isExplosive?o.isExploding?(aa.update_explosion(e,o),aa.decay_life(e,o)):o.isStopped?Nb(e,o):(aa.move_linear(e,o),aa.decay_life(e,o),aa.check_bounds(e,o)):(aa.move_linear(e,o),aa.decay_life(e,o),aa.check_bounds(e,o)),o.trailConfig&&aa.emit_trail(e,o);if(o.life<=0)if(o.explodeOnExpire&&!o.isExploding)o.isExploding=!0,o.life=o.renderStyle==="neon_missile"?60:30,o.vx=0,o.vy=0,o.hitIds=[],o.damageWindow=3,o.maxExplosionRadius&&(o.radius=o.maxExplosionRadius),(!o.renderStyle||o.renderStyle==="text"||o.renderStyle==="black_pot")&&(o.renderStyle="cyber_explosion"),(o.sourceType==="da_ye"||o.renderStyle==="golden_palm")&&e.state.zones.push({id:Math.random().toString(),x:o.x,y:o.y,radius:120,type:"palm_print",life:90,maxLife:90,color:"#fbbf24",emoji:""}),e.audio.playExplosion(),o.behaviors&&(o.behaviors.includes("update_explosion")||o.behaviors.push("update_explosion"),o.behaviors.includes("decay_life")||o.behaviors.push("decay_life"));else{Me.releaseProjectile(e,o);const r=t.length-1;i!==r&&(t[i]=t[r]),t.pop()}}}},Ab={getAimAngle:e=>{const t=e.state.player,i=e.joystickInput.aim.x,o=e.joystickInput.aim.y;if(Math.hypot(i,o)>.1)return Math.atan2(o,i);if(e.settings.autoAim){let c=null,f=1/0;for(const h of e.state.enemies){if(h.isTransitioning)continue;const p=Math.hypot(h.x-t.x,h.y-t.y);p<f&&(f=p,c=h)}if(c)return Math.atan2(c.y-t.y,c.x-t.x)}return Math.atan2(e.mousePos.y-t.y,e.mousePos.x-t.x)}},js={createMeleeSwing:(e,t)=>{const i=e.state.player,r=110*(i.radius/24);i.swingCount=(i.swingCount||0)+1;const c=1,f=Me.getProjectile(e);f.x=i.x,f.y=i.y,f.radius=r,f.emoji="",f.vx=0,f.vy=0,f.damage=$e.getPlayerDamage(i),f.life=24,f.maxLife=24,f.isEnemy=!1,f.color="#e2e8f0",f.text="",f.pierce=999,f.angle=t,f.sourceType="cleaner",f.isSweeper=!0,f.swingDirection=c,f.behaviors=["stick_to_player","decay_life","sweep_bullets"],f.renderStyle="melee_swing",e.state.projectiles.push(f)},createWealthCoin:(e,t,i,o)=>{const r=e.state.player,c=Me.getProjectile(e),f=Math.max(10,r.gold),h=(r.projectileSpeed+o)*i*.8;c.x=r.x,c.y=r.y,c.radius=25,c.emoji="",c.vx=Math.cos(t)*h,c.vy=Math.sin(t)*h,c.damage=f,c.life=120,c.isEnemy=!1,c.color="#facc15",c.text="",c.pierce=3,c.angle=t,c.sourceType="player",c.renderStyle="gold_coin",c.behaviors=["move_linear","decay_life","check_bounds"],c.trailConfig={type:"spark",color:"#facc15",interval:4,timer:0},c.isWealthCoin=!0,e.state.projectiles.push(c),z(e,r.x,r.y-40,"!","#facc15","chat")},createNeonRain:(e,t,i,o,r=0,c)=>{const f=e.state.player,h=Me.getProjectile(e),p=$e.getPlayerDamage(f)*5;h.x=f.x,h.y=f.y,h.z=20;const u=Math.random()*Math.PI*2,g=5+Math.random()*8;h.vx=Math.cos(u)*g,h.vy=Math.sin(u)*g,h.vz=25+Math.random()*10,h.radius=20,h.emoji="",h.damage=p,h.life=999,h.isEnemy=!1,h.color=o,h.text="",h.pierce=0,h.sourceType="player",h.renderStyle="neon_missile",h.isAerial=!0,h.tx=t,h.ty=i,h.targetId=c,h.behaviors=["neon_fountain","explode_on_expire","update_explosion"],h.fireCooldown=r,h.trailHistory=[],h.isExplosive=!0,h.explodeOnExpire=!0,h.maxExplosionRadius=130,h.trailConfig=void 0,h.damageWindow=3,e.state.projectiles.push(h)},createPlayerProjectile:(e,t,i,o,r,c,f,h=!1,p)=>{const u=e.state.player,g=ye.getSynergyCounts(u.items),b=ye.getActiveTiers(g);let v=u.characterId==="007"?"":"",x=20,T="#a5f3fc",M=!1,k=!1,C=$e.getPlayerDamage(u),w=u.projectilePierce,j="text",O,V=["move_linear","decay_life","check_bounds","emit_trail"],H=!1,X=u.isOverclocked?1:u.critChance;h&&p&&p.critChance>0&&(X=Math.max(X,p.critChance)),Math.random()<X&&(H=!0,C*=u.critDamage),u.characterId==="1024"?(T="#4ade80",O={type:"pixel",color:"#22c55e",interval:3,timer:0},V=["move_linear","sine_wave","decay_life","check_bounds","emit_trail"]):u.characterId==="007"&&(T="#fbbf24",O={type:"smoke",color:"#78716c",interval:3,timer:0,size:8},V=["move_linear","friction","decay_life","check_bounds","explode_on_expire","update_explosion","emit_trail"],M=!0,k=!0);let ee=!1;if((b.tech||0)>=4?Math.random()<.5&&(ee=!0):(b.tech||0)>=2&&Math.random()<.2&&(ee=!0),h){v="",C=C*.5,w=0,p&&p.pierce>0&&(w=p.pierce);const be=(p==null?void 0:p.rangeMultiplier)||1;V=["move_linear","decay_life","check_bounds"],u.characterId==="007"&&(V=["move_linear","decay_life","check_bounds","explode_on_expire","update_explosion"],M=!0,k=!0);const K=Me.getProjectile(e),R=(u.explosionRangeMultiplier||1)*f;K.x=i,K.y=o,K.radius=14,K.emoji="",K.vx=Math.cos(t)*u.projectileSpeed,K.vy=Math.sin(t)*u.projectileSpeed,K.damage=C,K.life=Math.floor(100*be),K.isEnemy=!1,K.color="#22d3ee",K.text="",K.pierce=w,K.angle=t,K.sourceType="summon",K.critChance=(p==null?void 0:p.critChance)||0,K.isCrit=H,K.isExplosive=M,K.explodeOnExpire=k,K.maxExplosionRadius=(M?120:80)*R,K.renderStyle=j,K.behaviors=V,K.trailConfig=O,K.canChain=ee,K.bounceCount=0,e.state.projectiles.push(K);return}if(!v){v=js.getBulletText(e,u);const be=[".",";","?",",","{","}"].includes(v);u.characterId==="ev_creator"?x=22:u.characterId==="1024"&&(x=be?12:20,x+=Math.random()*10-5)}if(H&&(x*=1.2,T="#f87171",u.isOverclocked&&(T="#ef4444",v+="!")),u.characterId==="ev_creator"){const be=Math.random();if(T=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#a855f7"][Math.floor(Math.random()*6)],be<.2)V.includes("explode_on_expire")||V.push("explode_on_expire","update_explosion"),M=!0,k=!0,v="Error",T="#ef4444",e.emit(le.FLOATING_TEXT,{x:u.x,y:u.y-50,text:"ERROR!",color:"#ef4444",category:"damage"});else if(be<.3)u.hp<u.maxHp&&(u.hp=Math.min(u.maxHp,u.hp+1),e.emit(le.FLOATING_TEXT,{x:u.x,y:u.y-30,text:"+1",color:"#22c55e",category:"damage"}),e.emit(le.ITEM_PICKUP));else if(be<.4){const K=Math.floor(Math.random()*3)+1;u.gold+=K,e.emit(le.ITEM_PICKUP)}}u.items.includes("")&&(Math.random()>.5?(C=C*3,T="#facc15",H=!0):(C=1,T="#94a3b8")),u.items.includes("")&&Math.random()<.01&&(C=9999,v="!",T="#facc15",x=30,M=!0,k=!0,V.includes("explode_on_expire")||V.push("explode_on_expire","update_explosion"),e.emit(le.FLOATING_TEXT,{x:u.x,y:u.y-60,text:"9999!",color:"#facc15",category:"damage"})),u.characterId==="007"&&!M&&(j="text");const re=(u.projectileSpeed+c)*r*(u.characterId==="007"?3.5:1),J=Me.getProjectile(e),pe=(u.explosionRangeMultiplier||1)*f;J.x=i,J.y=o,J.radius=x,J.emoji=v,J.vx=Math.cos(t)*re,J.vy=Math.sin(t)*re,J.damage=C,J.life=140,J.isEnemy=!1,J.color=T,J.text=v,J.pierce=w,J.angle=t,J.sourceType="player",J.isCrit=H,J.isExplosive=M,J.explodeOnExpire=k,J.maxExplosionRadius=(M?120:80)*pe,J.renderStyle=j,J.behaviors=V,J.trailConfig=O,J.canChain=ee,J.bounceCount=0,e.state.projectiles.push(J)},getBulletText:(e,t)=>{if(t.characterId==="9527"){const i=mb,o=i[t.speechSentenceIndex%i.length],r=o[t.speechCharIndex];return t.speechCharIndex++,t.speechCharIndex>=o.length&&(t.speechCharIndex=0,t.speechSentenceIndex++,t.speechPauseTimer=t.attackSpeed),r}else if(t.characterId==="1024"){const i=["Bug","404","null",";","{}","&&",".",".","if","else","var","git","sudo","rm","TODO","//","const","let","=>","await","try","catch","void"];return i[Math.floor(Math.random()*i.length)]}else if(t.characterId==="ev_creator"){const i=["","","","","","","","","","","","","","","","","",""];return i[Math.floor(Math.random()*i.length)]}else return rh[Math.floor(Math.random()*rh.length)]}},Db={shoot:(e,t=1,i=0,o=1)=>{const r=e.state.player;if(e.state.activeMutators.includes("carpal_tunnel")&&Math.random()<.15){e.state.timeAlive%30===0&&z(e,r.x,r.y-50,"!","#fb923c");return}if(r.items.includes("")){if(r.gold<5){e.state.timeAlive%30===0&&z(e,r.x,r.y-50,"!","#ef4444");return}r.gold-=5}const c=ye.getSynergyCounts(r.items),f=ye.getActiveTiers(c);(f.hardcore||0)>=6&&(r.isOverclocked||(r.heatValue=Math.min(100,r.heatValue+5),r.heatValue>=100&&(r.isOverclocked=!0,z(e,r.x,r.y-60,"!!!","#ef4444","chat"),e.audio.playPowerup())));const h=Ab.getAimAngle(e);if(e.emit(le.PLAYER_SHOOT,{player:r}),r.characterId==="cleaner"){js.createMeleeSwing(e,h);return}if((f.tech||0)>=6&&(r.customTimers.tech_bsod_counter===void 0&&(r.customTimers.tech_bsod_counter=0),r.customTimers.tech_bsod_counter++,r.customTimers.tech_bsod_counter>=15)){r.customTimers.tech_bsod_counter=0;const v=200,x=r.x+Math.cos(h)*v,T=r.y+Math.sin(h)*v;e.state.zones.push({id:Math.random().toString(),x,y:T,radius:200,type:"bsod",life:120,maxLife:120,color:"#0000AA",emoji:":("}),z(e,r.x,r.y-60,"SUDO RM -RF","#3b82f6","chat"),e.audio.play("ui_glitch_severe");return}(f.capital||0)>=6&&Math.random()<.05&&js.createWealthCoin(e,h,t,i);const p=r.projectileCount,u=r.projectileSpread,g=h-u*(p-1)/2;for(let v=0;v<p;v++)js.createPlayerProjectile(e,g+u*v,r.x,r.y,t,i,o);if(r.backwardShots>0){const x=h+Math.PI-u*(r.backwardShots-1)/2;for(let T=0;T<r.backwardShots;T++)js.createPlayerProjectile(e,x+u*T,r.x,r.y,t,i,o)}e.state.projectiles.filter(v=>v.summonType==="clone").forEach(v=>{js.createPlayerProjectile(e,h,v.x,v.y,t,i,o,!0,v)})}};class tm{constructor(t){this.cells=new Map,this.cellSize=t}clear(){this.cells.clear()}insert(t){const i=this.getKey(t.x,t.y);this.cells.has(i)||this.cells.set(i,[]),this.cells.get(i).push(t)}insertAll(t){for(const i of t)this.insert(i)}query(t,i){const o=[],r=Math.floor(t/this.cellSize),c=Math.floor(i/this.cellSize);for(let f=-1;f<=1;f++)for(let h=-1;h<=1;h++){const p=`${r+f},${c+h}`,u=this.cells.get(p);if(u)for(let g=0;g<u.length;g++)o.push(u[g])}return o}getKey(t,i){return`${Math.floor(t/this.cellSize)},${Math.floor(i/this.cellSize)}`}}const Rb={handle:(e,t,i)=>{var v;const o=i.query(t.x,t.y),r=e.state.player;let c=!1,f=0,h=!1;if(t.isSweeper){h=!0;const x=t.maxLife||24,T=1-t.life/x,M=2.5,k=M/2,w=(1-Math.cos(T*Math.PI*2))/2,j=t.swingDirection!==void 0?t.swingDirection:1;f=(t.angle!==void 0?t.angle:0)+k*j-w*M*j}const p=ye.getSynergyCounts(r.items),u=ye.getActiveTiers(p),g=(u.hardcore||0)>=4;let b=0;if(g&&(b=Math.max(0,1-r.hp/r.maxHp)*.1),r.items.includes("")){const x=i.query(r.x,r.y);for(const T of x){if(T.isTransitioning||T.hp<=0)continue;if(Math.hypot(r.x-T.x,r.y-T.y)<r.radius+T.radius+10&&Math.hypot(r.vx,r.vy)>1&&e.state.timeAlive%30===0){const C=r.attackDamage*2;T.hp-=C,e.state.waveStats.damageDealt+=C,e.emit(le.ENTITY_DAMAGED,{x:T.x,y:T.y,text:`${Math.floor(C)}`,color:"#ef4444"});const w=Math.atan2(T.y-r.y,T.x-r.x);T.vx+=Math.cos(w)*15,T.vy+=Math.sin(w)*15,T.stunTimer=30}}}for(const x of o){if(x.isTransitioning||t.hitIds.includes(x.id)||x.isUnstable)continue;if(Math.hypot(t.x-x.x,t.y-x.y)<t.radius+x.radius){if(h){const w=Math.atan2(x.y-t.y,x.x-t.x);let j=Math.abs(w-f);if(j>Math.PI&&(j=2*Math.PI-j),j>.8)continue}if(x.isThrown||x.captureState==="orbiting"){if(t.isExplosive){t.explodeOnExpire?t.life=0:(t.isStopped=!0,t.stopTimer=0,t.life=60),t.hitIds.push(x.id);break}c=!0;break}if(x.config.type==="boss_glitch"&&(!((v=x.customVars)!=null&&v.unstableCooldown)||x.customVars.unstableCooldown<=0)&&Math.random()<.1&&(x.isUnstable=!0,x.customVars.unstableTimer=90,z(e,x.x,x.y-x.radius-20,"SIGNAL LOST","#00ff00","chat")),t.hitIds.push(x.id),t.renderStyle==="gold_coin"&&e.audio.playCoin(),x.config.behavior!=="boss"&&($e.shouldTrigger1024Stun(r.characterId==="1024")&&(x.stunTimer=60),$e.shouldTriggerPPTStun(r.items.includes("PPT"))&&(x.stunTimer=60,e.emit(le.FLOATING_TEXT,{x:x.x,y:x.y,text:"!",color:"#a855f7",category:"chat"})),t.isSummon&&r.items.includes("")&&Math.random()<.1&&(x.stunTimer=60,e.emit(le.FLOATING_TEXT,{x:x.x,y:x.y,text:"!",color:"#22d3ee",category:"chat"}))),t.canChain&&Math.random()<.3){const j=i.query(x.x,x.y).filter(O=>O!==x&&Math.hypot(O.x-x.x,O.y-x.y)<300&&!O.isTransitioning&&O.hp>0&&!O.isUnstable);for(let O=0;O<3&&O<j.length;O++){const V=j[O],H=Math.ceil(t.damage*.5);V.hp-=H,V.stunTimer=15,e.state.waveStats.damageDealt+=H,e.emit(le.ENTITY_DAMAGED,{x:V.x,y:V.y,text:`${H}`,color:"#3b82f6"}),Uh(e,x.x,x.y,V.x,V.y,"#3b82f6")}}if(t.bounceCount&&t.bounceCount>0){t.bounceCount--;let w=null,j=400;const O=i.query(x.x,x.y);for(const V of O){if(V===x||t.hitIds.includes(V.id)||V.hp<=0||V.isTransitioning||V.isUnstable)continue;const H=Math.hypot(V.x-x.x,V.y-x.y);H<j&&(j=H,w=V)}if(w){const V=Math.hypot(t.vx,t.vy),H=Math.atan2(w.y-x.y,w.x-x.x);t.vx=Math.cos(H)*V,t.vy=Math.sin(H)*V,t.isExplosive&&(e.emit(le.PROJECTILE_EXPLODE,{x:x.x,y:x.y,radius:t.maxExplosionRadius*.6,style:t.renderStyle,isCyber:!0}),e.state.zones.push({id:Math.random().toString(),x:x.x,y:x.y,radius:t.maxExplosionRadius*.6,type:"explosion_shockwave",life:10,color:"#fbbf24",emoji:""})),e.emit(le.FLOATING_TEXT,{x:t.x,y:t.y,text:"",color:"#3b82f6"});continue}}if(t.isExplosive){t.explodeOnExpire||t.behaviors&&t.behaviors.includes("explode_on_expire")?t.life=0:(t.isStopped=!0,t.stopTimer=0,t.life=60);break}$e.shouldLifesteal(r.lifeSteal+b)&&r.hp<r.maxHp&&(r.hp=Math.min(r.maxHp,r.hp+1)),$e.shouldTriggerRedEnvelope(r.items.includes(""))&&(r.gold+=6,e.state.score+=6,e.state.waveStats.goldEarned+=6,e.state.waveStats.bonusGold+=6,e.emit(le.FLOATING_TEXT,{x:x.x,y:x.y-40,text:"+6",color:"#ef4444",category:"gold"}));let M=t.damage,k=t.isCrit||!1;if(r.items.includes("")){const w=Math.hypot(t.x-r.x,t.y-r.y),j=Math.min(.3,w/800);M*=1+j}if(r.items.includes("")&&Math.random()<.1&&(r.gold+=1,e.state.score+=1,e.state.waveStats.goldEarned+=1),(t.isSummon||t.sourceType==="summon")&&t.critChance&&t.critChance>0&&!k&&Math.random()<t.critChance&&(M*=2,k=!0,e.emit(le.FLOATING_TEXT,{x:x.x,y:x.y-30,text:"!",color:"#ef4444"}),e.emit(le.PARTICLE_SPAWN,{x:x.x,y:x.y,color:"#ef4444",count:3})),x.anxietyTimer&&x.anxietyTimer>0&&(M*=1.15),x.config.type==="river_crab"){const w=Math.atan2(x.vy,x.vx),j=Math.atan2(t.vy,t.vx);let O=Math.abs(w-j);O>Math.PI&&(O=2*Math.PI-O),O>Math.PI*.6?(M*=.2,e.emit(le.FLOATING_TEXT,{x:x.x,y:x.y-40,text:"404 Block",color:"#94a3b8"}),e.audio.play("ui_shield_break"),Zt(e,{x:t.x,y:t.y,color:"#94a3b8",count:5,speed:4,life:10,type:"spark",blendMode:"lighter"})):O<Math.PI*.4&&(M*=2,k=!0,e.emit(le.FLOATING_TEXT,{x:x.x,y:x.y-40,text:"!",color:"#ef4444",scale:1.5}))}if(x.tempShield&&x.tempShield>0){const w=Math.min(x.tempShield,M);x.tempShield-=w,M-=w,e.emit(le.FLOATING_TEXT,{x:x.x,y:x.y-50,text:`${Math.floor(w)}`,color:"#cbd5e1"})}if(M>0&&(x.hp-=M,x.hitFlashTimer=5,e.state.waveStats.damageDealt+=M,e.emit(le.ENTITY_DAMAGED,{x:x.x,y:x.y,text:`-${Math.floor(M)}`,color:k?"#ef4444":"#fbbf24",isCrit:k,targetId:x.id})),(u.market||0)>=4&&Math.random()<.3&&(x.anxietyTimer=150),(u.board||0)>=4&&x.config.behavior!=="boss"&&x.hp>0&&x.hp/x.maxHp<.2&&(x.hp=0,e.emit(le.FLOATING_TEXT,{x:x.x,y:x.y,text:"FIRED!",color:"#ef4444",category:"chat"}),Zt(e,{x:x.x,y:x.y,color:"#ffffff",count:8,type:"rect",speed:3,life:40,size:6,scaleDelta:-.05,rotation:Math.random(),angularVelocity:.2})),x.config.behavior!=="boss"){const w=Math.atan2(x.y-t.y,x.x-t.x),j=$e.getPlayerKnockback(r),O=h?20:j;x.vx+=Math.cos(w)*O,x.vy+=Math.sin(w)*O,h&&(x.stunTimer=15)}if(x.config.behavior==="boss"&&x.phase===1&&x.hp<=0)if(x.config.type==="boss_glitch"){const w=e.state.enemies.indexOf(x);w>-1&&Da(e,w)}else ji(e,x);else if(x.hp<=0){t.renderStyle==="gold_coin"&&(r.gold+=1,e.state.score+=1,e.state.waveStats.goldEarned+=1);const w=e.state.enemies.indexOf(x);w>-1&&Da(e,w,!1,!!t.isWealthCoin)}if(t.pierce>0?(t.pierce--,t.damage*=.8):c=!0,t.isInvincible&&(c=!1),c)break}}return c},spawnCodeExplosion:(e,t,i,o)=>{const r=Me.getProjectile(e);r.id=Math.random().toString(),r.x=t.x,r.y=t.y,r.radius=o,r.emoji="",r.vx=0,r.vy=0,r.damage=i.damage*.5,r.life=5,r.isEnemy=!1,r.color="#22c55e",r.text="",r.pierce=999,r.hitIds=[t.id],r.isExplosive=!0,r.isExploding=!0,r.maxExplosionRadius=o,r.renderStyle="code_explosion",r.active=!0,e.state.projectiles.push(r)}},Ob={handle:(e,t,i)=>{if(t.damageWindow!==void 0&&(t.damageWindow--,t.damageWindow<0))return;const o=i.query(t.x,t.y),r=e.state.player;let c=0,f=0;const h=ye.getSynergyCounts(r.items),u=(ye.getActiveTiers(h).market||0)>=4,g=r.items.includes("");for(const b of o){if(t.hitIds.includes(b.id))continue;if(f>=15)break;if(Math.hypot(t.x-b.x,t.y-b.y)<t.radius+b.radius){if(b.isThrown||b.captureState==="orbiting"){t.hitIds.push(b.id);continue}t.hitIds.push(b.id),f++;let x=t.damage*.8;if(b.anxietyTimer&&b.anxietyTimer>0&&(x*=1.15),b.hp-=x,b.hitFlashTimer=5,b.config.behavior!=="boss"){const C=b.x-t.x,w=b.y-t.y,j=Math.hypot(C,w);if(j>0){const O=r.characterId==="007"?.5:8;b.vx+=C/j*O,b.vy+=w/j*O}}e.state.waveStats.damageDealt+=Math.floor(x),e.emit(le.ENTITY_DAMAGED,{x:b.x,y:b.y,text:`-${Math.floor(x)}`,color:"#fbbf24",isCrit:!!t.isCrit,targetId:b.id});const T=t.sourceType==="viral_market",M=g?.6:.3,k=T?Math.random()<M:u&&Math.random()<.2;if((t.alwaysAnxiety||k)&&(b.anxietyTimer=150,T&&(Uh(e,t.x,t.y,b.x,b.y,"#a855f7"),xe(e,t.x,t.y,"#a855f7",6))),b.config.behavior==="boss"&&b.phase===1&&b.hp<=0)ji(e,b);else if(b.hp<=0){const C=e.state.enemies.indexOf(b);C>-1&&(Da(e,C,T),c++)}}}c>0&&(t.killCount=(t.killCount||0)+c,t.killCount>r.maxMultiKill&&(r.maxMultiKill=t.killCount))}},fh={handleCaptureBeacon:(e,t,i)=>{const o=i.query(t.x,t.y);let r=!1;for(const c of o){if(c.id===t.sourceType)continue;if(c.captureState==="targeted"){if(t.targetId&&c.id!==t.targetId)continue}else if(c.captureState)continue;if(c.linkedById||c.config.behavior==="boss"||c.config.type==="elite_manager"||c.isThrown)continue;if(Math.hypot(t.x-c.x,t.y-c.y)<t.radius+c.radius){c.captureState="being_dragged",c.captureTargetId=t.sourceType,e.emit(le.FLOATING_TEXT,{x:c.x,y:c.y,text:"!",color:"#a855f7",category:"chat"}),t.life=0,r=!0;break}}return r},handleCodeMountain:(e,t,i)=>{const o=i.query(t.x,t.y);for(const r of o){const c=r.x-t.x,f=r.y-t.y,h=Math.hypot(c,f);if(h<t.radius+r.radius&&(r.vx*=.5,r.vy*=.5,h>0&&(r.x+=c/h*.5,r.y+=f/h*.5),e.state.timeAlive%20===0&&(r.hp-=t.damage,e.emit(le.ENTITY_DAMAGED,{x:r.x,y:r.y,text:`-${t.damage}`,color:"#84cc16",isCrit:!1,targetId:r.id}),t.hp!==void 0&&(t.hp-=5,t.hp<=0&&(t.life=0)),r.hp<=0))){const p=e.state.enemies.indexOf(r);p>-1&&Da(e,p)}}}},am={damagePlayer:pt.damagePlayer,checkCollisions:e=>{var f;const t=new tm(400);t.insertAll(e.state.enemies);const i=e.state.player,o=i.items.includes(""),r=e.state.timeAlive,c=e.state.projectiles.filter(h=>h.isSummon&&!h.isInvincible&&h.hp&&h.hp>0);if(!i.isDying){const h=t.query(i.x,i.y);for(const p of h){if(p.hp<=0||p.isTransitioning||p.isUnstable||p.config.type==="boss_glitch"&&((f=p.customVars)==null?void 0:f.activeSkill)==="overflow")continue;const u=Math.hypot(p.x-i.x,p.y-i.y),g=p.radius+i.radius*.8;if(u<g){if(o){const b=Math.hypot(i.vx,i.vy);if(b>.5){const v=i.facingAngle||0,x=Math.atan2(p.y-i.y,p.x-i.x);let T=Math.abs(v-x);if(T>Math.PI&&(T=2*Math.PI-T),T<Math.PI/3){p.customVars||(p.customVars={});const k=p.customVars.lastRamTime||0;if(r-k>18){p.customVars.lastRamTime=r;const w=b>2;let j=0,O=0,V=!1;w?(j=Math.floor(i.attackDamage*2+i.maxHp*.1),O=60,V=!0,e.audio.play("ui_shield_break"),z(e,p.x,p.y," !","#ef4444","damage")):(j=Math.floor(i.attackDamage*.5),O=25,V=!1),p.hp-=j,e.state.waveStats.damageDealt+=j,e.emit(le.ENTITY_DAMAGED,{x:p.x,y:p.y,text:`${j}`,color:V?"#ef4444":"#ffffff",isCrit:V}),xe(e,(p.x+i.x)/2,(p.y+i.y)/2,"#ffffff",w?12:4);const H=Math.atan2(p.y-i.y,p.x-i.x);if(p.vx=Math.cos(H)*O,p.vy=Math.sin(H)*O,p.stunTimer=w?60:15,p.hp<=0){const X=e.state.enemies.indexOf(p);X>-1&&Da(e,X)}}else{const w=Math.atan2(p.y-i.y,p.x-i.x),j=10;p.vx+=Math.cos(w)*j,p.vy+=Math.sin(w)*j}continue}}}if(p.config.type==="leech"){p.captureState!=="latched"&&(p.captureState="latched",pt.damagePlayer(e,p.config.damage,"leech_latch"),p.vx=0,p.vy=0);continue}if(i.invulnerableTime<=0){const b=p.config.damage;if(b>0||p.config.behavior==="thief"){pt.damagePlayer(e,b,p.config.type,p.x,p.y),p.hitFlashTimer=5;const v=Math.atan2(i.y-p.y,i.x-p.x),x=15;i.vx+=Math.cos(v)*x,i.vy+=Math.sin(v)*x,p.config.behavior!=="boss"&&p.config.behavior!=="turret"&&(p.vx-=Math.cos(v)*(x*.5),p.vy-=Math.sin(v)*(x*.5))}p.config.behavior==="balloon"&&(p.hp=0)}}}}for(let h=e.state.projectiles.length-1;h>=0;h--){const p=e.state.projectiles[h];if(p.z&&p.z>0||p.isFake)continue;if(p.isCaptureBeacon&&p.life>0){if(fh.handleCaptureBeacon(e,p,t)&&p.life<=0){e.state.projectiles.splice(h,1);continue}if(p.life<=0){e.state.projectiles.splice(h,1);continue}}if(p.summonType==="code_mountain"&&p.life>0){fh.handleCodeMountain(e,p,t);continue}if(p.isExploding){p.isEnemy?pt.checkExplosionHit(e,p):Ob.handle(e,p,t);continue}let u=!1;if(p.isEnemy&&!p.isCaptureBeacon){for(const g of c){const b=Math.hypot(g.x-p.x,g.y-p.y),v=g.radius+p.radius+5;if(b<v){const x=p.damage;g.hp&&(g.hp-=x),e.emit(le.FLOATING_TEXT,{x:g.x,y:g.y-10,text:"!",color:"#cbd5e1"}),e.emit(le.PARTICLE_SPAWN,{x:p.x,y:p.y,color:"#ffffff",count:2}),u=!0;break}}u||(u=pt.checkPlayerHit(e,p))}else p.isEnemy||(u=Rb.handle(e,p,t));u&&!p.isExplosive&&(e.emit(le.PARTICLE_SPAWN,{x:p.x,y:p.y,color:p.color,count:3}),p.life=0)}}},Ib=Eb.update,Vb=am.checkCollisions,sm=am.damagePlayer,Hb={update:(e,t,i,o)=>{if(t.subState||(t.subState="assess"),t.hrStateTimer||(t.hrStateTimer=0),t.hrStateTimer++,t.subState==="assess"){const r=Math.hypot(i.x-t.x,i.y-t.y),c=600,f=t.config.speed;if(r<c-50){const h=Math.atan2(t.y-i.y,t.x-i.x);t.vx+=(Math.cos(h)*f-t.vx)*.1,t.vy+=(Math.sin(h)*f-t.vy)*.1}else if(r>c+50){const h=Math.atan2(i.y-t.y,i.x-t.x);t.vx+=(Math.cos(h)*f-t.vx)*.1,t.vy+=(Math.sin(h)*f-t.vy)*.1}else{const h=Math.atan2(i.y-t.y,i.x-t.x)+Math.PI/2;t.vx+=(Math.cos(h)*f-t.vx)*.1,t.vy+=(Math.sin(h)*f-t.vy)*.1}if(t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t),t.hrStateTimer%60===0){const h=Math.atan2(i.y-t.y,i.x-t.x);e.audio.playEnemyShoot(t.config.type);for(let p=-1;p<=1;p++){const u=h+p*.2,g=Me.getProjectile(e);g.x=t.x,g.y=t.y,g.radius=t.config.projectileSize||15,g.emoji=t.config.projectileChar||"",g.vx=Math.cos(u)*11,g.vy=Math.sin(u)*11,g.damage=t.config.damage*o,g.life=240,g.isEnemy=!0,g.color=t.config.projectileColor||"#ef4444",g.text=t.config.projectileChar||"",g.pierce=0,g.sourceType=t.config.type,t.config.projectileRenderStyle&&(g.renderStyle=t.config.projectileRenderStyle),e.state.projectiles.push(g)}Math.random()<.3&&z(e,t.x,t.y-t.radius-40,"...","#a855f7","chat")}t.hrStateTimer>300&&(t.subState="lock",t.hrStateTimer=0,t.vx=0,t.vy=0,t.dashTarget={x:i.x,y:i.y},z(e,t.x,t.y-t.radius-40,"!","#ef4444","chat"))}else if(t.subState==="lock")t.vx*=.8,t.vy*=.8,t.x+=t.vx,t.y+=t.vy,t.hrStateTimer<90&&(t.dashTarget.x+=(i.x-t.dashTarget.x)*.15,t.dashTarget.y+=(i.y-t.dashTarget.y)*.15),t.hrStateTimer%4===0&&(t.x+=(Math.random()-.5)*4,t.y+=(Math.random()-.5)*4),t.hrStateTimer>120&&(t.subState="dash",t.hrStateTimer=0,z(e,t.x,t.y-t.radius-40,"!!!","#ef4444","chat"),e.audio.playExplosion(),e.state.camera.x+=(Math.random()-.5)*30,e.state.camera.y+=(Math.random()-.5)*30);else if(t.subState==="dash"){const c=t.dashTarget.x-t.x,f=t.dashTarget.y-t.y,h=Math.hypot(c,f);if(e.state.camera.x+=(Math.random()-.5)*10,e.state.camera.y+=(Math.random()-.5)*10,t.hrStateTimer%2===0&&e.state.enemies.forEach(u=>{if(u===t||u.hp<=0)return;const g=u.x-t.x,b=u.y-t.y;if(Math.hypot(g,b)<200){const x=Math.atan2(b,g),T=30;u.vx+=Math.cos(x)*T,u.vy+=Math.sin(x)*T,u.stunTimer=30,xe(e,u.x,u.y,"#ffffff",2)}}),h<=40){t.x=t.dashTarget.x,t.y=t.dashTarget.y;const p=220;e.state.zones.push({id:Math.random().toString(),x:t.x,y:t.y,radius:p,type:"explosion_shockwave",life:40,maxLife:40,color:"#ef4444",emoji:""}),e.state.zones.push({id:Math.random().toString(),x:t.x,y:t.y,radius:120,type:"scorch",life:240,maxLife:240,color:"#ef4444",emoji:""}),e.audio.playExplosion(),xe(e,t.x,t.y,"#ef4444",30);const u=i.x-t.x,g=i.y-t.y;if(Math.hypot(u,g)<p){const x=50*o;sm(e,x,"elite_hr_smash");const T=Math.atan2(g,u),M=40;i.vx+=Math.cos(T)*M,i.vy+=Math.sin(T)*M,i.stunTimer=60,z(e,i.x,i.y,"!","#ef4444","damage")}e.state.enemies.forEach(x=>{if(x===t||x.hp<=0)return;const T=x.x-t.x,M=x.y-t.y;if(Math.hypot(T,M)<p){const C=Math.atan2(M,T),w=50;x.vx+=Math.cos(C)*w,x.vy+=Math.sin(C)*w,x.stunTimer=60}});const v=12;for(let x=0;x<v;x++){const T=x/v*Math.PI*2,M=Me.getProjectile(e);M.x=t.x,M.y=t.y,M.radius=15,M.emoji="",M.vx=Math.cos(T)*8,M.vy=Math.sin(T)*8,M.damage=15*o,M.life=120,M.isEnemy=!0,M.color="#ef4444",M.text="",M.pierce=0,M.sourceType=t.config.type,M.renderStyle="red_triangle",e.state.projectiles.push(M)}e.state.camera.x+=(Math.random()-.5)*50,e.state.camera.y+=(Math.random()-.5)*50,t.subState="rest",t.hrStateTimer=0,t.vx=0,t.vy=0}else t.vx=c/h*40,t.vy=f/h*40,t.x+=t.vx,t.y+=t.vy}else t.subState==="rest"&&(t.vx=0,t.vy=0,t.hrStateTimer===1&&z(e,t.x,t.y-t.radius-40," ...","#94a3b8","chat"),t.hrStateTimer>150&&(t.subState="assess",t.hrStateTimer=0))}},tr={triggerBossTransition:(e,t)=>{if(t.config.type==="boss_glitch"||t.config.type==="boss_ai"){tr.killEnemy(e,e.state.enemies.indexOf(t));return}t.hp=1,t.isTransitioning||(t.isTransitioning=!0,t.stateTimer=180,z(e,t.x,t.y,"...","#ef4444","chat"),e.state.projectiles.forEach(i=>{i.isEnemy&&(i.life=0)}))},killEnemy:(e,t,i=!1,o=!1)=>{var p,u;const r=e.state.enemies[t],c=e.state.player;if(r.config.type==="keyboard_man"){const g=["Q","W","E","R","A","S","D","F","Ctrl","Alt","Esc"];for(let b=0;b<6;b++){const v=g[Math.floor(Math.random()*g.length)];Zt(e,{x:r.x,y:r.y,text:v,count:1,type:"text",color:"#94a3b8",life:45,speed:3,scaleDelta:-.02})}}if(c.items.includes("")){const g=Math.ceil($e.getPlayerDamage(c)*.1),b=e.state.projectiles.length;if(b>600){e.state.zones.push({id:Math.random().toString(),x:r.x,y:r.y,radius:150,type:"explosion_shockwave",life:15,maxLife:15,color:"#22d3ee",emoji:""});const v=Me.getProjectile(e);v.x=r.x,v.y=r.y,v.radius=120,v.damage=g*6,v.life=1,v.isExplosive=!0,v.isExploding=!0,v.maxExplosionRadius=120,v.color="#22d3ee",v.isEnemy=!1,v.hitIds=[r.id],v.active=!0,v.sourceType="shocking_title_wave",e.state.projectiles.push(v)}else if(b>300){const x=g*2;for(let T=0;T<4;T++){const M=T/4*Math.PI*2+Math.PI/4,k=Me.getProjectile(e);k.id=Math.random().toString(),k.x=r.x,k.y=r.y,k.radius=18,k.vx=Math.cos(M)*12,k.vy=Math.sin(M)*12,k.damage=x,k.life=45,k.isEnemy=!1,k.color="#22d3ee",k.pierce=6,k.hitIds=[r.id],k.active=!0,k.sourceType="shocking_title",k.renderStyle="data_spike",e.state.projectiles.push(k)}}else for(let x=0;x<8;x++){const T=x/8*Math.PI*2,M=Me.getProjectile(e);M.id=Math.random().toString(),M.x=r.x,M.y=r.y,M.radius=12,M.vx=Math.cos(T)*12,M.vy=Math.sin(T)*12,M.damage=g,M.life=45,M.isEnemy=!1,M.color="#22d3ee",M.pierce=3,M.hitIds=[r.id],M.active=!0,M.sourceType="shocking_title",M.renderStyle="data_spike",e.state.projectiles.push(M)}e.state.particles.push({id:Math.random().toString(),x:r.x,y:r.y,vx:0,vy:0,life:10,maxLife:10,scale:.5,scaleDelta:.3,alpha:1,alphaDelta:-.1,color:"#cffafe",size:50,type:"circle",blendMode:"overlay",active:!0}),z(e,r.x,r.y,"!","#fbbf24","chat")}if(r.anxietyTimer&&r.anxietyTimer>0&&!i){const g=ye.getSynergyCounts(c.items);if((ye.getActiveTiers(g).market||0)>=6){const x=c.items.includes("")?280:160,M=Math.ceil($e.getPlayerDamage(c)*.8),k=Me.getProjectile(e);k.id=Math.random().toString(),k.x=r.x,k.y=r.y,k.radius=x,k.emoji="",k.vx=0,k.vy=0,k.damage=M,k.life=20,k.isEnemy=!1,k.color="#a855f7",k.text="",k.pierce=999,k.hitIds=[],k.active=!0,k.isExplosive=!0,k.isExploding=!0,k.maxExplosionRadius=x,k.alwaysAnxiety=!0,k.sourceType="viral_market",k.renderStyle="viral_explosion",k.damageWindow=2,e.state.projectiles.push(k)}}if(r.config.behavior==="boss"){vl(e,"boss_killer"),e.state.waveEnded=!0;for(const g of e.state.enemies)Me.releaseEnemy(e,g);e.state.enemies=[]}if(e.state.enemies[t]){const g=e.state.enemies[t];if(g.config.behavior!=="boss"){Me.releaseEnemy(e,g);const b=e.state.enemies.length-1;t!==b&&(e.state.enemies[t]=e.state.enemies[b]),e.state.enemies.pop()}}if(r.config.behavior==="balloon"){xe(e,r.x,r.y,"#ffffff",20),z(e,r.x,r.y,"","#ffffff","chat"),e.audio.playExplosion();const g=160;e.state.zones.push({id:Math.random().toString(),x:r.x,y:r.y,radius:g,type:"explosion_shockwave",life:20,maxLife:20,color:"#ffffff",emoji:""});const b=12,v=c.x-r.x,x=c.y-r.y,T=Math.sqrt(v*v+x*x);if(T<g&&T>0){const M=b*(1-T/g);c.vx+=v/T*M,c.vy+=x/T*M,z(e,c.x,c.y,"!","#ef4444","chat")}e.state.enemies.forEach(M=>{const k=M.x-r.x,C=M.y-r.y,w=Math.sqrt(k*k+C*C);if(w<g&&w>0){const j=b*(1-w/g)*1.5;M.vx+=k/w*j,M.vy+=C/w*j,M.stunTimer=45}})}else xe(e,r.x,r.y,"#ef4444",8);if(r.config.type==="capital_crocodile"&&r.storedValue&&r.storedValue>0){const g=Math.floor(r.storedValue*1.1);z(e,r.x,r.y-60,`! +${g}`,"#facc15","gold"),e.audio.playCoin(),e.state.zones.push({id:Math.random().toString(),x:r.x,y:r.y,radius:200,type:"explosion_shockwave",life:30,maxLife:30,color:"#facc15",emoji:""});for(let x=0;x<10;x++)xe(e,r.x,r.y,["#facc15","#fbbf24","#ffffff"][x%3],5);const b=Math.min(15,Math.max(5,Math.ceil(g/50))),v=Math.ceil(g/b);for(let x=0;x<b;x++){const T=Math.random()*Math.PI*2,M=10+Math.random()*15;e.state.drops.push({id:Math.random().toString(),x:r.x,y:r.y,radius:10,emoji:"",type:"gold",value:v,life:2700,vx:Math.cos(T)*M,vy:Math.sin(T)*M,pickupDelay:90,friction:.94})}}if(e.state.killStreak!==void 0){e.state.killStreak++,e.state.killStreakTimer=120;const g=e.state.killStreak;g>=10&&(g%100===0?(z(e,c.x,c.y-80,`${g} !`,"#a855f7","chat",void 0,!0),e.audio.playPowerup()):g===50?z(e,c.x,c.y-80,"!","#ef4444","chat",void 0,!0):g===20?z(e,c.x,c.y-80,"KILL STREAK!","#facc15","chat"):g%10===0&&g<50&&z(e,c.x,c.y-60,`${g} COMBO!`,"#ffffff","chat"))}e.state.waveStats.enemiesKilled++;let f=$e.getKillGold(r.config.score,e.state.difficultyId,c.incomeMultiplier,e.state.isOvertime);e.state.activeMutators.includes("salary_cut")&&(f=Math.floor(f*.7)),o&&(f*=2,z(e,r.x,r.y-50,"!","#facc15","gold")),e.state.score+=f,f>0&&wi.spawnGold(e,r.x,r.y,f),r.config.behavior==="bonus"&&(z(e,r.x,r.y,"!","#fbbf24","gold"),e.state.waveStats.bonusGold+=f,e.audio.playCoin()),r.config.type==="delivery_guy"&&wi.spawnPickup(e,{id:Math.random().toString(),x:r.x,y:r.y,radius:15,emoji:"",type:"big_health",value:50,life:999999});const h=new Map;c.items.forEach(g=>h.set(g,(h.get(g)||0)+1));for(const g of kt)if((p=g.hooks)!=null&&p.onKill){const b=((u=g.items)==null?void 0:u[0])||g.title,v=h.get(b)||0;v>0&&g.hooks.onKill(e,r,v)}if(r.config.type==="lemon_head"&&e.state.zones.push({id:Math.random().toString(),x:r.x,y:r.y,radius:160,emoji:"",type:"acid",life:180,color:"#a3e635"}),r.config.type==="tao_wa_big"?(st.spawnEnemy(e,"tao_wa_med",r.x-20,r.y),st.spawnEnemy(e,"tao_wa_med",r.x+20,r.y)):r.config.type==="tao_wa_med"&&(st.spawnEnemy(e,"tao_wa_small",r.x-15,r.y),st.spawnEnemy(e,"tao_wa_small",r.x+15,r.y)),r.config.deathQuotes&&Math.random()<.1&&(r.config.behavior==="boss"||r.config.tier==="boss"||r.config.tier==="epic"||e.state.enemies.length<30)){const b=r.config.deathQuotes[Math.floor(Math.random()*r.config.deathQuotes.length)];z(e,r.x,r.y,b,"#cbd5e1","chat")}$e.shouldDropItem(c.dropRate)&&wi.spawnPickup(e,{id:Math.random().toString(),x:r.x,y:r.y,radius:15,emoji:"",type:"health",value:20,life:999999})}},it={enrageThreshold:.3,skills:{idleTime:60,pot:{count:5,interval:15,throwTime:90,damage:30,radius:40},laser:{waves:3,countPerWave:25,chargeTime:90,fireTime:60,width:70},spiral:{duration:300,rate:6,rotationSpeed:.1,damage:15}},wipe:{shieldAmount:25e3,warningDuration:240,activeDuration:600,cooldownDuration:240,scatterPotRate:90,sniperRate:50}},hh={update:(e,t,i,o)=>{t.maxHp||(t.maxHp=t.hp),t.phase||(t.phase=1),t.customVars||(t.customVars={skillStack:[],currentSkill:"none",skillCounter:0,wipeCycle:0,safeZoneId:null,spiralAngle:0}),t.stateTimer=(t.stateTimer||0)+1;const r=t.hp/t.maxHp;if(t.phase!==3&&r<it.enrageThreshold){t.phase=3,t.subState="wipe_move_center",t.stateTimer=0,e.state.zones=e.state.zones.filter(c=>!["laser_beam","kpi_pie","warning_circle"].includes(c.type)),e.state.projectiles=e.state.projectiles.filter(c=>!c.isEnemy),t.tempShield=it.wipe.shieldAmount,t.maxTempShield=it.wipe.shieldAmount,t.radius*=1.5,z(e,t.x,t.y-150,"MAX POWER","#ef4444","chat"),z(e,t.x,t.y-120,"  ","#ff0000","chat"),e.audio.playExplosion(),xe(e,t.x,t.y,"#ef4444",50),zc(e);return}t.phase===3?Bb(e,t,i):Pb(e,t,i)}};function Pb(e,t,i,o){if(t.subState==="idle"||!t.subState){const r=Math.hypot(i.x-t.x,i.y-t.y),c=Math.atan2(i.y-t.y,i.x-t.x);if(r>400&&(t.vx+=Math.cos(c)*.5,t.vy+=Math.sin(c)*.5),t.stateTimer>it.skills.idleTime){const f=["skill_pot","skill_laser","skill_spiral"],h=f[Math.floor(Math.random()*f.length)];t.subState=h,t.stateTimer=0,t.customVars.skillCounter=0,h==="skill_pot"&&z(e,t.x,t.y-80,"!","#1c1917","chat"),h==="skill_laser"&&z(e,t.x,t.y-80,"!","#ef4444","chat"),h==="skill_spiral"&&z(e,t.x,t.y-80,"!","#a855f7","chat")}return}if(t.subState==="skill_pot"){t.vx=0,t.vy=0;const{count:r,interval:c,throwTime:f,damage:h,radius:p}=it.skills.pot;if(t.stateTimer%c===0&&t.customVars.skillCounter<r){t.customVars.skillCounter++;for(let u=0;u<3;u++){const b=i.x+(Math.random()-.5)*200,v=i.y+(Math.random()-.5)*200;lm(e,t,b,v,f,h,p)}e.audio.playEnemyShoot("boss_kpi")}t.customVars.skillCounter>=r&&t.stateTimer>r*c+60&&(t.subState="idle",t.stateTimer=0)}else if(t.subState==="skill_laser"){t.vx=0,t.vy=0;const{waves:r,countPerWave:c,chargeTime:f,fireTime:h,width:p}=it.skills.laser,u=f+h+20,g=t.stateTimer%u;if(g===1&&t.customVars.skillCounter<r){t.customVars.skillCounter++;for(let b=0;b<c;b++){const v=(Math.random()-.5)*e.state.mapWidth*.9,x=(Math.random()-.5)*e.state.mapHeight*.9,T=Math.random()*Math.PI*2;e.state.zones.push({id:Math.random().toString(),x:v,y:x,radius:3e3,type:"laser_beam",life:f+h,maxLife:f+h,color:"#ef4444",emoji:"",angle:T,width:p})}z(e,t.x,t.y-80,`  ${t.customVars.skillCounter}/${r}`,"#ef4444")}g===f&&e.audio.play("shoot_boss_kpi"),t.customVars.skillCounter>=r&&t.stateTimer>r*u&&(t.subState="idle",t.stateTimer=0)}else if(t.subState==="skill_spiral"){const{duration:r,rate:c,rotationSpeed:f,damage:h}=it.skills.spiral,p=Math.atan2(i.y-t.y,i.x-t.x);if(t.vx=Math.cos(p)*1,t.vy=Math.sin(p)*1,t.stateTimer%c===0){const u=t.customVars.spiralAngle||0;for(let g=0;g<3;g++){const b=u+g*Math.PI*2/3,v=Me.getProjectile(e);v.x=t.x,v.y=t.y,v.radius=13,v.emoji="",v.vx=Math.cos(b)*6,v.vy=Math.sin(b)*6,v.damage=h,v.life=300,v.isEnemy=!0,v.color="#f472b6",v.text="",v.pierce=0,v.sourceType="boss_kpi",v.active=!0,e.state.projectiles.push(v)}t.customVars.spiralAngle=(u+f)%(Math.PI*2)}t.stateTimer>r&&(t.subState="idle",t.stateTimer=0)}}function Bb(e,t,i,o){if(t.vx=0,t.vy=0,t.subState!=="wipe_move_center"&&(t.x=0,t.y=0),t.subState==="wipe_move_center")if(Math.hypot(t.x,t.y)>20){const c=Math.atan2(-t.y,-t.x);t.vx=Math.cos(c)*20,t.vy=Math.sin(c)*20,t.x+=t.vx,t.y+=t.vy}else t.x=0,t.y=0,t.vx=0,t.vy=0,t.subState="wipe_prepare",t.stateTimer=0;else if(t.subState==="wipe_prepare")Lb(e),z(e,0,-100,">>>  <<<","#3b82f6","chat"),t.subState="wipe_warning",t.stateTimer=0;else if(t.subState==="wipe_warning")e.state.zones.some(c=>c.type==="kpi_doom_expansion")||e.state.zones.push({id:Math.random().toString(),x:0,y:0,radius:0,type:"kpi_doom_expansion",life:it.wipe.warningDuration,maxLife:it.wipe.warningDuration,color:"#7f1d1d",emoji:""}),t.stateTimer>=it.wipe.warningDuration&&(t.subState="wipe_damage",t.stateTimer=0,e.state.zones=e.state.zones.filter(c=>c.type!=="kpi_doom_expansion"),e.state.zones.push({id:Math.random().toString(),x:0,y:0,radius:9999,type:"kpi_hell_fire",life:it.wipe.activeDuration,maxLife:it.wipe.activeDuration,color:"#7f1d1d",emoji:""}),e.audio.play("ui_glitch_severe"));else if(t.subState==="wipe_damage"){if(t.stateTimer%it.wipe.scatterPotRate===0)for(let c=0;c<6;c++){const h=i.x+(Math.random()-.5)*250,p=i.y+(Math.random()-.5)*250;lm(e,t,h,p,90,40,40)}if(t.stateTimer%it.wipe.sniperRate===0){const r=Math.atan2(i.y-t.y,i.x-t.x),c=Me.getProjectile(e);c.x=t.x,c.y=t.y,c.radius=22,c.emoji="",c.vx=Math.cos(r)*4,c.vy=Math.sin(r)*4,c.damage=30,c.life=300,c.isEnemy=!0,c.color="#fbbf24",c.text="",c.pierce=0,c.sourceType="boss_kpi",c.active=!0,c.renderStyle="gold_void",e.state.projectiles.push(c)}t.stateTimer>=it.wipe.activeDuration&&(t.subState="wipe_cooldown",t.stateTimer=0,e.state.zones=e.state.zones.filter(r=>r.type!=="kpi_hell_fire"&&r.type!=="safe_haven"),z(e,t.x,t.y-80,"... ","#22c55e","chat"),e.audio.play("ui_power_down"),zc(e))}else t.subState==="wipe_cooldown"&&t.stateTimer>=it.wipe.cooldownDuration&&(t.subState="wipe_prepare",t.stateTimer=0)}function lm(e,t,i,o,r,c,f){const h=Me.getProjectile(e);h.x=t.x,h.y=t.y,h.z=100,h.vx=(i-t.x)/r,h.vy=(o-t.y)/r;const p=.5,g=(.5*p*(r*r)-100)/r;h.vz=g,h.gravity=p,h.radius=20,h.damage=c,h.life=r+10,h.isEnemy=!0,h.isExplosive=!0,h.explodeOnExpire=!0,h.maxExplosionRadius=120,h.damageWindow=3,h.renderStyle="black_pot",h.behaviors=["isometric_move","explode_on_expire"],h.isAerial=!0,h.sourceType="boss_kpi",e.state.projectiles.push(h),e.state.zones.push({id:Math.random().toString(),x:i,y:o,radius:f,type:"warning_circle",life:r,maxLife:r,color:"#fbbf24",emoji:""})}function zc(e){e.state.zones=e.state.zones.filter(f=>f.type!=="safe_zone_hint");const t=200,i=-e.state.mapWidth/2+t,o=e.state.mapWidth/2-t,r=-e.state.mapHeight/2+t,c=e.state.mapHeight/2-t;for(let f=0;f<3;f++){let h=0,p=0,u=!1,g=0;for(;!u&&g<15;)h=i+Math.random()*(o-i),p=r+Math.random()*(c-r),Math.hypot(h,p)>600&&(u=!0),g++;const b=it.wipe.cooldownDuration+60;e.state.zones.push({id:Math.random().toString(),x:h,y:p,radius:200,type:"safe_zone_hint",life:b,maxLife:b,color:"#60a5fa",emoji:""})}}function Lb(e){const t=e.state.zones.filter(i=>i.type==="safe_zone_hint");if(e.state.zones=e.state.zones.filter(i=>i.type!=="safe_zone_hint"),t.length===0){zc(e),e.state.zones.filter(o=>o.type==="safe_zone_hint").forEach(o=>mh(e,o.x,o.y)),e.state.zones=e.state.zones.filter(o=>o.type!=="safe_zone_hint");return}t.forEach(i=>{mh(e,i.x,i.y)})}function mh(e,t,i){const o=it.wipe.warningDuration+it.wipe.activeDuration;e.state.zones.push({id:Math.random().toString(),x:t,y:i,radius:200,type:"safe_haven",life:o,maxLife:o,color:"#3b82f6",emoji:""})}const ki={lagSpike:{duration:60},zFighting:{duration:400,fireRate:4},bsod:{wallDuration:1800,wallCount:8}},zb={update:(e,t,i,o)=>{if(t.maxHp||(t.maxHp=t.hp),(!t.customVars||typeof t.customVars.baseRadius!="number"||isNaN(t.customVars.baseRadius))&&(t.customVars={skillTimer:0,activeSkill:null,subTimer:0,baseRadius:t.radius&&t.radius>10?t.radius:70,baseSpeed:t.config.speed||4,dashCooldown:0,skillStack:[],moveAngle:0,targetAngle:0,sineWavesCompleted:0,unstableCooldown:0,overflowState:"none",spiralAngle:0,tempWalls:[]},t.radius=t.customVars.baseRadius),t.stateTimer=(t.stateTimer||0)+1,t.customVars.unstableCooldown>0&&t.customVars.unstableCooldown--,t.isUnstable&&(t.customVars.unstableTimer=(t.customVars.unstableTimer||0)-1,t.x+=(Math.random()-.5)*5,t.y+=(Math.random()-.5)*5,t.customVars.unstableTimer<=0&&(t.isUnstable=!1,t.customVars.unstableCooldown=600)),t.customVars.activeSkill)Fb(e,t,i);else{if(t.isUnstable){t.vx=(Math.random()-.5)*2,t.vy=(Math.random()-.5)*2;return}const r=Math.atan2(i.y-t.y,i.x-t.x);if(t.vx+=Math.cos(r)*.5,t.vy+=Math.sin(r)*.5,t.vx*=.9,t.vy*=.9,t.stateTimer%180===0){if(!t.customVars.skillStack||t.customVars.skillStack.length===0){const f=["lag_spike","z_fighting","bsod","overflow"];t.customVars.skillStack=f.map(h=>({value:h,sort:Math.random()})).sort((h,p)=>h.sort-p.sort).map(({value:h})=>h)}const c=t.customVars.skillStack.pop();c==="lag_spike"?qb(e,t,i):c==="z_fighting"?Gb(e,t):c==="bsod"?Yb(e,t,i):Ub(e,t)}}}};function qb(e,t,i){t.customVars.activeSkill="lag_spike",t.customVars.subTimer=0,t.vx=0,t.vy=0,z(e,t.x,t.y-80,"Initiating Rollback...","#22c55e","chat");const o=8,r=Math.atan2(i.y-t.y,i.x-t.x),c=Math.PI*.8;for(let f=0;f<o;f++){const h=Me.getProjectile(e);h.x=t.x,h.y=t.y,h.radius=18;const p=r-c/2+f/(o-1)*c;h.vx=Math.cos(p)*12,h.vy=Math.sin(p)*12,h.damage=0,h.life=300,h.isEnemy=!0,h.color="#22c55e",h.emoji="",h.text="",h.renderStyle="matrix_missile",h.sourceType="glitch_lag_initiator",h.behaviors=["homing","move_linear","decay_life","check_bounds"],h.targetId=i.id,h.trailHistory=[],h.active=!0,e.state.projectiles.push(h)}}function Gb(e,t){t.customVars.activeSkill="z_fighting",t.customVars.subTimer=0,z(e,t.x,t.y-80,"Z-Fighting Error","#a855f7","chat")}function Yb(e,t,i){t.customVars.activeSkill="bsod",t.customVars.subTimer=0,z(e,t.x,t.y-80,"Firewall Blocking","#f97316","chat");const o=ki.bsod.wallCount;for(let r=0;r<o;r++){const f=(Math.floor(Math.random()*7)-3)*200,h=(Math.floor(Math.random()*7)-3)*200,p=i.x+f,u=i.y+h,g=r%2===0,b=g?300:80,v=g?80:300;e.state.zones.push({id:Math.random().toString(),x:p,y:u,radius:50,width:b,height:v,type:"glitch_bsod_wall",life:ki.bsod.wallDuration,maxLife:ki.bsod.wallDuration,color:"#f97316",emoji:"",angle:g?0:Math.PI/2}),r===0&&e.audio.play("ui_glitch_severe")}t.customVars.activeSkill=null}function Ub(e,t){t.customVars.activeSkill="overflow",t.customVars.subTimer=0,t.customVars.overflowState="pre_cast",z(e,t.x,t.y-80,"MODULE LOADING...","#facc15","chat")}function Fb(e,t,i,o){t.customVars.subTimer++;const r=t.customVars.subTimer;if(t.customVars.activeSkill==="lag_spike")t.vx=0,t.vy=0,r>ki.lagSpike.duration&&(t.customVars.activeSkill=null);else if(t.customVars.activeSkill==="z_fighting"){t.vx=0,t.vy=0;const{duration:c,fireRate:f}=ki.zFighting;if(r%f===0)for(let p=0;p<12;p++){const u=Math.random()*Math.PI*2,g=Math.random()>.25,b=Me.getProjectile(e);b.x=t.x,b.y=t.y,b.radius=12,b.vx=Math.cos(u)*8,b.vy=Math.sin(u)*8,b.life=180,b.isEnemy=!0,b.sourceType="boss_glitch",b.active=!0,g?(b.damage=15,b.color="#ef4444",b.emoji="",b.text="",b.isFake=!1):(b.damage=0,b.color="#ef4444",b.emoji="",b.text="",b.isFake=!0),e.state.projectiles.push(b)}r>c&&(t.customVars.activeSkill=null)}else if(t.customVars.activeSkill==="overflow"){const c=t.customVars.overflowState;if(r>2100){console.warn("Boss Overflow Failsafe Triggered - Resetting State"),t.customVars.activeSkill=null,t.radius=t.customVars.baseRadius,t.customVars.overflowState="none";return}if(c==="pre_cast")t.vx=0,t.vy=0,t.customVars.subTimer>100&&(t.customVars.overflowState="centering",t.customVars.subTimer=0);else if(c==="centering"){const p=0-t.x,u=0-t.y,g=Math.hypot(p,u);g>20?(t.vx=p/g*35,t.vy=u/g*35,t.x+=t.vx,t.y+=t.vy):(t.x=0,t.y=0,t.vx=0,t.vy=0,t.customVars.overflowState="expanding",t.customVars.subTimer=0)}else if(c==="expanding"){if(t.x=0,t.y=0,t.radius=Math.min(250,t.radius+8),t.radius>=250){t.customVars.overflowState="warning",t.customVars.subTimer=0,e.audio.play("ui_glitch_severe"),t.customVars.tempWalls=[];const f=6,h=600;for(let p=0;p<f;p++){const u=p/f*Math.PI*2,g=Math.cos(u)*h,b=Math.sin(u)*h,v=180,x=30,T=Math.random().toString();t.customVars.tempWalls.push(T),e.state.zones.push({id:T,x:g,y:b,radius:50,width:v,height:x,type:"glitch_bsod_wall",life:9999,maxLife:9999,color:"#f97316",emoji:"",angle:u+Math.PI/2});const M=140,k=30,C=u+Math.PI/2,w=Math.cos(C),j=Math.sin(C),O=v/2-k/2,V=H=>{const X=u,ee=Math.cos(X),re=Math.sin(X),J=g+w*O*H,ue=b+j*O*H,pe=J+ee*(M/2-x/2),be=ue+re*(M/2-x/2),K=Math.random().toString();t.customVars.tempWalls.push(K),e.state.zones.push({id:K,x:pe,y:be,radius:40,width:M,height:k,type:"glitch_bsod_wall",life:9999,maxLife:9999,color:"#f97316",emoji:"",angle:X})};V(1),V(-1)}}}else if(c==="warning")t.x=0,t.y=0,t.customVars.subTimer>180&&(t.customVars.overflowState="sucking",t.customVars.subTimer=0);else if(c==="sucking"){t.x=0,t.y=0;const f=Math.hypot(i.x-t.x,i.y-t.y),h=Math.atan2(t.y-i.y,t.x-i.x),g=22/(1+Math.pow(f/350,2.5)),b=Math.max(.1,g);i.vx+=Math.cos(h)*b,i.vy+=Math.sin(h)*b;const v=60,x=t.customVars.subTimer%v/v,M=1200*(1-x*x);if(t.customVars.visualWaveRadius=M,Math.abs(f-M)<60&&x<.9&&(i.vx+=Math.cos(h)*1.5,i.vy+=Math.sin(h)*1.5,e.state.timeAlive%10===0&&z(e,i.x,i.y-40,"","#ffffff")),f<200&&e.state.timeAlive%60===0){const C=Math.ceil(i.maxHp*.02);i.hp-=C,z(e,i.x,i.y,`-${C}`,"#ef4444","damage"),xe(e,i.x,i.y,"#ef4444",5),e.audio.playHit()}t.customVars.subTimer>400&&(t.customVars.overflowState="shrinking",t.customVars.visualWaveRadius=0)}else c==="shrinking"&&(t.radius*=.9,t.customVars.tempWalls&&t.customVars.tempWalls.length>0&&(e.state.zones=e.state.zones.filter(f=>!t.customVars.tempWalls.includes(f.id)),t.customVars.tempWalls=[]),t.radius<20&&(t.radius=20,t.customVars.activeSkill="underflow",t.customVars.overflowState="none",t.customVars.subTimer=0,t.customVars.dashCount=0,t.customVars.dashState="aiming",z(e,t.x,t.y,"Stack Underflow","#22d3ee","chat")))}else if(t.customVars.activeSkill==="underflow"){const c=t.customVars.dashState;if(c==="aiming"){if(t.vx=0,t.vy=0,t.customVars.subTimer>40){t.customVars.dashState="locking",t.customVars.subTimer=0;const f=Math.atan2(i.y-t.y,i.x-t.x);t.customVars.dashAngle=f,z(e,t.x,t.y-30,"LOCK","#ef4444"),e.audio.play("ui_static_tick")}}else if(c==="locking")t.vx=0,t.vy=0,t.customVars.subTimer>20&&(t.customVars.dashState="dashing",t.customVars.subTimer=0,e.audio.play("shoot_boss_glitch"));else if(c==="dashing"){const p=t.customVars.subTimer/100,u=18*(1-Math.pow(p,3)),g=t.customVars.dashAngle;let b=Math.cos(g)*u,v=Math.sin(g)*u;const x=8*(1-p),T=Math.sin(p*Math.PI*6),M=-Math.sin(g)*T*x,k=Math.cos(g)*T*x;if(t.vx=b+M,t.vy=v+k,t.x+=t.vx,t.y+=t.vy,t.customVars.subTimer%8===0){const C=w=>{const j=Me.getProjectile(e);j.x=t.x,j.y=t.y,j.radius=25,j.vx=Math.cos(w)*9,j.vy=Math.sin(w)*9,j.damage=12,j.life=120,j.isEnemy=!0,j.color="#22d3ee",j.emoji="",j.text="",j.renderStyle="sine_shuriken",j.sourceType="boss_glitch",j.active=!0,j.angle=w,j.trailHistory=[],e.state.projectiles.push(j)};C(g+Math.PI/2),C(g-Math.PI/2)}t.customVars.subTimer>100&&(t.customVars.dashState="rest",t.customVars.subTimer=0)}else c==="rest"&&(t.vx=0,t.vy=0,t.customVars.subTimer>120&&(t.customVars.dashCount++,t.customVars.dashCount>=3?(t.radius=t.customVars.baseRadius,t.customVars.activeSkill=null):(t.customVars.dashState="aiming",t.customVars.subTimer=0)))}}const Qe={phase1:{maxNodes:12,nodeSpawnInterval:800,buildTime:120,stormCount:40,stormInterval:4,stormCooldown:600,barrageDuration:240,barrageCooldown:500,barrageFireRate:3,shootRate:45,coolingDuration:150},phase2:{moveAcceleration:.25,maxSpeed:5,leakRate:10,chaosDamage:12,chaosMorphCooldown:120,chaosMorphDuration:600,crashDash:{cooldown:1200,aimDuration:90,lockDuration:30,dashSpeed:30,stunDuration:120}}},ph={start:(e,t,i,o,r)=>{t.customVars.stormQueue=i,z(e,t.x,t.y-120,o,r,"chat"),e.audio.play("ui_glitch_minor")},update:(e,t,i,o)=>{if(t.customVars.stormQueue>0){if(t.stateTimer%o===0){const r=1+Math.floor(Math.random()*3);for(let c=0;c<r&&!(t.customVars.stormQueue<=0);c++){let f,h,p=!1,u=0;for(;!p&&u<5;){if(Math.random()<.25){const g=Math.random()*Math.PI*2,b=Math.random()*400;f=i.x+Math.cos(g)*b,h=i.y+Math.sin(g)*b}else{const g=e.state.mapWidth/2-100,b=e.state.mapHeight/2-100;f=(Math.random()-.5)*2*g,h=(Math.random()-.5)*2*b}p=!0,u++}f!==void 0&&h!==void 0&&Xb(e,f,h,t.phase),t.customVars.stormQueue--}t.customVars.stormQueue%5===0&&e.audio.play("ui_static_tick")}}else t.customVars.activeSkill==="storm"&&t.stateTimer%60===0&&(t.customVars.activeSkill=null)}};function Xb(e,t,i,o){const r=o===2,c=r?60:90,f=20,h=100+Math.random()*40;e.state.zones.push({id:Math.random().toString(),x:t,y:i,width:h,height:h,radius:h/2,type:"glitch_square",life:c+f,maxLife:c+f,color:r?"#ef4444":"#a855f7",emoji:""})}const Wb={update:(e,t,i)=>{if(t.x=0,t.y=0,t.vx=0,t.vy=0,t.stateTimer===1&&(t.subState="building",t.customVars.buildTimer=0,t.customVars.nodesToSpawn=2),t.subState==="building"){if(t.customVars.buildTimer=(t.customVars.buildTimer||0)+1,t.customVars.nextSpawnLocation||(t.customVars.nextSpawnLocation=Qb(e,t)),t.customVars.buildTimer%30===0&&e.audio.play("ui_static_tick"),t.customVars.buildTimer>=Qe.phase1.buildTime){const c=t.customVars.nextSpawnLocation;c&&($b(e,t,c.x,c.y),z(e,t.x,t.y-150,"","#a855f7","chat"),xe(e,t.x,t.y,"#a855f7",30)),t.customVars.nodesToSpawn--,t.customVars.buildTimer=0,t.customVars.nextSpawnLocation=null,(t.customVars.nodesToSpawn<=0||t.customVars.nodes.length>=Qe.phase1.maxNodes)&&(t.subState="normal",t.stateTimer=2)}yh(e,t);return}t.customVars.nodes=t.customVars.nodes.filter(c=>e.state.enemies.some(f=>f.id===c&&f.hp>0)),t.stateTimer>=Qe.phase1.nodeSpawnInterval&&t.customVars.nodes.length<Qe.phase1.maxNodes&&(t.subState="building",t.customVars.buildTimer=0,t.customVars.nodesToSpawn=1),yh(e,t);const o=t.customVars.skillCooldowns.storm||0;o>0&&t.customVars.skillCooldowns.storm--;const r=t.customVars.skillCooldowns.barrage||0;if(r>0&&t.customVars.skillCooldowns.barrage--,!t.customVars.activeSkill){if(r<=0)t.customVars.activeSkill="data_stream",t.customVars.subTimer=0,t.customVars.skillCooldowns.barrage=Qe.phase1.barrageCooldown,t.customVars.streamPattern=Math.random()<.5?"helix":"quad",z(e,t.x,t.y-120,"  ","#facc15","chat"),e.audio.play("ui_glitch_minor");else if(o<=0&&t.stateTimer>300)t.customVars.activeSkill="triple_storm",t.customVars.stormCharges=3,t.customVars.subTimer=0,t.customVars.skillCooldowns.storm=Qe.phase1.stormCooldown;else if(t.stateTimer%Qe.phase1.shootRate===0){t.customVars.shootAngle=(t.customVars.shootAngle||0)+.3;for(let c=0;c<3;c++){const f=t.customVars.shootAngle+c*(Math.PI*2/3);st.spawnSingleBullet(e,t,f,!1,"");const h=e.state.projectiles[e.state.projectiles.length-1];h&&(h.renderStyle="glitch_tangle",h.color="#a855f7",h.radius=16,h.damage=18)}}}if(t.customVars.activeSkill==="data_stream"){if(t.customVars.subTimer++,t.customVars.subTimer%Qe.phase1.barrageFireRate===0){const c=f=>{const h=Me.getProjectile(e);h.x=t.x,h.y=t.y,h.radius=18,h.vx=Math.cos(f)*7,h.vy=Math.sin(f)*7,h.damage=15,h.life=300,h.isEnemy=!0,h.color="#facc15",h.emoji="",h.text="",h.renderStyle="donut_ring",h.sourceType="boss_ai",h.behaviors=["move_linear","decay_life","check_bounds"],h.active=!0,e.state.projectiles.push(h)};if(t.customVars.streamPattern==="quad"){t.customVars.streamAngle=(t.customVars.streamAngle||0)+.12;const h=t.customVars.streamAngle;for(let p=0;p<4;p++)c(h+p*Math.PI/2)}else{t.customVars.streamAngle=(t.customVars.streamAngle||0)+.2;const h=t.customVars.streamAngle;c(h),c(-h+Math.PI)}t.customVars.subTimer%10===0&&e.audio.play("shoot_boss_glitch")}t.customVars.subTimer>=Qe.phase1.barrageDuration&&(t.customVars.activeSkill="system_cooling",t.customVars.subTimer=0,z(e,t.x,t.y-100,">>>  <<<","#fbbf24","chat"))}else t.customVars.activeSkill==="triple_storm"?(t.customVars.subTimer++,t.customVars.subTimer%60===1&&t.customVars.stormCharges>0&&(ph.start(e,t,Qe.phase1.stormCount,`  (${t.customVars.stormCharges}/3) `,"#d8b4fe"),t.customVars.stormCharges--),ph.update(e,t,i,Qe.phase1.stormInterval),t.customVars.stormCharges<=0&&t.customVars.subTimer>240&&(t.customVars.activeSkill="system_cooling",t.customVars.subTimer=0,z(e,t.x,t.y-100,">>>  <<<","#94a3b8","chat"))):t.customVars.activeSkill==="system_cooling"&&(t.customVars.subTimer++,t.customVars.subTimer%30===0&&xe(e,t.x+(Math.random()-.5)*100,t.y+(Math.random()-.5)*100,"#94a3b8",3),t.customVars.subTimer>Qe.phase1.coolingDuration&&(t.customVars.activeSkill=null,z(e,t.x,t.y-100,"","#22c55e","chat")))}};function Qb(e,t){const i=e.state.mapWidth,o=e.state.mapHeight,r=40,c=[{x:0,y:-o/2+r,id:"top"},{x:i/2-r,y:0,id:"right"},{x:0,y:o/2-r,id:"bottom"},{x:-i/2+r,y:0,id:"left"}];if(!t.customVars.nodes||t.customVars.nodes.length===0)return c[Math.floor(Math.random()*c.length)];let f=c[0],h=-1;for(const p of c){let u=1/0;for(const g of t.customVars.nodes){const b=e.state.enemies.find(v=>v.id===g);if(b){const v=Math.hypot(b.x-p.x,b.y-p.y);v<u&&(u=v)}}u>h&&(h=u,f=p)}return{x:f.x+(Math.random()-.5)*100,y:f.y+(Math.random()-.5)*100}}function $b(e,t,i,o){st.spawnEnemy(e,"boss_ai_node",i,o);const r=e.state.enemies[e.state.enemies.length-1];r&&(t.customVars.nodes.push(r.id),r.customVars={state:"edge_patrol"},r.config.behavior="turret",r.vx=0,r.vy=0,r.attackCooldown=99999999)}function yh(e,t){const i=e.state.mapWidth,o=e.state.mapHeight,r=40,c=2.5;e.state.zones=e.state.zones.filter(f=>f.type!=="ai_laser_link"),t.customVars.nodes.forEach(f=>{const h=e.state.enemies.find(p=>p.id===f);if(h){const p=Math.abs(h.y-(-o/2+r)),u=Math.abs(h.y-(o/2-r)),g=Math.abs(h.x-(-i/2+r)),b=Math.abs(h.x-(i/2-r)),v=Math.min(p,u,g,b);v===p?h.x<i/2-r?(h.x+=c,h.y+=(-o/2+r-h.y)*.2):h.y+=c:v===b?h.y<o/2-r?(h.y+=c,h.x+=(i/2-r-h.x)*.2):h.x-=c:v===u?h.x>-i/2+r?(h.x-=c,h.y+=(o/2-r-h.y)*.2):h.y-=c:h.y>-o/2+r?(h.y-=c,h.x+=(-i/2+r-h.x)*.2):h.x+=c;const x=h.x-t.x,T=h.y-t.y,M=Math.hypot(x,T),k=Math.atan2(T,x),C=(t.x+h.x)/2,w=(t.y+h.y)/2;e.state.zones.push({id:`link_${h.id}`,x:C,y:w,width:M,height:20,radius:10,angle:k,type:"ai_laser_link",life:2,maxLife:2,color:"#d8b4fe",emoji:""})}})}const pl={spawn007Bomb:(e,t,i)=>{const o=Me.getProjectile(e);o.x=t.x,o.y=t.y,o.radius=50,o.emoji="",o.text="";const r=50+Math.random()*1200,c=60+Math.random()*40,f=r/c;o.vx=Math.cos(i)*f,o.vy=Math.sin(i)*f,o.z=80,o.vz=12,o.gravity=.5,o.damage=40,o.life=c+20,o.isEnemy=!0,o.isMimic=!0,o.color="#ef4444",o.isExplosive=!0,o.explodeOnExpire=!0,o.maxExplosionRadius=220,o.damageWindow=3,o.renderStyle="mimic_bomb",o.trailConfig={type:"smoke",color:"#78716c",interval:3,timer:0,size:14},o.behaviors=["isometric_move","decay_life","check_bounds","explode_on_expire","update_explosion","emit_trail"],e.state.projectiles.push(o),Math.random()<.2&&e.audio.play("shoot_default"),e.state.zones.push({id:Math.random().toString(),x:t.x+Math.cos(i)*r,y:t.y+Math.sin(i)*r,radius:220,type:"warning_circle",life:c,maxLife:c,color:"#ef4444",emoji:""})},spawn1024Code:(e,t,i)=>{const o=Me.getProjectile(e),r=["Bug","NaN","null","{}","undefined","Fatal","0xFFFF"],c=r[Math.floor(Math.random()*r.length)];o.x=t.x,o.y=t.y,o.radius=35,o.emoji=c,o.text=c;const f=7;o.vx=Math.cos(i)*f,o.vy=Math.sin(i)*f,o.damage=15,o.life=400,o.isEnemy=!0,o.isMimic=!0,o.color="#ef4444",o.renderStyle="text",o.behaviors=["move_linear","sine_wave","decay_life","check_bounds"],o.trailConfig={type:"pixel",color:"#ef4444",interval:4,timer:0},e.state.projectiles.push(o)},spawn9527Text:(e,t,i)=>{const o=Me.getProjectile(e),r=["","","","","","","","","","?"],c=r[Math.floor(Math.random()*r.length)];o.x=t.x,o.y=t.y,o.radius=32,o.emoji=c,o.text=c;const f=(Math.random()-.5)*.4,h=i+f,p=11;o.vx=Math.cos(h)*p,o.vy=Math.sin(h)*p,o.damage=15,o.life=400,o.isEnemy=!0,o.isMimic=!0,o.color="#ef4444",o.renderStyle="text",o.trailConfig={type:"pixel",color:"rgba(239, 68, 68, 0.3)",interval:5,timer:0},o.behaviors=["move_linear","decay_life","check_bounds","emit_trail"],e.state.projectiles.push(o),Math.random()<.3&&e.audio.play("shoot_default")},spawnEVCreatorError:(e,t,i)=>{const o=Me.getProjectile(e);o.x=t.x,o.y=t.y,o.radius=35,o.emoji="Error",o.text="Error";const r=5;o.vx=Math.cos(i)*r,o.vy=Math.sin(i)*r,o.damage=20,o.life=400,o.isEnemy=!0,o.isMimic=!0,o.color="#ef4444",o.renderStyle="text",o.behaviors=["move_linear","decay_life","check_bounds"],e.state.projectiles.push(o),Math.random()<.3&&e.audio.play("shoot_boss_glitch")}},bh=["9527","007","1024","ev_creator"],Kb={update:(e,t,i)=>{if(t.customVars.lastLeakHp===void 0&&(t.customVars.lastLeakHp=t.hp),t.customVars.activeSkill==="intro_roar"){tg(e,t);return}if(e.state.timeAlive%5===0){const o=Math.random()*Math.PI*2,r=t.radius*(.8+Math.random()*.4);Zt(e,{x:t.x+Math.cos(o)*r,y:t.y+Math.sin(o)*r,color:"#ef4444",count:1,life:60,speed:1,size:6,type:"rect",alpha:.8,scaleDelta:-.01})}if(t.stunTimer<=0&&(!t.customVars.activeSkill||t.customVars.activeSkill==="none"||t.customVars.activeSkill==="chaos_morph")&&t.stateTimer%Qe.phase2.leakRate===0){const o=Math.random()*Math.PI*2,r=Me.getProjectile(e);r.x=t.x,r.y=t.y,r.radius=12,r.vx=Math.cos(o)*8+(Math.random()-.5)*3,r.vy=Math.sin(o)*8+(Math.random()-.5)*3,r.damage=Qe.phase2.chaosDamage,r.life=400,r.isEnemy=!0,r.color="#22c55e",r.renderStyle="matrix_missile",r.active=!0,e.state.projectiles.push(r)}Zb(e,t),Jb(e,t,i)}};function Zb(e,t){const i=t.maxHp*.05;t.customVars.lastLeakHp-t.hp>=i&&(t.customVars.lastLeakHp=t.hp,z(e,t.x,t.y-t.radius-40," MEMORY LEAK ","#22c55e","chat"),e.audio.play("ui_glitch_minor"),e.state.zones.push({id:Math.random().toString(),x:t.x,y:t.y,radius:180,type:"glitch_memory_leak",life:999999,maxLife:999999,color:"#22c55e",emoji:""}))}function Jb(e,t,i){t.customVars.activeSkill==="chaos_morph"?sg(e,t):t.customVars.activeSkill==="crash_dash"?ag(e,t,i):t.customVars.activeSkill||eg(e,t)}function eg(e,t,i){if(t.customVars.wanderTarget||(t.customVars.wanderTarget={x:(Math.random()-.5)*(e.state.mapWidth-200),y:(Math.random()-.5)*(e.state.mapHeight-200)}),t.stateTimer%120===0&&(t.customVars.wanderTarget=null),t.customVars.wanderTarget){const h=t.customVars.wanderTarget.x-t.x,p=t.customVars.wanderTarget.y-t.y,u=Math.hypot(h,p),g=Qe.phase2.moveAcceleration*.5;u>50?(t.vx+=h/u*g,t.vy+=p/u*g):t.customVars.wanderTarget=null}if(Math.random()<.005){const p=Math.random()*Math.PI*2;xe(e,t.x,t.y,"#ef4444",10),t.x+=Math.cos(p)*150,t.y+=Math.sin(p)*150,xe(e,t.x,t.y,"#ef4444",10),e.audio.play("ui_glitch_minor")}const o=Qe.phase2.maxSpeed,r=Math.hypot(t.vx,t.vy);r>o&&(t.vx=t.vx/r*o,t.vy=t.vy/r*o),t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t)&&(t.vx*=-.5,t.vy*=-.5);const c=t.customVars.skillCooldowns.chaos_morph||0;c>0&&t.customVars.skillCooldowns.chaos_morph--;const f=t.customVars.skillCooldowns.crash_dash||0;if(f>0&&t.customVars.skillCooldowns.crash_dash--,!t.customVars.activeSkill){if(f<=0&&Math.random()<.02){t.customVars.activeSkill="crash_dash",t.customVars.subTimer=0,t.customVars.dashAngle=0;return}c<=0&&(t.customVars.activeSkill="chaos_morph",t.customVars.subTimer=0,t.customVars.morphChar=null,z(e,t.x,t.y-120," IDENTITY OVERWRITE ","#facc15","chat"),e.audio.play("ui_typewriter"))}}function tg(e,t){t.customVars.subTimer++,t.vx*=.8,t.vy*=.8,t.x+=t.vx,t.y+=t.vy;const i=5;t.x+=(Math.random()-.5)*i,t.y+=(Math.random()-.5)*i,t.customVars.subTimer%10===0&&z(e,t.x,t.y-50,"","#ef4444"),t.customVars.subTimer%60===0&&(z(e,t.x,t.y-120,"  ","#ef4444","chat"),e.audio.play("ui_static_tick")),t.customVars.subTimer>120&&(t.customVars.activeSkill=null,t.customVars.subTimer=0)}function ag(e,t,i){t.customVars.subTimer++;const{aimDuration:o,lockDuration:r,dashSpeed:c,stunDuration:f}=Qe.phase2.crashDash,h=t.customVars.subTimer;if(h<o){t.vx=0,t.vy=0;const p=Math.atan2(i.y-t.y,i.x-t.x);t.customVars.dashAngle=p,h===1&&(z(e,t.x,t.y-100," SYSTEM CRASH IMMINENT ","#ef4444","chat"),e.audio.play("ui_glitch_severe"))}else if(h<o+r)t.vx=0,t.vy=0,h===o&&(e.audio.play("ui_static_tick"),z(e,t.x,t.y-80,"LOCKED","#ef4444"));else{if(h===o+r){const b=t.customVars.dashAngle;t.vx=Math.cos(b)*c,t.vy=Math.sin(b)*c,e.audio.play("neon_launch"),e.state.camera.x+=Math.cos(b)*-10,e.state.camera.y+=Math.sin(b)*-10}t.x+=t.vx,t.y+=t.vy,xe(e,t.x,t.y,"#ef4444",3),h%4===0&&xe(e,t.x,t.y,"#ffffff",1),Math.hypot(t.x-i.x,t.y-i.y)<t.radius+i.radius+20&&i.invulnerableTime<=0&&(i.hp-=40,i.vx+=t.vx*1.5,i.vy+=t.vy*1.5,i.invulnerableTime=30,z(e,i.x,i.y,"CRIT HIT!","#ef4444","damage"),e.audio.playHit());const u=e.state.mapWidth/2-t.radius,g=e.state.mapHeight/2-t.radius;(t.x<-u||t.x>u||t.y<-g||t.y>g)&&(t.x=Math.max(-u,Math.min(u,t.x)),t.y=Math.max(-g,Math.min(g,t.y)),t.vx=0,t.vy=0,t.stunTimer=f,t.customVars.activeSkill=null,t.customVars.skillCooldowns.crash_dash=Qe.phase2.crashDash.cooldown,e.audio.playExplosion(),e.state.camera.x+=(Math.random()-.5)*40,e.state.camera.y+=(Math.random()-.5)*40,z(e,t.x,t.y-100,"FATAL ERROR: REBOOTING...","#94a3b8","chat"),xe(e,t.x,t.y,"#ef4444",30),e.state.zones.push({id:Math.random().toString(),x:t.x,y:t.y,radius:350,type:"explosion_shockwave",life:30,maxLife:30,color:"#3b82f6",emoji:""}))}}function sg(e,t,i){t.customVars.subTimer++;const o=t.customVars.subTimer;if(o>Qe.phase2.chaosMorphDuration){t.customVars.activeSkill=null,t.customVars.skillCooldowns.chaos_morph=Qe.phase2.chaosMorphCooldown,t.stunTimer=30,z(e,t.x,t.y-80,"REBOOTING...","#ef4444","chat"),e.audio.play("ui_power_down"),t.customVars.morphChar=null,t.customVars.isAiming=!1;return}const r=210,c=30,f=o%r;if(f<c){if(t.vx*=.9,t.vy*=.9,t.x+=t.vx,t.y+=t.vy,t.customVars.isAiming=!1,f%5===0){const h=bh[Math.floor(Math.random()*bh.length)];t.customVars.morphChar=h}f===1&&(z(e,t.x,t.y-80,"LOADING PROFILE...","#ffffff","chat"),e.audio.play("ui_glitch_minor"))}else{f===c&&e.audio.play("ui_typewriter");const h=t.customVars.morphChar,p=f-c,u=t.stateTimer*.05+Math.sin(o*.1);if(t.vx+=Math.cos(u)*.5,t.vy+=Math.sin(u)*.5,t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t),h==="9527"){if(p%4===0){t.customVars.spinAngle=(t.customVars.spinAngle||0)+.4;const g=t.customVars.spinAngle,b=(Math.random()-.5)*.3;pl.spawn9527Text(e,t,g+b),pl.spawn9527Text(e,t,g+b+Math.PI)}}else if(h==="007"){if(p%12===0)for(let b=0;b<3;b++){const v=Math.random()*Math.PI*2;pl.spawn007Bomb(e,t,v)}}else if(h==="1024"){if(p%8===0){const g=p*.15,b=6;for(let v=0;v<b;v++){const x=g+v*Math.PI*2/b;pl.spawn1024Code(e,t,x)}}}else if(h==="ev_creator"&&p%10===0){const g=Math.random()*Math.PI*2;pl.spawnEVCreatorError(e,t,g),pl.spawnEVCreatorError(e,t,g+.2)}}}const lg={update:(e,t,i,o)=>{if(t.customVars||ig(t),t.stateTimer=(t.stateTimer||0)+1,t.customVars.inCinematicTransition){rg(e,t,i);return}if(t.phase===1&&t.hp/t.maxHp<=.5){og(e,t);return}t.phase===1?Wb.update(e,t,i):t.phase===2&&Kb.update(e,t,i)}};function ig(e){e.customVars={activeSkill:null,subTimer:0,nodes:[],stormQueue:0,cloneIds:[],skillCooldowns:{storm:300,barrage:60,force_gc:600,crash_dash:300},buildTimer:0,buildMaxTime:Qe.phase1.buildTime,nodesToSpawn:0,nextSpawnLocation:null,shootAngle:0,stormCharges:0,streamAngle:0,streamPattern:"helix",runawayAngle:0,dashTarget:null,inCinematicTransition:!1,transitionTimer:0,transitionPhase:0,popups:[],whiteoutTimer:0}}function og(e,t){t.customVars.inCinematicTransition=!0,t.customVars.transitionTimer=600,t.customVars.transitionPhase=0,t.customVars.popups=[],e.state.cinematicPause=!0,e.audio.stopBGM()}function rg(e,t,i){t.customVars.transitionTimer--;const o=600-t.customVars.transitionTimer;if(o<120)o===1&&z(e,t.x,t.y-100,"...","#ffffff","chat"),o%10===0&&(e.state.camera.x+=(Math.random()-.5)*5,e.state.camera.y+=(Math.random()-.5)*5);else if(o>=120&&o<360){if(t.customVars.transitionPhase=1,o%12===0){const r=["FATAL ERROR","","SYSTEM FAILURE","","KERNEL PANIC",""],c=["Critical process died","","Memory overflow","","Reboot failed","User not found"];t.customVars.popups||(t.customVars.popups=[]),t.customVars.popups.push({x:.1+Math.random()*.6,y:.1+Math.random()*.6,title:r[Math.floor(Math.random()*r.length)],text:c[Math.floor(Math.random()*c.length)]}),e.audio.play("ui_typewriter")}e.state.camera.x+=(Math.random()-.5)*10,e.state.camera.y+=(Math.random()-.5)*10}else o>=360&&o<540?(t.customVars.transitionPhase=2,o===360&&e.audio.play("ui_glitch_severe"),e.state.camera.x+=(Math.random()-.5)*20,e.state.camera.y+=(Math.random()-.5)*20):(t.customVars.transitionPhase=3,o===540&&e.audio.play("ui_power_down"));t.customVars.transitionTimer<=0&&(t.customVars.inCinematicTransition=!1,e.state.cinematicPause=!1,ng(e,t,i))}function ng(e,t,i){t.phase=2,t.stateTimer=0,t.customVars.popups=[],t.customVars.whiteoutTimer=60,z(e,t.x,t.y-150,"SYSTEM BREACH","#ef4444","chat"),z(e,t.x,t.y-120,"  ","#ef4444","chat"),e.audio.play("explosion_cyber"),e.audio.playBattleBGM(),e.state.zones.push({id:Math.random().toString(),x:t.x,y:t.y,radius:1500,type:"explosion_shockwave",life:60,maxLife:60,color:"#ef4444",emoji:""}),e.state.projectiles=e.state.projectiles.filter(c=>!c.isEnemy),e.state.enemies.forEach(c=>{c.id!==t.id&&c.hp>0&&(c.hp=0,xe(e,c.x,c.y,"#ef4444",10))}),t.customVars.nodes&&(t.customVars.nodes=[]);const o=Math.atan2(i.y-t.y,i.x-t.x);i.vx+=Math.cos(o)*40,i.vy+=Math.sin(o)*40,i.stunTimer=45,e.state.camera.x+=(Math.random()-.5)*100,e.state.camera.y+=(Math.random()-.5)*100,e.state.zones=e.state.zones.filter(c=>c.type!=="ai_laser_link"&&c.type!=="laser_beam"),t.customVars.activeSkill="intro_roar",t.customVars.subTimer=0;const r=Math.random()*Math.PI*2;t.vx=Math.cos(r)*15,t.vy=Math.sin(r)*15}const im={updateBossBehavior:(e,t,i,o)=>{t.config.behavior==="boss"&&(t.config.type==="boss_kpi"?hh.update(e,t,i,o):t.config.type==="boss_glitch"?zb.update(e,t,i,o):t.config.type==="boss_ai"?lg.update(e,t,i,o):hh.update(e,t,i,o))}},gh={handleBurstQueue:(e,t,i)=>{if(t.burstQueue&&t.burstQueue.length>0){if(t.burstTimer=(t.burstTimer||0)-1,t.burstTimer<=0){const o=t.burstQueue.shift();if(o){const r=Math.atan2(i.y-t.y,i.x-t.x);st.spawnSingleBullet(e,t,r,!1,o),t.burstTimer=15}}(t.config.type==="keyboard_man"||t.config.behavior==="shooter")&&(t.vx=0,t.vy=0)}},performEnemyAttack:(e,t,i,o)=>{if(t.config.behavior==="chase"||t.config.behavior==="rusher"||t.config.behavior==="circle"||t.config.behavior==="minion"||t.config.behavior==="bonus"||t.config.behavior==="support"||t.config.behavior==="linker"||t.config.behavior==="spawner"||t.config.behavior==="summoner_orbit"||t.config.behavior==="devourer"||t.config.behavior==="balloon"||t.config.type==="river_crab"||t.config.type==="leech"||t.isTransitioning||t.stunTimer&&t.stunTimer>0)return;if(t.attackCooldown>0){t.attackCooldown--;return}const r=Math.atan2(i.y-t.y,i.x-t.x);if(t.config.type==="clown")return;if(t.config.behavior==="boss"){im.updateBossBehavior(e,t,i,st.spawnSingleBullet);return}const c=t.config.attackPattern||"single";if(c==="burst"){if(o<800){if(t.config.burstPhrases&&t.config.burstPhrases.length>0){const f=t.config.burstPhrases[Math.floor(Math.random()*t.config.burstPhrases.length)];t.burstQueue=f.split("").slice(0,5)}else t.burstQueue=["","",""];t.burstTimer=0,t.attackCooldown=180}}else c==="single"?o<800&&(st.spawnSingleBullet(e,t,r),t.attackCooldown=t.config.type==="turret"?30:120):c==="spread"?o<600&&(st.spawnSingleBullet(e,t,r-.2),st.spawnSingleBullet(e,t,r),st.spawnSingleBullet(e,t,r+.2),t.attackCooldown=150):c==="explode"&&o<700&&(st.spawnSingleBullet(e,t,r,!0),t.attackCooldown=180)}},yl={handleCaptureState:(e,t)=>{if(t.captureState==="latched"){const i=e.state.player;return t.latchOffset||(t.latchOffset={x:(Math.random()-.5)*20,y:(Math.random()-.5)*20}),t.x=i.x+t.latchOffset.x,t.y=i.y+t.latchOffset.y,t.vx=0,t.vy=0,!0}if(t.captureState&&t.captureState!=="free"&&t.captureTargetId&&(e.state.enemies.find(o=>o.id===t.captureTargetId)||(t.captureState="free",t.captureTargetId=void 0,t.vx=(Math.random()-.5)*10,t.vy=(Math.random()-.5)*10,z(e,t.x,t.y-t.radius-20,"!","#ffffff","chat"))),t.captureState==="orbiting"||t.linkedById)return!0;if(t.captureState==="targeted")return t.vx*=.9,t.vy*=.9,t.x+=t.vx,t.y+=t.vy,!0;if(t.captureState==="being_dragged"){const i=e.state.enemies.find(o=>o.id===t.captureTargetId);if(i){const o=i.x-t.x,r=i.y-t.y,c=Math.hypot(o,r),f=Ce.Combat.dragSpeed;c>140?(t.x+=o/c*f,t.y+=r/c*f,t.vx=0,t.vy=0):(t.captureState="orbiting",t.x=i.x+o/c*140,t.y=i.y+r/c*140)}else t.captureState="free",t.captureTargetId=void 0;return!0}return!1},handleBossTransition:(e,t)=>t.isTransitioning?(t.stateTimer=(t.stateTimer||0)-1,t.vx=0,t.vy=0,t.config.behavior==="boss"&&(t.radius=140+140*(1-t.stateTimer/180)),(t.stateTimer||0)<=0&&(t.isTransitioning=!1,t.phase=2,t.hp=t.maxHp,t.emoji="",t.radius=280,t.subState="normal",t.stateTimer=0,z(e,t.x,t.y-t.radius-20,"!!!","#ef4444","chat")),!0):!1,updateThrownState:(e,t,i,o)=>{if(!t.isThrown)return!1;t.x+=t.vx,t.y+=t.vy,xe(e,t.x,t.y,"#f59e0b",2),e.state.timeAlive%4===0&&e.state.zones.push({id:Math.random().toString(),x:t.x,y:t.y,radius:t.radius*.8,type:"scorch",life:120,maxLife:120,color:"#1c1917",emoji:""});const r=i.x-t.x,c=i.y-t.y;if(Math.sqrt(r*r+c*c)<t.radius+i.radius&&i.invulnerableTime<=0){const u=40*o,g=Math.atan2(c,r),b=30;i.vx+=Math.cos(g)*b,i.vy+=Math.sin(g)*b,sm(e,u,"elite_manager_thrown"),z(e,i.x,i.y,"!","#ef4444","damage"),xe(e,i.x,i.y,"#ef4444",20),e.audio.playExplosion(),t.hp=0;const v=e.state.enemies.indexOf(t);return v>-1&&e.state.enemies.splice(v,1),!0}e.state.enemies.forEach(u=>{if(u===t||u.isThrown||u.config.behavior==="boss"||u.config.type==="elite_manager")return;const g=u.x-t.x,b=u.y-t.y,v=Math.hypot(g,b),x=t.radius+u.radius+100;if(v<x){let T=g/v,M=b/v;v===0&&(T=1,M=0);const C=20*(1-v/x);u.vx+=T*C,u.vy+=M*C,u.stunTimer=Math.max(u.stunTimer||0,20)}});const h=e.state.mapWidth,p=e.state.mapHeight;if(Math.abs(t.x)>h/2+300||Math.abs(t.y)>p/2+300){t.hp=0;const u=e.state.enemies.indexOf(t);u>-1&&e.state.enemies.splice(u,1)}return!0},updateMovement:(e,t,i,o,r,c,f)=>{let h=t.config.speed;f&&o<350&&(h*=.4,Math.random()<.1&&(xe(e,t.x,t.y,"#a855f7",1),z(e,t.x,t.y-t.radius-10,"?","#a855f7")));let p=r/o,u=c/o;if(t.config.behavior==="bonus"||t.config.behavior==="minion"||t.config.behavior==="balloon"){if(t.stateTimer=(t.stateTimer||0)-1,t.config.behavior==="balloon"){t.vx=p*t.config.speed,t.vy=u*t.config.speed,t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t),Le.checkObstacles(e,t);return}if(t.stateTimer<=0){const v=Math.random()*Math.PI*2;t.vx=Math.cos(v)*t.config.speed,t.vy=Math.sin(v)*t.config.speed,t.stateTimer=60+Math.floor(Math.random()*60)}if(t.config.behavior==="minion"&&o<300&&Math.random()<.02){const v=Math.atan2(i.y-t.y,i.x-t.x);t.vx=Math.cos(v)*t.config.speed,t.vy=Math.sin(v)*t.config.speed}const g=200;t.x<-e.MAP_WIDTH/2+g&&(t.vx+=.5),t.x>e.MAP_WIDTH/2-g&&(t.vx-=.5),t.y<-e.MAP_HEIGHT/2+g&&(t.vy+=.5),t.y>e.MAP_HEIGHT/2-g&&(t.vy-=.5);const b=Math.sqrt(t.vx*t.vx+t.vy*t.vy);b>t.config.speed&&(t.vx=t.vx/b*t.config.speed,t.vy=t.vy/b*t.config.speed),t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t),Le.checkObstacles(e,t);return}if(t.config.behavior==="boss"&&t.phase===2&&(h*=1.5),(t.config.behavior==="shooter"||t.config.behavior==="support"||t.config.behavior==="spawner"||t.config.behavior==="summoner_orbit")&&o<400)h*=.2,p=-p,u=-u;else if(t.config.behavior==="boss"){if(t.customVars&&t.customVars.activeSkill){t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t);return}if(t.phase===2&&(t.subState==="moving_center"||t.subState==="prepping")){if(Math.hypot(t.x,t.y)>10){const b=Math.atan2(-t.y,-t.x);t.vx=Math.cos(b)*(t.config.speed*3),t.vy=Math.sin(b)*(t.config.speed*3)}else t.vx=0,t.vy=0;t.x+=t.vx,t.y+=t.vy;return}if(h*=.8,t.warningTimer&&t.warningTimer>0){if(t.vx=0,t.vy=0,t.warningTimer--,t.warningTimer<=0){t.dashTimer=60;const g=t.dashTarget?t.dashTarget.x:i.x,b=t.dashTarget?t.dashTarget.y:i.y,v=Math.atan2(b-t.y,g-t.x);t.vx=Math.cos(v)*t.config.speed*8,t.vy=Math.sin(v)*t.config.speed*8}}else t.dashTimer&&t.dashTimer>0?t.dashTimer--:(t.vx=p*h,t.vy=u*h)}else t.config.type==="river_crab"?(t.stateTimer||(t.stateTimer=0),t.stateTimer++,u=c/o,p=Math.sin(t.stateTimer/20)*1.5,h=t.config.speed):t.config.behavior==="tank"?h*=.8:t.config.behavior==="circle"?sa.handleCircleDash(e,t,i,o,r,c,h):t.config.behavior==="turret"&&(h=0);if(t.config.behavior!=="circle"&&t.config.type!=="river_crab"&&(t.config.behavior!=="boss"||(t.dashTimer||0)<=0&&(t.warningTimer||0)<=0)&&(t.config.type==="elite_hr"&&(t.isAimingDash||t.dashTimer&&t.dashTimer>0)||(t.vx=p*h,t.vy=u*h)),t.config.type==="river_crab"&&(t.vx=p*h,t.vy=u*h*.3),t.config.behavior!=="circle")t.x+=t.vx,t.y+=t.vy;else{t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t);return}t.config.behavior!=="boss"&&Le.checkObstacles(e,t)},checkSoftCollisions:(e,t,i)=>{if(t.captureState==="latched")return;const o=i.query(t.x,t.y);for(const r of o){if(t===r||t.linkedById||r.linkedById||t.captureState||r.captureState)continue;const c=t.config.behavior==="devourer",f=r.config.behavior==="devourer";if(c||f){const g=c?r:t;if(g.config.behavior!=="boss"&&g.config.behavior!=="devourer"&&g.config.tier!=="epic"&&g.config.tier!=="boss")continue}const h=t.x-r.x,p=t.y-r.y,u=Math.sqrt(h*h+p*p);if(u<t.radius+r.radius){if(t.config.behavior==="boss"&&r.config.behavior==="minion"){z(e,t.x,t.y-t.radius-20,"!","#ef4444","chat"),t.hp=Math.min(t.maxHp,t.hp+200),z(e,t.x,t.y,"+200","#22c55e"),r.hp=0,e.state.enemies=e.state.enemies.filter(b=>b!==r);return}const g=.2;t.vx+=h/u*g,t.vy+=p/u*g}}}},Aa=st.spawnEnemy,ji=tr.triggerBossTransition,Da=tr.killEnemy;function cg(e){var h;const t=e.state.player,i=$e.getEnemyDamageMultiplier(e.state.difficultyId,e.state.currentWave,e.state.isEndless,e.state.endlessWaveCount),o=t.items.includes(""),r=e.state.isDebugFrozen,c=e.state.timeAlive,f=new tm(400);f.insertAll(e.state.enemies);for(let p=e.state.enemies.length-1;p>=0;p--){const u=e.state.enemies[p];if(!u)continue;if(u.hitFlashTimer&&u.hitFlashTimer>0&&u.hitFlashTimer--,r){u.vx*=.8,u.vy*=.8,yl.checkSoftCollisions(e,u,f),u.x+=u.vx,u.y+=u.vy;continue}if(u.anxietyTimer&&u.anxietyTimer>0&&(u.anxietyTimer--,u.anxietyTimer%60===0&&u.hp>0)){const j=u.config.behavior==="boss"?.025:.05,O=Math.max(1,Math.floor(u.hp*j));if(u.hp-=O,u.hitFlashTimer=3,e.state.waveStats.damageDealt+=O,z(e,u.x,u.y-u.radius,`-${O}`,"#a855f7","damage",u.id),u.hp<=0){tr.killEnemy(e,p);continue}}const g=u.id.charCodeAt(u.id.length-1)+u.id.charCodeAt(u.id.length-2),v=Math.hypot(u.x-t.x,u.y-t.y)>1300,x=u.config.behavior==="boss"||u.config.tier==="boss",T=u.config.tier==="epic"||u.config.type==="elite_manager"||u.config.type==="elite_hr",M=u.isThrown||u.captureState||u.isTransitioning||u.isAimingDash||u.config.behavior==="circle";let k=!1,C=!1;if(x||T||M||u.config.type==="leech"?(k=!0,C=!0):v?(k=(c+g)%15===0,C=!1):(k=(c+g)%3===0,C=k),k&&u.config.type==="leech"&&sa.handleLeechCombat(e,u,t),!yl.handleCaptureState(e,u)&&!yl.updateThrownState(e,u,t,i)){if(k){if(sa.handleTianGouPounce(e,u,t),sa.handleSpawner(e,u,st.spawnEnemy),sa.handleSupportHeal(e,u),sa.handleLemonTrail(e,u),sa.handleCyberGoddess(e,u),sa.handleClownBalloon(e,u,t,st.spawnEnemy),sa.handleDevourer(e,u,t),u.config.type==="elite_manager"&&jb.update(e,u,t,st.spawnSingleBullet),u.config.type==="elite_hr"&&Hb.update(e,u,t,i),yl.handleBossTransition(e,u)||sa.handleStun(e,u)||(gh.handleBurstQueue(e,u,t),u.config.type==="keyboard_man"&&((h=u.burstQueue)==null?void 0:h.length)>0)||sa.handleOrbit(e,u))continue;const w=t.x-u.x,j=t.y-u.y,O=Math.sqrt(w*w+j*j),V=u.config.type==="tian_gou"&&(u.subState==="charging"||u.subState==="pounce"),H=u.config.type==="leech"&&(u.subState==="charging"||u.subState==="pounce"||u.captureState==="latched"),X=u.config.type==="elite_manager",ee=u.config.type==="elite_hr",re=u.config.behavior==="devourer";V||H?u.subState==="pounce"&&(u.x+=u.vx,u.y+=u.vy,Le.constrain(e,u)):X||ee||re||O>0&&yl.updateMovement(e,u,t,O,w,j,o),gh.performEnemyAttack(e,u,t,O)}else(u.stunTimer||0)<=0&&!u.isTransitioning&&(u.x+=u.vx,u.y+=u.vy,Le.constrain(e,u));C&&yl.checkSoftCollisions(e,u,f)}}}const dg={handle:(e,t)=>{const i=e.state.timeAlive;if(t.type==="coffee_puddle"||t.type==="bug_trail"){if(i%30===0){let o=0;if(t.type==="coffee_puddle"){const c=e.state.player.items.filter(h=>h==="").length,f=.2+Math.max(0,c-1)*.1;o=Math.ceil(e.state.player.maxHp*(f/2)),o=Math.max(1,o)}else t.type==="bug_trail"&&(t.damage?o=t.damage:o=Math.ceil($e.getPlayerDamage(e.state.player)*.5));const r=t.type==="coffee_puddle"?"#fdba74":"#22c55e";for(let c=e.state.enemies.length-1;c>=0;c--){const f=e.state.enemies[c];if(f.hp<=0)continue;Math.hypot(f.x-t.x,f.y-t.y)<t.radius+f.radius&&(f.hp-=o,e.state.waveStats.damageDealt+=o,Math.random()<.3&&e.emit(le.ENTITY_DAMAGED,{x:f.x,y:f.y,text:`-${o}`,color:r,isCrit:!1}),f.config.behavior==="boss"&&f.phase===1&&f.hp<=0?ji(e,f):f.hp<=0&&Da(e,c))}}return}if(t.type==="bsod"&&i%5===0)for(let o=e.state.enemies.length-1;o>=0;o--){const r=e.state.enemies[o];Math.hypot(r.x-t.x,r.y-t.y)<t.radius&&(r.config.behavior!=="boss"?(r.hp=0,z(e,r.x,r.y,"DELETE","#ffffff","chat"),Da(e,o)):i%30===0&&(r.hp-=50,r.stunTimer=60,z(e,r.x,r.y,"FATAL ERROR","#ffffff","chat"),r.phase===1&&r.hp<=0&&ji(e,r)))}if(t.type==="live_stream")for(let o=e.state.enemies.length-1;o>=0;o--){const r=e.state.enemies[o];if(r.hp<=0)continue;if(Math.hypot(r.x-t.x,r.y-t.y)<t.radius&&(r.vx*=.85,r.vy*=.85,i%60===0)){const f=Math.ceil($e.getPlayerDamage(e.state.player)*.2);r.hp-=f,z(e,r.x,r.y-r.radius,`-${f}`,"#a855f7","damage"),r.config.behavior==="boss"&&r.phase===1&&r.hp<=0?ji(e,r):r.hp<=0&&Da(e,o)}}if(t.type==="firewall_wave"||t.type==="slacker_wave"){const o=1-t.life/(t.maxLife||1),r=t.radius*o,c=t.type==="slacker_wave";if(!c)for(let f=e.state.projectiles.length-1;f>=0;f--){const h=e.state.projectiles[f];h.isEnemy&&Math.hypot(h.x-t.x,h.y-t.y)<r&&(e.state.projectiles.splice(f,1),xe(e,h.x,h.y,"#3b82f6",2))}for(let f=e.state.enemies.length-1;f>=0;f--){const h=e.state.enemies[f];if(h.config.behavior==="boss")continue;const p=h.x-t.x,u=h.y-t.y,g=Math.hypot(p,u);if(g<r&&g>r-100){const b=c?3:2;if(g>0&&(h.vx+=p/g*b,h.vy+=u/g*b,h.stunTimer=c?5:2),c&&e.state.timeAlive%5===0){const v=$e.getPlayerDamage(e.state.player)*.5;h.hp-=v,e.state.waveStats.damageDealt+=v,h.hp<=0?Da(e,f):Math.random()<.3&&z(e,h.x,h.y,`-${Math.floor(v)}`,"#4ade80","damage")}}}}}},ug={handle:(e,t)=>{if(t.type==="pie_trap"&&t.life<=0){e.state.zones.push({id:Math.random().toString(),x:t.x,y:t.y,radius:t.radius*1.2,type:"explosion_shockwave",life:20,maxLife:20,color:"#fbbf24",emoji:""}),e.audio.playExplosion();const i=e.state.player;if(Math.hypot(i.x-t.x,i.y-t.y)<t.radius*1.2&&i.invulnerableTime<=0){pt.damagePlayer(e,25,"pie_trap"),z(e,i.x,i.y,"!","#ef4444","chat");const r=Math.atan2(i.y-t.y,i.x-t.x);i.vx+=Math.cos(r)*20,i.vy+=Math.sin(r)*20}}t.type==="boss_aoe"&&t.life<=0&&t.color!=="#fbbf24"&&(e.state.projectiles.push({id:Math.random().toString(),x:t.x,y:t.y,radius:t.radius,emoji:"",vx:0,vy:0,damage:30,life:5,isEnemy:!0,color:"#ef4444",text:"",pierce:999,hitIds:[],isExplosive:!0,isExploding:!0,maxExplosionRadius:t.radius,sourceType:"boss_aoe",active:!0}),e.audio.playExplosion())}},fg={update:e=>{if(e.state.zones.find(i=>i.type==="kpi_hell_fire")){const i=e.state.player;let o=!1;for(const r of e.state.zones)if(r.type==="safe_haven"&&Math.hypot(i.x-r.x,i.y-r.y)<200){o=!0;break}!o&&e.state.timeAlive%30===0&&(i.hp-=100,i.lastDamageTime=e.state.timeAlive,z(e,i.x,i.y-20,"-100","#ef4444","damage"),e.audio.playHit())}for(let i=e.state.zones.length-1;i>=0;i--){const o=e.state.zones[i];o.life<9e3&&o.life--,["ai_laser_link","glitch_square","explosion_gap","laser_beam"].includes(o.type)?_b.handle(e,o):["bsod","live_stream","firewall_wave","slacker_wave","coffee_puddle","bug_trail"].includes(o.type)?dg.handle(e,o):["pie_trap","boss_aoe"].includes(o.type)&&ug.handle(e,o),o.life<=0&&o.life>-9e3&&e.state.zones.splice(i,1)}}},vh=wi.update,xh=fg.update,Zo={updateHeat:e=>{const t=e.state.player,i=ye.getSynergyCounts(t.items);if((ye.getActiveTiers(i).hardcore||0)>=6)if(!t.isOverclocked)e.state.timeAlive%10===0&&(t.heatValue=Math.max(0,t.heatValue-1));else{if(t.heatValue-=.3,e.state.timeAlive%10===0&&xe(e,t.x,t.y,"#ef4444",2),e.state.timeAlive%60===0){const r=Math.max(1,Math.ceil(t.maxHp*.01));t.hp-=r,e.emit(le.FLOATING_TEXT,{x:t.x,y:t.y-20,text:`-${r}`,color:"#ef4444",category:"damage"}),t.hp<=0&&(e.state.killer="overclock")}t.heatValue<=0&&(t.isOverclocked=!1,t.heatValue=0,e.emit(le.FLOATING_TEXT,{x:t.x,y:t.y-60,text:"",color:"#cbd5e1"}),e.audio.play("ui_power_down"))}else t.heatValue=0,t.isOverclocked=!1},updateSurvival:(e,t)=>{const i=e.state.player,o=i.items.filter(c=>c==="").length;if(o>0&&!e.state.isWaveClearing&&e.state.timeAlive%60===0){const c=2*o;i.hp-=c,e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-20,text:`-${c}`,color:"#ef4444"});const f=i.items.filter(h=>h==="").length;if(f>0){const h=f*(i.items.includes("")?1200:800);i.insuranceGoldEarned<h&&(i.gold+=10,e.state.score+=10,e.state.waveStats.goldEarned+=10,e.state.waveStats.bonusGold+=10,i.insuranceGoldEarned+=10,e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-40,text:"+10",color:"#fbbf24",category:"gold"}))}i.hp<=0&&(e.state.killer="involution_king")}let r=i.hpRegen+t;if(e.state.activeMutators.includes("career_fatigue")&&(r*=.5),r>0&&e.state.timeAlive%60===0&&i.hp<i.maxHp&&i.hp>0&&(i.hp=Math.min(i.maxHp,i.hp+r),i.lastHealTime=e.state.timeAlive,e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-30,text:`+${r.toFixed(1)}`,color:"#22c55e",category:"damage"})),i.maxShield>0&&i.shield<i.maxShield&&i.hp>0)if(e.state.timeAlive-i.lastDamageTime>180){i.isRegeneratingShield||(e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-40,text:"",color:"#3b82f6",category:"chat"}),i.isRegeneratingShield=!0);let c=1/60;i.items.includes("")&&(c*=2),i.shield=Math.min(i.maxShield,i.shield+c)}else i.isRegeneratingShield=!1;else i.isRegeneratingShield=!1},checkDeath:e=>{if(e.state.reviveSequence.active)return!1;const t=e.state.player;return t.hp<=0&&!t.isDying?(t.isDying=!0,t.deathTimer=120,t.emoji="",xe(e,t.x,t.y,"#ef4444",12),xe(e,t.x,t.y,"#ffffff",8),e.audio.stopBGM(),e.audio.playExplosion(),localStorage.removeItem("meme_game_save"),e.saveAchievements(),!0):t.isDying},updateVisuals:e=>{const t=e.state.player;if(t.invulnerableTime>0&&t.invulnerableTime--,t.isDying)return;const i=jt[t.characterId]||jt[9527];if(t.isOverclocked)t.emoji="";else{const o=t.hp/t.maxHp;o>.6?t.emoji=i.emojiNormal:o>.3?t.emoji=i.emojiHurt:t.emoji=i.emojiCritical}}},hg={calculate:e=>{const t=e.state.player,i=ye.getSynergyCounts(t.items),o=ye.getActiveTiers(i);let r=0,c=0,f=0,h=1,p=1;if((o.slacker||0)>=2&&(r+=Math.max(1,Math.floor(t.maxHp*.01))),(o.hardcore||0)>=2&&(c+=.5,f+=1.5),(o.market||0)>=2&&(h=1.25),t.summonCooldownSpeed=1,(o.hr||0)>=4){t.summonCooldownSpeed=.7;const u=e.state.projectiles.filter(g=>g.isSummon).length;c+=u*.1}if(t.items.includes("")){const u=Math.max(0,(t.maxHp-t.hp)/t.maxHp);p*=1+u}if(t.items.includes("")){const u=e.state.enemies.length,g=Math.min(.25,u*.01);p*=1+g}return t.items.includes("")&&(t.standStillTimer>0?(t.customTimers.macro_stack===void 0&&(t.customTimers.macro_stack=0),t.standStillTimer%60===0&&(t.customTimers.macro_stack=Math.min(.5,t.customTimers.macro_stack+.1)),p*=1+t.customTimers.macro_stack):t.customTimers.macro_stack=0),{synergyRegenBonus:r,synergyFlatAPS:c,synergyFlatProjectileSpeed:f,synergyExplosionRangeMult:h,attackSpeedMult:p}}},mg={update:(e,t)=>{const i=e.state.player,o=ye.getSynergyCounts(i.items),r=ye.getActiveTiers(o);let c=1,f=1;if((r.hr||0)>=6&&(e.state.projectiles.some(p=>p.summonType==="pacman")||(mt.createSummon(e,"hr_pacman",i.x,i.y),e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-80,text:"!",color:"#facc15",category:"chat"}))),(r.board||0)>=6&&(i.customTimers.board_missile===void 0&&(i.customTimers.board_missile=0),i.customTimers.board_color_idx===void 0&&(i.customTimers.board_color_idx=0),i.customTimers.board_missile--,i.customTimers.board_missile<=0)){const h=e.state.enemies.filter(p=>!p.isTransitioning&&p.hp>0);if(h.length>0){i.customTimers.board_missile=240;const p=Math.min(120,Math.max(20,h.length*4));i.customTimers.neon_casting_visual=100,e.audio.play("neon_launch");const u=[];h.sort((b,v)=>{const x=Math.hypot(b.x-i.x,b.y-i.y);return Math.hypot(v.x-i.x,v.y-i.y)-x});for(let b=0;b<p;b++){const v=h[b%h.length];if(v){const x=v.x+v.vx*20,T=v.y+v.vy*20,M=40;u.push({id:v.id,x:x+(Math.random()-.5)*M,y:T+(Math.random()-.5)*M})}}const g=["#facc15","#a855f7","#22d3ee","#ef4444","#f97316"];for(let b=0;b<u.length;b++){const v=u[b],x=g[i.customTimers.board_color_idx%g.length];i.customTimers.board_color_idx++;const T=Math.floor(b/p*90);js.createNeonRain(e,v.x,v.y,x,T,v.id)}}else i.customTimers.board_missile=60}return i.customTimers.slacker_energy===void 0&&(i.customTimers.slacker_energy=0),i.customTimers.slacker_burst===void 0&&(i.customTimers.slacker_burst=0),(r.slacker||0)>=6&&(t?(i.customTimers.slacker_energy>30&&i.customTimers.slacker_burst<=0&&(i.customTimers.slacker_burst=180,i.customTimers.slacker_energy=0,e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-60,text:"!",color:"#4ade80",category:"chat"}),e.audio.playPowerup(),xe(e,i.x,i.y,"#4ade80",15)),i.customTimers.slacker_burst<=0&&(i.customTimers.slacker_energy=Math.max(0,i.customTimers.slacker_energy-2))):i.customTimers.slacker_energy<100&&(i.customTimers.slacker_energy+=1,i.customTimers.slacker_energy===100&&e.emit(le.FLOATING_TEXT,{x:i.x,y:i.y-60,text:"!",color:"#4ade80"})),i.customTimers.slacker_burst>0&&(i.customTimers.slacker_burst--,c*=1.5,f*=2,e.state.timeAlive%5===0&&xe(e,i.x,i.y,"#4ade80",1))),(r.slacker||0)>=4?t?i.standStillTimer=0:(i.standStillTimer++,i.standStillTimer>30&&(e.state.enemies.forEach(p=>{if(p.isTransitioning||p.config.behavior==="boss")return;Math.hypot(p.x-i.x,p.y-i.y)<250&&(p.vx*=.8,p.vy*=.8,e.state.timeAlive%20===0&&Math.random()<.3&&e.emit(le.FLOATING_TEXT,{x:p.x,y:p.y-p.radius,text:"",color:"#4ade80"}))}),i.standStillTimer%60===0&&(e.state.zones.push({id:Math.random().toString(),x:i.x,y:i.y,radius:350,type:"slacker_wave",life:40,maxLife:40,color:"#4ade80",emoji:""}),e.audio.play("ui_shield_break")))):t?i.standStillTimer=0:i.standStillTimer++,kt.forEach(h=>{var p;if((p=h.hooks)!=null&&p.onTick){const u=h.items||[h.title],g=i.items.filter(b=>u.includes(b)).length;g>0&&h.hooks.onTick(e,g)}if(h.onTick){const u=h.items||[h.title],g=i.items.filter(b=>u.includes(b)).length;g>0&&h.onTick(e,g)}}),{speedMult:c,attackSpeedMult:f}}},Sh={checkInput:e=>{let t=e.joystickInput.move.x,i=e.joystickInput.move.y;return t===0&&i===0&&((e.keysPressed.w||e.keysPressed.arrowup)&&(i-=1),(e.keysPressed.s||e.keysPressed.arrowdown)&&(i+=1),(e.keysPressed.a||e.keysPressed.arrowleft)&&(t-=1),(e.keysPressed.d||e.keysPressed.arrowright)&&(t+=1)),t!==0||i!==0},update:(e,t,i)=>{const o=e.state.player;let r=e.joystickInput.move.x,c=e.joystickInput.move.y;r===0&&c===0&&((e.keysPressed.w||e.keysPressed.arrowup)&&(c-=1),(e.keysPressed.s||e.keysPressed.arrowdown)&&(c+=1),(e.keysPressed.a||e.keysPressed.arrowleft)&&(r-=1),(e.keysPressed.d||e.keysPressed.arrowright)&&(r+=1));let f=1;for(const h of e.state.zones)(h.type==="acid"||h.type==="acid_trail")&&Math.hypot(h.x-o.x,h.y-o.y)<h.radius&&(f=.4,Math.random()<.1&&xe(e,o.x,o.y,"#a3e635",1));if(t&&(o.facingAngle=Math.atan2(c,r)),t){const h=Math.sqrt(r*r+c*c),p=h>1?1/h:1;o.x+=r*p*o.speed*f*i,o.y+=c*p*o.speed*f*i}if(o.x+=o.vx,o.y+=o.vy,o.vx*=.85,o.vy*=.85,Math.abs(o.vx)<.1&&(o.vx=0),Math.abs(o.vy)<.1&&(o.vy=0),o.characterId==="cleaner"){let h=o.mopAngle||0;const p=e.joystickInput.aim.x,u=e.joystickInput.aim.y;Math.abs(p)>.1||Math.abs(u)>.1?h=Math.atan2(u,p):h=Math.atan2(e.mousePos.y-o.y,e.mousePos.x-o.x);let g=h-o.mopAngle;for(;g>Math.PI;)g-=2*Math.PI;for(;g<-Math.PI;)g+=2*Math.PI;o.mopAngle+=g*.15}Le.constrain(e,o),Le.checkObstacles(e,o),(isNaN(o.x)||isNaN(o.y))&&(console.warn("Player position NaN detected! Resetting to center."),o.x=0,o.y=0,o.vx=0,o.vy=0)}},pg={update:e=>{const t=e.state.player;if(t.charmTimer&&t.charmTimer>0){if(t.charmTimer--,t.charmTimer%20===0&&xe(e,t.x,t.y,"#f472b6",1),t.charmSourceId){const g=e.state.enemies.find(b=>b.id===t.charmSourceId);if(g){const b=Math.atan2(g.y-t.y,g.x-t.x),v=t.speed*.5;t.vx=Math.cos(b)*v,t.vy=Math.sin(b)*v,t.x+=t.vx,t.y+=t.vy,Le.constrain(e,t)}else t.charmTimer=0}t.charmTimer<=0&&(t.isCharmed=!1,t.charmSourceId=void 0,t.charmImmunityTimer=120,z(e,t.x,t.y-60,"!","#ffffff"));return}if(t.charmImmunityTimer&&t.charmImmunityTimer>0&&t.charmImmunityTimer--,t.customTimers.lag_rollback_timer&&t.customTimers.lag_rollback_timer>0){t.customTimers.lag_rollback_timer--;const g=t.customTimers.lag_rollback_timer;if(g<30&&t.customVars&&t.customVars.lag_anchor){const b=t.customVars.lag_anchor;b&&typeof b.x=="number"&&!isNaN(b.x)&&typeof b.y=="number"&&!isNaN(b.y)&&(t.x+=(b.x-t.x)*.2,t.y+=(b.y-t.y)*.2,t.vx=0,t.vy=0,g%3===0&&xe(e,t.x,t.y,"#22d3ee",1))}if(g===1&&t.customVars&&t.customVars.lag_anchor){const b=t.customVars.lag_anchor;b&&typeof b.x=="number"&&!isNaN(b.x)&&typeof b.y=="number"&&!isNaN(b.y)&&(t.x=b.x,t.y=b.y,t.vx=0,t.vy=0,e.state.camera.x=b.x,e.state.camera.y=b.y,t.invulnerableTime=18,xe(e,t.x,t.y,"#ef4444",30),e.audio.play("ui_glitch_severe"),z(e,t.x,t.y-60,"ROLLBACK COMPLETE","#ef4444","chat"))}}const i=Sh.checkInput(e);if(Zo.updateHeat(e),Zo.checkDeath(e))return;const o=hg.calculate(e),r=mg.update(e,i),c=o.attackSpeedMult*r.attackSpeedMult;Zo.updateSurvival(e,o.synergyRegenBonus),Sh.update(e,i,r.speedMult);let h=60/Math.max(1,t.attackSpeed)+(t.flatAttackSpeedBonus||0)+o.synergyFlatAPS;h*=c,t.isOverclocked&&(h*=2);const p=60/Math.max(.1,h),u=e.settings.autoShoot||e.keysPressed.mousedown||e.joystickInput.isFiring;if(t.speechPauseTimer>0&&t.speechPauseTimer--,u&&e.state.timeAlive-t.lastShotTime>=p&&!(t.characterId==="9527"&&t.speechPauseTimer>0)){let g=1;t.isOverclocked&&(g*=1.2),Db.shoot(e,g,o.synergyFlatProjectileSpeed,o.synergyExplosionRangeMult),t.lastShotTime=e.state.timeAlive}Zo.updateVisuals(e)}},om=[{id:"career_fatigue",name:"",description:" 50%",icon:"",color:"#ef4444",quote:""},{id:"inflation_shock",name:"",description:" 50%",icon:"",color:"#facc15",quote:"1235"},{id:"salary_cut",name:"",description:" 30%",icon:"",color:"#f97316",quote:""},{id:"imposter_syndrome",name:"",description:" 30%",icon:"",color:"#a855f7",quote:""},{id:"toxic_workplace",name:"",description:" 15% 1%",icon:"",color:"#22c55e",quote:"PUA"},{id:"carpal_tunnel",name:"",description:" 15% ",icon:"",color:"#fb923c",quote:"......Ctrl+C"},{id:"digital_eye_strain",name:"",description:"",icon:"",color:"#64748b",quote:"30"},{id:"endless_meetings",name:"",description:" 30%",icon:"",color:"#3b82f6",quote:""}],Th={ev_creator:"boss_glitch",1024:"boss_glitch",default:"boss_kpi"},Mh=[3,5,7],Pt={getBossTypeForPlayer:e=>Th[e]||Th.default,startWave:(e,t)=>{if(e.state.isEndless){if(e.state.endlessWaveCount++,e.state.currentWave=e.state.currentWave+1,e.state.endlessWaveCount%5===0){const u=om.filter(g=>!e.state.activeMutators.includes(g.id));if(u.length>0){const g=u[Math.floor(Math.random()*u.length)];e.state.activeMutators.push(g.id),e.state.modalMessage={title:"!",text:`${g.name}: ${g.description}`,type:"error"},e.audio.play("ui_glitch_minor")}else e.state.inflationRate+=.2,e.state.modalMessage={title:"",text:"... ",type:"error"}}}else e.state.currentWave=t;if(e.state.currentWave>1){const u=e.state.player.items.filter(b=>b==="").length;let g=.05;u>0&&(g=.05*Math.pow(2,u)),e.state.inflationRate+=g}else e.state.inflationRate=0;if(e.state.waveTimer=0,e.state.waveEnded=!1,e.state.isWaveClearing=!1,e.state.waveTransitionTimer=0,e.state.isOvertime=!1,e.state.waveStats={enemiesKilled:0,damageDealt:0,goldEarned:0,damageMitigated:0,bonusGold:0},e.state.player.x=0,e.state.player.y=0,e.state.achievements.includes("onboarding")||vl(e,"onboarding"),e.state.achievements.includes("first_blood")||vl(e,"first_blood"),e.state.player.customVars){const u=e.state.player.customVars.mem_leak_acc_dmg,g=e.state.player.customVars.mem_leak_acc_rad;let b=!1;u&&u>0&&(e.state.player.attackDamage=Math.max(1,e.state.player.attackDamage-u),e.state.player.customVars.mem_leak_acc_dmg=0,b=!0),g&&g>0&&(e.state.player.radius=Math.max(10,e.state.player.radius-g),e.state.player.customVars.mem_leak_acc_rad=0,b=!0),b&&z(e,e.state.player.x,e.state.player.y-120," ()","#ef4444","chat")}if(kt.forEach(u=>{if(u.onWaveStart){const g=u.items||[u.title],b=e.state.player.items.filter(v=>g.includes(v)).length;b>0&&u.onWaveStart(e,b)}}),e.state.player.items.includes("")&&(e.state.player.maxHp+=50,e.state.player.radius*=1.1,e.state.player.speed*=.95,z(e,e.state.player.x,e.state.player.y-100,"! HP+50","#8b5cf6","chat")),e.state.player.pigDebts&&e.state.player.pigDebts.length>0){let u=0,g=0;e.state.player.pigDebts=e.state.player.pigDebts.map(b=>(u+=200,g++,b-1)).filter(b=>b>0),u>0&&(e.state.player.gold-=u,z(e,e.state.player.x,e.state.player.y-90,`: -${u}`,"#ef4444","gold"),z(e,e.state.player.x,e.state.player.y-60,` ${g} `,"#ef4444","chat"))}e.state.player.hp=e.state.player.maxHp,e.state.player.items.includes("")?e.state.player.shield>e.state.player.maxShield&&(e.state.player.shield=e.state.player.maxShield):e.state.player.shield=e.state.player.maxShield;const i=ye.getSynergyCounts(e.state.player.items);if((ye.getActiveTiers(i).capital||0)>=4){const u=e.state.player.goldSpentInShop||0;if(u>0){const g=Math.floor(u/10)*2;g>0&&(e.state.player.shield+=g,z(e,e.state.player.x,e.state.player.y-60,`+${g}`,"#3b82f6","chat"))}}e.state.player.goldSpentInShop=0,e.state.player.isRegeneratingShield=!1,e.state.player.insuranceGoldEarned=0,e.state.player.isDying=!1,e.state.player.deathTimer=0,e.state.refreshCount=0;let r=10+(e.state.isEndless?e.state.endlessWaveCount:0);if(e.state.restockCost=r,e.state.player.characterId==="9527"){const u=Math.floor(100*e.state.player.incomeMultiplier);u>0&&(e.state.player.gold+=u,e.state.score+=u,e.state.waveStats.goldEarned+=u,e.state.waveStats.bonusGold+=u)}e.state.projectiles=[],e.state.enemies=[],e.state.drops=[],e.state.zones=[],e.audio.playBattleBGM();const c=300,f=e.state.player.items.filter(u=>u==="").length;if(f>0){z(e,e.state.player.x,e.state.player.y-80,` x${f}`,"#a855f7","chat");for(let u=0;u<f;u++){const g=(Math.random()-.5)*(e.MAP_WIDTH-c),b=(Math.random()-.5)*(e.MAP_HEIGHT-c);mt.createSummon(e,"chatbot",g,b)}}const h=e.state.player.items.filter(u=>u==="").length;if(h>0){let u=h;e.state.player.items.includes("")&&(u*=2),z(e,e.state.player.x,e.state.player.y-80,` x${u}`,"#a855f7","chat");for(let g=0;g<u;g++){const b=(Math.random()-.5)*(e.MAP_WIDTH-c),v=(Math.random()-.5)*(e.MAP_HEIGHT-c);mt.createSummon(e,"clone",b,v)}}const p=e.state.player.items.filter(u=>u==="").length;if(p>0)for(let u=0;u<p;u++)mt.createSummon(e,"headhunter",e.state.player.x,e.state.player.y);if(e.state.isCustomDebugMode){z(e,0,-100,"","#a855f7","chat");return}if(!e.state.isEndless)if((Kt.find(g=>g.waveNumber===e.state.currentWave)||Kt[Kt.length-1]).isBossWave){const g=Pt.getBossTypeForPlayer(e.state.player.characterId);Aa(e,g,0,-800),e.state.player.characterId==="ev_creator"&&g==="boss_glitch"&&(e.unlockEntry("boss_ai"),e.unlockEntry("boss_ai_clone"),e.unlockEntry("boss_ai_node"))}else(e.state.difficultyId==="hard"||e.state.difficultyId==="ultimate")&&(e.state.currentWave===4?(Aa(e,"elite_manager",-700,0),Aa(e,"elite_manager",700,0),e.state.isOvertime=!0):e.state.currentWave===6&&(e.state.uniqueSpawns.includes("elite_hr")?Aa(e,"capital_crocodile",0,-500):(Aa(e,"elite_hr",0,-500),e.state.uniqueSpawns.push("elite_hr"),e.state.isOvertime=!0)))},update:e=>{if(e.state.isCustomDebugMode){if(e.state.waveTimer%40===0&&e.state.debugEnemyTypes&&e.state.debugEnemyTypes.length>0){const f=e.state.debugEnemyTypes[Math.floor(Math.random()*e.state.debugEnemyTypes.length)];Pt.spawnEnemyRandomly(e,f)}return}let t;if(e.state.isEndless){const f=(e.state.endlessWaveCount-1)%Mh.length;t=Mh[f],e.state.waveTimer%1200===0&&e.state.waveTimer>0&&Pt.triggerHorde(e)}else t=e.state.currentWave;const i=Kt.find(f=>f.waveNumber===t)||Kt[Kt.length-1];let o=i.duration*60;(e.state.difficultyId==="hard"||e.state.difficultyId==="ultimate")&&!e.state.isEndless&&(e.state.currentWave===4||e.state.currentWave===6)&&(o=5400),e.state.waveTimer%600===0&&e.state.currentWave>1&&Math.random()<.15&&(Math.random()<.5?(Pt.spawnEnemyRandomly(e,"bonus_chest"),z(e,e.state.player.x,e.state.player.y-100," !","#fbbf24","chat")):(Pt.spawnEnemyRandomly(e,"delivery_guy"),z(e,e.state.player.x,e.state.player.y-100," !","#fbbf24","chat")));const c=e.state.enemies.some(f=>f.config.type==="capital_crocodile");if(e.state.waveTimer===1&&i.enemies.some(h=>h.type==="capital_crocodile")&&Pt.spawnEnemyRandomly(e,"capital_crocodile"),!(i.isBossWave&&!e.state.isEndless))if(e.state.waveTimer>=o&&!e.state.isWaveClearing)Pt.triggerWaveEnd(e);else{let f=i.spawnRate;if(e.state.difficultyId==="easy"?f=Math.ceil(f*1.2):e.state.difficultyId==="hard"?f=Math.ceil(f*.8):e.state.difficultyId==="ultimate"&&(f=Math.ceil(f*.6)),e.state.isEndless){const h=Math.floor(e.state.endlessWaveCount/5);f=Math.max(2,15-h)}else e.state.currentWave>=5&&(f=Math.ceil(f*.8));if(c&&(f=Math.max(10,Math.floor(f*.7))),f=Math.max(2,f),e.state.waveTimer%f===0){const h=i.enemies.reduce((g,b)=>g+b.weight,0);let p=Math.random()*h,u=i.enemies[0].type;for(const g of i.enemies)if(p-=g.weight,p<=0){u=g.type;break}u==="elite_hr"&&(e.state.uniqueSpawns.includes("elite_hr")?u=Math.random()>.5?"bonus_chest":"capital_crocodile":e.state.uniqueSpawns.push("elite_hr")),Pt.spawnEnemyRandomly(e,u)}}},triggerWaveEnd:e=>{const t=ye.getSynergyCounts(e.state.player.items);if((ye.getActiveTiers(t).capital||0)>=2){const o=Math.min(200,Math.floor(e.state.player.gold*.1));o>0&&(e.state.player.gold+=o,e.state.waveStats.goldEarned+=o,e.state.waveStats.bonusGold+=o)}e.state.hasRefreshedThisWave=!1,e.state.hasPurchasedThisWave=!1,e.state.isWaveClearing=!0,e.state.waveTransitionTimer=150,e.state.enemies=[],e.state.projectiles=[],e.saveGame()},triggerHorde:e=>{z(e,0,-150,"  ","#ef4444","chat"),e.audio.play("ui_glitch_severe");const t=["tian_gou","marketing_account","minion"],i=t[Math.floor(Math.random()*t.length)],o=20+Math.min(30,e.state.endlessWaveCount);for(let r=0;r<o;r++){const c=r/o*Math.PI*2,f=1200+Math.random()*200,h=e.state.player.x+Math.cos(c)*f,p=e.state.player.y+Math.sin(c)*f;Aa(e,i,h,p)}},spawnEnemyRandomly:(e,t)=>{if(t==="elite_hr"){if(e.state.uniqueSpawns.includes("elite_hr"))return;e.state.uniqueSpawns.push("elite_hr")}t==="cyber_goddess"&&e.state.enemies.filter(h=>h.config.type==="cyber_goddess").length>=2&&(t="river_crab"),t==="capital_crocodile"&&e.state.enemies.filter(h=>h.config.type==="capital_crocodile").length>=1&&(t=Math.random()>.5?"product_manager":"river_crab");const i=Math.random()*Math.PI*2,o=900,r=Math.max(-e.MAP_WIDTH/2,Math.min(e.MAP_WIDTH/2,e.state.player.x+Math.cos(i)*o)),c=Math.max(-e.MAP_HEIGHT/2,Math.min(e.MAP_HEIGHT/2,e.state.player.y+Math.sin(i)*o));Aa(e,t,r,c)}},yg={handleEvent:(e,t,i={})=>{const{x:o,y:r}=i;switch(t){case le.PLAYER_SHOOT:e.audio.play("player_shoot");break;case le.ENEMY_SHOOT:e.audio.playEnemyShoot(i.enemyType);break;case le.PROJECTILE_EXPLODE:i.style==="cyber_explosion"||i.isCyber?e.audio.playCyberExplosion():e.audio.playExplosion(),i.radius>50&&e.settings.screenShake&&(e.state.camera.x+=(Math.random()-.5)*5,e.state.camera.y+=(Math.random()-.5)*5);break;case le.ENTITY_HIT:i.isPlayer&&e.audio.playHit();break;case le.PLAYER_HURT:e.audio.playHit(),z(e,o,r,"!","#ef4444"),e.settings.screenShake&&(e.state.camera.x+=(Math.random()-.5)*20,e.state.camera.y+=(Math.random()-.5)*20);break;case le.SHIELD_BREAK:e.audio.playShieldBreak(),z(e,o,r,"!","#3b82f6"),xe(e,o,r,"#3b82f6",10);break;case le.WALL_HIT:e.audio.play("ui_typewriter"),Zt(e,{x:o,y:r,color:i.color||"#ffffff",count:4,type:"spark",speed:2,life:15,blendMode:"lighter"});break;case le.ENTITY_DAMAGED:z(e,o,r,i.text,i.color||"#fbbf24",(i.isCrit,"damage"),i.targetId);break;case le.ENTITY_DIE:xe(e,o,r,i.color||"#ffffff",8);break;case le.FLOATING_TEXT:z(e,o,r,i.text,i.color,i.category);break;case le.PARTICLE_SPAWN:xe(e,o,r,i.color,i.count);break;case le.ITEM_PICKUP:e.audio.playPowerup();break}}},bg={update:e=>{const t=e.state.reviveSequence;if(!t.active)return!1;if(t.timer++,t.phase==="start")t.timer===1&&e.audio.play("revive_error"),t.timer>20&&(t.phase="coin_enter",t.timer=0,e.audio.play("revive_inject"));else if(t.phase==="coin_enter")t.timer%5===0&&t.timer<60&&e.audio.play("ui_typewriter"),t.timer>120&&(t.phase="shatter",t.timer=0);else if(t.phase==="shatter"){if(t.timer===1){const i=e.state.player;i.gold=0,i.hp=Math.floor(i.maxHp*.5),i.isDying=!1,i.invulnerableTime=180,e.state.enemies.forEach(o=>{if(Math.hypot(o.x-i.x,o.y-i.y)<800){const c=Math.atan2(o.y-i.y,o.x-i.x);o.vx+=Math.cos(c)*40,o.vy+=Math.sin(c)*40,o.stunTimer=120}}),e.state.projectiles=e.state.projectiles.filter(o=>!o.isEnemy),e.audio.play("revive_reboot"),xe(e,i.x,i.y,"#00ffff",100),z(e,i.x,i.y-120,"SYSTEM RESTORED","#00ffff","chat"),e.state.zones.push({id:Math.random().toString(),x:i.x,y:i.y,radius:1200,type:"explosion_shockwave",life:45,maxLife:45,color:"#00ffff",emoji:""})}t.timer>60&&(t.phase="cleanup",t.timer=0)}else t.phase==="cleanup"&&t.timer>30&&(t.active=!1,t.phase="start",t.timer=0,e.audio.playBattleBGM());return!0}},gg={totalGamesPlayed:0,totalKills:0,totalGoldEarned:0,totalTimePlayed:0,totalDeaths:0,highestWave:0};class vg{constructor(){this.canvasWidth=800,this.canvasHeight=600,this.keysPressed={},this.mousePos={x:0,y:0},this.joystickInput={move:{x:0,y:0},aim:{x:0,y:0},isFiring:!1},this.unlockedCompendium=new Set,this.totalPlayTime=0,this.MAP_WIDTH=Le.DEFAULT_WIDTH,this.MAP_HEIGHT=Le.DEFAULT_HEIGHT,this.lastLockTime=0,this.settings={autoShoot:!0,autoAim:!1,soundEnabled:!0,volume:.5,shopSkin:"default",screenShake:!0},this.globalStats={...gg},this.state=Ic("9527","normal"),this.state.projectilePool||(this.state.projectilePool=[]),this.state.enemyPool||(this.state.enemyPool=[]),this.state.particlePool||(this.state.particlePool=[]),this.state.floatingTextPool||(this.state.floatingTextPool=[]),this.audio=new ib,this.loadEncyclopedia(),this.unlockedCompendium.has("cleaner")||this.unlockedCompendium.add("cleaner"),this.loadAchievements()}loadEncyclopedia(){try{const t=localStorage.getItem("meme_game_encyclopedia");t&&(this.unlockedCompendium=new Set(JSON.parse(t)))}catch(t){console.error("Failed to load encyclopedia",t)}}loadAchievements(){Sb(this)}saveEncyclopedia(){try{localStorage.setItem("meme_game_encyclopedia",JSON.stringify(Array.from(this.unlockedCompendium)))}catch(t){console.error("Failed to save encyclopedia",t)}}saveAchievements(){$h(this)}unlockEntry(t){Lc(this,t)}unlockAchievement(t){vl(this,t)}checkAchievements(){Tb(this)}hasSave(){return!!localStorage.getItem("meme_game_save")}saveGame(){vb(this)}loadGame(){const t=xb(this);return t&&(this.audio.resume(),ye.refreshDerivedStats(this.state)),t}updateSettings(t){this.settings={...this.settings,...t},this.audio.setMute(!this.settings.soundEnabled),t.volume!==void 0&&this.audio.setVolume(t.volume)}hardReset(){try{localStorage.clear(),window.location.reload()}catch(t){console.error("Hard reset failed",t)}}resetCurrentRun(){this.state=this.getInitialState("9527","normal"),this.loadAchievements(),ye.refreshDerivedStats(this.state)}getInitialState(t,i){return Ic(t,i)}init(t,i,o="9527",r="normal"){this.canvasWidth=t,this.canvasHeight=i,this.state=this.getInitialState(o,r),this.globalStats.totalGamesPlayed++,this.saveAchievements(),ye.refreshDerivedStats(this.state),this.startWave(1),this.audio.resume(),this.audio.setMute(!this.settings.soundEnabled),this.audio.setVolume(this.settings.volume),this.state.isPacmanPowered=!1}startWave(t){Pt.startWave(this,t)}handleInput(t,i){this.keysPressed=t,this.mousePos=i}emit(t,i={}){yg.handleEvent(this,t,i)}enterSandboxMode(){const t=this.state.player.characterId;this.state=this.getInitialState(t,"normal"),this.state.currentWave=0,this.state.isCustomDebugMode=!0,this.state.isDebugFrozen=!1,this.state.waveTimer=0,this.state.waveEnded=!1,this.state.isPacmanPowered=!1,ye.refreshDerivedStats(this.state),this.audio.resume(),this.audio.playBattleBGM()}async enforceFullscreenLock(){if(!document.fullscreenElement)return;const t=Date.now();if(!(t-this.lastLockTime<500)){this.lastLockTime=t;try{navigator.keyboard&&navigator.keyboard.lock&&await navigator.keyboard.lock(["Escape"])}catch{}}}toggleFullscreen(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().then(()=>{window.focus(),this.enforceFullscreenLock()}).catch(t=>{console.error(`Error attempting to enable full-screen mode: ${t.message}`)})}update(){if(!this.state.isPaused&&!bg.update(this)){if(this.state.cinematicPause){this.state.enemies.forEach(t=>{t.config.behavior==="boss"&&im.updateBossBehavior(this,t,this.state.player,()=>{})}),this.updateCamera();return}if(!(!this.state.isCustomDebugMode&&this.state.waveEnded)){if(pg.update(this),this.state.killStreakTimer>0&&(this.state.killStreakTimer--,this.state.killStreakTimer<=0&&(this.state.killStreak=0)),this.state.player.isDying){this.state.player.deathTimer--,this.state.player.deathTimer===1&&this.saveAchievements();return}if(this.state.isWaveClearing){this.state.waveTransitionTimer--,this.state.waveTransitionTimer<=0&&(this.state.waveEnded=!0),xe(this,this.state.player.x,this.state.player.y,"#ffffff",0),this.updateParticles(),vh(this),xh(this),this.updateCamera();return}this.state.timeAlive++,this.totalPlayTime++,this.state.waveTimer++,this.state.score>this.state.highScore&&(this.state.highScore=this.state.score),this.state.timeAlive%60===0&&this.checkAchievements(),this.state.timeAlive%3600===0&&this.saveAchievements(),Pt.update(this),cg(this),Ib(this),this.updateParticles(),vh(this),xh(this),Vb(this),this.updateCamera()}}}updateCamera(){let t=this.state.player.x,i=this.state.player.y;this.state.enemies.find(r=>r.isTransitioning)&&this.settings.screenShake&&(t+=(Math.random()-.5)*20,i+=(Math.random()-.5)*20),this.state.player.justTeleported?(this.state.camera.x=t,this.state.camera.y=i,this.state.player.justTeleported=!1):(this.state.camera.x+=(t-this.state.camera.x)*.1,this.state.camera.y+=(i-this.state.camera.y)*.1)}spawnEnemy(t,i,o){Aa(this,t,i,o)}spawnFloatingText(t,i,o,r="#ffffff",c="damage"){z(this,t,i,o,r,c)}updateParticles(){const t=this.state.particles;for(let o=t.length-1;o>=0;o--){const r=t[o];if(r.x+=r.vx,r.y+=r.vy,r.angularVelocity&&(r.rotation=(r.rotation||0)+r.angularVelocity),r.scaleDelta&&(r.scale=Math.max(0,(r.scale||1)+r.scaleDelta)),r.alphaDelta!==void 0&&r.alpha!==void 0&&(r.alpha=Math.max(0,Math.min(1,r.alpha+r.alphaDelta))),r.life--,r.life<=0){Me.releaseParticle(this,r);const c=t.length-1;o!==c&&(t[o]=t[c]),t.pop()}}const i=this.state.floatingTexts;for(let o=i.length-1;o>=0;o--){const r=i[o];if(r.y+=r.vy,r.vy*=.9,r.scale&&r.scale>1&&(r.scale=Math.max(1,r.scale-.1)),r.life--,r.life<=0){Me.releaseFloatingText(this,r);const c=i.length-1;o!==c&&(i[o]=i[c]),i.pop()}}}}const N=new vg,xg=({player:e,activeTiers:t})=>{const i=Math.max(0,Math.min(100,e.hp/e.maxHp*100)),o=Math.max(e.maxShield,e.shield,50),r=Math.min(100,e.shield/o*100),c=e.shield>0||e.maxShield>0,h=(t.capital||0)>=4,p=h?"bg-gradient-to-r from-yellow-300 to-yellow-500 shadow-[0_0_10px_#facc15]":"bg-blue-400",u=h?"border-yellow-600":"border-blue-900",g=h?"text-yellow-900":"text-white/90",b=Math.min(100,e.heatValue/e.maxHeat*100),v=(t.hardcore||0)>=6;return d.jsxs("div",{className:"flex items-center gap-3 bg-slate-900/80 p-3 rounded-xl border-2 border-slate-600 backdrop-blur-sm shadow-xl pointer-events-auto",children:[d.jsx("div",{className:`text-5xl filter drop-shadow-lg ${e.isOverclocked?"animate-ping text-red-500":"animate-bounce"}`,children:e.emoji}),d.jsxs("div",{className:"flex-1 flex flex-col gap-2 min-w-[140px]",children:[d.jsxs("div",{className:"flex justify-between text-base text-slate-300 font-bold",children:[d.jsx("span",{className:"text-xs uppercase tracking-wider opacity-70",children:"STATUS"}),d.jsxs("span",{children:[Math.ceil(e.hp),"/",Math.ceil(e.maxHp)]})]}),d.jsxs("div",{className:"h-5 bg-slate-800 rounded-full overflow-hidden border border-slate-600 relative shadow-inner",children:[d.jsx("div",{className:`absolute top-0 left-0 h-full transition-all duration-200
                                   ${i<30?"bg-red-600 animate-pulse":"bg-green-500"}`,style:{width:`${i}%`}}),d.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-[9px] text-white/80 font-bold uppercase tracking-widest drop-shadow-md",children:"HP"})]}),c&&d.jsxs("div",{className:`h-4 bg-slate-800 rounded-full overflow-hidden border ${u} relative shadow-inner -mt-1`,children:[d.jsx("div",{className:`absolute top-0 left-0 h-full transition-all duration-200 ${p}`,style:{width:`${r}%`}}),d.jsxs("span",{className:`absolute inset-0 flex items-center justify-center text-[8px] ${g} font-bold drop-shadow-md`,children:[h?"":""," ",Math.floor(e.shield)]})]}),v&&d.jsxs("div",{className:`h-4 rounded-full overflow-hidden border-2 relative shadow-inner -mt-1 transition-colors
                        ${e.isOverclocked?"bg-red-950 border-red-500 animate-pulse shadow-[0_0_10px_red]":"bg-slate-800 border-orange-500"}
                    `,children:[d.jsx("div",{className:`absolute top-0 left-0 h-full transition-all duration-100
                                ${e.isOverclocked?"bg-gradient-to-r from-red-600 to-yellow-500":"bg-gradient-to-r from-orange-600 to-orange-400"}
                            `,style:{width:`${b}%`}}),d.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-[9px] text-white font-bold drop-shadow-md tracking-widest z-10",children:e.isOverclocked?"  ":` ${Math.floor(b)}%`})]})]})]})},Sg=({gold:e})=>{const t=F.useRef(e),[i,o]=F.useState(0);return F.useEffect(()=>{if(e!==t.current){const r=e-t.current;if(t.current=e,r>0){o(r);const c=setTimeout(()=>o(0),1e3);return()=>clearTimeout(c)}else o(0)}},[e]),d.jsxs("div",{className:"flex items-center gap-2 bg-yellow-900/80 px-4 py-2 rounded-full border-2 border-yellow-600 self-start shadow-lg relative pointer-events-auto",children:[d.jsx("span",{className:"text-2xl",children:""}),d.jsx("span",{className:"text-yellow-300 font-mono font-bold text-2xl",children:e}),i>0&&d.jsxs("span",{className:"absolute -right-12 top-0 text-yellow-300 font-bold animate-ping",children:["+",i]})]})},Tg=({synergies:e})=>{const[t,i]=F.useState(null);return d.jsx("div",{className:"flex flex-col gap-1 mt-2 items-start pointer-events-auto relative",children:Object.entries(e).sort(([,o],[,r])=>r-o).map(([o,r])=>{const c=r,f=wt[o];if(!f)return null;let h=0,p=null;for(const g of f.levels)c>=g.count?h=g.count:p||(p=g);const u=h>0;return d.jsxs("div",{className:`flex items-center gap-2 px-2 py-1 rounded border shadow-sm backdrop-blur-sm transition-all cursor-help
                            ${u?"bg-slate-800/90 border-slate-500":"bg-slate-900/50 border-slate-700 opacity-70"}`,onMouseEnter:()=>i(o),onMouseLeave:()=>i(null),children:[d.jsx("span",{className:"text-lg",children:f.icon}),d.jsx("span",{className:"text-xs font-bold",style:{color:f.color},children:f.name}),d.jsxs("span",{className:"text-[10px] text-slate-300 bg-slate-700 px-1 rounded font-mono",children:[c," / ",p?p.count:h]}),t===o&&d.jsxs("div",{className:"absolute left-full ml-2 top-0 w-64 bg-slate-900 border border-slate-500 p-3 rounded-lg shadow-2xl z-50 text-left animate-pop-in",children:[d.jsxs("h4",{className:"font-bold text-sm mb-1",style:{color:f.color},children:[f.icon," ",f.name," (",c,")"]}),d.jsx("p",{className:"text-[10px] text-slate-400 mb-2 italic",children:f.description}),d.jsx("div",{className:"space-y-1",children:f.levels.map(g=>{const b=c>=g.count;return d.jsxs("div",{className:`flex gap-2 text-[10px] ${b?"text-white":"text-slate-600"}`,children:[d.jsxs("span",{className:`font-mono font-bold ${b?"text-green-400":""}`,children:["(",g.count,")"]}),d.jsx("span",{children:g.effectDesc}),b&&d.jsx("span",{children:""})]},g.count)})})]})]},o)})})},Mg=()=>{const e=N.state.player,t=N.state,[i,o]=F.useState({player:e,gold:e.gold,wave:t.currentWave,waveTimer:t.waveTimer,isOvertime:t.isOvertime,derivedStats:t.derivedStats||{synergies:{},activeTiers:{}}});F.useEffect(()=>{let p,u=0;const g=b=>{if(b-u>32){const v=N.state;o({player:v.player,gold:v.player.gold,wave:v.currentWave,waveTimer:v.waveTimer,isOvertime:v.isOvertime,derivedStats:v.derivedStats||{synergies:{},activeTiers:{}}}),u=b}p=requestAnimationFrame(g)};return p=requestAnimationFrame(g),()=>cancelAnimationFrame(p)},[]);const r=(i.wave-1)%8+1,c=Kt.find(p=>p.waveNumber===r)||Kt[Kt.length-1],f=Math.max(0,c.duration-Math.floor(i.waveTimer/60)),h=c.isBossWave?"BOSS":`${f}`;return d.jsxs("div",{className:"absolute top-6 left-6 right-6 flex justify-between items-start gap-4 z-10 pointer-events-none",children:[d.jsxs("div",{className:"flex flex-col w-96 gap-2",children:[d.jsx(xg,{player:i.player,activeTiers:i.derivedStats.activeTiers}),d.jsx(Sg,{gold:i.gold}),d.jsx(Tg,{synergies:i.derivedStats.synergies})]}),!i.isOvertime&&d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsxs("div",{className:"text-xl font-bold text-slate-300 drop-shadow-md",children:[" ",i.wave," "]}),d.jsx("div",{className:`text-7xl font-black font-mono drop-shadow-2xl ${f<10&&!c.isBossWave?"text-red-500 animate-pulse":"text-white"}`,children:h}),c.isBossWave&&d.jsx("div",{className:"text-red-500 font-bold animate-bounce text-3xl mt-2 stroke-black",children:"KPI!"})]})]})},xl=256,at=xl/2,ar=document.createElement("canvas");ar.width=xl;ar.height=xl;const _g=()=>{const e=ar.getContext("2d");if(!e)return;e.clearRect(0,0,xl,xl);const t=at*.8,i=e.createRadialGradient(at,at,t*.2,at,at,t);i.addColorStop(0,"rgba(34, 211, 238, 0.9)"),i.addColorStop(.6,"rgba(232, 121, 249, 0.5)"),i.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=i,e.beginPath(),e.arc(at,at,t,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(at,at,t*.9,0,Math.PI*2),e.strokeStyle="rgba(6, 182, 212, 0.8)",e.lineWidth=4,e.stroke(),e.strokeStyle="white",e.lineWidth=6,e.beginPath(),e.moveTo(at-t*.6,at),e.lineTo(at+t*.6,at),e.moveTo(at,at-t*.6),e.lineTo(at,at+t*.6),e.stroke()};typeof document<"u"&&_g();const wg=e=>{const t=Math.sin(e)*1e4;return t-Math.floor(t)},kg=(e,t,i=0,o=!1)=>{const r=t.isEnemy;if(e.save(),e.globalCompositeOperation="lighter",o)e.globalAlpha=Math.max(0,(1-i)*.8),e.fillStyle=r?"#ef4444":"#22d3ee",e.beginPath(),e.arc(t.x,t.y,t.radius,0,Math.PI*2),e.fill(),e.strokeStyle=r?"rgba(255, 100, 100, 0.6)":"rgba(232, 121, 249, 0.6)",e.lineWidth=4,e.stroke();else{const c=t.radius*2.5/xl;if(e.translate(t.x,t.y),e.scale(c,c),e.rotate(Date.now()/100),e.globalAlpha=1-i,r){const f=at*.8,h=e.createRadialGradient(0,0,f*.2,0,0,f);h.addColorStop(0,"rgba(255, 255, 255, 0.95)"),h.addColorStop(.2,"rgba(255, 50, 50, 0.9)"),h.addColorStop(.6,"rgba(220, 38, 38, 0.6)"),h.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=h,e.beginPath(),e.arc(0,0,f,0,Math.PI*2),e.fill(),e.strokeStyle="rgba(255, 0, 0, 0.8)",e.lineWidth=4,e.beginPath(),e.arc(0,0,f*.9,0,Math.PI*2),e.stroke(),e.strokeStyle="#ffffff",e.lineWidth=6,e.beginPath(),e.moveTo(-f*.6,0),e.lineTo(f*.6,0),e.moveTo(0,-f*.6),e.lineTo(0,f*.6),e.stroke()}else e.drawImage(ar,-at,-at)}if(e.restore(),!o&&i<.8){const f=t.id.charCodeAt(0);for(let h=0;h<8;h++){const u=wg(f+h)*Math.PI*2+i,g=t.radius*(.5+i*1.5),b=10*(1-i);if(b>1){const v=t.x+Math.cos(u)*g,x=t.y+Math.sin(u)*g;if(r){const T=h%3;e.fillStyle=T===0?"#ef4444":T===1?"#f97316":"#ffffff"}else e.fillStyle=h%2===0?"#00ffff":"#ff00ff";e.fillRect(v-b/2,x-b/2,b,b)}}}},jg=(e,t,i=0,o=!1)=>{e.save(),e.translate(t.x,t.y);const r=1-i;if(o)e.fillStyle=`rgba(239, 68, 68, ${r})`,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill();else{e.globalCompositeOperation="lighter";const c=e.createRadialGradient(0,0,t.radius*.2,0,0,t.radius);c.addColorStop(0,`rgba(255, 255, 255, ${r})`),c.addColorStop(.3,`rgba(251, 191, 36, ${r*.8})`),c.addColorStop(.7,`rgba(239, 68, 68, ${r*.6})`),c.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=c,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill(),i<.8&&(e.strokeStyle=`rgba(255, 255, 255, ${r*.5})`,e.lineWidth=2,e.beginPath(),e.arc(0,0,t.radius*.9,0,Math.PI*2),e.stroke())}e.restore()},Cg=(e,t,i=0,o=!1)=>{e.save(),e.translate(t.x,t.y);const r=1-i;if(o)e.fillStyle=`rgba(168, 85, 247, ${r})`,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill();else{e.globalCompositeOperation="lighter";const c=e.createRadialGradient(0,0,t.radius*.1,0,0,t.radius);c.addColorStop(0,`rgba(216, 180, 254, ${r})`),c.addColorStop(.5,`rgba(168, 85, 247, ${r*.8})`),c.addColorStop(.8,`rgba(34, 197, 94, ${r*.4})`),c.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=c,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill();const f=5;for(let h=0;h<f;h++){const p=h/f*Math.PI*2+i,u=t.radius*.6,g=t.radius*.2*(1-i);e.fillStyle=`rgba(74, 222, 128, ${r})`,e.beginPath(),e.arc(Math.cos(p)*u,Math.sin(p)*u,g,0,Math.PI*2),e.fill()}}e.restore()},Ng=(e,t,i=0,o=!1)=>{e.save(),e.translate(t.x,t.y);const r=Math.max(0,1-i);e.save(),e.scale(1,.3),e.globalCompositeOperation="lighter";const c=3;for(let f=0;f<c;f++){const h=(i+f/c)%1,p=t.radius*h,u=(1-h)*r;e.beginPath(),e.arc(0,0,p,0,Math.PI*2),e.strokeStyle=t.color||"#facc15",e.lineWidth=3,e.globalAlpha=u,e.stroke()}if(e.beginPath(),e.arc(0,0,t.radius*(1-i),0,Math.PI*2),e.fillStyle=t.color||"#facc15",e.globalAlpha=r*.5,e.fill(),e.beginPath(),e.arc(0,0,t.radius*.3*(1-i),0,Math.PI*2),e.fillStyle="#ffffff",e.globalAlpha=r,e.fill(),e.restore(),!o){let h=0;for(let u=0;u<t.id.length;u++)h+=t.id.charCodeAt(u);const p=u=>{const g=Math.sin(u)*1e4;return g-Math.floor(g)};for(let u=0;u<12;u++){const g=p(h+u),b=p(h+u+100),v=p(h+u+200),x=t.radius*1.5,T=(g-.5)*x,M=200+b*200,k=-i*M-v*50,C=(b*4+2)*(1-i);e.fillStyle=u%2===0?"#ffffff":t.color||"#facc15",e.globalAlpha=r,e.fillRect(T,k,C,C*2)}}e.restore()},Eg=(e,t)=>{const i=e.charCodeAt(0)+e.charCodeAt(e.length-1)+t,o=Math.sin(i)*1e4;return o-Math.floor(o)},Ag=(e,t)=>{const i=t.maxLife||15,o=1-t.life/i,r=t.angle||0,c=2.5,h=(1-Math.cos(o*Math.PI*2))/2,p=c/2,u=t.swingDirection||1,g=r+p*u-h*c*u,b=t.radius/110,v=85*b,x=15*b;e.save(),e.translate(t.x,t.y);const T=Math.abs(Math.sin(o*Math.PI*2));if(T>.1){e.save();const re=-.2*((o<.5?-1:1)*u);e.rotate(g+re);const J=t.radius*1.2;e.beginPath(),e.moveTo(0,0),e.arc(0,0,J,-.3,.3,!1),e.closePath();const ue=e.createRadialGradient(0,0,J*.3,0,0,J);ue.addColorStop(0,"rgba(255, 255, 255, 0)"),ue.addColorStop(.5,"rgba(148, 163, 184, 0.3)"),ue.addColorStop(.9,`rgba(203, 213, 225, ${T*.6})`),ue.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=ue,e.fill(),e.strokeStyle=`rgba(255, 255, 255, ${T*.4})`,e.lineWidth=2,e.beginPath(),e.arc(0,0,J*.9,-.3,.3),e.stroke(),e.restore()}e.rotate(g),e.save(),e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=10*b,e.shadowOffsetX=5*b,e.shadowOffsetY=5*b;const M=6*b,k=24*b,C=10*b,w=e.createLinearGradient(0,-M/2,0,M/2);w.addColorStop(0,"#cbd5e1"),w.addColorStop(.5,"#64748b"),w.addColorStop(1,"#94a3b8"),e.fillStyle=w,e.strokeStyle="#475569",e.lineWidth=1,e.beginPath(),e.roundRect(-15*b,-M/2,v+15*b,M,2*b),e.fill(),e.stroke(),e.translate(v,0);const j=e.createLinearGradient(0,-M,0,M);j.addColorStop(0,"#fb923c"),j.addColorStop(1,"#c2410c"),e.fillStyle=j,e.strokeStyle="#9a3412",e.lineWidth=1,e.beginPath(),e.moveTo(0,-M),e.lineTo(C,-k/2),e.lineTo(C,k/2),e.lineTo(0,M),e.closePath(),e.fill(),e.stroke(),e.fillStyle="#451a03",e.beginPath(),e.arc(4*b,-4*b,1.5*b,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(4*b,4*b,1.5*b,0,Math.PI*2),e.fill();const O=(o<.5?-1:1)*u,H=T*.6*O,X=(ee,re,J,ue,pe)=>{e.strokeStyle=re,e.lineWidth=J,e.lineCap="round",e.lineJoin="round";for(let be=0;be<ee;be++){const K=Eg(t.id,be*20+pe),fe=be/(ee-1),R=-k/2+2*b+(k-4*b)*fe,Y=C-1,ie=x*ue*(.9+K*.4),q=H*(.8+K*.4),Z=Math.cos(q)*ie,A=Math.sin(q)*ie,U=Y+Z,ae=R+A,oe=Y+Z*.4,te=R+A*.4+q*20*b;if(e.beginPath(),e.moveTo(Y,R),e.quadraticCurveTo(oe,te,U,ae),e.stroke(),T>.7&&Math.random()<.2){e.save(),e.fillStyle="rgba(200, 220, 255, 0.6)";const ve=Math.random()*40*b,Ne=U+Math.cos(q)*ve,Ke=ae+Math.sin(q)*ve;e.beginPath(),e.arc(Ne,Ke,2*b,0,Math.PI*2),e.fill(),e.restore()}}};X(12,"#475569",5*b,1,0),X(10,"#94a3b8",4*b,1.1,100),e.globalAlpha=.8,X(6,"#e2e8f0",2*b,1.15,200),e.globalAlpha=1,e.restore(),e.restore()},Sl=32,Ci=Sl/2,sr=document.createElement("canvas");sr.width=Sl;sr.height=Sl;const Dg=()=>{const e=sr.getContext("2d");if(!e)return;e.clearRect(0,0,Sl,Sl);const t=Ci-2,i=Ci,o=Ci,r=e.createRadialGradient(i-t*.3,o-t*.3,t*.2,i,o,t);r.addColorStop(0,"#FFFACD"),r.addColorStop(.4,"#FFD700"),r.addColorStop(1,"#DAA520"),e.fillStyle=r,e.beginPath(),e.arc(i,o,t,0,Math.PI*2),e.fill(),e.strokeStyle="#B8860B",e.lineWidth=2,e.stroke(),e.fillStyle="#8B4500",e.font='900 20px "Noto Sans SC", sans-serif',e.textAlign="center",e.textBaseline="middle",e.fillText("",i,o+1),e.fillStyle="rgba(255, 255, 255, 0.6)",e.beginPath(),e.ellipse(i-t*.4,o-t*.4,t*.25,t*.15,Math.PI/4,0,Math.PI*2),e.fill()};typeof document<"u"&&Dg();const Rg=(e,t,i=!1)=>{e.save();const o=Math.sin(Date.now()/200+t.x*.1)*5;e.translate(t.x,t.y+o);const r=t.radius*2/Sl*1.5;e.scale(r,r),e.drawImage(sr,-Ci,-Ci),e.restore()},Cs=class Cs{static getTexture(t,i,o,r=null,c='"Noto Sans SC", sans-serif'){const f=Math.max(0,Math.floor(i/2)*2),h=`${t}_${f}_${o}_${r||"none"}`,p=Date.now();if(this.cache.has(h))return this.accessTimes.set(h,p),this.cache.get(h);const u=document.createElement("canvas"),g=Math.ceil(f*.5),b=Math.max(1,f+g*2),v=Math.max(1,f+g*2);u.width=b,u.height=v;const x=u.getContext("2d");return x&&f>0&&(x.font=`900 ${f}px ${c}`,x.textAlign="center",x.textBaseline="middle",x.translate(u.width/2,u.height/2),r&&(x.strokeStyle=r,x.lineWidth=Math.max(2,f*.08),x.lineJoin="round",x.strokeText(t,0,0)),x.fillStyle=o,x.fillText(t,0,0)),this.cache.set(h,u),this.accessTimes.set(h,p),this.frameCount++,this.frameCount>this.CLEANUP_INTERVAL&&(this.cleanup(),this.frameCount=0),u}static cleanup(){if(this.cache.size<=this.MAX_CACHE_SIZE/2)return;const t=Date.now(),i=2e4;for(const[o,r]of this.accessTimes.entries())t-r>i&&(this.cache.delete(o),this.accessTimes.delete(o));this.cache.size>this.MAX_CACHE_SIZE&&(this.cache.clear(),this.accessTimes.clear())}};Cs.cache=new Map,Cs.accessTimes=new Map,Cs.MAX_CACHE_SIZE=1e3,Cs.CLEANUP_INTERVAL=600,Cs.frameCount=0;let Lt=Cs;const Ni=32,lr=document.createElement("canvas");lr.width=Ni;lr.height=Ni;const Og=()=>{const e=lr.getContext("2d");if(!e)return;const t=Ni/2,i=Ni/2,o=Ni*.8;e.translate(t,i),e.shadowBlur=8,e.shadowColor="#ef4444",e.fillStyle="#ef4444",e.beginPath(),e.moveTo(0,o/2),e.lineTo(-o/2,-o/2),e.lineTo(o/2,-o/2),e.closePath(),e.fill(),e.shadowBlur=0,e.fillStyle="#fee2e2",e.beginPath(),e.moveTo(0,o/2-4),e.lineTo(-o/2+6,-o/2+4),e.lineTo(o/2-6,-o/2+4),e.closePath(),e.fill()};typeof document<"u"&&Og();const Ig=(e,t)=>{const i=t.radius*2.5;e.drawImage(lr,t.x-i/2,t.y-i/2,i,i)},Vg=(e,t)=>{const i=Math.floor(t.radius*(t.isEnemy?1.1:2.2)),o=t.isEnemy&&!t.isMimic?"black":t.isMimic?t.color:"#cffafe",r=t.isEnemy&&!t.isMimic?null:t.isMimic?t.color:"rgba(34, 211, 238, 0.5)";if(t.isEnemy&&!t.isMimic){e.fillStyle="#fff",e.strokeStyle=t.color,e.lineWidth=3,e.beginPath(),e.arc(t.x,t.y,t.radius,0,Math.PI*2),e.fill(),e.stroke();const c=Lt.getTexture(t.text,i,o,null);e.drawImage(c,t.x-c.width/2,t.y-c.height/2)}else{t.summonType==="clone"&&(e.save(),e.filter="grayscale(100%) brightness(0.7)");const c=Lt.getTexture(t.text,i,o,r);e.drawImage(c,t.x-c.width/2,t.y-c.height/2),t.summonType==="clone"&&e.restore()}},Hg=(e,t)=>{if(t.isSummon&&!t.isInvincible&&t.hp!==void 0&&t.maxHp!==void 0){const i=t.radius*2,o=4,r=-t.radius-8,c=Math.max(0,t.hp/t.maxHp);e.fillStyle="#1e293b",e.fillRect(t.x-i/2,t.y+r,i,o),e.fillStyle="#22d3ee",e.fillRect(t.x-i/2,t.y+r,i*c,o)}},Pg=(e,t)=>{if(t.isSummon&&t.maxLife&&t.maxLife<9e5){const i=Math.max(0,t.life/t.maxLife),o=t.radius+8;e.save(),e.translate(t.x,t.y),e.beginPath(),e.arc(0,0,o,0,Math.PI*2),e.strokeStyle="rgba(255, 255, 255, 0.1)",e.lineWidth=2,e.stroke(),e.beginPath(),e.arc(0,0,o,-Math.PI/2,-Math.PI/2+Math.PI*2*i),e.strokeStyle=i<.25?"#ef4444":"#22d3ee",e.lineWidth=2,e.lineCap="round",e.stroke(),e.restore()}},Bg=(e,t)=>{const i=Date.now(),o=i/2%360,r=`hsl(${o}, 100%, 60%)`,c=`hsl(${o}, 100%, 90%)`;if(e.save(),e.translate(t.x,t.y),Math.hypot(t.vx,t.vy)>2){const p=Math.atan2(t.vy,t.vx);e.save(),e.rotate(p);const u=e.createLinearGradient(0,0,-t.radius*4,0);u.addColorStop(0,r),u.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=u,e.beginPath(),e.moveTo(0,-t.radius*.8),e.lineTo(-t.radius*5,0),e.lineTo(0,t.radius*.8),e.fill(),e.restore()}e.rotate(i/50),e.fillStyle=r,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill();const h=e.createRadialGradient(-t.radius*.3,-t.radius*.3,t.radius*.1,0,0,t.radius);h.addColorStop(0,c),h.addColorStop(.5,r),h.addColorStop(1,`hsl(${o}, 100%, 40%)`),e.fillStyle=h,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill(),e.fillStyle="white",e.globalAlpha=.9,e.beginPath(),e.ellipse(-t.radius*.4,-t.radius*.4,t.radius*.25,t.radius*.15,Math.PI/4,0,Math.PI*2),e.fill(),e.strokeStyle="white",e.lineWidth=2,e.globalAlpha=.5,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.stroke(),e.restore()},Lg=(e,t)=>{const i=t.z||0;if(i>0){e.save(),e.translate(t.x,t.y);const b=Math.max(0,1-i/800),v=.5+.8*b;e.scale(v,v),e.globalAlpha=.4*b,e.fillStyle="#000000",e.beginPath(),e.ellipse(0,0,10,5,0,0,Math.PI*2),e.fill(),e.restore()}if(t.trailHistory&&t.trailHistory.length>2){e.save(),e.lineCap="round",e.lineJoin="round",e.globalCompositeOperation="lighter";const b={x:t.x,y:t.y-i},x=t.trailHistory[0],T=x.y-(x.z||0);e.beginPath(),e.moveTo(x.x,T);for(let M=1;M<t.trailHistory.length;M++){const k=t.trailHistory[M],C=k.y-(k.z||0);e.lineTo(k.x,C)}e.lineTo(b.x,b.y),e.strokeStyle=t.color,e.lineWidth=3,e.globalAlpha=.6,e.stroke(),e.strokeStyle="#ffffff",e.lineWidth=1,e.globalAlpha=.8,e.stroke(),e.restore()}e.save();const o=t.x,r=t.y-i;e.translate(o,r);const c=t.vz||0,f=t.vx,h=t.vy-c,p=Math.atan2(h,f);e.rotate(p),e.globalCompositeOperation="lighter";const u=10,g=e.createLinearGradient(0,0,-60,0);g.addColorStop(0,"#ffffff"),g.addColorStop(.4,t.color),g.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=g,e.beginPath(),e.moveTo(0,0),e.lineTo(-60,-u),e.lineTo(-60*.8,0),e.lineTo(-60,u),e.closePath(),e.fill(),e.fillStyle="#ffffff",e.beginPath(),e.ellipse(0,0,10,4,0,0,Math.PI*2),e.fill(),e.restore()},zg=(e,t)=>{const i=t.z||0,o=Date.now();if(t.trailHistory&&t.trailHistory.length>2){e.save(),e.lineCap="butt",e.lineJoin="miter",e.globalCompositeOperation="lighter";const v={x:t.x,y:t.y-i};e.beginPath();for(let x=0;x<t.trailHistory.length;x++){const T=t.trailHistory[x],M=T.y-(T.z||0);x===0?e.moveTo(T.x,M):e.lineTo(T.x,M)}e.lineTo(v.x,v.y),e.strokeStyle="#22c55e",e.lineWidth=3,e.shadowColor="#22c55e",e.shadowBlur=5,e.stroke(),e.shadowBlur=0;for(let x=0;x<t.trailHistory.length;x+=2){const T=t.trailHistory[x],M=T.y-(T.z||0),k=x+Math.floor(o/50);if(Math.sin(k)>.5){const C=4+Math.random()*4;e.fillStyle=Math.random()>.5?"#4ade80":"#ffffff",e.globalAlpha=x/t.trailHistory.length,e.fillRect(T.x-C/2,M-C/2,C,C)}}e.restore()}e.save();const r=t.x,c=t.y-i;e.translate(r,c);const f=t.vz||0,h=t.vx,p=t.vy-f,u=Math.atan2(p,h),g=Math.sin(o/20)*.1;e.rotate(u+g),e.globalCompositeOperation="source-over";const b=10;e.fillStyle="#0f172a",e.beginPath(),e.moveTo(0,0),e.lineTo(-35,-b/2),e.lineTo(-30,0),e.lineTo(-35,b/2),e.closePath(),e.fill(),e.strokeStyle="#22c55e",e.lineWidth=2,e.shadowColor="#22c55e",e.shadowBlur=10,e.stroke(),e.fillStyle="#ffffff",e.shadowBlur=5,e.beginPath(),e.moveTo(-5,0),e.lineTo(-20,-2),e.lineTo(-20,2),e.fill(),e.restore()},qg=(e,t)=>{e.save(),e.translate(t.x,t.y);const i=Math.atan2(t.vy,t.vx);e.rotate(i);const o=e.createRadialGradient(0,0,t.radius*.2,0,0,t.radius);o.addColorStop(0,"#fffbeb"),o.addColorStop(.4,"#fbbf24"),o.addColorStop(1,"rgba(245, 158, 11, 0)"),e.globalCompositeOperation="lighter",e.fillStyle=o,e.beginPath(),e.arc(0,0,t.radius*1.2,0,Math.PI*2),e.fill(),e.strokeStyle="#fef3c7",e.lineWidth=3,e.lineCap="round";const r=t.radius/25;e.scale(r,r),e.beginPath(),e.arc(0,0,10,Math.PI/2,-Math.PI/2,!0),e.moveTo(0,-10),e.lineTo(15,-8),e.moveTo(5,-5),e.lineTo(20,-5),e.moveTo(8,0),e.lineTo(22,0),e.moveTo(5,5),e.lineTo(20,5),e.moveTo(0,10),e.lineTo(15,8),e.stroke();const f=Date.now()/100%1*10;if(e.strokeStyle="rgba(251, 191, 36, 0.5)",e.lineWidth=2,e.beginPath(),e.arc(-5,0,20+f,-Math.PI/2,Math.PI/2),e.stroke(),Math.random()<.5){e.fillStyle="#fcd34d";const h=-30-Math.random()*20,p=(Math.random()-.5)*20;e.fillRect(h,p,2,2)}e.restore()},Gg=(e,t)=>{e.save(),e.translate(t.x,t.y);const i=Date.now()/100;e.fillStyle="#000000",e.beginPath(),e.arc(0,0,t.radius*.7,0,Math.PI*2),e.fill();const o=16;e.strokeStyle="#fbbf24",e.lineWidth=3,e.lineCap="round",e.globalCompositeOperation="lighter",e.beginPath();for(let c=0;c<=o;c++){const f=c/o*Math.PI*2,h=Math.sin(f*5+i)*(t.radius*.2),p=t.radius+h,u=Math.cos(f)*p,g=Math.sin(f)*p;c===0?e.moveTo(u,g):e.lineTo(u,g)}e.closePath(),e.stroke();const r=e.createRadialGradient(0,0,t.radius,0,0,t.radius*1.5);r.addColorStop(0,"rgba(251, 191, 36, 0.6)"),r.addColorStop(1,"rgba(251, 191, 36, 0)"),e.fillStyle=r,e.beginPath(),e.arc(0,0,t.radius*1.5,0,Math.PI*2),e.fill(),e.restore()},Yg=(e,t)=>{e.save(),e.translate(t.x,t.y);const i=Date.now()/50,o=(Math.random()-.5)*4,r=(Math.random()-.5)*4;e.translate(o,r);let c=t.angle||Math.atan2(t.vy,t.vx);e.rotate(c+Math.PI/4);const f=t.radius/10;e.scale(f,f);const h=(u,g)=>{e.fillStyle=u,e.beginPath(),e.moveTo(0,0),e.lineTo(0,20),e.lineTo(5,15),e.lineTo(9,24),e.lineTo(12,22),e.lineTo(8,14),e.lineTo(14,14),e.closePath(),e.fill()};Math.random()<.5&&(e.globalAlpha=.6,e.save(),e.translate(-2,-2),h("#00ffff"),e.restore(),e.save(),e.translate(2,2),h("#ff00ff"),e.restore()),e.globalAlpha=1;const p=Math.floor(i)%4===0?"#ef4444":"#ffffff";h(p),e.strokeStyle="#000",e.lineWidth=2,e.lineJoin="round",e.stroke(),e.restore()},Ug=(e,t)=>{e.save(),e.translate(t.x,t.y);const i=Date.now()/150;if(t.trailHistory&&t.trailHistory.length>2){e.save(),e.globalCompositeOperation="lighter",e.strokeStyle="#22d3ee",e.lineWidth=4,e.lineCap="round",e.lineJoin="round",e.shadowBlur=10,e.shadowColor="#22d3ee",e.beginPath(),e.translate(-t.x,-t.y);const c={x:t.x,y:t.y};e.moveTo(t.trailHistory[0].x,t.trailHistory[0].y);for(let f=1;f<t.trailHistory.length;f++)e.lineTo(t.trailHistory[f].x,t.trailHistory[f].y);e.lineTo(c.x,c.y),e.stroke(),e.strokeStyle="#ffffff",e.lineWidth=2,e.stroke(),e.restore()}e.rotate(i),e.shadowBlur=20,e.shadowColor="#22d3ee",e.fillStyle="#22d3ee";const o=t.radius*2.2,r=t.radius*.5;e.fillRect(-o/2,-r/2,o,r),e.fillRect(-r/2,-o/2,r,o),e.fillStyle="#ffffff",e.shadowBlur=0,e.beginPath(),e.moveTo(0,-r),e.lineTo(r,0),e.lineTo(0,r),e.lineTo(-r,0),e.fill(),Math.random()<.3&&(e.strokeStyle="#ff00ff",e.lineWidth=1,e.strokeRect(-o/2+2,-r/2+2,o,r)),e.restore()},Fg=(e,t)=>{e.save(),e.translate(t.x,t.y);const i=Math.atan2(t.vy,t.vx);e.rotate(i);const o=Date.now();e.globalCompositeOperation="lighter",e.fillStyle="#ffffff",e.beginPath(),e.arc(0,0,t.radius*.6,0,Math.PI*2),e.fill(),e.fillStyle=t.color||"#22d3ee",e.globalAlpha=.6,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill(),e.strokeStyle=t.color||"#22d3ee",e.lineWidth=2,e.lineJoin="round";for(let r=0;r<2;r++){e.beginPath(),e.moveTo(0,0);let c=0,f=0;const h=4,p=60;for(let u=0;u<h;u++)c-=p/h,f=Math.sin(o/20+r*10+u*50)*10,e.lineTo(c,f);e.stroke()}e.restore()},Xg=(e,t)=>{e.save(),e.translate(t.x,t.y);const i=Date.now();e.rotate(i/100+t.id.charCodeAt(0));const o=(Math.random()-.5)*2,r=(Math.random()-.5)*2;e.translate(o,r);const c=t.radius*1.2,f=8;e.beginPath();for(let h=0;h<=f;h++){const p=h/f*Math.PI*2,u=Math.sin(i/100+h*2)*.2+Math.random()*.1,g=c*(.8+u),b=Math.cos(p)*g,v=Math.sin(p)*g;h===0?e.moveTo(b,v):e.lineTo(b,v)}e.closePath(),e.fillStyle="#22d3ee",e.fill(),e.strokeStyle="#a855f7",e.lineWidth=3,e.lineJoin="round",e.stroke(),e.shadowColor="#a855f7",e.shadowBlur=10,e.stroke(),e.fillStyle="#ffffff",e.beginPath(),e.arc(-c*.3,-c*.3,c*.2,0,Math.PI*2),e.fill(),e.restore()},er=64,Ei=er/2,wc=new Map,Wg=e=>{if(wc.has(e))return wc.get(e);const t=document.createElement("canvas");t.width=er,t.height=er;const i=t.getContext("2d");if(!i)return t;const o=Ei,r=Ei,c=Ei-4;return i.shadowBlur=10,i.shadowColor=e,i.strokeStyle=e,i.lineWidth=6,i.lineCap="round",i.beginPath(),i.arc(o,r,c-3,0,Math.PI*2),i.stroke(),i.shadowBlur=0,i.strokeStyle="#ffffff",i.lineWidth=2,i.globalAlpha=.6,i.beginPath(),i.arc(o,r,c-3,-Math.PI*.25,Math.PI*.75),i.stroke(),i.fillStyle=e,i.globalAlpha=.15,i.fill(),wc.set(e,t),t},Qg=(e,t)=>{e.save(),e.translate(t.x,t.y);const i=Date.now()/100;e.rotate(i+t.id.charCodeAt(0));const o=Wg(t.color),r=t.radius*2.2/er;e.scale(r,r),e.drawImage(o,-Ei,-Ei),e.restore()},$g=(e,t)=>{var h;if(!t||isNaN(t.x)||isNaN(t.y))return;let i=t.radius||24;const o=(h=t.customVars)==null?void 0:h.isPowered;o&&(i*=1.2+Math.sin(Date.now()/100)*.1),t.trailHistory&&t.trailHistory.length>0&&(e.save(),e.fillStyle="#ffffff",t.trailHistory.forEach((p,u)=>{u%4===0&&(e.globalAlpha=u/t.trailHistory.length,e.fillRect(p.x-3.5,p.y-3.5,7,7))}),e.restore()),e.save(),e.translate(t.x,t.y),o&&(e.shadowBlur=20,e.shadowColor="#ffffff");let r=t.angle||0;(Math.abs(t.vx)>.1||Math.abs(t.vy)>.1)&&(r=Math.atan2(t.vy,t.vx)),e.rotate(r);const c=Math.floor(Date.now()/80)%4;let f=0;if(c===0?f=.02:c===1||c===3?f=Math.PI/8:c===2&&(f=Math.PI/4),e.fillStyle="#FFC107",e.beginPath(),e.arc(0,0,i,f,2*Math.PI-f),e.lineTo(0,0),e.closePath(),e.fill(),e.restore(),t.customVars){const p=t.customVars.powerCharge||0,g=Math.min(1,p/100);if(p>0||o){const x=-i-15;e.fillStyle="#1e293b",e.fillRect(t.x-40/2,t.y+x,40,6),e.fillStyle=o?Math.floor(Date.now()/100)%2===0?"#ffffff":"#3b82f6":"#22d3ee",e.shadowColor="#22d3ee",e.shadowBlur=5;let T=g;o&&t.customVars.powerTimer&&(T=t.customVars.powerTimer/480),e.fillRect(t.x-40/2,t.y+x,40*T,6),e.shadowBlur=0}}},rm=64,nm=32,cm=rm/2,dm=nm/2,kc=new Map,um=e=>{if(kc.has(e))return kc.get(e);const t=document.createElement("canvas");t.width=rm,t.height=nm;const i=t.getContext("2d");if(!i)return t;const o=48,r=12,c=cm,f=dm;i.shadowBlur=10,i.shadowColor=e,i.beginPath(),i.moveTo(c+o*.5,f),i.lineTo(c-o*.3,f-r),i.lineTo(c-o*.1,f),i.lineTo(c-o*.3,f+r),i.closePath();const h=i.createLinearGradient(c-o*.4,f,c+o*.5,f);return h.addColorStop(0,"rgba(0,0,0,0.5)"),h.addColorStop(.3,e),h.addColorStop(1,"#ffffff"),i.fillStyle=h,i.fill(),i.strokeStyle="rgba(255, 255, 255, 0.8)",i.lineWidth=1.5,i.stroke(),i.shadowBlur=0,i.fillStyle="#ffffff",i.fillRect(c-o*.2,f-r,2,2),i.fillRect(c-o*.2,f+r-2,2,2),kc.set(e,t),t};typeof document<"u"&&um("#22d3ee");const Kg=(e,t,i=!1)=>{e.save(),e.translate(t.x,t.y);const o=t.vx===0&&t.vy===0?t.angle||0:Math.atan2(t.vy,t.vx);e.rotate(o),e.globalCompositeOperation="lighter";const r=t.color||"#22d3ee";if(!i&&Math.hypot(t.vx,t.vy)>1){const p=t.radius*4,u=t.radius*.6,g=e.createLinearGradient(-p,0,0,0);g.addColorStop(0,"rgba(0,0,0,0)"),g.addColorStop(1,r),e.fillStyle=g,e.globalAlpha=.6,e.beginPath(),e.moveTo(0,-u/2),e.lineTo(-p,0),e.lineTo(0,u/2),e.fill(),e.globalAlpha=1}const c=t.radius*3/48;e.scale(c,c);const f=um(r);e.drawImage(f,-cm,-dm),e.restore()};class Vc{static init(){this.charmTexture||this.initCharmTexture(),this.frenziedSimpTexture||this.initFrenziedSimpTexture()}static initCharmTexture(){const i=document.createElement("canvas");i.width=64,i.height=64;const o=i.getContext("2d");if(!o)return;const r=64/2,c=64*.4,f=o.createRadialGradient(r-c*.3,r-c*.3,c*.1,r,r,c);f.addColorStop(0,"rgba(255, 255, 255, 0.9)"),f.addColorStop(.3,"rgba(244, 114, 182, 0.4)"),f.addColorStop(1,"rgba(236, 72, 153, 0.8)"),o.fillStyle=f,o.beginPath(),o.arc(r,r,c,0,Math.PI*2),o.fill(),o.fillStyle="rgba(255, 255, 255, 0.6)",o.beginPath(),o.ellipse(r-c*.4,r-c*.4,c*.2,c*.1,Math.PI/4,0,Math.PI*2),o.fill(),o.font="30px sans-serif",o.textAlign="center",o.textBaseline="middle",o.fillStyle="#ef4444",o.shadowColor="#f472b6",o.shadowBlur=10,o.fillText("",r,r+2),this.charmTexture=i}static initFrenziedSimpTexture(){const i=document.createElement("canvas");i.width=64,i.height=64;const o=i.getContext("2d");if(!o)return;const r=64/2;o.font="48px sans-serif",o.textAlign="center",o.textBaseline="middle",o.fillText("",r,r+4),o.globalCompositeOperation="source-atop",o.fillStyle="rgba(239, 68, 68, 0.5)",o.fillRect(0,0,64,64),o.globalCompositeOperation="source-over",o.font="24px sans-serif",o.fillStyle="#ef4444",o.shadowColor="white",o.shadowBlur=2,o.fillText("",r+20,r-15),this.frenziedSimpTexture=i}}typeof window<"u"&&Vc.init();const _h="01010101XYZA",wh=(e,t,i)=>{t.forEach(o=>{const r=o.maxExplosionRadius||o.radius+20;if(!(o.x+r<i.minX||o.x-r>i.maxX||o.y+r<i.minY||o.y-r>i.maxY)){if(e.save(),o.isFake&&(e.globalAlpha=.4),o.isExploding){const c=o.maxExplosionRadius||100,f=Math.min(1,o.radius/c);if(o.renderStyle==="neon_missile"){Ng(e,o,f,i.isLowQuality),e.restore();return}o.renderStyle==="cyber_explosion"||!o.isEnemy&&!o.renderStyle?kg(e,o,f,i.isLowQuality):o.renderStyle==="viral_explosion"?Cg(e,o,f,i.isLowQuality):jg(e,o,f,i.isLowQuality),e.restore();return}if(o.renderStyle==="pacman_style"||o.summonType==="pacman"){$g(e,o),e.restore();return}if(o.renderStyle==="matrix_code"){const c=Date.now()/100;e.font="bold 20px monospace",e.textAlign="center",e.textBaseline="middle",e.fillStyle="#ef4444";const f=_h[Math.floor((c+o.id.charCodeAt(0))%_h.length)];e.fillText(f,o.x,o.y),e.restore();return}if(o.renderStyle==="data_spike"){Kg(e,o,i.isLowQuality),e.restore();return}if(o.renderStyle==="mimic_bomb"){const c=o.z||0;e.save(),e.translate(o.x,o.y);const f=1-c/200;e.scale(f,f),e.fillStyle="rgba(0,0,0,0.3)",e.beginPath(),e.ellipse(0,0,o.radius,o.radius*.5,0,0,Math.PI*2),e.fill(),e.restore(),e.save(),e.translate(o.x,o.y-c);const h=1+Math.sin(Date.now()/100)*.2;e.fillStyle="rgba(239, 68, 68, 0.4)",e.beginPath(),e.arc(0,0,o.radius*1.2*h,0,Math.PI*2),e.fill();const p=Math.floor(o.radius*2),u=o.emoji||"";e.font=`900 ${p}px "Noto Sans SC", sans-serif`,e.textAlign="center",e.textBaseline="middle",e.strokeStyle="#ffffff",e.lineWidth=4,e.lineJoin="round",e.strokeText(u,0,0),e.fillStyle="#000000",e.fillText(u,0,0);const g=o.radius*.4,b=-o.radius*.6;e.fillStyle=Math.random()>.5?"#facc15":"#ef4444",e.beginPath(),e.arc(g,b,4,0,Math.PI*2),e.fill(),e.restore(),e.restore();return}if(o.renderStyle==="charm_heart"){const c=1+Math.sin(Date.now()/150)*.1;e.translate(o.x,o.y),e.scale(c,c),Vc.charmTexture?e.drawImage(Vc.charmTexture,-32,-32):(e.fillStyle="#f472b6",e.beginPath(),e.arc(0,0,20,0,Math.PI*2),e.fill(),e.fillStyle="red",e.fillText("",0,0)),e.restore();return}if(o.renderStyle==="donut_ring"){Qg(e,o),e.restore();return}if(o.renderStyle==="glitch_tangle"){Xg(e,o),e.restore();return}if(o.renderStyle==="electric_arc"){Fg(e,o),e.restore();return}if(o.renderStyle==="sine_shuriken"){Ug(e,o),e.restore();return}if(o.renderStyle==="glitch_cursor"){Yg(e,o),e.restore();return}if(o.renderStyle==="gold_void"){Gg(e,o),e.restore();return}if(o.renderStyle==="black_pot"){e.save(),e.fillStyle="rgba(0,0,0,0.3)";const f=1-(o.z||0)/200;e.translate(o.x,o.y),e.scale(f,f),e.beginPath(),e.ellipse(0,0,20,10,0,0,Math.PI*2),e.fill(),e.restore();const h=o.y-(o.z||0);e.save(),e.translate(o.x,h),e.rotate(Date.now()/100);const p=Lt.getTexture("",48,"#000");e.drawImage(p,-24,-24),e.restore(),e.restore();return}if(o.renderStyle==="golden_palm"){qg(e,o),e.restore();return}if(o.renderStyle==="melee_swing"){Ag(e,o),e.restore();return}if(o.renderStyle==="gold_coin"){Rg(e,o,i.isLowQuality),e.restore();return}if(o.renderStyle==="rainbow_pinball"){Bg(e,o),e.restore();return}if(o.renderStyle==="neon_missile"){Lg(e,o),e.restore();return}if(o.renderStyle==="matrix_missile"){zg(e,o),e.restore();return}if(o.renderStyle==="red_triangle"){Ig(e,o),e.restore();return}if(o.renderStyle,!o.isEnemy&&(o.canChain||o.bounceCount&&o.bounceCount>0)&&!i.isLowQuality){e.fillStyle=o.canChain?"#3b82f6":"#22d3ee";for(let c=1;c<=3;c++){const f=-o.vx*c*2,h=-o.vy*c*2,p=6-c;p>0&&e.fillRect(o.x+f-p/2,o.y+h-p/2,p,p)}}Vg(e,o),Hg(e,o),Pg(e,o),e.restore()}})},Zg=(e,t)=>{t.enemies.forEach(i=>{if(i.config.type==="hr_specialist"&&i.healTargetId){const o=t.enemies.find(r=>r.id===i.healTargetId);if(o&&o.hp>0){if(e.save(),e.strokeStyle="#4ade80",e.lineWidth=2,e.globalAlpha=.6,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(o.x,o.y),e.stroke(),Math.floor(Date.now()/200)%2===0){e.fillStyle="#4ade80";const r=(i.x+o.x)/2,c=(i.y+o.y)/2;e.beginPath(),e.arc(r,c,3,0,Math.PI*2),e.fill()}e.restore()}}(i.config.behavior==="linker"||i.config.behavior==="summoner_orbit")&&t.enemies.forEach(o=>{if(o===i)return;const r=i.config.behavior==="linker"&&o.linkedById===i.id,c=i.config.behavior==="summoner_orbit"&&o.orbitTargetId===i.id;if(r||c){e.save(),e.strokeStyle=c?"#f472b6":"#fcd34d",e.lineWidth=2,e.globalAlpha=.6+Math.sin(Date.now()/100)*.3,e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(o.x,o.y),e.stroke();const h=Date.now()/300%1,p=i.x+(o.x-i.x)*h,u=i.y+(o.y-i.y)*h;e.fillStyle="#fff",e.globalAlpha=.8,e.beginPath(),e.arc(p,u,4,0,Math.PI*2),e.fill(),e.restore()}})})},kh=(e,t)=>{const i=Date.now()/1e3;e.save(),e.translate(t.x,t.y),e.rotate(i*.2),e.strokeStyle="#7f1d1d",e.lineWidth=4,e.setLineDash([20,10]),e.beginPath(),e.arc(0,0,120,0,Math.PI*2),e.stroke(),e.rotate(-i*.4),e.strokeStyle="#ef4444",e.lineWidth=2,e.setLineDash([10,5]),e.beginPath(),e.arc(0,0,90,0,Math.PI*2),e.stroke(),e.rotate(i*.1),e.fillStyle="rgba(255, 0, 0, 0.3)",e.font="bold 12px monospace";const o="KPI OKR ROI P0 P1 ";for(let f=0;f<8;f++)e.rotate(Math.PI/4),e.fillText(o,60,0);e.restore(),e.save(),e.translate(t.x,t.y),e.globalCompositeOperation="source-over",t.hitFlashTimer&&t.hitFlashTimer>0&&(e.translate((Math.random()-.5)*5,(Math.random()-.5)*5),e.filter="brightness(1.5) sepia(1) hue-rotate(-50deg) saturate(3)");const c=Lt.getTexture(t.emoji,140,"#fff");if(e.drawImage(c,-c.width/2,-c.height/2),e.restore(),Math.random()<.1||t.phase===3){const f=(Math.random()-.5)*10,h=(Math.random()-.5)*10;e.save(),e.translate(t.x+f,t.y+h),e.globalAlpha=.5,e.globalCompositeOperation="lighter",e.fillStyle="#00ffff",e.beginPath(),e.arc(-4,-4,t.radius,0,Math.PI*2),e.fill(),e.fillStyle="#ff00ff",e.beginPath(),e.arc(4,4,t.radius,0,Math.PI*2),e.fill(),e.restore()}if(t.phase===3){e.save(),e.translate(t.x,t.y);const f=1+Math.sin(i*10)*.1;e.scale(f,f);const h=e.createRadialGradient(0,0,t.radius,0,0,t.radius*2);h.addColorStop(0,"rgba(255, 0, 0, 0.5)"),h.addColorStop(1,"rgba(0, 0, 0, 0)"),e.globalCompositeOperation="lighter",e.fillStyle=h,e.beginPath(),e.arc(0,0,t.radius*2,0,Math.PI*2),e.fill(),e.restore()}},Jg=(e,t)=>{var g;if(isNaN(t.x)||isNaN(t.y)||!t.radius||isNaN(t.radius))return;const i=Date.now()/1e3;if(t.customVars&&t.customVars.activeSkill==="overflow"){const b=t.customVars.overflowState;if(b==="pre_cast"){e.save(),e.translate(t.x,t.y);const x=Math.min(1,(t.customVars.subTimer||0)/100),T=120,M=10,k=-t.radius-60;e.fillStyle="#1f2937",e.fillRect(-T/2,k,T,M),e.fillStyle="#facc15",e.fillRect(-T/2,k,T*x,M),e.fillStyle="#facc15",e.font="bold 12px monospace",e.textAlign="center",e.fillText(`LOADING OVERFLOW... ${Math.floor(x*100)}%`,0,k-10);const C=5;for(let w=0;w<C;w++){const j=Math.random()*Math.PI*2,O=60+Math.random()*40,V=Math.random()*.5+.5,H=Math.cos(j)*O*(1-x),X=Math.sin(j)*O*(1-x);e.globalAlpha=.5+Math.random()*.5,e.fillStyle="#facc15",e.beginPath(),e.arc(H,X,3*V,0,Math.PI*2),e.fill()}e.restore()}if(b==="warning"||b==="sucking"){e.save(),e.translate(t.x,t.y);const v=2e3,x=b==="sucking"?-i*3:-i*.5;if(e.rotate(x),b==="warning"&&(e.fillStyle="rgba(239, 68, 68, 0.05)",e.beginPath(),e.arc(0,0,v,0,Math.PI*2),e.fill()),b==="sucking"){const k=e.createRadialGradient(0,0,100,0,0,1500);k.addColorStop(0,"rgba(255, 255, 255, 0.9)"),k.addColorStop(.3,"rgba(74, 222, 128, 0.6)"),k.addColorStop(1,"rgba(34, 197, 94, 0)"),e.strokeStyle=k;for(let C=0;C<16;C++){const w=C/16*Math.PI*2;e.beginPath(),e.lineWidth=1+Math.random()*2;for(let j=50;j<1500;j+=20){const O=i*8%40,V=j-O;if(V<50)continue;const H=w+Math.log(V)*.8,X=Math.cos(H)*V,ee=Math.sin(H)*V;j===50?e.moveTo(X,ee):e.lineTo(X,ee)}e.stroke()}}else{e.strokeStyle="rgba(239, 68, 68, 0.3)",e.lineWidth=2;const T=12;for(let M=0;M<T;M++){const k=M/T*Math.PI*2;e.beginPath();for(let C=0;C<1e3;C+=20){const w=k+Math.log(C+100)*.5,j=Math.cos(w)*C,O=Math.sin(w)*C;C===0?e.moveTo(j,O):e.lineTo(j,O)}e.stroke()}}if(b==="warning"){e.rotate(-x),e.fillStyle="#ef4444",e.font="900 48px monospace",e.textAlign="center",e.shadowColor="#ef4444",e.shadowBlur=10;const T=-t.radius-80;e.fillText(" GLOBAL OVERFLOW ",0,T-50);const M=Math.max(0,3-Math.floor((t.customVars.subTimer||0)/60));e.font="900 64px monospace",e.fillStyle="#facc15",e.fillText(`${M}`,0,T+20),e.font="bold 24px monospace",e.fillStyle="#ef4444",e.fillText("!",0,T+60)}e.restore()}if(b==="sucking"){const v=((g=t.customVars)==null?void 0:g.visualWaveRadius)||0;v>50&&(e.save(),e.translate(t.x,t.y),e.beginPath(),e.arc(0,0,v,0,Math.PI*2),e.lineWidth=6+v/150,e.strokeStyle=`rgba(255, 255, 255, ${Math.min(.8,v/600)})`,e.shadowBlur=15,e.shadowColor="white",e.stroke(),e.beginPath(),e.arc(0,0,v+20,0,Math.PI*2),e.lineWidth=2,e.strokeStyle=`rgba(255, 255, 255, ${Math.min(.3,v/600)})`,e.stroke(),e.restore()),e.save(),e.translate(t.x,t.y);const x=40,T=Date.now()/1e3,M=["0","1","ERR","NULL","NaN","undefined","{ }"];e.shadowBlur=0;for(let k=0;k<x;k++){const C=k*2137,w=1+k%3*.3,j=(T+C)%w/w,O=j*j*j,H=1200*(1-O),X=k*360/x*(Math.PI/180),ee=O*2,re=X+ee+T*.5,J=Math.cos(re)*H,ue=Math.sin(re)*H;if(H<20)continue;const pe=10+(1-O)*20,be=Math.min(1,O*2),K=Math.floor(255*(1-O)),fe=`rgba(${K}, 255, ${K}, ${be})`;e.save(),e.translate(J,ue),e.rotate(re+Math.PI);const R=1+O*3;e.scale(R,1),e.font=`bold ${Math.floor(pe)}px monospace`,e.fillStyle=fe,k%3===0?e.fillText(M[k%M.length],0,0):e.fillRect(0,-2,pe*2,4),e.restore()}e.restore()}}if(t.customVars&&t.customVars.activeSkill==="underflow"){const b=t.customVars.dashState;if(b==="aiming"||b==="locking"){const v=t.customVars.dashAngle||0,x=2e3;e.save(),e.translate(t.x,t.y),e.rotate(v),e.beginPath(),e.moveTo(0,0);const T=120,M=.01,k=-Date.now()/15;for(let C=0;C<x;C+=20){const w=Math.sin(C*M+k)*T*Math.min(1,C/200);e.lineTo(C,w)}b==="locking"?(e.strokeStyle="#ef4444",e.lineWidth=12,e.shadowBlur=20,e.shadowColor="#ef4444",e.globalAlpha=.8+Math.sin(Date.now()/50)*.2):(e.strokeStyle="rgba(239, 68, 68, 0.6)",e.lineWidth=6,e.setLineDash([30,20]),e.shadowBlur=10,e.shadowColor="#ef4444"),e.stroke(),b==="locking"&&(e.strokeStyle="#ffffff",e.lineWidth=2,e.shadowBlur=0,e.setLineDash([]),e.stroke()),e.restore()}}t.customVars&&t.customVars.activeSkill==="underflow"&&(e.save(),e.translate(t.x,t.y),e.beginPath(),e.arc(0,0,t.radius+25,0,Math.PI*2),e.strokeStyle="#ef4444",e.lineWidth=6,e.shadowBlur=20,e.shadowColor="#ef4444",e.stroke(),e.rotate(i*5),e.beginPath(),e.arc(0,0,t.radius+10,0,Math.PI*1.5),e.strokeStyle="#ffffff",e.lineWidth=2,e.stroke(),e.restore()),e.save(),e.translate(t.x,t.y),e.rotate(i*.1),e.font="14px monospace",e.fillStyle="#22c55e",e.globalAlpha=.6;const o="01",r=Math.max(50,t.radius+30),c=16;for(let b=0;b<c;b++){const v=b/c*Math.PI*2,x=Math.cos(v)*r,T=Math.sin(v)*r,M=Math.sin(i*2+b)*20;e.save(),e.translate(x,T+M),e.rotate(v+Math.PI/2),e.fillText(o[b%2],0,0),e.restore()}e.rotate(-i*.3);const f=Math.max(30,t.radius),h=10;e.fillStyle="#4ade80";for(let b=0;b<h;b++){const v=b/h*Math.PI*2,x=Math.cos(v)*f,T=Math.sin(v)*f,M=Math.cos(i*3+b)*10;e.save(),e.translate(x,T+M),e.rotate(v+Math.PI/2),e.fillText(Math.random()>.5?"1":"0",0,0),e.restore()}e.restore();const p=100,u=t.radius/p;if(!t.isUnstable){e.save(),e.translate(t.x,t.y),e.scale(u,u);const b=Lt.getTexture(t.emoji,p*2,"white");e.drawImage(b,-p,-p,p*2,p*2),e.restore()}if(t.radius<40&&!t.isUnstable){e.save(),e.translate(t.x,t.y),e.rotate(-i*4),e.strokeStyle="#22d3ee",e.lineWidth=3,e.shadowColor="#22d3ee",e.shadowBlur=15;const b=60,v=15;e.beginPath(),e.moveTo(-b/2+v,-b/2),e.lineTo(-b/2,-b/2),e.lineTo(-b/2,b/2),e.lineTo(-b/2+v,b/2),e.stroke(),e.beginPath(),e.moveTo(b/2-v,-b/2),e.lineTo(b/2,-b/2),e.lineTo(b/2,b/2),e.lineTo(b/2-v,b/2),e.stroke(),e.restore()}if(t.isUnstable){const b=Lt.getTexture(t.emoji,p*2,"rgba(255,255,255,0.8)"),v=p*2,x=v/3,T=Date.now()/200,M=40,k=Math.sin(T)*M+(Math.random()-.5)*10,C=Math.sin(T+2)*M+(Math.random()-.5)*10,w=Math.sin(T+4)*M+(Math.random()-.5)*10;e.save(),e.translate(t.x,t.y),e.scale(u,u),e.save(),e.translate(-p+k,-p),e.globalCompositeOperation="screen",e.fillStyle="rgba(255, 50, 50, 0.7)",e.drawImage(b,0,0,v,x,0,0,v,x),e.globalCompositeOperation="source-atop",e.fillRect(0,0,v,x),e.restore(),e.save(),e.translate(-p+C,-p+x),e.globalCompositeOperation="screen",e.fillStyle="rgba(50, 255, 50, 0.7)",e.drawImage(b,0,x,v,x,0,0,v,x),e.globalCompositeOperation="source-atop",e.fillRect(0,0,v,x),e.restore(),e.save(),e.translate(-p+w,-p+x*2),e.globalCompositeOperation="screen",e.fillStyle="rgba(50, 50, 255, 0.7)",e.drawImage(b,0,x*2,v,x,0,0,v,x),e.globalCompositeOperation="source-atop",e.fillRect(0,0,v,x),e.restore(),e.restore(),e.save(),e.translate(t.x,t.y-t.radius-60),e.fillStyle="#ffffff",e.font="900 28px monospace",e.textAlign="center",e.textBaseline="middle",e.shadowColor="black",e.shadowBlur=0;const j="  ",O=(Math.random()-.5)*4,V=(Math.random()-.5)*4;e.fillText(j,O,V),e.restore()}},ev={render:(e,t)=>{var x;const i=Date.now()/1e3,o=t.customVars&&t.customVars.inCinematicTransition,r=((x=t.customVars)==null?void 0:x.transitionPhase)||0;let c=Math.sin(i*2)*5,f=0;if(o){const T=5+r*5;c=(Math.random()-.5)*T,f=(Math.random()-.5)*T}e.save(),e.translate(t.x,t.y);const p=Lt.getTexture(t.emoji,160,"#fff");e.drawImage(p,-p.width/2+f,-p.height/2+c),e.save();let u="#22d3ee",g=1,b=0;o&&(g=5+r*5,b=r*3,r>=2?u="#ef4444":r>=1&&(u="#fbbf24"));const v=[{radiusX:120,radiusY:40,speed:.5*g,color:u},{radiusX:110,radiusY:110,speed:-.3*g,color:u},{radiusX:130,radiusY:30,speed:.4*g,color:o?"#ffffff":"#67e8f9",offset:Math.PI/4}];if(e.globalCompositeOperation="lighter",e.lineWidth=o?4:2,v.forEach(T=>{e.save();const M=i*T.speed+(T.offset||0),k=o?(Math.random()-.5)*.2:0;e.rotate(M+k);const C=(Math.random()-.5)*b,w=(Math.random()-.5)*b;e.strokeStyle=T.color,e.shadowColor=T.color,e.shadowBlur=o?20:10,e.beginPath(),e.ellipse(0,0,T.radiusX+C,T.radiusY+w,0,0,Math.PI*2),e.stroke();const j=o?6:3;for(let O=0;O<j;O++){const V=(i*(2*g)+O*Math.PI*2/j)%(Math.PI*2),H=Math.cos(V)*T.radiusX,X=Math.sin(V)*T.radiusY;e.fillStyle="#ffffff",e.beginPath(),e.arc(H,X,o?5:3,0,Math.PI*2),e.fill()}e.restore()}),!o){e.save(),e.rotate(-i*.1),e.strokeStyle="rgba(34, 211, 238, 0.3)",e.lineWidth=1,e.setLineDash([10,10]);const T=160;e.beginPath();for(let M=0;M<6;M++){const k=M*Math.PI/3,C=Math.cos(k)*T,w=Math.sin(k)*T;M===0?e.moveTo(C,w):e.lineTo(C,w)}e.closePath(),e.stroke(),e.restore()}if(e.restore(),e.save(),e.translate(t.x,t.y),o){e.fillStyle=r>=2?"#ef4444":"#facc15",e.font="900 24px monospace",e.textAlign="center",e.shadowBlur=20,e.shadowColor=r>=2?"red":"yellow";const T=r===3?"CRITICAL FAILURE":r===2?"SYSTEM MELTDOWN":"WARNING";e.fillText(` ${T} `,0,-160+c)}else e.fillStyle="#22d3ee",e.font="bold 12px monospace",e.textAlign="center",e.shadowBlur=5,e.shadowColor="cyan",e.fillText("[ SYSTEM_LOCKED ]",0,-140+c);e.restore()}},jh={renderAimLine:(e,t)=>{var p;if(((p=t.customVars)==null?void 0:p.aimAngle)===void 0)return;const i=t.customVars.aimAngle,o=2e3;e.save(),e.translate(t.x,t.y),e.rotate(i);const r=Date.now()/50;e.strokeStyle="#ef4444",e.lineWidth=4,e.setLineDash([40,30]),e.lineDashOffset=-r*5;const c=(Math.random()-.5)*2;e.beginPath(),e.moveTo(0,c),e.lineTo(o,c),e.stroke(),Math.random()<.5&&(e.strokeStyle="rgba(255, 255, 255, 0.5)",e.lineWidth=1,e.setLineDash([10,80]),e.lineDashOffset=r*8,e.beginPath(),e.moveTo(0,(Math.random()-.5)*10),e.lineTo(o,(Math.random()-.5)*10),e.stroke()),e.translate(500,0),e.save(),e.rotate(r*.1),e.strokeStyle="#ef4444",e.lineWidth=3,e.setLineDash([]);const h=40;e.beginPath(),e.moveTo(-h,-h),e.lineTo(-h,h),e.moveTo(h,-h),e.lineTo(h,h),e.stroke(),e.strokeStyle="#fca5a5",e.beginPath(),e.moveTo(-15,-15),e.lineTo(15,15),e.moveTo(15,-15),e.lineTo(-15,15),e.stroke(),e.restore(),e.fillStyle="#ef4444",e.font="bold 16px monospace",e.textAlign="center",e.save(),e.rotate(-Math.PI/2),e.fillText("FATAL_EXCEPTION_0x007",0,-50),e.restore(),e.restore()},renderCrashDashTelegraph:(e,t)=>{var f;if(((f=t.customVars)==null?void 0:f.dashAngle)===void 0)return;const i=t.customVars.dashAngle,r=(t.customVars.subTimer||0)>90,c=3e3;if(e.save(),e.translate(t.x,t.y),e.rotate(i),e.beginPath(),e.moveTo(0,0),e.lineTo(c,0),e.lineWidth=r?10:6,e.strokeStyle=r?"#ef4444":"rgba(239, 68, 68, 0.5)",r||(e.setLineDash([30,30]),e.lineDashOffset=-Date.now()/5),e.stroke(),Math.random()<.5||r){e.font="bold 24px monospace",e.fillStyle=r?"#ffffff":"rgba(239, 68, 68, 0.8)",e.textAlign="center";for(let h=200;h<c;h+=400)e.fillText(">>>> SYSTEM CRASH >>>>",h,-20)}e.restore()}},tv={render:(e,t)=>{var j,O,V,H,X,ee,re;const i=Date.now()/1e3;e.save(),e.translate(t.x,t.y);const o=3,r=t.radius*1.6;for(let J=0;J<o;J++){const ue=(J%2===0?1:-1)*(.5+J*.2),pe=i*ue+J*Math.PI*2/o,be=Math.sin(i*4+J)*15,K=r+be;e.save(),e.rotate(pe);const fe=R=>{e.beginPath();for(let Y=0;Y<3;Y++){const ie=Y*Math.PI*2/3,q=Math.cos(ie)*R,Z=Math.sin(ie)*R;Y===0?e.moveTo(q,Z):e.lineTo(q,Z)}e.closePath()};if(Math.random()<.2){const R=(Math.random()-.5)*15,Y=(Math.random()-.5)*15;e.globalCompositeOperation="screen",e.save(),e.translate(R,Y),e.strokeStyle="rgba(0, 255, 255, 0.7)",e.lineWidth=2,fe(K),e.stroke(),e.restore(),e.save(),e.translate(-R,-Y),e.strokeStyle="rgba(255, 0, 0, 0.7)",e.lineWidth=2,fe(K),e.stroke(),e.restore()}e.globalCompositeOperation="source-over",e.strokeStyle=J===0?"#ffffff":"#a855f7",e.lineWidth=4+Math.sin(i*15)*2,e.shadowColor="#a855f7",e.shadowBlur=15,fe(K),e.stroke(),e.fillStyle="#a855f7",e.shadowBlur=0,e.font="10px monospace",e.textAlign="center",e.textBaseline="middle";for(let R=0;R<3;R++){const Y=R*Math.PI*2/3,ie=Math.cos(Y)*K,q=Math.sin(Y)*K,Z=5+Math.sin(i*5+R)*5,A=ie+Math.cos(Y)*Z,U=q+Math.sin(Y)*Z;Math.random()>.5?e.fillRect(A-3,U-3,6,6):e.fillText(Math.random()>.5?"1":"0",A,U)}e.restore()}if(e.restore(),((j=t.customVars)==null?void 0:j.activeSkill)==="intro_roar"){e.save(),e.translate(t.x,t.y);const J=1+Math.sin(i*20)*.2;e.scale(J,J),e.fillStyle="rgba(239, 68, 68, 0.3)",e.beginPath(),e.arc(0,0,t.radius*1.5,0,Math.PI*2),e.fill(),e.restore()}((O=t.customVars)==null?void 0:O.activeSkill)==="crash_dash"&&jh.renderCrashDashTelegraph(e,t),(V=t.customVars)!=null&&V.isAiming&&((H=t.customVars)==null?void 0:H.morphChar)==="007"&&jh.renderAimLine(e,t),e.save(),e.translate(t.x,t.y),e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.clip();const c=6,f=(Math.random()-.5)*c,h=(Math.random()-.5)*c;e.translate(f,h),e.fillStyle="#1a0505",e.fill();let p,u,g,b,v;const x=180,T=((X=t.customVars)==null?void 0:X.activeSkill)==="chaos_morph"&&t.customVars.morphChar;if(T){const J=t.customVars.morphChar,ue=((ee=jt[J])==null?void 0:ee.emojiNormal)||"";p=Lt.getTexture(ue,x,"#ffffff")}else p=Lt.getTexture(t.emoji,x,"#ffffff");u=p.width,g=p.height,b=u/2,v=g/2;const M=.78;e.scale(M,M);const k=8+Math.sin(i*25)*5;e.save(),e.translate(-k,0),e.globalCompositeOperation="screen",e.globalAlpha=.8,e.drawImage(p,-b,-v),e.globalCompositeOperation="source-atop",e.fillStyle="rgba(0, 255, 255, 0.7)",e.fillRect(-b,-v,u,g),e.restore(),e.save(),e.translate(k,0),e.globalCompositeOperation="screen",e.globalAlpha=.8,e.drawImage(p,-b,-v),e.globalCompositeOperation="source-atop",e.fillStyle="rgba(255, 0, 50, 0.7)",e.fillRect(-b,-v,u,g),e.restore(),e.globalCompositeOperation="source-over",e.globalAlpha=1;const C=8,w=g/C;for(let J=0;J<C;J++){const pe=Math.random()<.3?(Math.random()-.5)*40:0,be=J*w;e.drawImage(p,0,be,u,w,-b+pe,-v+be,u,w)}if(T){e.fillStyle="rgba(255, 255, 255, 0.1)";for(let J=0;J<g;J+=4)(J+Math.floor(i*50))%8<4&&e.fillRect(-b,-v+J,u,2);Math.random()<.2&&(e.fillStyle="rgba(255, 255, 255, 0.3)",e.fillRect(-b,-v,u,g))}if(Math.random()<.05&&(e.globalCompositeOperation="lighter",e.fillStyle="rgba(255, 255, 255, 0.8)",e.fillRect(-b,-v,u,g)),t.stunTimer&&t.stunTimer>0&&(e.globalCompositeOperation="saturation",e.fillStyle="black",e.fillRect(-b,-v,u,g),e.globalCompositeOperation="source-over",e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(-b,-v,u,g)),e.restore(),t.stunTimer&&t.stunTimer>0){e.save(),e.translate(t.x,t.y),e.fillStyle="#94a3b8",e.font="bold 20px monospace",e.textAlign="center";const J=".".repeat(Math.floor(i*2)%4);e.fillText(`SYSTEM_REBOOT${J}`,0,-t.radius-20);const pe=1-t.stunTimer/120;e.fillStyle="#1e293b",e.fillRect(-50,-t.radius-10,100,8),e.fillStyle="#3b82f6",e.fillRect(-50,-t.radius-10,100*pe,8),e.restore()}if(T){const J=t.customVars.morphChar,ue=((re=jt[J])==null?void 0:re.name)||"UNKNOWN";e.save(),e.translate(t.x,t.y-t.radius-60),e.translate((Math.random()-.5)*4,(Math.random()-.5)*4),e.font="900 24px monospace",e.textAlign="center",e.fillStyle="#ffffff",e.shadowColor="#facc15",e.shadowBlur=10;const pe=`[ ${ue} ]`;e.fillText(pe,0,0),e.fillStyle="#ef4444",e.globalAlpha=.6,e.fillText(pe,2,0),e.restore()}else if(!t.stunTimer||t.stunTimer<=0){e.save(),e.translate(t.x,t.y),e.fillStyle="#ef4444",e.font="bold 16px monospace",e.textAlign="center",e.shadowColor="red",e.shadowBlur=10;const J=["FATAL ERROR","NULL_PTR","SEGFAULT","NaN"],ue=J[Math.floor(i*10%J.length)];e.fillText(ue,0,-t.radius-20),e.restore()}}},av=(e,t)=>{if(t.phase===2?tv.render(e,t):ev.render(e,t),t.hitFlashTimer&&t.hitFlashTimer>0&&(!t.stunTimer||t.stunTimer<=0)&&(e.save(),e.translate(t.x,t.y),e.globalCompositeOperation="source-atop",e.fillStyle="rgba(255, 255, 255, 0.6)",t.phase===2?(e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill()):(e.beginPath(),e.arc(0,0,80,0,Math.PI*2),e.fill()),e.restore()),t.subState==="building"&&t.customVars&&t.customVars.buildMaxTime&&t.phase!==2&&!(t.customVars&&t.customVars.inCinematicTransition)){e.save(),e.translate(t.x,t.y-160);const i=140,o=12,r=Math.min(1,t.customVars.buildTimer/t.customVars.buildMaxTime);e.fillStyle="#1e293b",e.fillRect(-i/2,0,i,o),e.fillStyle="#a855f7",e.fillRect(-i/2,0,i*r,o),e.restore()}},sv=(e,t,i)=>{if(t.aimAngle!==void 0&&t.customVars&&t.customVars.laserAlpha>.01){const o=t.customVars.isLocked,r=t.customVars.isFiring,c=t.customVars.chargeLevel||0,f=t.customVars.laserAlpha||0,h=4e3;e.save(),e.translate(t.x,t.y),e.rotate(t.aimAngle);const p=140;if(f>.1&&!r&&(e.fillStyle=`rgba(255, 0, 0, ${.1*f})`,e.fillRect(0,-p/2,h,p),e.strokeStyle=`rgba(255, 0, 0, ${.2*f})`,e.lineWidth=1,e.beginPath(),e.moveTo(0,-p/2),e.lineTo(h,-p/2),e.moveTo(0,p/2),e.lineTo(h,p/2),e.stroke()),!r){const g=p-(p-10)*c,b=(.2+c*.6)*f,v=255,x=Math.floor(255*(1-c)),T=Math.floor(255*(1-c));e.fillStyle=`rgba(${v}, ${x}, ${T}, ${b})`,e.fillRect(0,-g/2,h,g),e.fillStyle=`rgba(255, 255, 255, ${.3*c*f})`,e.fillRect(0,-g/4,h,g/2)}if(c>.8||o){const u=(c-.8)/.2*f;e.shadowBlur=15*u,e.shadowColor="#ffffff",e.fillStyle=`rgba(255, 255, 255, ${u})`;const g=o?6:2;e.fillRect(0,-g/2,h,g),e.shadowBlur=0}if(r){e.globalCompositeOperation="lighter";const u=e.createLinearGradient(0,-50,0,50);u.addColorStop(0,"rgba(255, 50, 50, 0)"),u.addColorStop(.4,"rgba(255, 200, 200, 0.8)"),u.addColorStop(.5,"#ffffff"),u.addColorStop(.6,"rgba(255, 200, 200, 0.8)"),u.addColorStop(1,"rgba(255, 50, 50, 0)"),e.fillStyle=u,e.fillRect(0,-50,h,100),e.fillStyle="#fffbeb",e.beginPath(),e.arc(0,0,80,0,Math.PI*2),e.fill(),e.strokeStyle="#ffffff",e.lineWidth=4,e.beginPath(),e.arc(0,0,120,0,Math.PI*2),e.stroke()}e.restore()}i.projectiles.forEach(o=>{if(o.isCaptureBeacon&&o.sourceType===t.id){e.save();const r=Date.now()/30;e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(o.x,o.y),e.lineWidth=4,e.strokeStyle="rgba(168, 85, 247, 0.4)",e.stroke(),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(o.x,o.y),e.lineWidth=2,e.strokeStyle="#e9d5ff",e.setLineDash([15,15]),e.lineDashOffset=-r,e.stroke(),e.restore()}}),i.enemies.forEach(o=>{o.captureState==="being_dragged"&&o.captureTargetId===t.id&&(e.save(),e.strokeStyle="#a855f7",e.lineWidth=4,e.globalAlpha=.5,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(o.x,o.y),e.stroke(),e.globalAlpha=1,e.strokeStyle="#ffffff",e.lineWidth=2,e.setLineDash([10,10]),e.lineDashOffset=Date.now()/20,e.stroke(),e.restore())})},lv=(e,t)=>{if(!t.dashTarget)return;const i=320;if(t.subState==="lock"||t.subState==="dash"){const o=Date.now();e.save(),e.translate(t.dashTarget.x,t.dashTarget.y);let r=i,c=.5;if(t.subState==="lock"){const h=Math.min(1,Math.max(.1,(t.hrStateTimer||0)/120));r=i*h,c=.2+h*.1}else r=i,c=.6;const f=1+Math.sin(o/100)*.05;e.fillStyle=`rgba(220, 38, 38, ${c})`,e.beginPath(),e.arc(0,0,r*(t.subState==="dash"?1:f),0,Math.PI*2),e.fill(),e.strokeStyle="#ef4444",e.lineWidth=t.subState==="dash"?4:2,e.beginPath(),e.arc(0,0,r,0,Math.PI*2),t.subState==="lock"?(e.setLineDash([20,15]),e.lineDashOffset=-o/15):e.setLineDash([]),e.stroke(),t.subState==="dash"&&(e.fillStyle="#ffffff",e.font="900 32px monospace",e.textAlign="center",e.textBaseline="middle",e.shadowColor="#ef4444",e.shadowBlur=10,e.fillText(" IMPACT ",0,-i-30)),e.restore()}if(t.subState==="lock"){const o=Date.now(),r=Math.min(1,(t.hrStateTimer||0)/120);e.save(),e.translate(t.dashTarget.x,t.dashTarget.y),e.save(),e.translate(-t.dashTarget.x,-t.dashTarget.y),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.dashTarget.x,t.dashTarget.y),e.strokeStyle=`rgba(239, 68, 68, ${.4+r*.6})`,e.lineWidth=2+r*2,e.setLineDash([20,10]),e.lineDashOffset=-o/5,e.stroke(),e.restore();const c=300-r*220,f=c*.4;let h="#ffffff";if(r>.5&&(h="#facc15"),r>.8&&(h="#ef4444"),r>.7){const p=(r-.7)*20;e.translate((Math.random()-.5)*p,(Math.random()-.5)*p)}if(e.shadowBlur=15+r*20,e.shadowColor=h,e.strokeStyle=h,e.lineWidth=8+r*4,e.lineCap="square",e.setLineDash([]),e.beginPath(),e.moveTo(-c,-c+f),e.lineTo(-c,-c),e.lineTo(-c+f,-c),e.stroke(),e.beginPath(),e.moveTo(c-f,-c),e.lineTo(c,-c),e.lineTo(c,-c+f),e.stroke(),e.beginPath(),e.moveTo(c,c-f),e.lineTo(c,c),e.lineTo(c-f,c),e.stroke(),e.beginPath(),e.moveTo(-c+f,c),e.lineTo(-c,c),e.lineTo(-c,c-f),e.stroke(),r>.5){e.fillStyle=h,e.font=`900 ${20+r*10}px monospace`,e.textAlign="center",e.textBaseline="middle",e.shadowBlur=0;const p=r>.9?"LOCK":`${Math.floor(r*100)}%`;e.fillText(p,0,0)}e.restore()}},iv=(e,t)=>{if(t.warningTimer&&t.warningTimer>0&&t.dashTarget){e.save(),e.strokeStyle="rgba(239, 68, 68, 0.8)",e.lineWidth=100,e.globalAlpha=.3+(1-t.warningTimer/60)*.4,e.beginPath(),e.moveTo(t.x,t.y);const i=Math.atan2(t.dashTarget.y-t.y,t.dashTarget.x-t.x),o=3e3;e.lineTo(t.x+Math.cos(i)*o,t.y+Math.sin(i)*o),e.stroke(),e.lineWidth=4,e.globalAlpha=1,e.strokeStyle="red",e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(i)*o,t.y+Math.sin(i)*o),e.stroke(),e.restore()}},Ch=(e,t,i,o)=>{const r=Date.now();t.forEach(c=>{if(c.x+c.radius<o.minX||c.x-c.radius>o.maxX||c.y+c.radius<o.minY||c.y-c.radius>o.maxY)return;if(c.config.behavior==="boss"){c.config.type==="boss_kpi"?kh(e,c):c.config.type==="boss_glitch"?Jg(e,c):c.config.type==="boss_ai"?av(e,c):kh(e,c),iv(e,c);return}let f=0,h=0;if(c.hitFlashTimer&&c.hitFlashTimer>0&&(f=(Math.random()-.5)*5,h=(Math.random()-.5)*5,c.hitFlashTimer--),c.config.type==="elite_manager"?sv(e,c,i):c.config.type==="elite_hr"&&lv(e,c),c.config.type==="river_crab"){e.save(),e.translate(c.x+f,c.y+h);let p=0;if(Math.abs(c.vx)>.1||Math.abs(c.vy)>.1)p=Math.atan2(c.vy,c.vx);else{const g=i.player;p=Math.atan2(g.y-c.y,g.x-c.x)}e.rotate(p);const u=c.radius+8;e.beginPath(),e.arc(0,0,u,-.6,.6),e.strokeStyle="#3b82f6",e.lineWidth=4,e.globalAlpha=.6,e.stroke(),e.beginPath(),e.arc(0,0,u-3,-.5,.5),e.strokeStyle="#93c5fd",e.lineWidth=2,e.globalAlpha=.4,e.stroke(),e.restore()}if(!o.isLowQuality&&!c.isUnstable&&(e.fillStyle="rgba(120, 30, 30, 0.6)",e.beginPath(),e.ellipse(c.x+f,c.y+h+c.radius*.1,c.radius,c.radius,0,0,Math.PI*2),e.fill()),c.captureState&&c.captureState!=="free"&&c.captureState!=="latched"){e.save(),e.translate(c.x+f,c.y+h);const p=1+Math.sin(r/100)*.1;e.scale(p,p),e.strokeStyle="#a855f7",e.lineWidth=2,e.setLineDash([5,5]),e.beginPath(),e.arc(0,0,c.radius+5,0,Math.PI*2),e.stroke(),e.restore()}if(!c.isUnstable){const p=Math.floor(c.radius*2),u=c.hitFlashTimer&&c.hitFlashTimer>0?"#ffaaaa":c.config.tier==="epic"?"#fcd34d":"#ffffff";e.save(),e.translate(c.x+f,c.y+h),c.vx<-.1&&e.scale(-1,1);const g=Lt.getTexture(c.emoji,p,u);e.drawImage(g,-g.width/2,-g.height/2),e.restore()}c.stunTimer&&c.stunTimer>0&&(e.save(),e.translate(c.x,c.y-c.radius),e.font="20px sans-serif",e.textAlign="center",e.fillText("",0,0),e.restore()),c.anxietyTimer&&c.anxietyTimer>0&&(e.save(),e.translate(c.x,c.y-c.radius),e.font="16px sans-serif",e.textAlign="center",e.fillText("",15,0),e.restore())})},ov=(e,t,i)=>{t.forEach(o=>{if(o.x+o.radius<i.minX||o.x-o.radius>i.maxX||o.y+o.radius<i.minY||o.y-o.radius>i.maxY||o.hp>=o.maxHp&&o.config.tier==="common"||o.config.behavior==="boss")return;const r=o.radius*2,c=4,f=-o.radius-10;e.fillStyle="#1e293b",e.fillRect(o.x-r/2,o.y+f,r,c);const h=Math.max(0,o.hp/o.maxHp);if(e.fillStyle=o.config.tier==="epic"?"#fcd34d":o.config.tier==="rare"?"#a855f7":"#ef4444",e.fillRect(o.x-r/2,o.y+f,r*h,c),o.tempShield&&o.tempShield>0&&o.maxTempShield){const p=Math.min(1,o.tempShield/o.maxTempShield),u=f-4;e.fillStyle="#1e293b",e.fillRect(o.x-r/2,o.y+u,r,2),e.fillStyle="#cbd5e1",e.fillRect(o.x-r/2,o.y+u,r*p,2)}})},rv=(e,t,i,o,r,c)=>{e.save(),e.translate(t,i),e.save(),e.shadowColor="rgba(0,0,0,0.5)",e.shadowBlur=8*r,e.shadowOffsetX=5*r,e.shadowOffsetY=5*r;const f=o+.6;e.rotate(f);const h=85*r,p=6*r,u=24*r,g=10*r,b=10*r;e.translate(0,b);const v=e.createLinearGradient(0,-p/2,0,p/2);v.addColorStop(0,"#cbd5e1"),v.addColorStop(.5,"#64748b"),v.addColorStop(1,"#94a3b8"),e.fillStyle=v,e.strokeStyle="#475569",e.lineWidth=1,e.beginPath(),e.roundRect(-10*r,-p/2,h+10*r,p,3*r),e.fill(),e.stroke(),e.translate(h,0);const x=e.createLinearGradient(0,-p,0,p);x.addColorStop(0,"#fb923c"),x.addColorStop(1,"#c2410c"),e.fillStyle=x,e.strokeStyle="#9a3412",e.lineWidth=1,e.beginPath(),e.moveTo(0,-p),e.lineTo(g,-u/2),e.lineTo(g,u/2),e.lineTo(0,p),e.fill(),e.stroke(),e.fillStyle="#451a03",e.beginPath(),e.arc(4*r,-4*r,1.5*r,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(4*r,4*r,1.5*r,0,Math.PI*2),e.fill();const T=Date.now()/300,M=Math.min(1,c/5),k=Math.sin(T)*(2*r+M*5*r),C=15*r,w=12,j=(O,V,H,X)=>{e.strokeStyle=O,e.lineWidth=V,e.lineCap="round";for(let ee=0;ee<w;ee++){const re=-u/2+2*r+ee/(w-1)*(u-4*r),J=Math.sin(ee*132.5+X)*(5*r);e.beginPath(),e.moveTo(g,re),e.quadraticCurveTo(g+C/2*H,re+k*.5,g+C*H+Math.abs(J),re+k+J*.2),e.stroke()}};j("#475569",4*r,.9,0),j("#94a3b8",4*r,1.1,100),e.globalAlpha=.8,j("#e2e8f0",2*r,1.15,200),e.globalAlpha=1,e.restore(),e.restore()},nv=(e,t,i,o,r,c)=>{const f=r>1.5,p=!(r>.1);e.save(),e.translate(t,i),e.rotate(o);const u=c+5,g=c+25,b=Math.PI/3*2;e.beginPath(),e.arc(0,0,g,-b/2,b/2),e.arc(0,0,u,b/2,-b/2,!0),e.closePath();const v=e.createLinearGradient(0,-g,0,g);if(f?(v.addColorStop(0,"rgba(255, 255, 255, 0.8)"),v.addColorStop(.5,"rgba(100, 200, 255, 0.4)"),v.addColorStop(1,"rgba(255, 255, 255, 0.8)"),e.shadowColor="#60a5fa",e.shadowBlur=15):p?(v.addColorStop(0,"rgba(200, 230, 255, 0.15)"),v.addColorStop(.5,"rgba(135, 206, 250, 0.05)"),v.addColorStop(1,"rgba(100, 180, 255, 0.1)"),e.shadowBlur=0):(v.addColorStop(0,"rgba(200, 230, 255, 0.3)"),v.addColorStop(.5,"rgba(135, 206, 250, 0.1)"),v.addColorStop(1,"rgba(100, 180, 255, 0.2)"),e.shadowBlur=0),e.fillStyle=v,e.fill(),e.lineWidth=f?3:p?1:2,e.strokeStyle=f?"#ffffff":p?"rgba(186, 230, 253, 0.2)":"rgba(186, 230, 253, 0.5)",e.stroke(),e.save(),e.clip(),e.fillStyle=f?"rgba(255, 255, 255, 0.4)":p?"rgba(255, 255, 255, 0.1)":"rgba(255, 255, 255, 0.2)",e.beginPath(),e.moveTo(g*.5,-g),e.lineTo(g*.8,-g),e.lineTo(u*.5,g),e.lineTo(u*.2,g),e.fill(),e.restore(),f){const x=Date.now()/100,T=g+5;e.strokeStyle=`rgba(255, 255, 255, ${.5+Math.sin(x)*.3})`,e.lineWidth=2,e.lineCap="round",e.beginPath(),e.moveTo(T,-10),e.quadraticCurveTo(T+15,-20,T-5,-30),e.moveTo(T,10),e.quadraticCurveTo(T+15,20,T-5,30),e.stroke()}e.restore()},cv=(e,t,i)=>{for(let r=0;r<12;r++){const c=r/12*Math.PI*2+i*.5,f=Math.cos(c)*t,h=Math.sin(c)*t;e.save(),e.translate(f,h),e.rotate(c+Math.PI/2),e.fillStyle="#D4AF37",e.globalAlpha=.8,e.beginPath(),e.moveTo(0,-4),e.lineTo(3,0),e.lineTo(0,4),e.lineTo(-3,0),e.fill(),e.restore()}},dv=(e,t,i)=>{const o=Date.now()/1e3;let r=t.radius+20;const c=15;if(i.board>=2){e.save(),e.translate(t.x,t.y);const f=t.radius+70,h=e.createRadialGradient(0,0,t.radius,0,0,f);h.addColorStop(0,"rgba(0, 0, 0, 0.8)"),h.addColorStop(.8,"rgba(20, 20, 20, 0.4)"),h.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=h,e.beginPath(),e.arc(0,0,f,0,Math.PI*2),e.fill(),e.strokeStyle="#D4AF37",e.lineWidth=2,e.globalAlpha=.5,e.beginPath(),e.arc(0,0,f*.8,0,Math.PI*2),e.stroke(),cv(e,f*.8,o),e.restore()}if(i.slacker>=2){e.save(),e.translate(t.x,t.y);const f=Math.sin(o*2)*.05+1,h=e.createRadialGradient(0,0,r*.5,0,0,r);h.addColorStop(0,"rgba(74, 222, 128, 0)"),h.addColorStop(.8,"rgba(74, 222, 128, 0.15)"),h.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=h,e.scale(f,f),e.beginPath(),e.arc(0,0,r,0,Math.PI*2),e.fill(),e.restore(),r+=c}if(i.hardcore>=2){e.save(),e.translate(t.x,t.y),e.rotate(o);const f=12,h=r+5,p=r-2;t.isOverclocked?(e.shadowColor="#ef4444",e.shadowBlur=10,e.strokeStyle="#fca5a5",e.lineWidth=3):(e.strokeStyle="#ef4444",e.lineWidth=1.5),e.beginPath();for(let u=0;u<=f*2;u++){const g=u/(f*2)*Math.PI*2,b=u%2===0?h:p;e.lineTo(Math.cos(g)*b,Math.sin(g)*b)}e.closePath(),e.globalAlpha=t.isOverclocked?.8:.4,e.stroke(),e.restore(),r+=c}if(i.capital>=2){e.save(),e.translate(t.x,t.y),e.rotate(-o*.5),e.beginPath(),e.arc(0,0,r,0,Math.PI*2),e.strokeStyle="#facc15",e.lineWidth=1.5,e.setLineDash([5,10]),e.stroke();const f=o*2.5%(Math.PI*2),h=Math.cos(f)*r,p=Math.sin(f)*r;e.fillStyle="#fef08a",e.beginPath(),e.arc(h,p,4,0,Math.PI*2),e.fill(),e.restore(),r+=c}if(i.tech>=2){e.save(),e.translate(t.x,t.y),e.rotate(o*.3),e.beginPath(),e.arc(0,0,r,0,Math.PI*1.5),e.strokeStyle="#3b82f6",e.lineWidth=2,e.setLineDash([10,5,2,5]),e.stroke(),e.fillStyle="#60a5fa";for(let f=0;f<3;f++){const h=f*(Math.PI*.66);e.fillRect(Math.cos(h)*r-3,Math.sin(h)*r-3,6,6)}e.restore(),r+=c}if(i.market>=2){e.save(),e.translate(t.x,t.y);const f=3;for(let h=0;h<f;h++){const p=(o*.5+h/f)%1,u=r+p*30,g=1-p;e.beginPath(),e.arc(0,0,u,0,Math.PI*2),e.strokeStyle=`rgba(168, 85, 247, ${g*.6})`,e.lineWidth=1.5,e.stroke()}e.restore(),r+=c+10}if(i.hr>=2){e.save(),e.translate(t.x,t.y);const f=3,h=o*2;for(let p=0;p<f;p++){const u=h+p/f*Math.PI*2,g=Math.cos(u)*r,b=Math.sin(u)*r;e.fillStyle="#22d3ee",e.shadowColor="#22d3ee",e.shadowBlur=10,e.beginPath(),e.arc(g,b,6,0,Math.PI*2),e.fill(),e.shadowBlur=0,e.beginPath(),e.arc(0,0,r,u-.5,u),e.strokeStyle="rgba(34, 211, 238, 0.5)",e.lineWidth=3,e.setLineDash([]),e.stroke()}e.restore(),r+=c}if(i.board>=6){const f=Math.sin(o*3)*5,h=t.y-t.radius-40+f;e.save(),e.translate(t.x,h),e.fillStyle="#facc15",e.strokeStyle="#a16207",e.lineWidth=2,e.lineJoin="round",e.beginPath(),e.moveTo(-15,0),e.lineTo(-20,-15),e.lineTo(-10,-5),e.lineTo(0,-25),e.lineTo(10,-5),e.lineTo(20,-15),e.lineTo(15,0),e.closePath(),e.fill(),e.stroke(),e.fillStyle="#ef4444",e.beginPath(),e.arc(0,-10,3,0,Math.PI*2),e.fill(),e.restore()}},Nh=(e,t,i)=>{if(!t.customTimers.neon_casting_visual||t.customTimers.neon_casting_visual<=0)return;const r=240-t.customTimers.board_missile;if(r>=0&&r<100){e.save(),e.translate(t.x,t.y),e.globalCompositeOperation="lighter";let c=1;r<10?c=r/10:r>70&&(c=1-(r-70)/30);const f=t.radius,h=22,p=-180,u=f*1.8,g=u*.9,b=f*5,v=f*2.2;if(i==="back"){e.fillStyle=`rgba(255, 255, 230, ${1*c})`,e.beginPath(),e.ellipse(0,h,u,u*.25,0,0,Math.PI*2),e.fill();const x=e.createLinearGradient(0,h,0,p);x.addColorStop(0,`rgba(255, 255, 240, ${.9*c})`),x.addColorStop(.6,`rgba(255, 215, 0, ${.5*c})`),x.addColorStop(1,"rgba(255, 200, 0, 0)");const T=(k,C)=>{const w=b*k,j=v*C;e.beginPath(),e.moveTo(-g*.2,h),e.lineTo(-g*k,h),e.lineTo(-w,p),e.lineTo(-j,p),e.fill(),e.beginPath(),e.moveTo(g*.2,h),e.lineTo(g*k,h),e.lineTo(w,p),e.lineTo(j,p),e.fill()};e.fillStyle=x,e.globalAlpha=.5,T(1.2,.3);const M=e.createLinearGradient(0,h,0,p*.8);M.addColorStop(0,`rgba(255, 255, 255, ${.9*c})`),M.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=M,e.globalAlpha=1,T(.8,1.1)}else if(i==="front"){e.save(),e.beginPath(),e.arc(0,0,f,0,Math.PI*2),e.clip();const x=e.createLinearGradient(0,f,0,-f*.5);x.addColorStop(0,`rgba(255, 255, 240, ${1*c})`),x.addColorStop(.3,`rgba(255, 230, 150, ${.9*c})`),x.addColorStop(.6,`rgba(255, 200, 0, ${.5*c})`),x.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=x,e.fillRect(-f,-f,f*2,f*2),e.restore();const T=15;e.fillStyle=`rgba(255, 255, 220, ${.8*c})`;for(let M=0;M<T;M++){const k=M*13+r,C=Math.abs(p-h),w=h-(r*12+M*40)%(C+50),j=(w-h)/(p-h),O=u+(b-u)*j,V=v*j;let H=(Math.sin(k)*.5+.5)*O*(M%2===0?1:-1);Math.abs(H)<V&&(H=(V+5)*(H>0?1:-1));const X=2+Math.sin(M*32)*2;e.beginPath(),e.arc(H,w,X,0,Math.PI*2),e.fill()}}e.restore()}},uv=(e,t)=>{const i=t.player;if(i.characterId==="cleaner"&&!t.projectiles.some(v=>v.sourceType==="cleaner"&&v.renderStyle==="melee_swing")){const v=i.radius/24,x=Math.hypot(i.vx,i.vy);rv(e,i.x,i.y,i.mopAngle||0,v,x)}const o=ye.getSynergyCounts(i.items),r=ye.getActiveTiers(o);if(dv(e,i,r),t.player.items.includes("")&&(e.save(),e.beginPath(),e.arc(t.player.x,t.player.y,350,0,Math.PI*2),e.fillStyle="rgba(168, 85, 247, 0.1)",e.fill(),e.strokeStyle="rgba(168, 85, 247, 0.3)",e.lineWidth=2,e.stroke(),e.restore()),t.player.items.includes("")){e.save(),e.translate(i.x,i.y),e.fillStyle="rgba(139, 92, 246, 0.1)",e.beginPath(),e.arc(0,0,150,0,Math.PI*2),e.fill();const v=Date.now()/1e3;e.rotate(v*.5),e.strokeStyle="rgba(168, 85, 247, 0.6)",e.lineWidth=2,e.setLineDash([15,10]),e.beginPath(),e.arc(0,0,150,0,Math.PI*2),e.stroke(),e.rotate(-v*1),e.strokeStyle="rgba(139, 92, 246, 0.3)",e.lineWidth=2,e.setLineDash([5,5]),e.beginPath(),e.arc(0,0,150*.6,0,Math.PI*2),e.stroke(),e.restore()}i.shield>0&&(e.strokeStyle="#3b82f6",e.lineWidth=4,e.globalAlpha=.4+Math.sin(Date.now()/200)*.1,e.beginPath(),e.arc(i.x,i.y,i.radius+12,0,Math.PI*2),e.stroke(),e.globalAlpha=1);const c=i.isOverclocked?(Math.random()-.5)*4:0,f=i.isOverclocked?(Math.random()-.5)*4:0;if(i.isOverclocked){e.save(),e.translate(i.x+c,i.y+f);const b=Date.now()/200,v=1+Math.sin(b)*.2,x=e.createRadialGradient(0,0,i.radius*.5,0,0,i.radius*1.5);x.addColorStop(0,"rgba(239, 68, 68, 0.8)"),x.addColorStop(1,"rgba(255, 0, 0, 0)"),e.fillStyle=x,e.globalAlpha=.6,e.scale(v,v),e.beginPath(),e.arc(0,0,i.radius*1.5,0,Math.PI*2),e.fill(),e.restore()}e.fillStyle="#000",e.beginPath(),e.ellipse(i.x+c,i.y+f,i.radius,i.radius,0,0,Math.PI*2),e.fill();const h=Math.floor(i.radius*2);let p=i.emoji;i.isDying?p="":i.isOverclocked&&(p=""),i.invulnerableTime>0&&Math.floor(Date.now()/50)%2===0&&(e.globalAlpha=.5);const u=i.isOverclocked?"#fecaca":"white",g=Lt.getTexture(p,h,u);if(e.drawImage(g,i.x+c-g.width/2,i.y+f-g.height/2),e.globalAlpha=1,i.items.includes("")){const b=Math.hypot(i.vx,i.vy);nv(e,i.x,i.y,i.facingAngle||0,b,i.radius)}if(i.isCharmed){e.save(),e.font="bold 16px sans-serif",e.fillStyle="#f472b6",e.textAlign="center";const b=Math.sin(Date.now()/200)*5;e.fillText("...",i.x,i.y-i.radius-20+b),Math.floor(Date.now()/200)%2===0&&e.fillText("",i.x+20,i.y-i.radius-30+b),e.restore()}if(!i.isDying){const x=-i.radius-15;e.fillStyle="#1f2937",e.fillRect(i.x-50/2,i.y+x,50,5);const T=Math.max(0,i.hp/i.maxHp);if(e.fillStyle=T<.3?"#ef4444":"#22c55e",e.fillRect(i.x-50/2,i.y+x,50*T,5),i.maxShield>0){const M=x-5-2;e.fillStyle="#1e3a8a",e.fillRect(i.x-50/2,i.y+M,50,5);const k=Math.min(1,Math.max(0,i.shield/i.maxShield));e.fillStyle="#3b82f6",e.fillRect(i.x-50/2,i.y+M,50*k,5)}if((r.hardcore||0)>=6){const M=x+5+2,k=50,C=3;e.fillStyle="#451a03",e.fillRect(i.x-k/2,i.y+M,k,C);const w=Math.min(1,i.heatValue/i.maxHeat);e.fillStyle=i.isOverclocked?"#ef4444":"#f97316",i.isOverclocked&&Math.floor(Date.now()/100)%2===0&&(e.fillStyle="#facc15"),e.fillRect(i.x-k/2,i.y+M,k*w,C)}}},fv=(e,t,i)=>{t.floatingTexts.forEach(o=>{if(!(o.x<i.minX||o.x>i.maxX||o.y<i.minY||o.y>i.maxY)){if(e.save(),e.textAlign="center",e.textBaseline="middle",o.type==="chat")if(e.font='16px "Noto Sans SC", sans-serif',i.isLowQuality)e.fillStyle="white",e.fillText(o.text,o.x,o.y-25);else{const c=e.measureText(o.text).width+20,f=30;e.fillStyle="white",e.strokeStyle="black",e.lineWidth=2,e.beginPath(),e.roundRect?e.roundRect(o.x-c/2,o.y-40,c,f,10):e.rect(o.x-c/2,o.y-40,c,f),e.fill(),e.stroke(),e.fillStyle="black",e.fillText(o.text,o.x,o.y-25)}else{const r=o.scale||1,c=o.type==="gold"?28:24,f=Math.floor(c*r);if(o.isCrit){e.save(),e.translate(o.x,o.y),e.scale(r,r),e.rotate((Math.random()-.5)*.2),e.fillStyle="#ef4444",e.globalAlpha=.8;const h=8,p=30,u=15;e.beginPath();for(let g=0;g<h*2;g++){const b=g/(h*2)*Math.PI*2,v=g%2===0?p:u;e.lineTo(Math.cos(b)*v,Math.sin(b)*v)}e.closePath(),e.fill(),e.strokeStyle="#facc15",e.lineWidth=2,e.stroke(),e.restore()}e.fillStyle=o.color,e.font=`900 ${f}px "Arial Black", "Noto Sans SC", sans-serif`,e.strokeStyle="black",e.lineWidth=4,e.lineJoin="round",e.strokeText(o.text,o.x,o.y),e.fillText(o.text,o.x,o.y)}e.restore()}})},hv=(e,t,i,o,r)=>{e.save(),e.translate(t-240/2,i-100/2),e.fillStyle="rgba(0,0,0,0.5)",e.fillRect(4,4,240,100),e.fillStyle="#c0c0c0",e.fillRect(0,0,240,100),e.fillStyle="#ffffff",e.fillRect(0,0,240,2),e.fillRect(0,0,2,100),e.fillStyle="#808080",e.fillRect(238,0,2,100),e.fillRect(0,98,240,2),e.fillStyle="#000080",e.fillRect(3,3,234,20),e.font="bold 12px monospace",e.fillStyle="white",e.textAlign="left",e.fillText(o,8,17),e.fillStyle="#c0c0c0",e.fillRect(220,5,14,14),e.fillStyle="#000",e.font="bold 10px monospace",e.textAlign="center",e.fillText("x",227,15),e.fillStyle="red",e.beginPath(),e.arc(30,60,15,0,Math.PI*2),e.fill(),e.strokeStyle="white",e.lineWidth=3,e.moveTo(20,50),e.lineTo(40,70),e.moveTo(40,50),e.lineTo(20,70),e.stroke(),e.font='12px "Noto Sans SC", sans-serif',e.fillStyle="black",e.textAlign="left",e.fillText(r,60,55),e.fillStyle="#c0c0c0",e.fillRect(90,75,60,20),e.strokeStyle="#000",e.lineWidth=1,e.strokeRect(90,75,60,20),e.fillStyle="black",e.textAlign="center",e.fillText("OK",120,90),e.restore()},mv=(e,t,i,o)=>{if(o<=0)return;e.save(),e.globalCompositeOperation="overlay";const r=Math.floor(o*100);for(let c=0;c<r;c++){const f=Math.random()*t,h=Math.random()*i,p=Math.random()*200,u=2+Math.random()*4;e.fillStyle=`rgba(255, 255, 255, ${Math.random()*.3*o})`,e.fillRect(f,h,p,u)}e.restore()},pv=(e,t,i,o)=>{var f,h,p;const r=t.timeAlive;if(r-t.player.lastDamageTime<15){const u=1-(r-t.player.lastDamageTime)/15,g=e.createRadialGradient(i/2,o/2,o*.4,i/2,o/2,o*.8);g.addColorStop(0,"rgba(255, 0, 0, 0)"),g.addColorStop(1,`rgba(255, 0, 0, ${.4*u})`),e.save(),e.fillStyle=g,e.fillRect(0,0,i,o),e.restore()}const c=t.enemies.find(u=>u.config.behavior==="boss");if(c&&((f=c.customVars)!=null&&f.inCinematicTransition)){const g=600-(c.customVars.transitionTimer||0),b=Math.min(.9,g/120);if(e.fillStyle=`rgba(0, 0, 0, ${b})`,e.fillRect(0,0,i,o),c.customVars.popups&&c.customVars.popups.forEach(v=>{const x=v.x*i,T=v.y*o;hv(e,x,T,v.title,v.text)}),g>=360&&g<540){const v=(g-360)/180;if(mv(e,i,o,v),Math.random()<.3){const x=(Math.random()-.5)*20,T=Math.random()*50,M=Math.random()*o;try{const k=e.getImageData(0,M,i,T);e.putImageData(k,x,M)}catch{}e.fillStyle=Math.random()>.5?"rgba(255, 0, 0, 0.2)":"rgba(0, 255, 255, 0.2)",e.fillRect(0,M,i,T)}}if(g>=540){const x=g-540;if(e.fillStyle="black",x<15){const T=x/15,M=Math.pow(T,3);e.fillRect(0,0,i,o/2*M),e.fillRect(0,o-o/2*M,i,o/2*M);const k=i*(M*.2);e.fillRect(0,0,k,o),e.fillRect(i-k,0,k,o),e.fillStyle="white";const C=4*(1-M);e.fillRect(0,o/2-C/2,i,C)}else{e.fillRect(0,0,i,o);const T=x-15;if(T<30){const M=1-T/30;e.fillStyle=`rgba(255, 255, 255, ${M})`;const k=4*M;e.beginPath(),e.arc(i/2,o/2,k,0,Math.PI*2),e.fill(),e.shadowBlur=20*M,e.shadowColor="white",e.fill(),e.shadowBlur=0}}}}if(c&&c.customVars&&c.customVars.whiteoutTimer>0){c.customVars.whiteoutTimer--;const u=c.customVars.whiteoutTimer/60;e.fillStyle=`rgba(255, 255, 255, ${u})`,e.fillRect(0,0,i,o)}if(t.isWaveClearing&&(e.save(),e.fillStyle="rgba(0,0,0,0.5)",e.fillRect(0,o/2-60,i,120),e.font='900 60px "Noto Sans SC", sans-serif',e.fillStyle="#fcd34d",e.textAlign="center",e.textBaseline="middle",e.strokeStyle="black",e.lineWidth=8,e.strokeText("...",i/2,o/2),e.fillText("...",i/2,o/2),e.restore()),c){const u=Math.max(0,c.hp/c.maxHp),g=Math.min(600,i-40),b=24,v=i/2-g/2,x=120;e.save(),e.fillStyle=c.phase===3?"#3f3f46":c.phase===2?"#7f1d1d":"#ef4444",e.font='bold 24px "Noto Sans SC", sans-serif',e.textAlign="center";let T=c.config.name||"BOSS";c.config.name||(c.config.type==="boss_kpi"?T="KPI ":c.config.type==="boss_glitch"?T="Bug ":c.config.type==="boss_ai"?T="AI ":T=c.config.description.split("")[0]||"BOSS");const M=c.isTransitioning||(h=c.customVars)!=null&&h.inCinematicTransition?"...":c.phase===3?`${T} ()`:c.phase===2?`${T} ()`:T;if(e.strokeStyle="black",e.lineWidth=3,e.strokeText(M,i/2,x-10),e.fillText(M,i/2,x-10),e.fillStyle="#1f2937",e.strokeStyle=c.phase===3?"#94a3b8":c.phase===2?"#ef4444":"#fca5a5",e.lineWidth=2,e.fillRect(v,x,g,b),e.strokeRect(v,x,g,b),!c.isTransitioning&&!((p=c.customVars)!=null&&p.inCinematicTransition)){if(e.fillStyle=c.phase===3?"#dc2626":c.phase===2?"#991b1b":"#dc2626",e.fillRect(v,x,g*u,b),c.tempShield&&c.tempShield>0&&c.maxTempShield){const k=Math.min(1,c.tempShield/c.maxTempShield);e.fillStyle="#94a3b8",e.fillRect(v,x,g*k,b),e.fillStyle="white",e.font="bold 12px monospace",e.fillText(` ${Math.ceil(c.tempShield)}`,v+g*k,x-5)}e.fillStyle="white",e.font="bold 14px sans-serif",e.strokeStyle="black",e.lineWidth=2,e.strokeText(`${Math.ceil(c.hp)} / ${Math.ceil(c.maxHp)}`,i/2,x+17),e.fillText(`${Math.ceil(c.hp)} / ${Math.ceil(c.maxHp)}`,i/2,x+17)}else{const k=Date.now()%500/500;e.fillStyle=`rgba(255, 255, 255, ${k})`,e.fillRect(v,x,g,b)}e.restore()}},jc=(e,t,i,o,r,c=40)=>{e.save(),e.font=`900 ${c}px "Noto Sans SC", monospace`,e.textAlign="center",e.textBaseline="middle",e.globalCompositeOperation="screen",e.fillStyle="#ff0000",e.fillText(t,i-r,o),e.fillStyle="#00ffff",e.fillText(t,i+r,o),e.globalCompositeOperation="source-over",e.fillStyle="#ffffff",e.fillText(t,i,o),e.restore()},yv=(e,t,i,o)=>{e.fillStyle=Math.random()>.5?"#ff00ff":"#00ffff";for(let c=0;c<10;c++){if(Math.random()>.3)continue;const f=Math.random()*t,h=Math.random()*i,p=Math.random()*200,u=2+Math.random()*10;e.fillRect(f,h,p,u)}},bv=(e,t,i,o)=>{const{timer:r,phase:c,lostGold:f}=o.reviveSequence,h=t/2,p=i/2,u=Date.now();let g=0,b=0;if(c==="start"){const v=r/20;e.fillStyle=`rgba(50, 0, 0, ${.5*v})`,e.fillRect(0,0,t,i),g=(Math.random()-.5)*20*(1-v),b=(Math.random()-.5)*20*(1-v),e.save(),e.translate(g,b),r%2===0&&jc(e,"FATAL ERROR",h,p,5,80),e.restore();return}if(c==="coin_enter"&&(g=(Math.random()-.5)*3,b=(Math.random()-.5)*3),e.save(),e.translate(g,b),e.fillStyle="rgba(0, 0, 0, 0.92)",e.fillRect(0,0,t,i),c==="coin_enter"){e.font="14px monospace",e.fillStyle="#00ff00",e.textAlign="left";const v=["> DETECTING LIFE SIGNS... 0%","> CHECKING ASSETS... FOUND "+f+" GOLD","> INITIATING ILLEGAL OVERRIDE...","> BYPASSING DEATH PROTOCOLS...","> INJECTING FUNDS...","> CORRUPTING SYSTEM LOGS...","> REWRITING SOUL_DATA...","> PENDING CONFIRMATION..."],x=20,T=p+150,M=Math.floor(r/5);for(let w=0;w<v.length;w++)if(w<M){const j=Math.max(0,1-(v.length-w)*.1+r/200);e.globalAlpha=Math.min(1,j),e.fillText(v[w],h-200,T+w*x)}e.globalAlpha=1,e.save(),e.translate(h,p);const k=1+r/100;e.scale(k,k),e.rotate(r*.1),e.strokeStyle="#00ffff",e.lineWidth=2;const C=50;if(e.beginPath(),e.rect(-C,-C,C*2,C*2),e.stroke(),e.save(),e.rotate(Math.PI/4),e.strokeStyle="#ff00ff",e.beginPath(),e.rect(-C*.8,-C*.8,C*1.6,C*1.6),e.stroke(),e.restore(),r>20){e.strokeStyle="rgba(255, 255, 255, 0.5)",e.beginPath();for(let w=0;w<4;w++){e.moveTo(0,0);const j=w/4*Math.PI*2+r*.05;e.lineTo(Math.cos(j)*C*2,Math.sin(j)*C*2)}e.stroke()}if(e.restore(),r<100){const w=200-h,j=80-p;e.save(),e.translate(h,p);const O=20;for(let V=0;V<O;V++){const H=(u/300+V/O)%1,X=w*(1-H),ee=j*(1-H);e.fillStyle=V%2===0?"#ffff00":"#00ff00";const re=3+H*5;Math.random()>.5?e.fillText(Math.random()>.5?"1":"0",X,ee):e.fillRect(X,ee,re,re)}e.restore()}if(r>60){const w=Math.random()*5,j=80+Math.sin(u/50)*5;e.save(),r>100&&r%10<3&&(e.globalCompositeOperation="overlay",e.fillStyle="rgba(255, 255, 255, 0.3)",e.fillRect(h-300,p-100,600,200)),jc(e,"",h,p-120,3+w,j),e.font="bold 24px monospace",e.fillStyle="#ff0055",e.textAlign="center",e.fillText(`SYSTEM_OVERRIDE: -${f} GOLD`,h,p-60),e.restore()}Math.random()>.7&&(e.globalCompositeOperation="difference",yv(e,t,i),e.globalCompositeOperation="source-over")}if(c==="shatter"){const v=r/60,x=i*(r/40);r<40&&(e.shadowColor="#00ffff",e.shadowBlur=20,e.fillStyle="#00ffff",e.fillRect(0,x,t,4),e.shadowBlur=0,e.save(),e.globalCompositeOperation="difference",e.fillStyle="rgba(255, 255, 255, 0.8)",e.fillRect(0,x-20,t,40),e.restore());const T=Math.max(0,1-r/15);if(T>0){const M=e.createRadialGradient(h,p,i*.4,h,p,i);M.addColorStop(0,"rgba(255, 255, 255, 0)"),M.addColorStop(1,`rgba(255, 255, 255, ${.4*T})`),e.fillStyle=M,e.fillRect(0,0,t,i)}if(r<50){const M=1+(1-v)*.5;e.save(),e.translate(h,p),e.scale(M,M),jc(e,"REBOOT SUCCESS",0,0,3*(1-v),60),e.restore()}}e.restore()},gv=(e,t,i)=>{if(t.isPaused||!i)return;const o=t.player,r=i.x,c=i.y,f=e.createLinearGradient(o.x,o.y,r,c);f.addColorStop(0,"rgba(255, 255, 255, 0.4)"),f.addColorStop(.5,"rgba(255, 255, 255, 0.1)"),f.addColorStop(1,"rgba(255, 255, 255, 0)"),e.save(),e.beginPath(),e.moveTo(o.x,o.y),e.lineTo(r,c),e.strokeStyle=f,e.lineWidth=2,e.setLineDash([20,15]),e.lineDashOffset=-Date.now()/4,e.stroke(),e.restore()},Eh={boundaryCache:null,cachedWidth:0,cachedHeight:0,getBoundaryCache(e,t){if(this.boundaryCache&&this.cachedWidth===e&&this.cachedHeight===t)return this.boundaryCache;const i=document.createElement("canvas"),o=60;i.width=e+o*2,i.height=t+o*2;const r=i.getContext("2d");if(!r)return i;r.translate(o,o),r.lineWidth=12,r.strokeStyle="rgba(14, 165, 233, 0.2)",r.strokeRect(0,0,e,t),r.lineWidth=6,r.strokeStyle="rgba(14, 165, 233, 0.4)",r.strokeRect(0,0,e,t),r.lineWidth=2,r.strokeStyle="#0ea5e9",r.strokeRect(0,0,e,t),r.lineWidth=2,r.strokeStyle="rgba(168, 85, 247, 0.6)",r.strokeRect(6,6,e-12,t-12),r.lineWidth=8,r.strokeStyle="#e0f2fe";const c=60;return r.beginPath(),r.moveTo(0,c),r.lineTo(0,0),r.lineTo(c,0),r.stroke(),r.beginPath(),r.moveTo(e-c,0),r.lineTo(e,0),r.lineTo(e,c),r.stroke(),r.beginPath(),r.moveTo(e,t-c),r.lineTo(e,t),r.lineTo(e-c,t),r.stroke(),r.beginPath(),r.moveTo(c,t),r.lineTo(0,t),r.lineTo(0,t-c),r.stroke(),this.boundaryCache=i,this.cachedWidth=e,this.cachedHeight=t,i},renderBackground(e,t){const i=-t.mapWidth/2,o=-t.mapHeight/2;e.save(),e.beginPath(),e.rect(i,o,t.mapWidth,t.mapHeight),e.clip(),e.strokeStyle="rgba(30, 41, 59, 0.5)",e.lineWidth=2,e.beginPath();const r=100;for(let p=i;p<=i+t.mapWidth;p+=r)e.moveTo(p,o),e.lineTo(p,o+t.mapHeight);for(let p=o;p<=o+t.mapHeight;p+=r)e.moveTo(i,p),e.lineTo(i+t.mapWidth,p);e.stroke(),e.restore();const c=this.getBoundaryCache(t.mapWidth,t.mapHeight),f=60;e.drawImage(c,i-f,o-f),e.save(),e.globalCompositeOperation="lighter",e.strokeStyle="rgba(6, 182, 212, 0.5)",e.lineWidth=4;const h=Date.now()/50;e.setLineDash([50,50]),e.lineDashOffset=-h,e.strokeRect(i,o,t.mapWidth,t.mapHeight),e.restore()},renderMapMask(e,t){const i=t.mapWidth,o=t.mapHeight,r=1e4;e.fillStyle="#0f172a",e.fillRect(-r/2,-r/2-o/2,r,r/2),e.fillRect(-r/2,o/2,r,r/2),e.fillRect(-r/2-i/2,-o/2,r/2,o),e.fillRect(i/2,-o/2,r/2,o)}},vv=(e,t,i)=>{if(t.type==="glitch_memory_leak"){const o=Date.now()/1e3;e.save(),e.translate(t.x,t.y),e.fillStyle="rgba(20, 40, 20, 0.8)",e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill(),e.globalCompositeOperation="lighter",e.rotate(o),e.strokeStyle="#22c55e",e.lineWidth=2,e.setLineDash([10,20]),e.beginPath(),e.arc(0,0,t.radius*.9,0,Math.PI*2),e.stroke(),e.rotate(-o*1.5),e.strokeStyle="#15803d",e.setLineDash([5,10]),e.beginPath(),e.arc(0,0,t.radius*.7,0,Math.PI*2),e.stroke(),e.fillStyle="#4ade80",e.font="14px monospace",e.textAlign="center",e.textBaseline="middle";const r=["0","1","x","F"];for(let f=0;f<8;f++){const h=f/8*Math.PI*2+o*.5,p=t.radius*.5,u=Math.cos(h)*p,g=Math.sin(h)*p,b=r[Math.floor((o*5+f)%r.length)];e.fillText(b,u,g)}e.rotate(0),e.strokeStyle="#22c55e",e.lineWidth=3,e.setLineDash([]),e.beginPath();const c=20;for(let f=0;f<=c;f++){const h=f/c*Math.PI*2,p=Math.sin(o*10+f)*5,u=t.radius+p,g=Math.cos(h)*u,b=Math.sin(h)*u;f===0?e.moveTo(g,b):e.lineTo(g,b)}e.closePath(),e.stroke(),e.restore();return}if(t.type==="ai_laser_link"){const o=t.angle||0,r=t.width||1e3;e.save(),e.translate(t.x,t.y),e.rotate(o),e.globalCompositeOperation="lighter";const c=Math.max(3,Math.floor(r/60)),f=r/c;e.shadowBlur=20,e.shadowColor="#a855f7",e.strokeStyle="#9333ea",e.lineWidth=6,e.beginPath(),e.moveTo(-r/2,0);for(let h=1;h<c;h++){const p=-r/2+h*f,u=(Math.random()-.5)*30;e.lineTo(p,u)}if(e.lineTo(r/2,0),e.stroke(),!i.isLowQuality){const h=Date.now();e.shadowColor="#4ade80",e.shadowBlur=10,e.strokeStyle="#22c55e",e.lineWidth=3,e.setLineDash([30,40]),e.lineDashOffset=-h/8,e.beginPath(),e.moveTo(-r/2,0);for(let p=1;p<c;p++){const u=-r/2+p*f,g=Math.sin(p+h/100)*10;e.lineTo(u,g)}e.lineTo(r/2,0),e.stroke()}e.restore();return}if(t.type==="glitch_square"){const o=t.maxLife||90,r=t.life,c=20,f=r>c,h=t.width||120,p=h/2;if(e.save(),e.translate(t.x,t.y),f){const g=1.8-(o-r)/(o-c)*.8,b=h*g,v=b/2,x=r<c+10,T=t.color||"#a855f7",M=x?"#ffffff":T;e.fillStyle=T,e.globalAlpha=.1,e.fillRect(-p,-p,h,h),e.globalAlpha=.3;const k=-p+Date.now()%1e3/1e3*h;e.fillRect(-p,k,h,4),e.globalAlpha=.9,e.lineWidth=3,e.strokeStyle=M;const C=b*.25;if(e.beginPath(),e.moveTo(-v,-v+C),e.lineTo(-v,-v),e.lineTo(-v+C,-v),e.moveTo(v-C,-v),e.lineTo(v,-v),e.lineTo(v,-v+C),e.moveTo(v,v-C),e.lineTo(v,v),e.lineTo(v-C,v),e.moveTo(-v+C,v),e.lineTo(-v,v),e.lineTo(-v,v-C),e.stroke(),e.font="bold 10px monospace",e.fillStyle=M,e.textAlign="center",x)e.fillText("LOCKING...",0,-v-5);else{const w=Math.floor(b);e.fillText(`DIST: ${w}`,0,-v-5)}}else{e.fillStyle=t.color||"#ef4444",e.fillRect(-p,-p,h,h),e.fillStyle="#000000";for(let u=0;u<5;u++){const g=(Math.random()-.5)*h,b=(Math.random()-.5)*h,v=10+Math.random()*20;e.fillRect(g,b,v,v)}}e.restore();return}if(t.type==="glitch_bsod_wall"){const o=t.width||100,r=t.height||60;e.save(),e.translate(t.x,t.y),t.angle!==void 0?e.rotate(t.angle):r>o&&e.rotate(Math.PI/2);const c=t.angle!==void 0?o:r>o?r:o,f=t.angle!==void 0?r:r>o?o:r;e.strokeStyle="#f97316",e.lineWidth=4,e.globalAlpha=.95,e.fillStyle="rgba(67, 20, 7, 0.95)",e.fillRect(-c/2,-f/2,c,f),e.save(),e.beginPath(),e.rect(-c/2,-f/2,c,f),e.clip();const h=20;e.strokeStyle="rgba(251, 146, 60, 0.5)",e.lineWidth=1;const p=Date.now()/50%h;for(let x=-c/2;x<=c/2;x+=h)e.moveTo(x,-f/2),e.lineTo(x,f/2);for(let x=-f/2+p;x<=f/2;x+=h)e.moveTo(-c/2,x),e.lineTo(c/2,x);e.stroke(),e.restore(),e.save();const u="";e.font='900 20px "Noto Sans SC", sans-serif',e.textAlign="center",e.textBaseline="middle";const g=.5+Math.sin(Date.now()/150)*.5;e.fillStyle=`rgba(255, 50, 50, ${.8+g*.2})`,e.shadowColor="#ef4444",e.shadowBlur=10;let b=(t.angle||0)%(Math.PI*2);if(b<0&&(b+=Math.PI*2),Math.abs(Math.sin(b))>.707){const M=-(20*u.length)/2+20/2;for(let k=0;k<u.length;k++)e.save(),e.translate(M+k*20,0),e.rotate(-(t.angle||0)),e.fillText(u[k],0,0),e.restore()}else Math.cos(b)<0?(e.save(),e.rotate(Math.PI),e.fillText(u,0,0),e.restore()):e.fillText(u,0,0);e.restore(),e.strokeStyle="#ea580c",e.lineWidth=3,e.shadowColor="#ea580c",e.shadowBlur=15,e.strokeRect(-c/2,-f/2,c,f),e.restore();return}if(t.type==="glitch_lag_marker"){const o=Date.now();e.save(),e.translate(t.x,t.y);const r=1+Math.sin(o/200)*.1;e.scale(r,r);const c="010101ERROR!BUG!",f=12;e.font="bold 12px monospace",e.fillStyle="#00ff00",e.shadowBlur=5,e.shadowColor="#00ff00",e.rotate(o/1e3);for(let p=0;p<f;p++){const u=p/f*Math.PI*2,g=c[(p+Math.floor(o/200))%c.length];e.save(),e.rotate(u),e.translate(0,-35),e.fillText(g,0,0),e.restore()}e.beginPath(),e.arc(0,0,5,0,Math.PI*2),e.fill(),e.restore();const h=(t.life/60).toFixed(1);e.save(),e.translate(t.x,t.y-70),e.fillStyle="#ef4444",e.font="bold 24px monospace",e.textAlign="center",e.strokeStyle="black",e.lineWidth=4,e.strokeText(` : ${h}`,0,0),e.fillText(` : ${h}`,0,0),e.restore();return}if(t.type==="explosion_gap"){const o=t.maxLife||90,r=1-t.life/o,c=t.gapAngle||0,f=Math.PI/3;e.save(),e.translate(t.x,t.y),e.fillStyle="rgba(239, 68, 68, 0.4)",e.beginPath(),e.moveTo(0,0),e.arc(0,0,t.radius,c+f/2,c-f/2),e.closePath(),e.fill(),e.strokeStyle="#ef4444",e.lineWidth=3,e.setLineDash([10,5]),e.stroke(),e.fillStyle="rgba(34, 197, 94, 0.2)",e.beginPath(),e.moveTo(0,0),e.arc(0,0,t.radius,c-f/2,c+f/2),e.closePath(),e.fill(),e.fillStyle="rgba(239, 68, 68, 0.6)",e.beginPath(),e.moveTo(0,0),e.arc(0,0,t.radius*r,c+f/2,c-f/2),e.closePath(),e.fill(),e.restore();return}if(t.type==="kpi_doom_expansion"){const o=t.maxLife||180,f=5e3*(1-t.life/o);e.save(),e.translate(t.x,t.y),e.fillStyle="rgba(50, 0, 0, 0.7)",e.beginPath(),e.arc(0,0,f,0,Math.PI*2),e.fill(),e.strokeStyle="#ef4444",e.lineWidth=10,e.setLineDash([50,50]),e.stroke(),e.restore();return}if(t.type==="laser_beam"){const o=t.angle||0,r=t.width||60,c=5e3,h=t.life>60;if(e.save(),e.translate(t.x,t.y),e.rotate(o),h){const p=Math.random()*.3+.3;e.strokeStyle=`rgba(239, 68, 68, ${p})`,e.lineWidth=2,e.setLineDash([20,10]),e.beginPath(),e.moveTo(-c/2,0),e.lineTo(c/2,0),e.stroke(),e.strokeStyle=`rgba(255, 100, 100, ${p*.5})`,e.lineWidth=1,e.beginPath(),e.moveTo(-c/2,-r/2),e.lineTo(c/2,-r/2),e.moveTo(-c/2,r/2),e.lineTo(c/2,r/2),e.stroke(),e.setLineDash([])}else{e.globalCompositeOperation="lighter";const p=.8+Math.random()*.2,u=e.createLinearGradient(0,-r,0,r);if(u.addColorStop(0,"rgba(255, 0, 0, 0)"),u.addColorStop(.3,`rgba(255, 0, 0, ${p*.6})`),u.addColorStop(.7,`rgba(255, 0, 0, ${p*.6})`),u.addColorStop(1,"rgba(255, 0, 0, 0)"),e.fillStyle=u,e.fillRect(-c/2,-r,c,r*2),e.fillStyle=`rgba(255, 255, 200, ${p})`,e.fillRect(-c/2,-r*.2,c,r*.4),!i.isLowQuality){e.strokeStyle="#fff",e.lineWidth=2,e.beginPath(),e.moveTo(-c/2,0);const g=20,b=c/g;for(let v=0;v<g;v++){const x=(Math.random()-.5)*r;e.lineTo(-c/2+v*b,x)}e.stroke()}}e.restore();return}},xv=(e,t,i)=>{if(t.type==="coffee_puddle"){e.save(),e.translate(t.x,t.y);const o=Math.min(1,t.life/60);if(e.fillStyle=`rgba(69, 26, 3, ${.8*o})`,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill(),!i.isLowQuality){const r=Date.now()/500;e.fillStyle=`rgba(217, 119, 6, ${.6*o})`;for(let c=0;c<5;c++){const f=t.radius*.7,h=c*Math.PI*2/5+r,p=Math.cos(h)*f*(.5+Math.sin(r+c)*.2),u=Math.sin(h)*f*(.5+Math.cos(r+c)*.2),g=10+Math.sin(r*5+c)*5;e.beginPath(),e.arc(p,u,g,0,Math.PI*2),e.fill()}}if(!i.isLowQuality&&Math.random()<.1){e.fillStyle=`rgba(255, 255, 255, ${.2*o})`;const r=(Math.random()-.5)*t.radius,c=(Math.random()-.5)*t.radius;e.beginPath(),e.arc(r,c,5,0,Math.PI*2),e.fill()}e.restore();return}if(t.type==="firewall_rotate"){const o=t.angle||0,r=t.height||800,c=t.width||60;e.save(),e.translate(t.x,t.y),e.rotate(o),e.globalCompositeOperation="lighter",e.fillStyle="rgba(59, 130, 246, 0.8)",e.fillRect(0,-c/2,r,c);const f=e.createLinearGradient(0,-c,0,c);if(f.addColorStop(0,"rgba(34, 211, 238, 0)"),f.addColorStop(.5,"rgba(34, 211, 238, 0.4)"),f.addColorStop(1,"rgba(34, 211, 238, 0)"),e.fillStyle=f,e.fillRect(0,-c*1.5,r,c*3),!i.isLowQuality){e.strokeStyle="rgba(255, 255, 255, 0.5)",e.lineWidth=2;const h=Date.now()/20%40;e.beginPath();for(let p=0;p<r;p+=40){const u=p+h;u<r&&(e.moveTo(u,-c/2),e.lineTo(u,c/2))}e.stroke()}e.restore();return}if(t.type==="explosion_shockwave"){const o=t.maxLife||20,r=1-t.life/o,c=t.radius*r,f=1-r,h=e.createRadialGradient(t.x,t.y,c*.7,t.x,t.y,c);h.addColorStop(0,"rgba(255, 255, 255, 0)"),h.addColorStop(.8,`rgba(255, 255, 255, ${.6*f})`),h.addColorStop(1,`rgba(255, 255, 255, ${.9*f})`),e.save(),e.fillStyle=h,e.beginPath(),e.arc(t.x,t.y,c,0,Math.PI*2),e.fill(),e.strokeStyle=`rgba(255, 255, 255, ${.8*f})`,e.lineWidth=4*(1-r),e.stroke(),e.restore();return}if(t.type==="scorch"){const o=Math.min(1,t.life/60);if(e.save(),e.fillStyle=`rgba(0, 0, 0, ${o*.6})`,e.beginPath(),e.arc(t.x,t.y,t.radius,0,Math.PI*2),e.fill(),!i.isLowQuality){e.strokeStyle=`rgba(0, 0, 0, ${o*.8})`,e.lineWidth=2,e.beginPath();for(let r=0;r<5;r++){const c=Math.random()*Math.PI*2,f=Math.random()*t.radius;e.moveTo(t.x,t.y),e.lineTo(t.x+Math.cos(c)*f,t.y+Math.sin(c)*f)}e.stroke()}e.restore();return}e.save(),e.fillStyle=t.color,t.type!=="acid"&&t.type!=="acid_trail"&&t.type!=="pie_trap"?(e.globalAlpha=.5,e.beginPath(),e.arc(t.x,t.y,t.radius,0,Math.PI*2),e.fill()):(e.globalAlpha=.8,e.beginPath(),e.arc(t.x,t.y,t.radius,0,Math.PI*2),e.fill()),e.restore()},Cc=(e,t,i)=>{if(t.type==="safe_zone_hint"){const o=Date.now()/500;e.save(),e.translate(t.x,t.y),e.save(),e.rotate(o),e.strokeStyle="rgba(96, 165, 250, 0.5)",e.lineWidth=4,e.setLineDash([20,20]),e.beginPath(),e.arc(0,0,t.radius*.8,0,Math.PI*2),e.stroke(),e.beginPath(),e.arc(0,0,t.radius*.4,0,Math.PI*2),e.lineWidth=2,e.stroke(),e.restore(),e.fillStyle="#60a5fa";for(let r=0;r<5;r++){const c=(o*2+r)%3,f=-c*30,h=1-c/3;e.globalAlpha=h;const p=r*(Math.PI*2/5)+o,u=t.radius*.6;e.beginPath(),e.arc(Math.cos(p)*u,Math.sin(p)*u+f,3,0,Math.PI*2),e.fill()}e.restore();return}if(t.type==="warning_circle"){if(t.x+t.radius<i.minX||t.x-t.radius>i.maxX||t.y+t.radius<i.minY||t.y-t.radius>i.maxY)return;const o=t.maxLife||60,r=1-t.life/o;e.save(),e.translate(t.x,t.y),e.strokeStyle="#facc15",e.lineWidth=3,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.stroke(),e.strokeStyle="#000000",e.lineWidth=1,e.stroke(),e.fillStyle="rgba(234, 88, 12, 0.6)",e.beginPath(),e.arc(0,0,t.radius*r,0,Math.PI*2),e.fill(),e.restore();return}if(t.type==="safe_haven"){e.save(),e.translate(t.x,t.y),e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.clip(),e.fillStyle="rgba(59, 130, 246, 0.2)",e.fill(),e.globalCompositeOperation="lighter";const o=Date.now()%2e3/2e3,r=-t.radius+o*t.radius*2;e.fillStyle="rgba(147, 197, 253, 0.4)",e.fillRect(-t.radius,r,t.radius*2,20),e.strokeStyle="rgba(59, 130, 246, 0.2)",e.lineWidth=2;const c=40;e.beginPath();for(let f=-t.radius;f<=t.radius;f+=c)e.moveTo(f,-t.radius),e.lineTo(f,t.radius);for(let f=-t.radius;f<=t.radius;f+=c)e.moveTo(-t.radius,f),e.lineTo(t.radius,f);e.stroke(),e.restore(),e.save(),e.translate(t.x,t.y),e.shadowColor="#60a5fa",e.shadowBlur=15,e.strokeStyle="#bfdbfe",e.lineWidth=4,e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.stroke(),e.shadowBlur=4,e.shadowColor="black",e.fillStyle="#ffffff",e.font='900 24px "Noto Sans SC", sans-serif',e.textAlign="center",e.lineWidth=4,e.strokeText("",0,-t.radius-15),e.fillText("",0,-t.radius-15),e.restore();return}},Sv=(e,t,i)=>{const o=Date.now();if(t.type==="bug_trail"){const r=t.maxLife||180,c=Math.max(0,t.life/r);let f=1;const h=.3;c<h&&(f=c/h);const p=.6+.4*f;e.save(),e.translate(t.x,t.y),e.scale(p,p);const u=.3*f;if(e.fillStyle=`rgba(34, 197, 94, ${u})`,e.fillRect(-t.radius,-t.radius,t.radius*2,t.radius*2),!i.isLowQuality&&f>.1){e.fillStyle=`rgba(74, 222, 128, ${.8*f})`;for(let v=0;v<5;v++){const x=Math.sin(t.x+t.y+v)*1e3,T=x-Math.floor(x),M=(T-.5)*t.radius*2,k=(Math.cos(x)-.5)*t.radius*2,C=5+T*10;e.fillRect(M,k,C,C)}}const g=.6*f;e.strokeStyle=`rgba(34, 197, 94, ${g})`,e.lineWidth=2,e.setLineDash([5,5]),e.strokeRect(-t.radius,-t.radius,t.radius*2,t.radius*2),e.restore();return}if(t.type==="bsod"){e.save(),e.translate(t.x,t.y);const r=Math.min(1,t.life/20);e.globalAlpha=.85*r;const c=(Math.random()-.5)*4,f=(Math.random()-.5)*4;e.translate(c,f),e.fillStyle="#0000AA",e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.fill(),e.fillStyle="rgba(0, 0, 0, 0.2)";for(let u=-t.radius;u<t.radius;u+=4)e.fillRect(-t.radius,u,t.radius*2,1);e.save(),e.beginPath(),e.arc(0,0,t.radius,0,Math.PI*2),e.clip(),e.fillStyle="#FFFFFF",e.font="bold 60px monospace",e.textAlign="center",e.textBaseline="middle",e.fillText(":(",0,-40),e.font="12px monospace",e.fillText("Your PC ran into a problem",0,10),e.fillText("and needs to restart.",0,25),e.font="10px monospace",e.textAlign="left",e.fillStyle="rgba(255, 255, 255, 0.7)";const h="0123456789ABCDEF",p=5;for(let u=0;u<p;u++){let g="0x";for(let v=0;v<8;v++)g+=h[Math.floor(Math.random()*16)];const b=50+u*15+Math.floor(o/100)%5*2;b<t.radius-20&&e.fillText(g,-t.radius+30,b)}if(e.restore(),Math.random()<.1){e.fillStyle="rgba(255, 255, 255, 0.5)";const u=Math.random()*20,g=(Math.random()-.5)*t.radius*2;e.fillRect(-t.radius,g,t.radius*2,u)}e.restore();return}if(t.type==="firewall_wave"){const r=t.maxLife||45,c=1-t.life/r,f=t.radius*c,h=1-Math.pow(c,3);if(e.save(),e.translate(t.x,t.y),e.globalCompositeOperation="lighter",e.beginPath(),e.arc(0,0,f,0,Math.PI*2),e.strokeStyle=`rgba(59, 130, 246, ${h})`,e.lineWidth=8*(1-c)+2,e.shadowColor="#3b82f6",e.shadowBlur=20,e.stroke(),!i.isLowQuality){e.beginPath(),e.arc(0,0,f*.85,0,Math.PI*2),e.fillStyle=`rgba(34, 211, 238, ${h*.1})`,e.fill(),e.strokeStyle=`rgba(34, 211, 238, ${h*.4})`,e.lineWidth=1,e.shadowBlur=0;const p=12;for(let u=0;u<p;u++){const g=u/p*Math.PI*2+o/500;e.beginPath(),e.moveTo(Math.cos(g)*(f*.5),Math.sin(g)*(f*.5)),e.lineTo(Math.cos(g)*f,Math.sin(g)*f),e.stroke()}}if(!i.isLowQuality)for(let u=0;u<8;u++){const g=Math.random()*Math.PI*2,b=f+(Math.random()-.5)*10,v=Math.random()*4+2;e.fillStyle=`rgba(255, 255, 255, ${h})`,e.fillRect(Math.cos(g)*b-v/2,Math.sin(g)*b-v/2,v,v)}if(c<.8){e.fillStyle=`rgba(255, 255, 255, ${h*.8})`,e.font="bold 16px monospace",e.textAlign="center",e.textBaseline="middle";const p=4;for(let u=0;u<p;u++){const g=u/p*Math.PI*2-o/200,b=f-30;e.save(),e.translate(Math.cos(g)*b,Math.sin(g)*b),e.rotate(g+Math.PI/2),e.fillText("404",0,0),e.restore()}}e.restore();return}},Tv={renderZones(e,t,i){t.zones.forEach(o=>{o.type==="kpi_hell_fire"||o.type==="warning_circle"||o.type==="safe_haven"||o.type!=="laser_beam"&&o.type!=="kpi_doom_expansion"&&o.type!=="firewall_rotate"&&o.type!=="ai_laser_link"&&(o.x+o.radius<i.minX||o.x-o.radius>i.maxX||o.y+o.radius<i.minY||o.y-o.radius>i.maxY)||(["ai_laser_link","glitch_square","glitch_bsod_wall","glitch_lag_marker","explosion_gap","kpi_doom_expansion","laser_beam"].includes(o.type)?vv(e,o,i):["bsod","firewall_wave"].includes(o.type)?Sv(e,o,i):o.type==="safe_zone_hint"?Cc(e,o,i):xv(e,o,i))}),t.zones.forEach(o=>{o.type==="warning_circle"&&Cc(e,o,i)}),t.zones.forEach(o=>{o.type==="safe_haven"&&Cc(e,o,i)})}},ls=.11,Mv={render:(e,t,i,o,r)=>{if(!i)return;e.save(),e.translate(t.x,t.y);const c=t.vx||0,f=t.vy||0,h=c*c+f*f,p=h>25;if(o===5){p&&(e.save(),e.translate(-c*2.5,-f*2.5),e.scale(ls*.8,ls*.8),e.globalAlpha=.3,e.globalCompositeOperation="screen",e.shadowColor="#ff0000",e.shadowBlur=10,e.drawImage(i,-128,-128),e.restore(),e.save(),e.translate(-c*1.2,-f*1.2),e.scale(ls*.9,ls*.9),e.globalAlpha=.5,e.globalCompositeOperation="screen",e.shadowColor="#00ffff",e.shadowBlur=10,e.drawImage(i,-128,-128),e.restore());const u=ls*2.2,g=r/1500,b=1+Math.sin(r/400)*.12;e.scale(u*b,u*b),e.rotate(g),e.drawImage(i,-128,-128),Math.sin(r/100)>.8&&(e.globalCompositeOperation="lighter",e.globalAlpha=.3,e.drawImage(i,-128,-128))}else if(o===4){if(p){e.save();const b=Math.atan2(f,c);e.rotate(b);const v=Math.min(60,Math.sqrt(h)*2),x=e.createLinearGradient(0,0,-v,0);x.addColorStop(0,"#06b6d4"),x.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=x,e.beginPath(),e.moveTo(0,-6),e.lineTo(-v,-1),e.lineTo(-v,1),e.lineTo(0,6),e.fill(),e.restore()}const u=1+Math.sin(r/200)*.1,g=ls*1.1*u;e.scale(g,g),e.shadowColor="#06b6d4",e.shadowBlur=20,e.drawImage(i,-128,-128)}else{if(p){const x=Math.atan2(f,c);e.save(),e.rotate(x);let T=o===1?"#ea580c":o===2?"#94a3b8":"#fbbf24";const M=Math.min(50,Math.sqrt(h)*2),k=e.createLinearGradient(0,0,-M,0);k.addColorStop(0,T),k.addColorStop(1,"rgba(0,0,0,0)"),e.fillStyle=k,e.fillRect(-M,-2,M,4),e.restore()}const u=t.id.charCodeAt(0)%10,b=r/600+u,v=Math.sin(b);if(Math.abs(v)<.7){let M=o===1?"#7c2d12":o===2?"#475569":"#b45309";e.fillStyle=M,e.fillRect(-4/2,-20/2,4,20)}e.scale(v*ls,ls),e.drawImage(i,-128,-128)}e.restore()}},Ah=.22,_v={render:(e,t,i,o)=>{if(!i){e.save(),e.fillStyle="#fff",e.font="12px sans-serif",e.textAlign="center",e.fillText("?",t.x,t.y),e.restore();return}e.save(),e.translate(t.x,t.y);const r=t.id.charCodeAt(t.id.length-1),c=Math.sin(o/400+r)*4;e.translate(0,c),e.save(),e.scale(1,.3),e.fillStyle="rgba(0,0,0,0.3)",e.beginPath(),e.arc(0,40,20,0,Math.PI*2),e.fill(),e.restore(),e.scale(Ah,Ah),(t.type==="big_health"||t.type==="love_heart")&&(e.shadowColor=t.type==="love_heart"?"#f472b6":"#22c55e",e.shadowBlur=30),e.drawImage(i,-128,-128),e.shadowBlur=0,e.restore()}},Hc=256,Dh=Hc/2,fm=new Map,is=(e,t)=>{const i=document.createElement("canvas");i.width=Hc,i.height=Hc;const o=i.getContext("2d");return o&&(o.imageSmoothingEnabled=!0,o.imageSmoothingQuality="high",o.translate(Dh,Dh),t(o),fm.set(e,i)),i},wv=()=>{is("gold_1_face",i=>{const o=i.createRadialGradient(0,0,30,0,0,100);o.addColorStop(0,"#fdba74"),o.addColorStop(1,"#9a3412"),i.fillStyle=o,i.beginPath(),i.arc(0,0,100,0,Math.PI*2),i.fill(),i.strokeStyle="rgba(124, 45, 18, 0.5)",i.lineWidth=8,i.beginPath(),i.arc(0,0,100*.75,0,Math.PI*2),i.stroke(),i.strokeStyle="#7c2d12",i.lineWidth=4,i.beginPath(),i.arc(0,0,100,0,Math.PI*2),i.stroke()}),is("gold_2_face",i=>{const o=i.createRadialGradient(0,0,30,0,0,100);o.addColorStop(0,"#ffffff"),o.addColorStop(1,"#94a3b8"),i.fillStyle=o,i.beginPath(),i.arc(0,0,100,0,Math.PI*2),i.fill(),i.fillStyle="rgba(255,255,255,0.8)",i.beginPath(),i.ellipse(-100*.3,-100*.3,100*.2,100*.1,Math.PI/4,0,Math.PI*2),i.fill(),i.strokeStyle="#475569",i.lineWidth=4,i.beginPath(),i.arc(0,0,100,0,Math.PI*2),i.stroke()}),is("gold_3_face",i=>{const o=i.createRadialGradient(0,0,30,0,0,100);o.addColorStop(0,"#fef08a"),o.addColorStop(.5,"#fbbf24"),o.addColorStop(1,"#d97706"),i.fillStyle=o,i.beginPath(),i.arc(0,0,100,0,Math.PI*2),i.fill(),i.strokeStyle="#b45309",i.lineWidth=8,i.setLineDash([15,5]),i.beginPath(),i.arc(0,0,100*.92,0,Math.PI*2),i.stroke(),i.setLineDash([]),i.fillStyle="rgba(180, 83, 9, 0.8)",i.font="900 100px sans-serif",i.textAlign="center",i.textBaseline="middle",i.fillText("",0,10)}),is("gold_4",i=>{i.shadowColor="#22d3ee",i.shadowBlur=40;const r=i.createLinearGradient(-110/2,-110/2,110/2,110/2);r.addColorStop(0,"#a5f3fc"),r.addColorStop(.5,"#06b6d4"),r.addColorStop(1,"#164e63"),i.fillStyle=r,i.beginPath();for(let c=0;c<6;c++){const f=c*Math.PI/3,h=Math.cos(f)*110,p=Math.sin(f)*110;c===0?i.moveTo(h,p):i.lineTo(h,p)}i.closePath(),i.fill(),i.fillStyle="rgba(255,255,255,0.4)",i.beginPath(),i.moveTo(0,-110),i.lineTo(110*.866,-110*.5),i.lineTo(0,0),i.fill(),i.shadowBlur=0,i.strokeStyle="#cffafe",i.lineWidth=4,i.stroke()}),is("gold_5_star",i=>{const f=i.createLinearGradient(0,-120,0,120);f.addColorStop(0,"rgba(0,0,0,0)"),f.addColorStop(.4,"rgba(255, 255, 255, 0.1)"),f.addColorStop(.5,"rgba(255, 255, 255, 0.8)"),f.addColorStop(.6,"rgba(255, 255, 255, 0.1)"),f.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=f,i.beginPath(),i.ellipse(0,0,10,120,0,0,Math.PI*2),i.fill(),i.save();const h=i.createLinearGradient(-110,0,110,0);h.addColorStop(0,"#ffffff"),h.addColorStop(.3,"#22d3ee"),h.addColorStop(.8,"#0e7490"),h.addColorStop(1,"#000000"),i.strokeStyle=h,i.lineWidth=8,i.beginPath(),i.ellipse(0,0,110,35,0,0,Math.PI*2),i.stroke(),i.lineWidth=4,i.beginPath(),i.ellipse(0,0,110*.8,35*.8,0,0,Math.PI*2),i.stroke(),i.restore(),i.fillStyle="#000000",i.beginPath(),i.arc(0,0,50,0,Math.PI*2),i.fill(),i.shadowColor="#ffffff",i.shadowBlur=15,i.strokeStyle="#ffffff",i.lineWidth=3,i.beginPath(),i.arc(0,0,52,0,Math.PI*2),i.stroke(),i.shadowBlur=0});const t=(i,o=140)=>r=>{r.font=`${o}px sans-serif`,r.textAlign="center",r.textBaseline="middle",r.shadowColor="rgba(0,0,0,0.3)",r.shadowBlur=20,r.fillText(i,0,15)};is("health",t("",140)),is("big_health",t("",160)),is("love_heart",t("",140))};typeof document<"u"&&wv();const kv={renderDrops(e,t,i){const o=Date.now();t.drops.forEach(r=>{if(r.x+50<i.minX||r.x-50>i.maxX||r.y+50<i.minY||r.y-50>i.maxY)return;let c="",f=1;if(r.type==="gold"){const p=r.value;p<ia.TIER_1_LIMIT?(c="gold_1_face",f=1):p<ia.TIER_2_LIMIT?(c="gold_2_face",f=2):p<ia.TIER_3_LIMIT?(c="gold_3_face",f=3):p<ia.TIER_4_LIMIT?(c="gold_4",f=4):(c="gold_5_star",f=5)}else c=r.type;const h=fm.get(c);r.type==="gold"?Mv.render(e,r,h,f,o):_v.render(e,r,h,o)})}},jv={renderParticles(e,t,i){t.particles.forEach(o=>{const r=o.scale!==void 0?o.scale:1;if(r<=0)return;let c=1;o.alpha!==void 0?c=o.alpha:c=o.life/(o.maxLife||1),!(c<=.01)&&(e.save(),e.globalAlpha=c,e.translate(o.x,o.y),o.rotation&&e.rotate(o.rotation),e.scale(r,r),o.blendMode&&!i.isLowQuality&&(e.globalCompositeOperation=o.blendMode),e.fillStyle=o.color,o.type==="rect"?e.fillRect(-o.size/2,-o.size/2,o.size,o.size):o.type==="spark"?i.isLowQuality?e.fillRect(-o.size/2,-o.size/2,o.size,o.size):(e.beginPath(),e.moveTo(0,-o.size),e.lineTo(o.size*.2,0),e.lineTo(0,o.size),e.lineTo(-o.size*.2,0),e.fill()):o.type==="lightning"&&o.tx!==void 0?(e.strokeStyle=o.color,e.lineWidth=2,e.beginPath(),e.moveTo(0,0),e.lineTo(o.tx-o.x,o.ty-o.y),e.stroke()):(e.beginPath(),e.arc(0,0,o.size,0,Math.PI*2),e.fill()),e.restore())})}},la=.6,Cv={hellCache:null,render(e,t,i,o){if(!t.zones.find(b=>b.type==="kpi_hell_fire"))return;(!this.hellCache||this.hellCache.width!==i||this.hellCache.height!==o)&&(this.hellCache=document.createElement("canvas"),this.hellCache.width=i,this.hellCache.height=o);const c=this.hellCache.getContext("2d");if(!c)return;c.clearRect(0,0,i,o),c.save();const f=Date.now();c.fillStyle="rgba(69, 10, 10, 0.4)",c.fillRect(0,0,i,o),c.fillStyle="rgba(0, 0, 0, 0.3)";for(let b=0;b<o;b+=120){const v=(b+Math.floor(f*.2))%o;c.fillRect(0,v,i,6)}if(Math.random()<.4){c.fillStyle="rgba(0, 0, 0, 0.5)";const b=5;for(let v=0;v<b;v++){const x=Math.random()*i,T=Math.random()*o,M=50+Math.random()*150,k=10+Math.random()*40;c.fillRect(x,T,M,k)}}c.strokeStyle="rgba(50, 0, 0, 0.5)",c.lineWidth=1,c.beginPath();for(let b=0;b<10;b++){const v=Math.random()*o;c.moveTo(0,v),c.lineTo(i,v)}c.stroke(),c.globalCompositeOperation="destination-out";const h=t.camera,p=la,u=i/2,g=o/2;t.zones.forEach(b=>{if(b.type==="safe_haven"){const v=(b.x-h.x)*p+u,x=(b.y-h.y)*p+g,T=b.radius*p;c.beginPath(),c.arc(v,x,T,0,Math.PI*2),c.fill()}}),c.restore(),e.drawImage(this.hellCache,0,0)}};class Nv{static render(t,i,o){const r=t.getContext("2d",{alpha:!1});if(!r)return;const{width:c,height:f}=t,h=i.camera,p=200,u=c/la,g=f/la,v=i.enemies.length+i.projectiles.length+i.particles.length>300,x={minX:h.x-u/2-p,maxX:h.x+u/2+p,minY:h.y-g/2-p,maxY:h.y+g/2+p,isLowQuality:v};r.fillStyle="#0f172a",r.fillRect(0,0,c,f),r.save(),r.translate(c/2,f/2),r.scale(la,la),r.translate(-h.x,-h.y),Eh.renderBackground(r,i),r.restore(),Cv.render(r,i,c,f),r.save(),r.translate(c/2,f/2),r.scale(la,la),r.translate(-h.x,-h.y),Tv.renderZones(r,i,x),kv.renderDrops(r,i,x),jv.renderParticles(r,i,x),gv(r,i,o),Zg(r,i);const T=i.enemies.filter(w=>w.config.behavior==="boss"),M=i.enemies.filter(w=>w.config.behavior!=="boss");Ch(r,M,i,x);const k=i.projectiles.filter(w=>!w.isAerial);if(wh(r,k,x),Eh.renderMapMask(r,i),i.cinematicPause){r.save(),r.setTransform(1,0,0,1,0,0);const w=r.createRadialGradient(c/2,f/2,f*.2,c/2,f/2,f*.8);w.addColorStop(0,"rgba(0, 0, 0, 0.4)"),w.addColorStop(1,"rgba(0, 0, 0, 0.9)"),r.fillStyle=w,r.fillRect(0,0,c,f),r.translate(c/2,f/2),r.scale(la,la),r.translate(-h.x,-h.y),r.restore()}ov(r,M,x),Ch(r,T,i,x),Nh(r,i.player,"back");const C=i.projectiles.filter(w=>w.isAerial);if(wh(r,C,x),uv(r,i),Nh(r,i.player,"front"),fv(r,i,x),r.restore(),i.activeMutators.includes("digital_eye_strain")){const w=r.createRadialGradient(c/2,f/2,f*.4,c/2,f/2,f*.9);w.addColorStop(0,"rgba(0,0,0,0)"),w.addColorStop(1,"rgba(0,0,0,0.85)"),r.fillStyle=w,r.fillRect(0,0,c,f),Math.random()<.05&&(r.fillStyle="rgba(0,0,0,0.2)",r.fillRect(0,0,c,f))}i.reviveSequence.active&&bv(r,c,f,i),pv(r,i,c,f)}}const Ev=()=>{const[e,t]=F.useState(se.BOOT),[i,o]=F.useState("9527"),[r,c]=F.useState("normal"),[f,h]=F.useState(se.WELCOME),[p,u]=F.useState(!1),[g,b]=F.useState(!1),v=F.useRef(null),x=F.useRef(0),T=F.useRef({}),M=F.useRef({x:0,y:0}),k=F.useRef(0),C=F.useRef(0),w=F.useCallback(te=>{u(!0),setTimeout(()=>{t(te),u(!1)},500)},[]);F.useEffect(()=>{const te=()=>{document.fullscreenElement&&N.enforceFullscreenLock()};return document.addEventListener("fullscreenchange",te),te(),()=>document.removeEventListener("fullscreenchange",te)},[]),F.useEffect(()=>{const te=()=>{document.fullscreenElement&&N.enforceFullscreenLock()};return window.addEventListener("mousedown",te),()=>window.removeEventListener("mousedown",te)},[]),F.useEffect(()=>{const te=yt=>{document.fullscreenElement&&N.enforceFullscreenLock(),T.current[yt.key.toLowerCase()]=!0,(yt.key==="Escape"||yt.key.toLowerCase()==="p")&&(e===se.PLAYING||e===se.SHOP||e===se.SANDBOX)&&(yt.preventDefault(),N.state.isPaused=!N.state.isPaused,b(N.state.isPaused))},ve=yt=>{T.current[yt.key.toLowerCase()]=!1},Ne=yt=>{if(!v.current)return;const rs=v.current.getBoundingClientRect(),Tl=yt.clientX-rs.left,Ai=yt.clientY-rs.top,fa=v.current.width,Ml=v.current.height,_l=Tl-fa/2,ir=Ai-Ml/2,Di=_l/la,wl=ir/la,kl=Di+N.state.camera.x,jl=wl+N.state.camera.y;M.current={x:kl,y:jl}},Ke=()=>{T.current.mousedown=!0},Ge=()=>{T.current.mousedown=!1};return window.addEventListener("keydown",te),window.addEventListener("keyup",ve),window.addEventListener("mousemove",Ne),window.addEventListener("mousedown",Ke),window.addEventListener("mouseup",Ge),()=>{window.removeEventListener("keydown",te),window.removeEventListener("keyup",ve),window.removeEventListener("mousemove",Ne),window.removeEventListener("mousedown",Ke),window.removeEventListener("mouseup",Ge)}},[e]),F.useEffect(()=>{const te=()=>{v.current&&(v.current.width=window.innerWidth,v.current.height=window.innerHeight,N.canvasWidth=window.innerWidth,N.canvasHeight=window.innerHeight)};return window.addEventListener("resize",te),te(),()=>window.removeEventListener("resize",te)},[e]);const j=F.useCallback(()=>{if(e!==se.PLAYING&&e!==se.SANDBOX)return;const te=performance.now();if(k.current===0&&(k.current=te),C.current++,te-k.current>=1e3&&(N.state.fps=C.current,C.current=0,k.current=te),N.handleInput(T.current,M.current),N.update(),N.state.waveEnded&&e===se.PLAYING){!N.state.isEndless&&N.state.currentWave>=8?N.state.enemies.length===0&&w(se.VICTORY):(N.state.isEndless&&N.state.enemies.length===0&&N.state.waveTimer>60||N.state.currentWave<8)&&w(se.WAVE_SUMMARY);return}if(N.state.player.isDying&&N.state.player.deathTimer<=0){w(se.GAME_OVER);return}v.current&&Nv.render(v.current,N.state,M.current),x.current=requestAnimationFrame(j)},[e,w]);return F.useEffect(()=>((e===se.PLAYING||e===se.SANDBOX)&&v.current&&(x.current=requestAnimationFrame(j)),()=>cancelAnimationFrame(x.current)),[e,j]),{canvasRef:v,phase:e,selectedChar:i,selectedDifficulty:r,inTransition:p,isPausedUI:g,handleStart:()=>{localStorage.getItem("meme_game_played_before")?w(se.DIFFICULTY_SELECT):(localStorage.setItem("meme_game_played_before","true"),w(se.SETTINGS))},handleEncyclopedia:()=>w(se.ENCYCLOPEDIA),handleAchievements:()=>w(se.ACHIEVEMENTS),handleLeaderboard:()=>w(se.LEADERBOARD),handleContinue:()=>{N.loadGame()&&w(se.SHOP)},handleSettingsBack:()=>w(se.WELCOME),handleSettingsNext:()=>w(se.DIFFICULTY_SELECT),handleBack:()=>{e===se.DIFFICULTY_SELECT&&w(se.WELCOME),e===se.CHARACTER_SELECT&&w(se.DIFFICULTY_SELECT),(e===se.ENCYCLOPEDIA||e===se.ACHIEVEMENTS||e===se.LEADERBOARD)&&w(se.WELCOME),e===se.LINK_CODE&&w(f)},handleDifficultySelect:te=>{c(te),w(se.CHARACTER_SELECT)},handleCharSelect:te=>{o(te),w(se.STORY)},finishStory:()=>{v.current&&N.init(v.current.width,v.current.height,i,r),w(se.PLAYING)},handleNextWave:()=>{const te=N.state.currentWave+1;te===8&&!N.state.isEndless?w(se.BOSS_INTRO):!N.state.isEndless&&(N.state.difficultyId==="hard"||N.state.difficultyId==="ultimate")&&(te===4||te===6)?w(se.ELITE_INTRO):(u(!0),setTimeout(()=>{N.startWave(te),t(se.PLAYING),u(!1)},500))},startEliteWave:()=>{const te=N.state.currentWave+1;N.startWave(te),w(se.PLAYING)},handleWaveSummaryConfirm:()=>{w(se.SHOP)},startEndlessMode:()=>{N.state.isEndless=!0,N.startWave(1),w(se.PLAYING)},startBossBattle:()=>{N.startWave(8),w(se.PLAYING)},restartGame:()=>{v.current&&N.init(v.current.width,v.current.height,i,r),w(se.PLAYING)},goToMainMenu:()=>{N.state.isPaused=!1,b(!1),w(se.WELCOME)},resumeGame:()=>{N.state.isPaused=!1,b(!1)},handleLinkCode:()=>{h(e),w(se.LINK_CODE)},handleImportSuccess:te=>{if(te===""){N.enterSandboxMode(),w(se.SANDBOX);return}te.includes("")||te.includes("")?te.includes("")?w(se.PLAYING):w(se.SHOP):te.includes("")?w(se.WAVE_SUMMARY):w(se.WELCOME)}}},ce=({children:e,variant:t="primary",size:i="md",className:o="",...r})=>{const c="font-bold rounded shadow-md transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",f={primary:"bg-indigo-600 hover:bg-indigo-500 text-white border-b-4 border-indigo-800 hover:border-indigo-700",secondary:"bg-purple-600 hover:bg-purple-500 text-white border-b-4 border-purple-800 hover:border-purple-700",danger:"bg-red-500 hover:bg-red-400 text-white border-b-4 border-red-700 hover:border-red-600",outline:"bg-transparent border-2 border-slate-500 text-slate-300 hover:bg-slate-800 hover:text-white",success:"bg-green-600 hover:bg-green-500 text-white border-b-4 border-green-800 hover:border-green-700"},h={sm:"px-3 py-1 text-sm",md:"px-6 py-3 text-base",lg:"px-8 py-4 text-xl"};return d.jsx("button",{className:`${c} ${f[t]} ${h[i]} ${o}`,...r,children:e})},Av=({onClose:e})=>d.jsx("div",{className:"absolute inset-0 bg-black/95 z-[100] flex items-center justify-center p-8 animate-pop-in pointer-events-auto",onClick:e,children:d.jsxs("div",{className:"max-w-2xl text-center space-y-6",onClick:t=>t.stopPropagation(),children:[d.jsx("h2",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-purple-600 mb-8",children:""}),d.jsxs("div",{className:"space-y-4 text-xl text-slate-300",children:[d.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[d.jsx("p",{className:"font-bold text-white mb-2",children:" & "}),d.jsx("p",{className:"text-2xl text-yellow-400 font-black mb-2",children:"GuoEv"}),d.jsxs("div",{className:"flex items-center justify-center gap-2",children:[d.jsxs("p",{children:["B UID",d.jsx("span",{className:"text-pink-400 font-mono",children:"34113096"})]}),d.jsx("button",{onClick:()=>window.open("https://space.bilibili.com/34113096?spm_id_from","_blank"),className:"bg-pink-600 hover:bg-pink-500 text-white text-xs px-2 py-1 rounded",children:""})]}),d.jsxs("p",{children:[" ID",d.jsx("span",{className:"text-white font-mono",children:"1326375405"})]})]}),d.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[d.jsx("p",{className:"font-bold text-white mb-2",children:""}),d.jsx("p",{className:"text-xl text-yellow-300 font-bold mb-1",children:""}),d.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[d.jsxs("p",{className:"text-sm",children:["B UID",d.jsx("span",{className:"text-pink-400 font-mono",children:"35074132"})]}),d.jsx("button",{onClick:()=>window.open("https://space.bilibili.com/35074132?spm_id_from","_blank"),className:"bg-pink-600 hover:bg-pink-500 text-white text-xs px-2 py-1 rounded",children:""})]}),d.jsx("p",{className:"text-sm text-slate-400 italic",children:'"KPI"'})]}),d.jsxs("div",{className:"text-slate-400 text-base leading-relaxed italic px-8",children:[d.jsx("p",{children:" 1209655  0 "}),d.jsx("p",{children:"   "}),d.jsx("p",{children:" 12138 "}),d.jsx("p",{children:""})]}),d.jsx("p",{className:"text-xs text-slate-600 mt-8",children:""}),d.jsx("p",{className:"text-[10px] text-slate-700",children:""})]}),d.jsx(ce,{onClick:e,className:"mt-8 relative z-50",children:""})]})}),Dv=({onClose:e})=>{const[t,i]=F.useState(N.settings),[o,r]=F.useState(!1),c=u=>{const g=parseFloat(u.target.value);N.updateSettings({volume:g}),i(b=>({...b,volume:g}))},f=()=>{const u=t.shopSkin==="default"?"retro":"default";N.updateSettings({shopSkin:u}),i(g=>({...g,shopSkin:u}))},h=()=>{const u=!t.screenShake;N.updateSettings({screenShake:u}),i(g=>({...g,screenShake:u}))},p=()=>{N.hardReset()};return d.jsx("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-md flex items-center justify-center z-[100] animate-pop-in p-4 pointer-events-auto",onClick:e,children:d.jsxs("div",{className:"bg-slate-800 p-8 rounded-2xl border-4 border-slate-600 shadow-2xl max-w-lg w-full space-y-8 relative",onClick:u=>u.stopPropagation(),children:[d.jsx("h2",{className:"text-3xl font-black text-white mb-6 text-center border-b border-slate-700 pb-4",children:""}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h3",{className:"text-lg font-bold text-cyan-300",children:""}),d.jsxs("span",{className:"text-white font-mono",children:[(t.volume*100).toFixed(0),"%"]})]}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:t.volume,onChange:c,className:"w-full accent-cyan-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"})]}),d.jsx("hr",{className:"border-slate-700"}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"space-y-1 text-left",children:[d.jsx("h3",{className:"text-lg font-bold text-white",children:""}),d.jsx("p",{className:"text-slate-400 text-xs",children:""})]}),d.jsx(ce,{size:"sm",variant:t.screenShake?"primary":"outline",onClick:h,className:"w-24 shrink-0",children:t.screenShake?"":""})]}),d.jsx("hr",{className:"border-slate-700"}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"space-y-1 text-left",children:[d.jsx("h3",{className:"text-lg font-bold text-purple-400",children:""}),d.jsx("p",{className:"text-slate-400 text-xs",children:""})]}),d.jsx("button",{onClick:f,className:`px-3 py-1.5 rounded border-2 font-bold text-xs w-28 transition-all ${t.shopSkin==="retro"?"bg-[#ECE9D8] border-[#0054E3] text-[#0054E3] shadow-md":"bg-slate-900 border-slate-500 text-white"}`,children:t.shopSkin==="retro"?"Windows XP":""})]}),d.jsx("hr",{className:"border-slate-700"}),o?d.jsxs("div",{className:"bg-red-900/20 border border-red-500/50 p-4 rounded-xl text-center space-y-3 animate-pop-in",children:[d.jsxs("p",{className:"text-red-400 font-bold text-sm",children:["",d.jsx("br",{}),""]}),d.jsxs("div",{className:"flex gap-4 justify-center",children:[d.jsx(ce,{size:"sm",variant:"outline",onClick:()=>r(!1),children:""}),d.jsx(ce,{size:"sm",variant:"danger",onClick:p,children:""})]})]}):d.jsxs("div",{className:"flex justify-between items-center pt-2",children:[d.jsx("div",{className:"text-xs text-red-400 font-bold",children:" "}),d.jsx(ce,{size:"sm",variant:"danger",onClick:()=>r(!0),className:"bg-red-900/50 border-red-800 hover:bg-red-800 text-xs",children:""})]})]}),d.jsx("div",{className:"flex justify-center pt-4",children:d.jsx(ce,{size:"md",onClick:e,className:"px-10",children:""})})]})})},Rv=()=>d.jsx("style",{children:`
        .cyber-glitch-title {
            position: relative;
            color: #fff;
            text-transform: uppercase;
            /* Base Glow - slightly unstable */
            text-shadow: 
                0 0 2px rgba(255,255,255,0.8),
                0 0 10px rgba(14, 165, 233, 0.5),
                0 0 20px rgba(217, 70, 239, 0.5);
            z-index: 10;
            mix-blend-mode: hard-light;
            transition: text-shadow 0.1s, transform 0.1s, filter 0.1s;
        }

        /* Create duplicate layers for RGB split */
        .cyber-glitch-title::before,
        .cyber-glitch-title::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.8;
            background: #0f172a; /* Hides the main text behind cuts */
            mix-blend-mode: screen; /* Additive color blending */
        }

        /* Red/Magenta Channel */
        .cyber-glitch-title::before {
            color: #ff00ff;
            z-index: -1;
            animation: glitch-anim-1 4s infinite linear alternate-reverse;
        }

        /* Blue/Cyan Channel */
        .cyber-glitch-title::after {
            color: #00ffff;
            z-index: -2;
            animation: glitch-anim-2 3s infinite linear alternate-reverse;
        }

        /* SEVERE GLITCH STATE (System Crash / Voltage Spike) */
        .cyber-glitch-title.severe {
            color: #ffffff;
            /* Violent shaking */
            animation: severe-shake 0.05s infinite;
            /* Overexposure / Brightness Spike */
            filter: brightness(1.8) contrast(1.5) drop-shadow(0 0 10px red);
            /* Massive RGB Split */
            text-shadow: 
                8px 0 #ff0000, 
                -8px 0 #00ff00;
        }
        .cyber-glitch-title.severe::before {
            animation: severe-slice-1 0.1s infinite;
            color: #ff0000;
            left: 10px;
            opacity: 1;
        }
        .cyber-glitch-title.severe::after {
            animation: severe-slice-2 0.1s infinite;
            color: #0000ff;
            left: -10px;
            opacity: 1;
        }

        /* --- CRT SCANLINES & STATIC CHROMATIC --- */
        .retro-crt {
            /* Static Chromatic Aberration (Always on) */
            text-shadow: 
                2px 0 rgba(255, 0, 0, 0.4), 
                -2px 0 rgba(0, 255, 255, 0.4),
                0 0 15px rgba(34, 211, 238, 0.3);
        }
        .retro-crt::after {
            content: " ";
            position: absolute;
            inset: 0;
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.15),
                rgba(0, 0, 0, 0.15) 1px,
                transparent 1px,
                transparent 2px
            );
            background-size: 100% 2px;
            pointer-events: none;
            z-index: 20;
        }

        /* --- IMPROVED: INTERACTIVE VOLTAGE LEAK (Digital Snap) --- */
        @keyframes voltage-leak {
            0% { transform: translate(0, 0) skewX(0deg); }
            20% { transform: translate(-2px, 1px) skewX(-3deg); }
            40% { transform: translate(2px, -1px) skewX(3deg); }
            60% { transform: translate(-1px, -2px) skewX(0deg); }
            80% { transform: translate(1px, 2px) skewX(-1deg); }
            100% { transform: translate(0, 0) skewX(0deg); }
        }
        
        .nervous {
            /* steps(4) creates a snappy, robotic feel instead of smooth blur */
            animation: voltage-leak 0.15s steps(4) infinite;
            cursor: not-allowed;
            /* Over-drive the glow when hovering */
            filter: brightness(1.3) contrast(1.2);
        }

        /* When nervous, force the RGB layers to separate wildly */
        .nervous::before {
            animation: glitch-anim-1 0.2s steps(2) infinite reverse !important;
            left: 4px !important;
            opacity: 1 !important;
        }
        .nervous::after {
            animation: glitch-anim-2 0.2s steps(2) infinite reverse !important;
            left: -4px !important;
            opacity: 1 !important;
        }

        /* --- PHOSPHOR PERSISTENCE (BLACKOUT) --- */
        .blackout {
            color: #020202 !important; /* Nearly black */
            /* Greenish ghost glow remains */
            text-shadow: 0 0 8px rgba(20, 255, 50, 0.2) !important; 
            filter: brightness(0.5) contrast(1.2);
            transition: color 0.05s, text-shadow 0.5s ease-out;
        }
        .blackout::before, .blackout::after {
            opacity: 0 !important; /* Hide RGB split layers during blackout */
        }

        /* --- Animations --- */

        /* Slower, drifting RGB split for normal state */
        @keyframes glitch-anim-1 {
            0% { clip-path: inset(20% 0 80% 0); transform: translate(-2px, 1px); }
            20% { clip-path: inset(60% 0 10% 0); transform: translate(2px, -1px); }
            40% { clip-path: inset(40% 0 50% 0); transform: translate(-2px, 2px); }
            60% { clip-path: inset(80% 0 5% 0); transform: translate(2px, -2px); }
            80% { clip-path: inset(10% 0 70% 0); transform: translate(-2px, 1px); }
            100% { clip-path: inset(50% 0 30% 0); transform: translate(0); }
        }

        @keyframes glitch-anim-2 {
            0% { clip-path: inset(10% 0 60% 0); transform: translate(2px, -1px); }
            20% { clip-path: inset(80% 0 5% 0); transform: translate(-2px, 1px); }
            40% { clip-path: inset(30% 0 20% 0); transform: translate(2px, -2px); }
            60% { clip-path: inset(10% 0 80% 0); transform: translate(-2px, 2px); }
            80% { clip-path: inset(50% 0 30% 0); transform: translate(1px, -1px); }
            100% { clip-path: inset(20% 0 70% 0); transform: translate(0); }
        }

        /* Violent Shake for Severe Glitch */
        @keyframes severe-shake {
            0% { transform: translate(4px, 4px) skewX(20deg); }
            25% { transform: translate(-4px, -4px) skewX(-20deg); }
            50% { transform: translate(-4px, 4px) skewX(10deg); }
            75% { transform: translate(4px, -4px) skewX(-10deg); }
            100% { transform: translate(0, 0); }
        }

        /* Chaotic Slicing for Severe */
        @keyframes severe-slice-1 {
            0% { clip-path: inset(0 0 50% 0); transform: translate(20px, 0); }
            50% { clip-path: inset(30% 0 0 0); transform: translate(-20px, 0); }
            100% { clip-path: inset(0 0 0 0); transform: translate(0, 0); }
        }
        @keyframes severe-slice-2 {
            0% { clip-path: inset(50% 0 0 0); transform: translate(-20px, 0); }
            50% { clip-path: inset(0 0 30% 0); transform: translate(20px, 0); }
            100% { clip-path: inset(0 0 0 0); transform: translate(0, 0); }
        }
    `}),Ov=()=>{const[e,t]=F.useState([]);return F.useEffect(()=>{const i=setInterval(()=>{const r=Math.floor(Math.random()*3)+1,c=[];for(let f=0;f<r;f++){const h=nh[Math.floor(Math.random()*nh.length)],p=1,u=-200-Math.random()*200,g=50+Math.random()*(window.innerHeight-200),b=.4+Math.random()*1.1,v=b*1.5;c.push({id:Date.now()+f,x:u,y:g,text:h,dir:p,scale:b,speed:v})}t(f=>[...f,...c])},500),o=setInterval(()=>{t(r=>r.map(c=>({...c,x:c.x+c.speed*c.dir})).filter(c=>c.x<window.innerWidth+200))},16);return()=>{clearInterval(i),clearInterval(o)}},[]),d.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-0 opacity-60",children:e.map(i=>{const o=.2+(i.scale-.4)*.7;return d.jsx("div",{className:"absolute flex flex-col items-center",style:{left:i.x,top:i.y,transform:`scale(${i.scale})`,opacity:o,zIndex:Math.floor(i.scale*10)},children:d.jsx("div",{className:"bg-[#f1f5f9] text-black px-4 py-2 rounded-xl mb-1 text-sm font-bold whitespace-nowrap shadow-md",children:i.text})},i.id)})})},Nc="NULL_POINTER_EXCEPTION_0x00_FATAL",ks="",Iv=()=>{const[e,t]=F.useState(ks),[i,o]=F.useState(!1),[r,c]=F.useState(!1),[f,h]=F.useState(!1),[p,u]=F.useState(!1),g=F.useRef(!1),b=F.useRef(!1),v=F.useRef(0),x=F.useRef(Date.now()),T=()=>{h(!0),g.current=!0,N.audio.startHoverStatic()},M=()=>{h(!1),g.current=!1,N.audio.stopHoverStatic()};return F.useEffect(()=>{const k=setInterval(()=>{const C=g.current,w=Date.now();C?(v.current+=100,v.current>1e4&&N.unlockAchievement("abyss_gazer")):v.current=0,C&&!b.current&&Math.random()<.2&&N.audio.play("ui_glitch_minor");const j=C?.05:.005,O=w-x.current>25e3;if(!b.current&&(Math.random()<j||O)&&(b.current=!0,x.current=w,u(!0),N.audio.playAtmosphericGlitch(),setTimeout(()=>{u(!1),o(!0),setTimeout(()=>{o(!1),t(ks),b.current=!1,Math.random()<.5&&(c(!0),setTimeout(()=>c(!1),200))},400)},2500)),i){let V="";if(Math.random()<.3)V="SYSTEM_FAILURE";else{const H=ks.length+Math.floor(Math.random()*5);for(let X=0;X<H;X++)V+=Nc.charAt(Math.floor(Math.random()*Nc.length))}t(V)}else if(r)Math.random()<.3&&t(ks);else if(!b.current&&Math.random()<.05){let V="",H=!1;for(let X=0;X<ks.length;X++)if(Math.random()<.1){const ee=Math.floor(Math.random()*10);V+=Nc.charAt(ee),H=!0}else V+=ks[X];H&&t(V)}else i||t(ks)},100);return()=>{clearInterval(k)}},[i,r,p]),d.jsx("div",{className:"relative mb-4 px-4 py-2 cursor-pointer",onMouseEnter:T,onMouseLeave:M,children:d.jsx("h1",{className:`text-6xl font-black cyber-glitch-title retro-crt tracking-widest z-10 select-none 
                    ${i?"severe":""}
                    ${r?"blackout":""}
                    ${f||p?"nervous":""}
                `,"data-text":e,children:e})})},Vv=({onStart:e,onEncyclopedia:t,onAchievements:i,onLeaderboard:o,onContinue:r,onLinkCode:c})=>{const[f,h]=F.useState(!1),[p,u]=F.useState(!1),[g,b]=F.useState(!1),[v,x]=F.useState(!!document.fullscreenElement);F.useEffect(()=>{N.audio.playAmbientBGM(),b(N.hasSave());const M=()=>x(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",M),()=>document.removeEventListener("fullscreenchange",M)},[]);const T=()=>{N.toggleFullscreen()};return d.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-50 text-center p-4 pointer-events-none bg-black/80",children:[d.jsx(Rv,{}),d.jsxs("div",{className:"absolute top-6 left-6 pointer-events-auto flex items-center gap-3 z-30 animate-pulse",children:[d.jsx("div",{className:"w-14 h-14 border-4 border-white/30 rounded flex items-center justify-center font-bold text-xl text-white shadow-lg bg-slate-900/50",children:"Esc"}),d.jsx("div",{className:"text-sm text-slate-400 font-bold",children:""})]}),d.jsxs("div",{className:"absolute top-24 left-6 pointer-events-auto flex items-center gap-3 z-30 animate-pulse",children:[d.jsx("div",{className:"w-14 h-14 border-4 border-white/30 rounded flex items-center justify-center font-bold text-xl text-white shadow-lg bg-slate-900/50",children:"F11"}),d.jsx("div",{className:"text-sm text-slate-400 font-bold",children:"/"})]}),d.jsxs("div",{className:"absolute top-6 right-6 pointer-events-auto z-30 flex gap-4",children:[d.jsx("button",{onClick:T,className:"w-14 h-14 border-4 border-slate-500/50 hover:border-cyan-400 rounded-full flex items-center justify-center text-2xl bg-slate-900/50 text-slate-300 hover:text-white hover:scale-105 transition-all shadow-lg",title:v?"":" (ESC)",children:v?"":""}),d.jsx("button",{onClick:()=>u(!0),className:"w-14 h-14 border-4 border-slate-500/50 hover:border-cyan-400 rounded-full flex items-center justify-center text-2xl bg-slate-900/50 text-slate-300 hover:text-white hover:scale-105 transition-all shadow-lg",title:"",children:""})]}),d.jsx(Ov,{}),d.jsxs("div",{className:"pointer-events-auto bg-slate-900/90 p-12 rounded-xl border-4 border-cyan-500 shadow-[0_0_50px_rgba(34,211,238,0.2)] backdrop-blur-md max-w-2xl relative overflow-hidden z-10 flex flex-col items-center",children:[d.jsx(Iv,{}),d.jsx("div",{className:"text-3xl text-white font-bold mb-2 tracking-widest flex items-center gap-2",children:""}),d.jsxs("div",{className:"text-sm text-slate-400 mb-1 font-mono flex flex-col items-center",children:[d.jsx("span",{children:"Ev Studio "}),d.jsx("span",{className:"text-[10px] opacity-50 mt-1",children:"V1.9999 PRO MAX"})]}),d.jsxs("div",{className:"text-xs text-red-400 mt-2 font-bold animate-bounce flex items-center gap-2",children:[d.jsx("span",{children:""}),d.jsx("span",{children:"0.00012.0"}),d.jsx("span",{children:""})]}),d.jsxs("div",{className:"flex flex-col w-64 gap-4 mb-6 mt-8 relative z-20",children:[d.jsx(ce,{size:"lg",onClick:e,className:"text-2xl px-12 py-4 border-b-8 border-indigo-800",children:""}),g&&r&&d.jsx(ce,{size:"lg",onClick:r,className:"text-xl px-12 py-3 border-b-8 !border-green-800 bg-green-600 hover:bg-green-500",children:""})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full justify-center px-8 relative z-20",children:[d.jsx(ce,{size:"md",variant:"secondary",onClick:t,className:"border-b-4",children:" "}),d.jsx(ce,{size:"md",variant:"secondary",onClick:i,className:"border-b-4",children:" "}),d.jsx(ce,{size:"md",variant:"secondary",onClick:o,className:"border-b-4",children:" "}),d.jsx(ce,{size:"md",variant:"secondary",onClick:c,className:"border-b-4",children:" "})]}),d.jsx(ce,{size:"md",variant:"danger",onClick:()=>h(!0),className:"mt-6 px-10 relative z-20",children:""})]}),d.jsxs("div",{className:"absolute left-10 bottom-10 flex flex-col items-center gap-4 text-white/50 animate-pulse z-20",children:[d.jsx("div",{className:"text-2xl font-bold",children:""}),d.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[d.jsx("div",{}),d.jsx("div",{className:"w-12 h-12 border-4 border-white/30 rounded flex items-center justify-center font-bold text-xl",children:"W"}),d.jsx("div",{}),d.jsx("div",{className:"w-12 h-12 border-4 border-white/30 rounded flex items-center justify-center font-bold text-xl",children:"A"}),d.jsx("div",{className:"w-12 h-12 border-4 border-white/30 rounded flex items-center justify-center font-bold text-xl",children:"S"}),d.jsx("div",{className:"w-12 h-12 border-4 border-white/30 rounded flex items-center justify-center font-bold text-xl",children:"D"})]})]}),d.jsxs("div",{className:"absolute right-10 bottom-10 flex flex-col items-center gap-4 text-white/50 animate-pulse z-20",children:[d.jsx("div",{className:"text-2xl font-bold",children:""}),d.jsxs("div",{className:"w-24 h-36 border-4 border-white/30 rounded-full relative",children:[d.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 w-1 h-10 bg-white/30 rounded-full"}),d.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-0.5 h-full bg-white/10"})]})]}),f&&d.jsx(Av,{onClose:()=>h(!1)}),p&&d.jsx(Dv,{onClose:()=>u(!1)})]})},Hv=({onNext:e,onBack:t})=>{const[i,o]=F.useState(N.settings),[r,c]=F.useState(!!document.fullscreenElement);F.useEffect(()=>{N.audio.playAmbientBGM();const g=()=>c(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",g),()=>document.removeEventListener("fullscreenchange",g)},[]);const f=g=>{const b=parseFloat(g.target.value);N.updateSettings({volume:b}),o(v=>({...v,volume:b}))},h=()=>{const g=!i.autoAim;N.updateSettings({autoAim:g}),o(b=>({...b,autoAim:g}))},p=()=>{const g=!i.autoShoot;N.updateSettings({autoShoot:g}),o(b=>({...b,autoShoot:g}))},u=()=>{N.toggleFullscreen()};return d.jsxs("div",{className:"absolute inset-0 bg-black/90 flex flex-col items-center justify-center z-50 p-8",children:[d.jsx("h2",{className:"text-4xl font-black text-white mb-4",children:" ()"}),d.jsxs("p",{className:"text-slate-400 mb-8 text-sm animate-pulse",children:["  ",d.jsx("span",{className:"font-bold text-white bg-slate-700 px-2 py-0.5 rounded",children:"Esc"})," "]}),d.jsxs("div",{className:"flex flex-col gap-8 bg-slate-800/50 p-8 rounded-2xl border-2 border-slate-600 max-w-xl w-full",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-300",children:""}),d.jsxs("span",{className:"text-white font-mono",children:[(i.volume*100).toFixed(0),"%"]})]}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:i.volume,onChange:f,className:"w-full accent-cyan-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"}),d.jsx("p",{className:"text-slate-400 text-sm italic",children:'""'})]}),d.jsx("hr",{className:"border-slate-700"}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-xl font-bold text-purple-400",children:" (Fullscreen)"}),d.jsx("p",{className:"text-slate-400 text-sm italic",children:'" ESC  ( Chrome/Edge)"'})]}),d.jsx(ce,{size:"sm",variant:r?"primary":"outline",onClick:u,className:"w-24",children:r?"":""})]}),d.jsx("hr",{className:"border-slate-700"}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"space-y-1 max-w-[70%]",children:[d.jsx("h3",{className:"text-xl font-bold text-green-400",children:" ()"}),d.jsx("p",{className:"text-slate-400 text-sm italic",children:'""'}),d.jsx("p",{className:"text-red-400 text-xs font-bold mt-1",children:" "})]}),d.jsx(ce,{size:"sm",variant:i.autoAim?"primary":"outline",onClick:h,className:"w-24 shrink-0",children:i.autoAim?"":""})]}),d.jsx("hr",{className:"border-slate-700"}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"space-y-1",children:[d.jsx("h3",{className:"text-xl font-bold text-yellow-400",children:""}),d.jsx("p",{className:"text-slate-400 text-sm italic",children:'""'})]}),d.jsx(ce,{size:"sm",variant:i.autoShoot?"primary":"outline",onClick:p,className:"w-24",children:i.autoShoot?"":""})]})]}),d.jsxs("div",{className:"flex gap-6 mt-12",children:[d.jsx(ce,{size:"lg",variant:"outline",onClick:t,className:"text-xl px-8",children:""}),d.jsx(ce,{size:"lg",onClick:e,className:"px-12 text-xl",children:" ()"})]})]})},Pv=({onSelect:e,onBack:t})=>(F.useEffect(()=>{N.audio.playAmbientBGM()},[]),d.jsxs("div",{className:"absolute inset-0 bg-black/90 flex flex-col items-center justify-center z-50 p-8",children:[d.jsx("h2",{className:"text-4xl font-black text-white mb-12",children:""}),d.jsx("div",{className:"flex gap-8 mb-8",children:da.map(i=>d.jsxs("div",{onClick:()=>e(i.id),className:"bg-slate-800 border-4 border-slate-600 rounded-xl p-6 w-72 flex flex-col items-center hover:border-cyan-500 hover:scale-105 transition-all cursor-pointer group relative overflow-hidden",children:[d.jsx("div",{className:"text-8xl mb-6 group-hover:animate-bounce",children:i.emoji}),d.jsx("div",{className:"text-2xl font-bold text-cyan-300 mb-2",children:i.name}),d.jsx("p",{className:"text-slate-300 text-center mb-6 h-16",children:i.description}),d.jsxs("div",{className:"text-sm text-slate-400 grid grid-cols-1 gap-1 w-full bg-slate-900/50 p-3 rounded-lg mb-2",children:[d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:":"})," ",d.jsxs("span",{className:"text-white",children:["x",i.hpMult]})]}),d.jsxs("div",{className:"flex justify-between",children:[d.jsx("span",{children:":"})," ",d.jsxs("span",{className:"text-white",children:["x",i.damageMult]})]}),(i.id==="hard"||i.id==="ultimate")&&d.jsx("div",{className:"mt-2 text-xs text-red-400 font-bold border-t border-slate-700 pt-1 text-center animate-pulse",children:" "})]})]},i.id))}),d.jsx(ce,{variant:"outline",onClick:t,children:""})]})),hm={9527:{id:"9527",skills:[{name:"",type:"active",description:"//",icon:""},{name:"",type:"passive",description:" 100 ",icon:""}]},"007":{id:"007",skills:[{name:"",type:"active",description:"(AOE)",icon:""},{name:"",type:"passive",description:" 85%",icon:""}]},1024:{id:"1024",skills:[{name:"(Bug)",type:"active",description:" 15% ",icon:""},{name:"",type:"passive",description:" +2 ",icon:""}]},ev_creator:{id:"ev_creator",skills:[{name:"",type:"active",description:"(20%)(10%)  (10%)",icon:""},{name:"",type:"passive",description:" (110%)",icon:""}]},cleaner:{id:"cleaner",devNote:` [ / SCRAPPED] 

1. []  CPU 
2. []  Boss 
`,skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"mechanism",description:"",icon:""}]}},Bv=({onSelect:e,onBack:t})=>(F.useEffect(()=>{N.audio.playAmbientBGM()},[]),d.jsxs("div",{className:"absolute inset-0 bg-black/90 flex flex-col items-center justify-center z-50 p-8",children:[d.jsx("h2",{className:"text-4xl font-black text-white mb-8",children:""}),d.jsx("div",{className:"flex gap-6 mb-8 overflow-x-auto pb-4 pt-10 max-w-full px-4 snap-x",children:Object.values(jt).filter(i=>i.id!=="cleaner").map(i=>{let o=!1,r="";i.id==="ev_creator"?N.state.achievements.includes("kpi_crusher")||(o=!0,r=" KPI  1 "):i.id==="007"&&(N.state.achievements.includes("first_blood")||(o=!0,r=""));const c=hm[i.id];return d.jsxs("div",{className:`
                            bg-slate-800 border-4 rounded-xl p-6 w-72 flex flex-col shrink-0 transition-all cursor-pointer relative overflow-hidden snap-center group
                            ${o?"border-slate-700 opacity-80":"border-slate-600 hover:border-yellow-500 hover:bg-slate-750 hover:-translate-y-2"}
                        `,onClick:()=>!o&&e(i.id),children:[o&&d.jsxs("div",{className:"absolute inset-0 bg-black/80 z-20 flex flex-col items-center justify-center text-center p-4 backdrop-blur-sm",children:[d.jsx("div",{className:"text-6xl mb-4 grayscale opacity-50",children:i.emojiNormal}),d.jsx("div",{className:"text-red-400 font-bold mb-2 border-b border-red-900 pb-1",children:""}),d.jsx("div",{className:"text-xs text-slate-400",children:r})]}),d.jsxs("div",{className:"flex items-center gap-4 mb-4 border-b border-slate-700 pb-4",children:[d.jsx("div",{className:"text-5xl group-hover:scale-110 transition-transform",children:i.emojiNormal}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xl font-bold text-yellow-400 leading-tight",children:i.name}),d.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase mt-1 bg-slate-900 px-2 py-0.5 rounded inline-block",children:i.title})]})]}),d.jsx("div",{className:"text-xs text-slate-400 italic mb-4 min-h-[48px] bg-slate-900/30 p-2 rounded leading-relaxed border-l-2 border-slate-600",children:i.description}),c&&d.jsx("div",{className:"space-y-2 mb-4 flex-1",children:c.skills.map((f,h)=>d.jsxs("div",{className:"flex gap-2 items-start text-left bg-slate-900/50 p-2 rounded border border-slate-700/50",children:[d.jsx("span",{className:"text-lg shrink-0",children:f.icon}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-bold text-white mb-0.5",children:f.name}),d.jsx("div",{className:"text-[10px] text-slate-400 leading-tight",children:f.description})]})]},h))}),d.jsx("div",{className:"mt-auto w-full relative z-10",children:d.jsx(ce,{size:"sm",className:"w-full bg-indigo-600 hover:bg-indigo-500",disabled:o,children:o?"":""})})]},i.id)})}),d.jsx(ce,{variant:"outline",onClick:t,children:""})]})),Lv=(e,t,i,o)=>{if(e.maxCount){let c=e.maxCount;const f=ye.getSynergyCounts(t.items);(ye.getActiveTiers(f).hr||0)>=6&&e.tags&&e.tags.includes("hr")&&(c+=1);const p=t.items.filter(g=>{var b;return g===((b=e.items)==null?void 0:b[0])||g===e.title}).length,u=o.stock.filter(g=>g.id===e.id&&!g.purchased).length;if(p+u>=c)return!1}if(e.minWave&&i<e.minWave)return!1;const r=jt[t.characterId];return!(r&&r.bannedTags&&e.tags&&e.tags.some(f=>r.bannedTags.includes(f))||e.id==="fishing_guide"&&t.dodgeChance>=.6||e.prerequisites&&e.prerequisites.length>0&&!e.prerequisites.some(f=>t.items.includes(f)))},Rh=(e,t,i,o,r)=>{const c=e.player,f=e.currentWave,h=c.items.includes("");let p={common:100,excellent:0,rare:0,epic:0,mythic:0};f<=2?p={common:70,excellent:25,rare:5,epic:0,mythic:0}:f<=5?p={common:40,excellent:30,rare:20,epic:10,mythic:0}:p={common:20,excellent:20,rare:30,epic:20,mythic:10},h&&(p.common=Math.max(0,p.common-30),p.excellent+=10,p.rare+=10,p.epic+=5,f>2&&(p.mythic+=5));const u=t.filter(x=>o.includes(x.id)?!1:Lv(x,c,f,e.shopState)),g=[],b=[...o];let v=1;e.activeMutators.includes("inflation_shock")&&(v=1.5);for(let x=0;x<i;x++){const T=u.filter(O=>!b.includes(O.id));if(T.length===0)break;const M=p.common+p.excellent+p.rare+p.epic+p.mythic,k=Math.random()*M;let C="common",w=0;w+=p.common,k<w?C="common":(w+=p.excellent,k<w?C="excellent":(w+=p.rare,k<w?C="rare":(w+=p.epic,k<w?C="epic":C="mythic")));let j=[];if(C==="mythic"?j=T.filter(O=>O.rarity==="mythic"||O.rarity==="consumable"):j=T.filter(O=>O.rarity===C),j.length===0&&(j=T),j.length>0){const O=j[Math.floor(Math.random()*j.length)],V=Math.floor(O.price*(1+e.inflationRate)*v);r(O.id),g.push({...O,originalPrice:O.price,price:V,purchased:!1,locked:!1,uuid:Math.random().toString()}),b.push(O.id)}}return g},Ec=e=>{const t=e.player;let i=10+(e.isEndless?e.endlessWaveCount:0);const o=ye.getSynergyCounts(t.items),c=(ye.getActiveTiers(o).board||0)>=2;if(c&&!e.hasRefreshedThisWave)return 0;let f=1.5;t.items.includes("")&&(f=1.2);let h=i*Math.pow(f,e.refreshCount);return t.items.includes("")&&(h*=2),e.activeMutators.includes("inflation_shock")&&(h*=1.5),c&&(h=Math.floor(h*.5)),Math.floor(h)},zv=(e,t,i)=>{var b;const o=e.player,r=((b=e.derivedStats)==null?void 0:b.activeTiers)||{};let c=Math.floor(t.price*o.shopDiscount),f;const h=o.items.includes("");if(h&&!e.hasPurchasedThisWave&&(c=0,f={title:"!",text:"",type:"win"}),c>0&&o.items.includes("")){const v=Math.random();v<.3?(c=0,f={title:"!",text:"!",type:"win"}):v<.6&&(c=Math.floor(c*2),f={title:"!",text:"! ()",type:"info"})}let p=!1;if(h?p=o.gold-c>=-2e3:p=o.gold>=c,!p)return(f==null?void 0:f.type)==="info"?{success:!1,finalPrice:c,message:{title:"",text:"...",type:"info"}}:{success:!1,finalPrice:c};o.gold-=c,o.goldSpentInShop=(o.goldSpentInShop||0)+c,e.hasPurchasedThisWave=!0,t.effect(e),(!t.items||t.items.length===0)&&o.items.push(t.title),o.items.includes("")&&t.id!=="cracked_soft"&&Math.random()<.5&&(o.maxHp=Math.max(1,o.maxHp-5),o.hp>o.maxHp&&(o.hp=o.maxHp),f={title:"!",text:"!  -5",type:"error"}),ye.refreshDerivedStats(e);const u=e.derivedStats.activeTiers;let g=!1;return Object.entries(u).forEach(([v,x])=>{const T=r[v]||0;x>T&&(g=!0)}),i(g?"synergy":"coin"),{success:!0,finalPrice:c,message:f}},Mi={init:e=>{const t=e.state,i=t.player,o=t.shopState.stock.filter(h=>h.locked&&!h.purchased);o.forEach(h=>{h.originalPrice&&(h.price=Math.floor(h.originalPrice*(1+t.inflationRate)))});const r=o.map(h=>h.id),c=Math.max(0,i.shopSlots-o.length),f=Rh(t,kt,c,r,h=>e.unlockEntry(h));t.shopState.stock=[...o,...f],e.checkAchievements()},refresh:e=>{const t=e.state,i=Ec(t);if(t.player.gold>=i){t.player.gold-=i,t.player.goldSpentInShop=(t.player.goldSpentInShop||0)+i,t.refreshCount++,t.hasRefreshedThisWave=!0,t.restockCost=Ec(t),e.audio.playCoin();const o=t.shopState.stock.filter(h=>h.locked&&!h.purchased),r=o.map(h=>h.id),c=t.player.shopSlots-o.length,f=Rh(t,kt,c,r,h=>e.unlockEntry(h));return t.shopState.stock=[...o,...f],e.checkAchievements(),{success:!0,cost:i}}else return{success:!1,cost:i,message:""}},purchase:(e,t)=>{const i=e.state,o=i.shopState.stock[t];if(!o||o.purchased)return{success:!1,finalPrice:0};const r=zv(i,o,c=>{c==="coin"?e.audio.playCoin():c==="synergy"&&e.audio.playPowerup()});return r.success&&(i.shopState.stock[t]={...o,purchased:!0,locked:!1},e.checkAchievements()),r},toggleLock:(e,t)=>{const i=e.state.shopState.stock[t];i&&!i.purchased&&(i.locked=!i.locked)},getRefreshCost:e=>Ec(e.state)},Oh=({waveTitle:e,inflationRate:t,nextHpMult:i,diffCfg:o,nextDmgMult:r,uniqueEnemies:c,gold:f,hoverEnemy:h,setHoverEnemy:p,variant:u="default"})=>{const g=u==="retro",b=g?"bg-[#FFFFE1] border-[#7F9DB9] text-black":"bg-slate-800 border-slate-700 text-white",v=g?"text-black font-tahoma":"text-white font-bold",x=g?"text-gray-600":"text-slate-400",T=g?"bg-white border-gray-400 text-black":"bg-slate-700 border-slate-500 text-white",M=g?"bg-[#FFFFE1] border-black text-black shadow-lg":"bg-slate-900 border-slate-500 text-white shadow-xl";let k=g?"bg-white border-[#7F9DB9] text-black":"bg-slate-900 border-yellow-600 text-yellow-400";f<0&&(k=g?"bg-white border-red-500 text-red-600":"bg-red-900/50 border-red-500 text-red-400");const C=Math.round(t*100);let w=g?"text-green-600":"text-green-400",j="";return C>=20?(w="text-red-500",j=""):C>0&&(w="text-orange-400",j=""),d.jsxs("div",{className:`flex justify-between items-center mb-2 px-4 py-2 border shadow-sm shrink-0 ${b}`,children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("h2",{className:`text-lg font-bold ${v}`,children:e}),d.jsxs("div",{className:`text-xs font-bold flex items-center gap-1 ${w}`,title:"",children:[d.jsx("span",{children:j}),d.jsx("span",{children:":"}),d.jsxs("span",{className:"font-mono text-sm",children:[C,"%"]})]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"flex flex-col items-end",children:d.jsx("span",{className:`text-xs font-bold ${x}`,children:":"})}),d.jsx("div",{className:"flex gap-2",children:c.map(O=>{const V=Ns[O];return V?d.jsxs("div",{className:"relative group cursor-help",onMouseEnter:()=>p(O),onMouseLeave:()=>p(null),children:[d.jsx("span",{className:`text-2xl w-8 h-8 flex items-center justify-center rounded border shadow-sm ${T}`,children:V.emoji}),h===O&&d.jsxs("div",{className:`absolute top-full mt-2 right-0 w-56 border p-2 text-xs z-[100] ${M}`,children:[d.jsxs("h4",{className:"font-bold text-sm mb-1",children:[V.emoji," ",V.name||V.description.split("")[0]]}),d.jsx("p",{className:`mb-2 ${g?"text-gray-700":"text-slate-300"}`,children:V.description}),d.jsxs("div",{className:`grid grid-cols-2 gap-1 text-[10px] font-mono p-1 border ${g?"bg-white border-gray-300":"bg-slate-800 border-slate-600"}`,children:[d.jsxs("span",{children:["HP: ",Math.floor(V.hp*i)]}),d.jsxs("span",{children:["ATK: ",(V.damage*r).toFixed(1)]})]})]})]},O):null})})]}),d.jsx("div",{className:"flex items-center gap-6",children:d.jsxs("div",{className:`text-2xl px-4 py-1 rounded border-2 shadow-inner flex items-center gap-2 font-mono font-bold ${k}`,children:[d.jsx("span",{className:f<0?"animate-pulse":"text-yellow-600",children:""}),d.jsx("span",{children:f})]})})]})},Ih=({player:e,insuranceCount:t,maxInsurance:i,variant:o="default"})=>{const[r,c]=F.useState(null),f=o==="retro",h=f?"bg-gradient-to-r from-[#215DC6] to-[#215DC6]":"bg-slate-800 border border-slate-700",p=f?"bg-[#D6DFF7] border-l border-r border-b border-[#fff]":"bg-slate-900/50 border border-slate-700",u=f?"bg-white border-2 border-[#7F9DB9] text-black":"bg-transparent text-slate-300",g=f?"border-dashed border-gray-300":"border-slate-700",b=ye.getSynergyCounts(e.items),v=ye.getActiveTiers(b),x=Object.keys(b).filter(R=>b[R]>0).sort((R,Y)=>b[Y]-b[R]),T=x.length>0,k=(v.capital||0)>=4,C=k?Math.floor(e.goldSpentInShop/10*2):0,w=(e.pigDebts||[]).length*200,j=v.hr||0,O=e.items.some(R=>["","","","",""].includes(R)),V=j>0||O||e.items.some(R=>["","","","","","","",""].includes(R));let H=1,X=1,ee=1,re=1,J=0;j>=2&&(H+=.3,X+=.5),j>=4&&(J+=30);const ue=e.items.filter(R=>R==="").length;H+=.2*ue,X+=.2*ue,e.items.includes("")&&(H+=.5);const pe=e.items.filter(R=>R==="").length;ee+=.1*pe;const be=e.items.filter(R=>R==="").length;ee+=.2*be;const K=e.items.filter(R=>R==="").length;re+=.5*K;const fe=(R,Y)=>{const ie=Y.currentTarget.getBoundingClientRect();c({tagId:R,top:ie.top,left:ie.right+10})};return d.jsxs("div",{className:"w-60 flex flex-col gap-2 shrink-0 relative",children:[d.jsx("div",{className:`rounded-t-[4px] px-3 py-1 shadow-sm ${h}`,children:d.jsx("h3",{className:"font-bold text-white text-sm",children:""})}),d.jsx("div",{className:`flex-1 shadow-sm p-3 overflow-hidden flex flex-col ${p}`,children:d.jsxs("div",{className:`flex-1 overflow-y-auto scrollbar-hide p-2 text-xs ${u}`,children:[d.jsxs("div",{className:`space-y-1 ${f?"font-tahoma":"font-sans"}`,children:[d.jsxs("div",{className:`flex justify-between border-b ${g} pb-1`,children:[d.jsx("span",{children:":"})," ",d.jsx("span",{className:"font-bold text-[#d12f2f]",children:e.maxHp})]}),d.jsxs("div",{className:`flex justify-between border-b ${g} pb-1`,children:[d.jsx("span",{children:":"})," ",d.jsxs("span",{className:"text-green-600",children:[e.hpRegen>0?e.hpRegen.toFixed(1):0,"/s"]})]}),d.jsxs("div",{className:`flex justify-between border-b ${g} pb-1`,children:[d.jsx("span",{children:":"})," ",d.jsx("span",{className:"text-blue-600",children:e.maxShield})]}),d.jsxs("div",{className:`flex justify-between border-b ${g} pb-1`,children:[d.jsx("span",{children:":"})," ",d.jsx("span",{className:"font-bold",children:e.attackDamage.toFixed(1)})]}),d.jsxs("div",{className:`flex justify-between border-b ${g} pb-1`,children:[d.jsx("span",{children:":"})," ",d.jsxs("span",{children:[(60/Math.max(1,e.attackSpeed)).toFixed(2),"/s"]})]}),d.jsxs("div",{className:`flex justify-between border-b ${g} pb-1`,children:[d.jsx("span",{children:":"})," ",d.jsx("span",{children:e.projectileSpeed.toFixed(1)})]}),d.jsxs("div",{className:`flex justify-between border-b ${g} pb-1`,children:[d.jsx("span",{children:":"})," ",d.jsx("span",{children:e.projectileCount})]}),d.jsxs("div",{className:`flex justify-between border-b ${g} pb-1`,children:[d.jsx("span",{children:":"})," ",d.jsx("span",{children:e.projectilePierce})]}),d.jsxs("div",{className:`flex justify-between border-b ${g} pb-1`,children:[d.jsx("span",{children:":"})," ",d.jsx("span",{children:e.speed.toFixed(2)})]}),d.jsxs("div",{className:`flex justify-between border-b ${g} pb-1`,children:[d.jsx("span",{children:":"})," ",d.jsxs("span",{children:[(e.dropRate*100).toFixed(0),"%"]})]}),e.lifeSteal>0&&d.jsxs("div",{className:"flex justify-between text-red-600",children:[d.jsx("span",{children:":"})," ",d.jsxs("span",{children:[(e.lifeSteal*100).toFixed(1),"%"]})]}),e.dodgeChance>0&&d.jsxs("div",{className:"flex justify-between text-purple-600",children:[d.jsx("span",{children:":"})," ",d.jsxs("span",{children:[(e.dodgeChance*100).toFixed(0),"%"]})]}),e.damageReflection>0&&d.jsxs("div",{className:"flex justify-between text-gray-600",children:[d.jsx("span",{children:":"})," ",d.jsxs("span",{children:[(e.damageReflection*100).toFixed(0),"%"]})]}),t>0&&d.jsxs("div",{className:"flex justify-between text-orange-600 font-bold mt-2 pt-2 border-t border-gray-400",children:[d.jsx("span",{children:":"})," ",d.jsxs("span",{children:[e.insuranceGoldEarned,"/",i]})]}),w>0&&d.jsxs("div",{className:"flex justify-between text-red-500 font-bold mt-2 pt-2 border-t border-red-400/50 animate-pulse",children:[d.jsx("span",{children:":"}),d.jsxs("span",{children:["-",w," G"]})]}),V&&d.jsxs("div",{className:`mt-2 pt-2 border-t ${g} text-[#22d3ee]`,children:[d.jsxs("div",{className:"font-bold mb-1 flex items-center gap-1",children:[d.jsx("span",{children:""})," "]}),d.jsxs("div",{className:"grid grid-cols-2 gap-x-2 gap-y-0.5 pl-1",children:[d.jsx("span",{className:"opacity-80",children:":"}),d.jsxs("span",{className:"font-mono text-right text-green-400",children:["+",Math.round((H-1)*100),"%"]}),d.jsx("span",{className:"opacity-80",children:":"}),d.jsx("span",{className:"font-mono text-right text-red-400",children:"100%"}),d.jsx("span",{className:"opacity-80",children:":"}),d.jsxs("span",{className:"font-mono text-right text-yellow-300",children:["+",Math.round((ee-1)*100),"%"]}),d.jsx("span",{className:"opacity-80",children:":"}),d.jsxs("span",{className:"font-mono text-right",children:["+",Math.round((X-1)*100),"%"]}),d.jsx("span",{className:"opacity-80",children:":"}),d.jsxs("span",{className:"font-mono text-right",children:["+",Math.round((re-1)*100),"%"]}),J>0&&d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"opacity-80",children:":"}),d.jsxs("span",{className:"font-mono text-right text-purple-300",children:["-",J,"%"]})]})]})]}),k&&d.jsxs("div",{className:`mt-2 pt-2 border-t ${g} text-[#facc15]`,children:[d.jsxs("div",{className:"font-bold mb-1 flex items-center gap-1",children:[d.jsx("span",{children:""})," "]}),d.jsxs("div",{className:"flex justify-between pl-1",children:[d.jsx("span",{className:"text-xs opacity-80",children:":"}),d.jsxs("span",{className:"font-mono font-bold",children:[e.goldSpentInShop," G"]})]}),d.jsxs("div",{className:"flex justify-between pl-1 text-blue-400",children:[d.jsx("span",{className:"text-xs opacity-80",children:":"}),d.jsxs("span",{className:"font-mono font-bold",children:["+",C," "]})]})]})]}),T&&d.jsxs("div",{className:`mt-4 pt-2 border-t-2 ${g}`,children:[d.jsxs("div",{className:"font-bold mb-2 opacity-80 flex justify-between items-center",children:[d.jsx("span",{children:""}),d.jsx("span",{className:"text-[9px] opacity-50 font-normal",children:""})]}),d.jsx("div",{className:"space-y-1",children:x.map(R=>{const Y=wt[R];if(!Y)return null;const ie=b[R],Z=(v[R]||0)>0,A=R==="board",U=Y.levels.find(te=>te.count>ie),ae=Y.levels[Y.levels.length-1].count,oe=U?U.count:ae;return d.jsxs("div",{className:`
                                                relative flex flex-col rounded px-1.5 py-1 cursor-help transition-all border
                                                ${Z?A?"bg-black border-[#D4AF37] shadow-[0_0_8px_rgba(212,175,55,0.3)]":f?"bg-white border-blue-300":"bg-slate-800 border-slate-600":f?"bg-gray-100 border-gray-300 opacity-80":"bg-slate-900/40 border-slate-800 opacity-70"}
                                                hover:opacity-100
                                            `,onMouseEnter:te=>fe(R,te),onMouseLeave:()=>c(null),children:[d.jsxs("div",{className:"flex justify-between items-center z-10 relative",children:[d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("span",{className:Z?"opacity-100":"opacity-50 grayscale",children:Y.icon}),d.jsx("span",{style:{color:Z?Y.color:f?"#666":"#94a3b8"},className:"font-bold",children:Y.name})]}),d.jsx("div",{className:"flex items-center gap-1",children:d.jsxs("span",{className:`font-mono text-[10px] ${Z?"text-white":"text-slate-500"}`,children:[ie,d.jsxs("span",{className:"opacity-50",children:["/",oe]})]})})]}),d.jsxs("div",{className:"h-1 w-full bg-black/20 rounded-full mt-1 overflow-hidden relative",children:[d.jsx("div",{className:"h-full transition-all duration-300",style:{width:`${Math.min(100,ie/ae*100)}%`,backgroundColor:Z?Y.color:"#94a3b8"}}),Y.levels.map(te=>d.jsx("div",{className:"absolute top-0 bottom-0 w-[1px] bg-black/30",style:{left:`${te.count/ae*100}%`}},te.count))]})]},R)})})]})]})}),r&&wt[r.tagId]&&d.jsxs("div",{className:`fixed z-[9999] w-64 p-3 shadow-2xl pointer-events-none rounded-lg animate-pop-in ${f?"bg-[#FFFFE1] border border-black text-black":"bg-slate-900/95 border border-slate-500 text-white backdrop-blur-sm"}`,style:{top:Math.min(r.top,window.innerHeight-250),left:r.left},children:[d.jsxs("div",{className:`flex items-center gap-2 mb-2 border-b pb-2 ${f?"border-gray-400":"border-slate-600"}`,children:[d.jsx("span",{className:"text-2xl",children:wt[r.tagId].icon}),d.jsxs("div",{children:[d.jsx("div",{className:"font-bold text-sm",style:{color:wt[r.tagId].color},children:wt[r.tagId].name}),d.jsxs("div",{className:`text-[10px] ${f?"text-gray-600":"text-slate-400"}`,children:[": ",d.jsx("span",{className:"font-mono font-bold text-white bg-slate-700 px-1 rounded",children:b[r.tagId]})]})]})]}),d.jsx("div",{className:"text-[10px] mb-2 opacity-90 italic",children:wt[r.tagId].description}),d.jsx("div",{className:"space-y-1.5",children:wt[r.tagId].levels.map(R=>{const Y=b[r.tagId]>=R.count;return d.jsxs("div",{className:`flex items-start gap-2 text-[10px] ${Y?f?"text-black font-bold":"text-green-400 font-bold":"opacity-50"}`,children:[d.jsxs("span",{className:`font-mono min-w-[24px] text-center rounded px-1 ${Y?"bg-green-900/50 border border-green-700":"bg-slate-800 border border-slate-700"}`,children:[R.count,""]}),d.jsx("span",{className:"leading-tight flex-1",children:R.effectDesc}),Y&&d.jsx("span",{children:""})]},R.count)})})]})]})},Vh=({inventoryMap:e,variant:t="default"})=>{const[i,o]=F.useState(null),r=Object.values(e).reduce((b,v)=>b+v.count,0),c=t==="retro",f=c?"bg-gradient-to-r from-[#215DC6] to-[#215DC6]":"bg-slate-800 border border-slate-700",h=c?"bg-[#D6DFF7] border-l border-r border-b border-[#fff]":"bg-slate-900/50 border border-slate-700",p=c?"bg-white border-2 border-[#7F9DB9] inset-shadow":"bg-transparent",u=c?"bg-white border border-gray-300 hover:border-blue-500 hover:bg-blue-50 text-black":"bg-slate-800 border border-slate-600 hover:border-cyan-500 hover:bg-slate-700 text-white",g=(b,v)=>{const x=v.currentTarget.getBoundingClientRect(),M=window.innerWidth-x.left+8;o({name:b,top:x.top,right:M})};return d.jsxs("div",{className:"w-60 flex flex-col gap-2 shrink-0 relative",children:[d.jsxs("div",{className:`rounded-t-[4px] px-3 py-1 flex justify-between items-center shadow-sm ${f}`,children:[d.jsx("span",{className:"font-bold text-white text-sm",children:""}),d.jsx("span",{className:`text-[10px] px-1.5 rounded-sm font-bold ${c?"bg-white text-[#215DC6]":"bg-slate-700 text-white"}`,children:r})]}),d.jsx("div",{className:`flex-1 shadow-sm p-3 overflow-hidden flex flex-col ${h}`,children:d.jsx("div",{className:`flex-1 overflow-y-auto scrollbar-hide p-2 ${p}`,children:d.jsxs("div",{className:"grid grid-cols-3 gap-2 content-start",children:[Object.entries(e).map(([b,v])=>d.jsx("div",{className:"relative group cursor-help shrink-0 aspect-square",onMouseEnter:x=>g(b,x),onMouseLeave:()=>o(null),children:d.jsxs("div",{className:`w-full h-full rounded-[2px] flex items-center justify-center text-xl relative transition-all shadow-sm ${u}`,children:[v.icon,v.count>1&&d.jsx("span",{className:"absolute -bottom-1 -right-1 bg-white border border-gray-400 text-black text-[9px] font-bold px-1 rounded-sm shadow-sm z-10",children:v.count})]})},b)),Object.keys(e).length===0&&d.jsxs("div",{className:"col-span-3 flex flex-col items-center justify-center text-gray-400 italic gap-2 py-10",children:[d.jsx("span",{className:"text-2xl opacity-50",children:""}),d.jsx("span",{className:"text-[10px]",children:""})]})]})})}),i&&e[i.name]&&d.jsxs("div",{className:`fixed z-[9999] w-56 p-3 shadow-2xl pointer-events-none rounded-lg animate-pop-in ${c?"bg-[#FFFFE1] border border-black text-black":"bg-slate-900/95 border border-slate-500 text-white backdrop-blur-sm"}`,style:{top:Math.min(i.top,window.innerHeight-150),right:i.right},children:[d.jsxs("div",{className:`flex items-center gap-2 mb-2 border-b pb-2 ${c?"border-gray-400":"border-slate-600"}`,children:[d.jsx("span",{className:"text-2xl bg-black/10 p-1 rounded",children:e[i.name].icon}),d.jsxs("div",{children:[d.jsx("div",{className:"font-bold text-sm",children:i.name}),d.jsxs("div",{className:`text-[10px] ${c?"text-gray-600":"text-slate-400"}`,children:[": ",d.jsx("span",{className:"font-mono font-bold",children:e[i.name].count})]})]})]}),d.jsx("div",{className:"text-xs leading-relaxed opacity-90",children:e[i.name].desc})]})]})},qv=({item:e,discount:t,playerGold:i,onBuy:o,onToggleLock:r,ownedCount:c})=>{const[f,h]=F.useState(null),u=(w=>{switch(w){case"mythic":return{card:"bg-red-950/40 border-red-500/80 shadow-[0_10px_35px_-5px_rgba(239,68,68,0.7)]",btn:"bg-gradient-to-b from-red-600 to-red-700 border-red-800 text-white hover:from-red-500 hover:to-red-600 shadow-red-900/50",title:"text-red-100",iconBg:"bg-red-900/30"};case"consumable":return{card:"bg-slate-950 border-amber-200/60 shadow-[0_0_25px_rgba(251,191,36,0.25)] ring-1 ring-amber-500/30",btn:"bg-gradient-to-b from-amber-600 to-yellow-700 border-amber-200 text-white hover:from-amber-500 hover:to-yellow-600 shadow-[0_4px_15px_rgba(245,158,11,0.4)]",title:"text-amber-100 font-serif tracking-wide",iconBg:"bg-gradient-to-br from-slate-800 to-black border-amber-500/50"};case"epic":return{card:"bg-yellow-950/40 border-yellow-500/80 shadow-[0_10px_30px_-5px_rgba(234,179,8,0.6)]",btn:"bg-gradient-to-b from-yellow-600 to-yellow-700 border-yellow-800 text-white hover:from-yellow-500 hover:to-yellow-600 shadow-yellow-900/50",title:"text-yellow-100",iconBg:"bg-yellow-900/30"};case"rare":return{card:"bg-purple-950/40 border-purple-500/80 shadow-[0_8px_25px_-5px_rgba(168,85,247,0.5)]",btn:"bg-gradient-to-b from-purple-600 to-purple-700 border-purple-800 text-white hover:from-purple-500 hover:to-purple-600 shadow-purple-900/50",title:"text-purple-100",iconBg:"bg-purple-900/30"};case"excellent":return{card:"bg-blue-950/40 border-blue-500/80 shadow-[0_8px_25px_-5px_rgba(59,130,246,0.5)]",btn:"bg-gradient-to-b from-blue-600 to-blue-700 border-blue-800 text-white hover:from-blue-500 hover:to-blue-600 shadow-blue-900/50",title:"text-blue-100",iconBg:"bg-blue-900/30"};default:return{card:"bg-slate-800/80 border-slate-600",btn:"bg-slate-700 hover:bg-slate-600 border-slate-500 text-slate-200",title:"text-white",iconBg:"bg-slate-700/50"}}})(e.rarity),g=Math.floor(e.price*t);let b=0;e.originalPrice&&(b=e.price-e.originalPrice);const v=e.maxCount&&c>=e.maxCount,x=i>=g,T=!!e.purchased||v||!x,M=c>0&&e.getDynamicDescription?e.getDynamicDescription(c):e.description,k=w=>{const j=/([+\-]?\d+(?:\.\d+)?%?)|(||||||||||||||||||||||||||)/g;return w.split(j).map((V,H)=>{if(!V)return null;if(/^[+\-]?\d+(?:\.\d+)?%?$/.test(V))return d.jsx("span",{className:"text-yellow-300 font-bold font-mono text-[11px] mx-0.5",children:V},H);switch(V){case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":return d.jsx("span",{className:"text-red-400 font-bold",children:V},H);case"":case"":case"":case"":case"":return d.jsx("span",{className:"text-green-400 font-bold",children:V},H);case"":case"":case"":case"":case"":case"":case"":return d.jsx("span",{className:"text-blue-400 font-bold",children:V},H);case"":return d.jsx("span",{className:"text-cyan-400 font-bold",children:V},H);case"":case"":case"":return d.jsx("span",{className:"text-yellow-400 font-bold",children:V},H);default:return d.jsx("span",{children:V},H)}})},C=w=>w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")?"bg-red-900/80 text-red-200 border-red-500":w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")?"bg-emerald-900/80 text-emerald-200 border-emerald-500":w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")?"bg-yellow-900/80 text-yellow-200 border-yellow-500":w.includes("")||w.includes("")||w.includes("")||w.includes("")?"bg-blue-900/80 text-blue-200 border-blue-500":"bg-purple-900/80 text-purple-200 border-purple-500";return d.jsxs("div",{className:`
            p-2 rounded-lg border-2 transition-all flex flex-col relative min-h-[140px] group gap-1
            ${e.purchased?"opacity-50 grayscale bg-slate-900 border-slate-700":`${u.card}`}
        `,children:[!e.purchased&&e.rarity!=="common"&&d.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/5 to-transparent pointer-events-none rounded-lg"}),!e.purchased&&e.rarity==="consumable"&&d.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-amber-200/10 to-transparent pointer-events-none rounded-lg animate-pulse"}),d.jsxs("div",{className:"flex justify-between items-start mb-1 relative z-10",children:[d.jsxs("div",{className:`w-8 h-8 rounded flex items-center justify-center text-xl ${u.iconBg} border border-white/10 relative`,children:[e.icon,c>0&&(!e.maxCount||e.maxCount>1)&&d.jsxs("div",{className:`absolute -top-1.5 -left-1.5 text-[8px] font-bold px-1 rounded-full border shadow-md ${v?"bg-red-600 text-white border-red-400":"bg-slate-700 text-white border-slate-500"}`,children:[c,e.maxCount?`/${e.maxCount}`:""]})]}),d.jsx("div",{className:"flex gap-1",children:!e.purchased&&d.jsx("button",{onClick:w=>{w.stopPropagation(),r()},className:`
                                text-[10px] w-5 h-5 rounded flex items-center justify-center transition-colors border
                                ${e.locked?"bg-red-500/20 border-red-500 text-red-400":"bg-slate-800/50 border-slate-600 text-slate-500 hover:text-slate-300"}
                            `,title:"",children:e.locked?"":""})})]}),d.jsx("h4",{className:`font-bold text-xs mb-0.5 ${u.title} truncate relative z-10`,children:e.title}),d.jsxs("div",{className:"flex flex-wrap gap-0.5 mb-1 relative z-10",children:[e.maxCount&&d.jsx("span",{className:`
                        text-[8px] px-1 py-0 rounded border cursor-help font-bold
                        ${e.maxCount===1?"bg-purple-900/80 text-purple-200 border-purple-500 shadow-[0_0_5px_rgba(168,85,247,0.4)]":"bg-orange-900/80 text-orange-200 border-orange-500"}
                    `,children:e.maxCount===1?"":`${c}/${e.maxCount}`}),e.statTags&&e.statTags.map(w=>d.jsx("span",{className:`text-[8px] px-1 py-0 rounded border font-bold ${C(w)}`,children:w},w)),e.rarity==="consumable"&&d.jsx("span",{className:"text-[8px] px-1 py-0 rounded border border-amber-400 bg-black text-amber-200 font-bold shadow-[0_0_8px_rgba(251,191,36,0.3)]",children:""}),e.tags&&e.tags.length>0&&e.tags.map(w=>{const j=wt[w];if(!j||w==="consumable")return null;const O=w==="board";return d.jsxs("span",{className:`
                                text-[8px] px-1 py-0 rounded border cursor-help relative
                                ${O?"bg-black text-[#D4AF37] border-[#D4AF37] shadow-[0_0_8px_rgba(212,175,55,0.4)] font-bold":"bg-black/40 text-slate-200 border-slate-600"}
                            `,style:O?{}:{borderColor:j.color,color:j.color},onMouseEnter:()=>h(w),onMouseLeave:()=>h(null),children:[j.name,f===w&&d.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-48 bg-slate-900 border border-slate-500 p-2 rounded shadow-xl z-50 pointer-events-none",children:[d.jsx("div",{className:"font-bold text-xs mb-1",style:{color:j.color},children:j.name}),d.jsx("div",{className:"text-[9px] text-slate-300 leading-tight mb-1",children:j.description}),d.jsx("div",{className:"space-y-0.5",children:j.levels.map(V=>d.jsxs("div",{className:"flex justify-between text-[8px] text-slate-400",children:[d.jsxs("span",{children:["(",V.count,")"]}),d.jsx("span",{children:V.effectDesc})]},V.count))})]})]},w)})]}),d.jsx("div",{className:"text-[10px] text-slate-300 mb-1 flex-1 leading-relaxed relative z-10 whitespace-pre-wrap",children:k(M)}),e.quote&&d.jsx("div",{className:"mt-1 pt-1 border-t border-white/10 text-[9px] text-slate-500 italic leading-tight opacity-75 relative z-10 font-serif",children:e.quote}),d.jsx("button",{disabled:T,onClick:w=>{w.stopPropagation(),o()},className:`
                    w-full px-2 py-1.5 rounded text-xs font-bold border-b-4 active:border-b-0 active:translate-y-[2px] transition-all flex justify-between items-center shadow-lg relative z-10 mt-auto
                    ${e.purchased?"bg-slate-800 border-slate-700 text-slate-500 cursor-not-allowed shadow-none":v?"bg-red-900/50 border-red-800 text-red-300 cursor-not-allowed shadow-none":x?u.btn:"bg-slate-800 border-slate-600 text-slate-500 cursor-not-allowed opacity-70"}
                `,children:e.purchased?d.jsx("span",{className:"mx-auto",children:""}):v?d.jsx("span",{className:"mx-auto text-[10px]",children:e.limitReason||""}):d.jsxs(d.Fragment,{children:[d.jsxs("span",{children:[" ",g]}),b>0&&d.jsxs("span",{className:"text-[9px] opacity-80 font-normal",children:["+",b]})]})})]})},Gv=({item:e,discount:t,playerGold:i,onBuy:o,onToggleLock:r,ownedCount:c})=>{const[f,h]=F.useState(!1),u=(w=>{switch(w){case"mythic":return{header:"bg-gradient-to-r from-[#d12f2f] to-[#ff6b6b]",body:"bg-[#fff0f0]",border:"border-[#8a1c1c]",text:"text-[#5c0000]",btn:"bg-gradient-to-b from-[#ffcccc] to-[#ff6666] border-[#cc0000] hover:brightness-110"};case"consumable":return{header:"bg-gradient-to-r from-[#2c2c2c] via-[#505050] to-[#2c2c2c]",body:"bg-[#f8f8f8]",border:"border-[#b8860b]",text:"text-black",btn:"bg-gradient-to-b from-[#fff7cc] to-[#ffd700] border-[#b8860b] hover:brightness-110 text-black"};case"epic":return{header:"bg-gradient-to-r from-[#e6b800] to-[#ffd700]",body:"bg-[#fffff0]",border:"border-[#b8860b]",text:"text-[#5c4d00]",btn:"bg-gradient-to-b from-[#fffacd] to-[#ffd700] border-[#daa520] hover:brightness-110"};case"rare":return{header:"bg-gradient-to-r from-[#800080] to-[#ba55d3]",body:"bg-[#fcf0ff]",border:"border-[#4b0082]",text:"text-[#2e004f]",btn:"bg-gradient-to-b from-[#e6e6fa] to-[#dda0dd] border-[#800080] hover:brightness-110"};case"excellent":return{header:"bg-gradient-to-r from-[#0054e3] to-[#2585ea]",body:"bg-[#f0f8ff]",border:"border-[#003c74]",text:"text-[#002b52]",btn:"bg-gradient-to-b from-[#bbeeff] to-[#66ccff] border-[#0054e3] hover:brightness-110"};default:return{header:"bg-gradient-to-r from-[#21a121] to-[#3cd13c]",body:"bg-white",border:"border-[#448f44]",text:"text-black",btn:"bg-gradient-to-b from-[#f0f0f0] to-[#dcdcdc] border-[#888888] hover:brightness-110"}}})(e.rarity),g=Math.floor(e.price*t);let b=0;e.originalPrice&&(b=e.price-e.originalPrice);const v=e.maxCount&&c>=e.maxCount,x=i>=g,T=!!e.purchased||v||!x,M=c>0&&e.getDynamicDescription?e.getDynamicDescription(c):e.description,k=w=>w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")?"bg-red-100 text-red-800 border-red-300":w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")?"bg-green-100 text-green-800 border-green-300":w.includes("")||w.includes("")||w.includes("")||w.includes("")||w.includes("")?"bg-yellow-100 text-yellow-800 border-yellow-300":w.includes("")||w.includes("")||w.includes("")||w.includes("")?"bg-blue-100 text-blue-800 border-blue-300":"bg-purple-100 text-purple-800 border-purple-300",C=w=>{const j=/([+\-]?\d+(?:\.\d+)?%?)|(||||||||||||||||||||||||||)/g;return w.split(j).map((V,H)=>{if(!V)return null;if(/^[+\-]?\d+(?:\.\d+)?%?$/.test(V))return d.jsx("span",{className:"text-[#d12f2f] font-bold font-mono text-[11px] mx-0.5",children:V},H);switch(V){case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":case"":return d.jsx("span",{className:"text-[#800000] font-bold",children:V},H);case"":case"":case"":case"":case"":return d.jsx("span",{className:"text-[#006400] font-bold",children:V},H);case"":case"":case"":case"":case"":case"":case"":return d.jsx("span",{className:"text-[#00008b] font-bold",children:V},H);case"":return d.jsx("span",{className:"text-[#008b8b] font-bold",children:V},H);case"":case"":case"":return d.jsx("span",{className:"text-[#b8860b] font-bold",children:V},H);default:return d.jsx("span",{children:V},H)}})};return d.jsxs("div",{className:`
                relative flex flex-col rounded-t-lg overflow-hidden transition-all duration-200
                border-2 ${u.border} ${u.body} shadow-md
                ${e.purchased?"opacity-60 grayscale filter":"hover:shadow-xl"}
            `,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),style:{fontFamily:"Tahoma, sans-serif"},children:[d.jsxs("div",{className:`${u.header} px-1.5 py-0.5 flex justify-between items-center h-6 shrink-0`,children:[d.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[d.jsx("span",{className:"text-white font-bold text-xs shadow-black drop-shadow-md truncate",children:e.title}),e.maxCount&&d.jsx("span",{className:"text-[8px] text-white bg-black/20 px-1 rounded border border-white/30 shrink-0",children:e.maxCount===1?"":`${c}/${e.maxCount}`})]}),!e.purchased&&d.jsx("button",{onClick:w=>{w.stopPropagation(),r()},className:`
                            w-5 h-4 flex items-center justify-center rounded-[2px] border 
                            ${e.locked?"bg-red-600 border-red-800 shadow-[inset_1px_1px_2px_rgba(0,0,0,0.5)]":"bg-white/20 border-white/40 hover:bg-white/40"}
                            transition-colors text-[9px] ml-1
                        `,title:e.locked?" ()":" ()",children:e.locked?"":""})]}),d.jsxs("div",{className:"p-1.5 flex flex-col flex-1 gap-1",children:[d.jsxs("div",{className:"flex gap-1.5",children:[d.jsx("div",{className:"w-8 h-8 bg-white border border-gray-400 shadow-inner flex items-center justify-center text-xl shrink-0 rounded-[2px] relative",children:e.icon}),d.jsxs("div",{className:"flex flex-col min-w-0 flex-1",children:[e.statTags&&e.statTags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-0.5 mb-0.5",children:e.statTags.map(w=>d.jsx("span",{className:`text-[8px] px-1 rounded border ${k(w)} whitespace-nowrap`,children:w},w))}),d.jsx("div",{className:`text-[10px] ${u.text} leading-tight overflow-y-auto max-h-[50px] scrollbar-hide whitespace-pre-wrap`,children:C(M)})]})]}),e.quote&&d.jsx("div",{className:`text-[9px] opacity-70 italic border-t ${u.border.replace("border-","border-dashed ")} pt-1 mt-0.5 ${u.text}`,children:e.quote}),d.jsx("div",{className:"mt-auto pt-0.5",children:d.jsx("button",{disabled:T,onClick:w=>{w.stopPropagation(),o()},className:`
                            w-full px-1.5 py-0.5 text-[10px] font-bold rounded-[3px] border-b-2 active:border-b-0 active:translate-y-[1px]
                            flex justify-between items-center shadow-sm transition-all
                            ${e.purchased?"bg-gray-300 border-gray-500 text-gray-600 cursor-not-allowed":v?"bg-red-100 border-red-300 text-red-900 cursor-not-allowed":x?`${u.btn} ${u.text}`:"bg-gray-200 border-gray-400 text-gray-500 cursor-not-allowed"}
                        `,children:e.purchased?d.jsx("span",{className:"mx-auto",children:""}):v?d.jsx("span",{className:"mx-auto text-[9px]",children:e.limitReason||""}):d.jsxs(d.Fragment,{children:[d.jsxs("span",{children:[" ",g]}),b>0&&d.jsxs("span",{className:"text-[8px] opacity-70",children:["+",b]})]})})})]})]})},Yv=({onNextWave:e,onLinkCode:t})=>{const i=N.state.shopState.stock,[o,r]=F.useState(null),[,c]=F.useReducer(K=>K+1,0),[f,h]=F.useState([]),p=N.state.player,u=p.shopDiscount,g=u<1?` ( ${(u*10).toFixed(1)})`:"",b=N.settings.shopSkin==="retro",v=(K,fe,R)=>{const Y=Date.now()+Math.random();h(ie=>[...ie.slice(-2),{id:Y,title:K,text:R,type:fe}]),setTimeout(()=>{h(ie=>ie.filter(q=>q.id!==Y))},2e3)};F.useEffect(()=>{N.audio.playShopBGM(),Mi.init(N),c()},[]),F.useEffect(()=>{const K=setInterval(()=>{if(N.state.modalMessage){const fe=N.state.modalMessage;v(fe.title,fe.type,fe.text),N.state.modalMessage=null}},100);return()=>clearInterval(K)},[]);const x=()=>{const K=Mi.refresh(N);K.success?c():v("","error",K.message||"...")},T=K=>{Mi.toggleLock(N,K),c()},M=K=>{const fe=Mi.purchase(N,K);fe.success?(fe.message&&v(fe.message.title,fe.message.type,fe.message.text),c()):fe.message?v(fe.message.title,fe.message.type,fe.message.text):v("","error","...")},k={};p.items.forEach(K=>{if(!k[K]){let fe="",R="";const Y=kt.find(ie=>{var q;return((q=ie.items)==null?void 0:q.includes(K))||ie.title===K});Y&&(fe=Y.description,R=Y.icon),k[K]={count:0,desc:fe,icon:R}}k[K].count++});const C=N.state.currentWave+1,w=N.state.isEndless?N.state.endlessWaveCount%8+1:C,j=Kt.find(K=>K.waveNumber===w)||Kt[Kt.length-1],O=Array.from(new Set(j.enemies.map(K=>K.type))),V=N.state.isEndless,H=V?` ( ${N.state.endlessWaveCount} )`:` ${N.state.currentWave}  `,X=da.find(K=>K.id===N.state.difficultyId)||da[1],ee=X.hpMult*(1+(C-1)*.1)*(V?Math.pow(1.1,N.state.endlessWaveCount):1),re=X.damageMult*(1+(C-1)*.05)*(V?Math.pow(1.1,N.state.endlessWaveCount):1),J=p.items.filter(K=>K==="").length,ue=J*(p.items.includes("")?1200:800),pe=Mi.getRefreshCost(N),be=()=>d.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-[200] flex flex-col gap-3 pointer-events-none items-center w-full max-w-md",children:f.map(K=>{const fe=K.type==="win"?b?"bg-[#FFFFE1] border-[#0054E3] text-black shadow-[4px_4px_0px_rgba(0,0,0,0.5)]":"bg-green-600 border-green-400 text-white shadow-[0_0_20px_rgba(34,197,94,0.6)]":K.type==="error"?b?"bg-red-100 border-red-500 text-red-900 shadow-[4px_4px_0px_rgba(0,0,0,0.5)]":"bg-red-600 border-red-400 text-white shadow-[0_0_20px_rgba(239,68,68,0.6)]":b?"bg-white border-[#7F9DB9] text-black shadow-[4px_4px_0px_rgba(0,0,0,0.5)]":"bg-slate-700 border-slate-500 text-white shadow-xl";return d.jsxs("div",{className:`px-6 py-4 rounded-xl border-4 animate-pop-in pointer-events-auto w-full text-center ${fe}`,children:[d.jsxs("div",{className:"font-black text-xl flex items-center justify-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:K.type==="win"?"":K.type==="error"?"":""}),K.title]}),K.text&&d.jsx("div",{className:"text-sm font-bold opacity-90 mt-2",children:K.text})]},K.id)})});return b?d.jsxs("div",{className:"absolute inset-0 bg-[#3A6EA5] flex flex-col items-center justify-center z-50 p-4 font-sans select-none overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(circle at center, white 1px, transparent 1px)",backgroundSize:"40px 40px"}}),be(),d.jsxs("div",{className:"w-full max-w-7xl h-full flex flex-col bg-[#ECE9D8] rounded-t-xl border-[3px] border-[#0054E3] shadow-[0_0_20px_rgba(0,0,0,0.5)] relative overflow-hidden z-10",children:[d.jsxs("div",{className:"bg-gradient-to-r from-[#0058EE] via-[#3593FF] to-[#0058EE] h-8 flex justify-between items-center px-3 shrink-0",children:[d.jsx("div",{className:"flex items-center gap-2",children:d.jsx("span",{className:"text-white font-bold font-tahoma text-sm drop-shadow-md",children:" - Microsoft Internet Explorer"})}),d.jsx("div",{className:"flex gap-1",children:d.jsx("div",{className:"w-5 h-5 bg-[#D5452F] rounded-[3px] border border-white/50 flex items-center justify-center shadow-sm cursor-pointer hover:brightness-110",children:d.jsx("span",{className:"text-white font-bold text-xs leading-none",children:"X"})})})]}),d.jsxs("div",{className:"bg-[#ECE9D8] border-b border-[#D1D1D1] px-2 py-1 flex items-center gap-4 text-xs text-black shrink-0",children:[d.jsx("span",{children:"(F)"}),d.jsx("span",{children:"(E)"}),d.jsx("span",{children:"(V)"}),d.jsx("span",{children:"(A)"}),d.jsx("button",{onClick:t,className:"text-blue-600 underline hover:text-blue-800 ml-auto",children:"/"})]}),d.jsxs("div",{className:"flex flex-1 gap-2 p-3 overflow-hidden min-h-0 bg-[#ECE9D8]",children:[d.jsx(Ih,{player:p,insuranceCount:J,maxInsurance:ue,variant:"retro"}),d.jsxs("div",{className:"flex-1 flex flex-col gap-2 overflow-hidden",children:[d.jsx(Oh,{waveTitle:H,inflationRate:N.state.inflationRate,nextHpMult:ee,diffCfg:X,nextDmgMult:re,uniqueEnemies:O,gold:p.gold,hoverEnemy:o,setHoverEnemy:r,variant:"retro"}),d.jsxs("div",{className:"flex-1 bg-white border-2 border-[#7F9DB9] p-3 overflow-hidden flex flex-col shadow-inner",children:[d.jsxs("div",{className:"flex justify-between items-center mb-3 shrink-0 bg-[#F0F0F0] p-2 border-b border-[#E0E0E0]",children:[d.jsxs("h3",{className:"text-lg font-bold text-[#444] flex items-center gap-2 font-tahoma",children:["  ",d.jsx("span",{className:"text-xs font-normal text-gray-500",children:g})]}),d.jsxs("button",{onClick:x,className:"px-4 py-1.5 bg-gradient-to-b from-[#3dc753] to-[#2d913d] border-[2px] border-[#2b6334] rounded-tr-xl rounded-bl-xl rounded-tl-sm rounded-br-sm text-white text-sm font-bold hover:brightness-110 flex items-center gap-2 active:translate-y-[1px] shadow-md transition-all",title:"",children:[d.jsx("span",{className:"italic text-lg",children:""}),d.jsx("span",{children:""}),pe===0?d.jsx("span",{className:"bg-yellow-100 px-1.5 rounded text-yellow-800 font-mono text-xs border border-yellow-300",children:"!"}):d.jsxs("span",{className:"bg-white/20 px-1.5 rounded text-yellow-100 font-mono text-xs",children:["-",pe,"G"]})]})]}),d.jsxs("div",{className:"grid grid-cols-4 gap-3 overflow-y-auto scrollbar-hide content-start flex-1 p-1",children:[i.map((K,fe)=>{const R=p.items.filter(Y=>Y===K.title||K.items&&K.items.includes(Y)).length;return d.jsx(Gv,{item:K,discount:u,playerGold:p.gold,onBuy:()=>M(fe),onToggleLock:()=>T(fe),ownedCount:R},K.uuid)}),Array.from({length:Math.max(0,p.shopSlots-i.length)}).map((K,fe)=>d.jsx("div",{className:"border border-dashed border-gray-300 rounded bg-gray-50 flex items-center justify-center min-h-[160px]",children:d.jsx("span",{className:"text-3xl opacity-10 grayscale",children:""})},`empty-${fe}`))]}),d.jsxs("div",{className:"text-[10px] text-gray-500 mt-1 text-right flex items-center justify-end gap-1",children:[d.jsx("span",{children:" "}),d.jsx("span",{className:"border border-gray-400 px-1 rounded bg-gray-100",children:""}),d.jsx("span",{children:""})]})]})]}),d.jsx(Vh,{inventoryMap:k,variant:"retro"})]}),d.jsx("div",{className:"bg-[#ECE9D8] border-t border-[#D1D1D1] p-3 flex justify-center shrink-0",children:d.jsx("button",{onClick:e,className:"px-10 py-2 bg-gradient-to-b from-[#44c767] to-[#28a049] border-2 border-[#18ab29] rounded-[4px] text-white font-bold text-xl shadow-md hover:brightness-110 active:border-[#1e6f2a] active:translate-y-[1px] font-tahoma",children:V?" () >>":C===8?"  KPI ()":" () >>"})})]})]}):d.jsxs("div",{className:"absolute inset-0 bg-slate-950 flex flex-col items-center justify-center z-50 p-4 font-sans select-none overflow-hidden",children:[be(),d.jsxs("div",{className:"w-full max-w-7xl h-full flex flex-col relative overflow-hidden z-10",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0 bg-slate-900/80 p-4 rounded-xl border border-slate-700 backdrop-blur",children:[d.jsxs("h2",{className:"text-2xl font-black text-white",children:[" ",d.jsx("span",{className:"text-sm font-normal text-slate-400 ml-2",children:V?"":""})]}),d.jsx("button",{onClick:t,className:"text-cyan-400 hover:text-cyan-300 underline text-sm",children:" / "})]}),d.jsxs("div",{className:"flex flex-1 gap-4 overflow-hidden min-h-0",children:[d.jsx(Ih,{player:p,insuranceCount:J,maxInsurance:ue,variant:"default"}),d.jsxs("div",{className:"flex-1 flex flex-col gap-4 overflow-hidden",children:[d.jsx(Oh,{waveTitle:H,inflationRate:N.state.inflationRate,nextHpMult:ee,diffCfg:X,nextDmgMult:re,uniqueEnemies:O,gold:p.gold,hoverEnemy:o,setHoverEnemy:r,variant:"default"}),d.jsxs("div",{className:"flex-1 bg-slate-800/50 border border-slate-700 rounded-xl p-4 overflow-hidden flex flex-col shadow-inner",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[d.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:["  ",d.jsx("span",{className:"text-sm font-normal text-slate-400",children:g})]}),d.jsx(ce,{size:"sm",onClick:x,variant:"secondary",children:pe===0?d.jsx("span",{children:"  (!)"}):d.jsxs("span",{children:["  (-",pe," G)"]})})]}),d.jsxs("div",{className:"grid grid-cols-4 gap-4 overflow-y-auto scrollbar-hide content-start flex-1 pr-1",children:[i.map((K,fe)=>{const R=p.items.filter(Y=>Y===K.title||K.items&&K.items.includes(Y)).length;return d.jsx(qv,{item:K,discount:u,playerGold:p.gold,onBuy:()=>M(fe),onToggleLock:()=>T(fe),ownedCount:R},K.uuid)}),Array.from({length:Math.max(0,p.shopSlots-i.length)}).map((K,fe)=>d.jsx("div",{className:"border-2 border-dashed border-slate-700 rounded-lg bg-slate-800/30 flex items-center justify-center min-h-[160px]",children:d.jsx("span",{className:"text-4xl opacity-20 grayscale",children:""})},`empty-${fe}`))]})]})]}),d.jsx(Vh,{inventoryMap:k,variant:"default"})]}),d.jsx("div",{className:"mt-4 flex justify-center shrink-0",children:d.jsx(ce,{size:"lg",onClick:e,variant:"success",className:"px-12 py-4 text-2xl shadow-lg shadow-green-900/20",children:V?" () >>":C===8?"  KPI ()":" () >>"})})]})]})},Uv=({onMainMenu:e,onEndless:t})=>d.jsx("div",{className:"absolute inset-0 bg-yellow-500/20 backdrop-blur-md flex flex-col items-center justify-center z-50 animate-bounce-in p-4",children:d.jsxs("div",{className:"bg-black/80 p-12 rounded-2xl border-4 border-yellow-500 text-center",children:[d.jsx("h1",{className:"text-7xl font-black text-yellow-300 mb-4 drop-shadow-lg",children:""}),d.jsx("p",{className:"text-2xl text-white mb-8",children:"KPI"}),d.jsx("div",{className:"text-8xl mb-8 animate-bounce",children:""}),d.jsxs("div",{className:"text-xl text-slate-300 mb-8",children:[": ",N.state.score]}),d.jsxs("div",{className:"flex gap-8 justify-center",children:[d.jsx(ce,{size:"lg",onClick:e,className:"bg-indigo-600 border-indigo-800",children:" ()"}),d.jsx(ce,{size:"lg",onClick:t,className:"bg-red-600 hover:bg-red-500 border-red-800 animate-pulse",children:" ()"})]})]})}),Fv=({onRestart:e,onMainMenu:t})=>{var g;const i=N.state.killer||"unknown",o=oh[i]||oh.unknown,r=da.find(b=>b.id===N.state.difficultyId),c=N.state.player,f=c.characterId||"9527",h=((g=jt[f])==null?void 0:g.name)||"",p=N.state.isEndless;F.useEffect(()=>{N.audio.playGameOverBGM()},[]);const u={};return c.items.forEach(b=>{if(!u[b]){let v="";const x=kt.find(T=>{var M;return((M=T.items)==null?void 0:M.includes(b))||T.title===b});x&&(v=x.icon),u[b]={count:0,icon:v}}u[b].count++}),d.jsx("div",{className:"absolute inset-0 bg-red-900/90 backdrop-blur-md flex flex-col items-center justify-center z-50 animate-bounce-in p-6 overflow-y-auto",children:d.jsxs("div",{className:"bg-black/80 p-8 rounded-2xl border-4 border-red-500 text-center max-w-7xl w-full my-auto flex flex-col gap-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-9xl font-black text-white mb-2 glitch-text","data-text":"",children:""}),d.jsx("p",{className:"text-3xl text-red-200 mb-4",children:p?"":""}),d.jsxs("p",{className:"text-xl text-slate-400 italic",children:['"',o,'"']})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 text-left",children:[d.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl space-y-4 border border-slate-700",children:[d.jsx("h3",{className:"text-red-400 font-bold text-xl border-b border-slate-700 pb-2 mb-2",children:""}),d.jsxs("div",{className:"grid grid-cols-2 gap-y-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-slate-500",children:""}),d.jsx("div",{className:"text-xl text-white font-bold",children:h})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-slate-500",children:""}),d.jsxs("div",{className:"text-xl text-yellow-300 font-bold",children:[r==null?void 0:r.emoji," ",r==null?void 0:r.name]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-slate-500",children:""}),p?d.jsxs("div",{className:"text-xl text-purple-400 font-bold",children:[" ",N.state.endlessWaveCount," "]}):d.jsxs("div",{className:"text-xl text-white font-bold",children:[" ",N.state.currentWave," "]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-slate-500",children:""}),d.jsxs("div",{className:"text-xl text-yellow-400 font-mono font-bold",children:[" ",N.state.score]})]})]})]}),d.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl space-y-4 border border-slate-700",children:[d.jsx("h3",{className:"text-green-400 font-bold text-xl border-b border-slate-700 pb-2 mb-2",children:""}),d.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-base",children:[d.jsxs("div",{className:"flex justify-between px-1",children:[d.jsx("span",{children:":"})," ",d.jsx("span",{className:"text-white",children:c.maxHp})]}),d.jsxs("div",{className:"flex justify-between px-1",children:[d.jsx("span",{children:":"})," ",d.jsx("span",{className:"text-blue-300",children:c.maxShield})]}),d.jsxs("div",{className:"flex justify-between px-1",children:[d.jsx("span",{children:":"})," ",d.jsx("span",{className:"text-red-300",children:c.attackDamage.toFixed(1)})]}),d.jsxs("div",{className:"flex justify-between px-1",children:[d.jsx("span",{children:":"})," ",d.jsxs("span",{className:"text-yellow-300",children:[(60/c.attackSpeed).toFixed(1),"/s"]})]}),d.jsxs("div",{className:"flex justify-between px-1",children:[d.jsx("span",{children:":"})," ",d.jsx("span",{className:"text-green-300",children:c.speed.toFixed(1)})]}),d.jsxs("div",{className:"flex justify-between px-1",children:[d.jsx("span",{children:":"})," ",d.jsx("span",{className:"text-orange-300",children:c.projectilePierce})]}),d.jsxs("div",{className:"flex justify-between px-1",children:[d.jsx("span",{children:":"})," ",d.jsxs("span",{className:"text-purple-300",children:[(c.dodgeChance*100).toFixed(0),"%"]})]}),d.jsxs("div",{className:"flex justify-between px-1",children:[d.jsx("span",{children:":"})," ",d.jsxs("span",{className:"text-red-500",children:[(c.lifeSteal*100).toFixed(0),"%"]})]})]})]}),d.jsxs("div",{className:"bg-slate-900/50 p-6 rounded-xl border border-slate-700 flex flex-col",children:[d.jsx("h3",{className:"text-cyan-400 font-bold text-xl border-b border-slate-700 pb-2 mb-4",children:""}),d.jsxs("div",{className:"flex flex-wrap gap-3 content-start overflow-y-auto scrollbar-hide flex-1 min-h-[200px] max-h-[300px]",children:[Object.entries(u).map(([b,v])=>d.jsxs("div",{className:"w-14 h-14 bg-slate-800 rounded-lg border border-slate-600 flex items-center justify-center text-3xl relative group",children:[v.icon,v.count>1&&d.jsxs("span",{className:"absolute bottom-0 right-0 bg-yellow-500 text-black text-xs font-bold px-1.5 rounded-tl",children:["x",v.count]}),d.jsx("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-black text-sm text-white px-2 py-1 rounded whitespace-nowrap opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity z-10 border border-slate-500",children:b})]},b)),Object.keys(u).length===0&&d.jsx("span",{className:"text-lg text-slate-600 italic",children:"..."})]})]})]}),d.jsxs("div",{className:"flex gap-8 justify-center mt-8",children:[d.jsx(ce,{size:"lg",onClick:e,className:"bg-red-600 border-red-800 hover:bg-red-500 text-xl px-12",children:""}),d.jsx(ce,{size:"lg",variant:"outline",onClick:t,className:"text-xl px-12",children:""})]})]})})},Xv=({config:e,isUnlocked:t,isSelected:i,onClick:o})=>{const r=e.tier||"common",c=e.behavior==="bonus";let f="border-slate-600 bg-slate-800";return t?(r==="boss"?f="border-red-600 bg-red-900/20":r==="epic"?f="border-yellow-500 bg-yellow-900/20":r==="rare"&&(f="border-purple-500 bg-purple-900/20"),c&&(f+=" border-yellow-400 shadow-lg shadow-yellow-500/20")):f="border-slate-800 grayscale brightness-50",i&&(f+=" border-cyan-400 bg-slate-700"),d.jsx("div",{onClick:o,className:`
                aspect-square rounded-lg border-2 flex items-center justify-center text-3xl cursor-pointer transition-all hover:scale-105
                ${f}
            `,children:t?e.emoji:"?"})},Wv=({item:e,isUnlocked:t,isSelected:i,onClick:o})=>{let r="border-slate-600 bg-slate-800";return t?e.rarity==="mythic"?r="border-red-900 shadow-red-500/20 shadow-sm":e.rarity==="consumable"?r="border-amber-200 shadow-[0_0_15px_rgba(251,191,36,0.3)] shadow-sm bg-black":e.rarity==="epic"?r="border-yellow-600 shadow-yellow-500/10 shadow-sm":e.rarity==="rare"?r="border-purple-800":e.rarity==="excellent"&&(r="border-blue-600"):r="grayscale brightness-50 border-slate-800",i&&(r+=" border-cyan-400 bg-slate-700"),d.jsx("div",{onClick:o,className:`
                aspect-square rounded-lg border-2 flex items-center justify-center text-3xl cursor-pointer transition-all hover:scale-105
                ${r}
            `,children:t?e.icon:"?"})},Qv=({character:e,isUnlocked:t,isSelected:i,onClick:o})=>{let r="border-slate-600 bg-slate-800";return t||(r="grayscale brightness-50 border-slate-800"),i&&(r+=" border-indigo-400 bg-slate-700"),d.jsx("div",{onClick:o,className:`
                aspect-square rounded-lg border-2 flex items-center justify-center text-3xl cursor-pointer transition-all hover:scale-105
                ${r}
            `,children:t?e.emojiNormal:"?"})},$v=({summon:e,isUnlocked:t,isSelected:i,onClick:o})=>{const r=e.tier||"common";let c="border-slate-600 bg-slate-800";return t?r==="mythic"?c="border-red-900 shadow-red-500/20 shadow-sm bg-red-950/30":r==="epic"?c="border-yellow-600 shadow-yellow-500/10 shadow-sm bg-yellow-950/30":r==="rare"?c="border-purple-800 bg-purple-950/30":c="border-slate-600 bg-slate-800":c="border-slate-800 grayscale brightness-50",i?c+=" border-cyan-400 ring-1 ring-cyan-400 bg-slate-700":t&&(c+=" hover:border-cyan-500/50"),d.jsxs("div",{onClick:o,className:`
                aspect-square rounded-lg border-2 flex items-center justify-center text-3xl cursor-pointer transition-all hover:scale-105 relative
                ${c}
            `,children:[t?e.emoji:"?",t&&r!=="common"&&d.jsx("div",{className:`absolute top-1 right-1 w-1.5 h-1.5 rounded-full ${r==="mythic"?"bg-red-500":r==="epic"?"bg-yellow-500":"bg-purple-500"}`})]})},Kv={keyboard_man:{id:"keyboard_man",skills:[{name:"",type:"active",description:" 3-5 ''''''",icon:""},{name:"",type:"passive",description:"",icon:""}]},tian_gou:{id:"tian_gou",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"active",description:"",icon:""}]},tian_gou_frenzy:{id:"tian_gou_frenzy",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"mechanism",description:"",icon:""}]},spoiler_dog:{id:"spoiler_dog",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"passive",description:"",icon:""}]},balloon:{id:"balloon",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"mechanism",description:"",icon:""}]},minion:{id:"minion",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"active",description:"",icon:""}]},boss_ai_clone:{id:"boss_ai_clone",devNote:` [] 
AI`,skills:[{name:"",type:"passive",description:"AI ",icon:""}]},boss_ai_node:{id:"boss_ai_node",devNote:` [] 
 Boss AI `,skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"active",description:"BOSS",icon:""}]},lemon_head:{id:"lemon_head",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"active",description:"",icon:""}]},gai_liu_zi:{id:"gai_liu_zi",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"passive",description:"",icon:""}]},chi_gua:{id:"chi_gua",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"active",description:"",icon:""}]},marketing_account:{id:"marketing_account",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"passive",description:"",icon:""}]},tao_wa_med:{id:"tao_wa_med",skills:[{name:"",type:"mechanism",description:" 2 ",icon:""}]},tao_wa_small:{id:"tao_wa_small",skills:[{name:"",type:"passive",description:"",icon:""}]},river_crab:{id:"river_crab",skills:[{name:"404",type:"passive",description:"",icon:""},{name:"",type:"active",description:"",icon:""}]},hr_specialist:{id:"hr_specialist",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"passive",description:"",icon:""}]},micro_manager:{id:"micro_manager",skills:[{name:"",type:"active",description:"",icon:""}]},pie_painter:{id:"pie_painter",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"passive",description:"",icon:""}]},da_ye:{id:"da_ye",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"passive",description:"",icon:""}]},clown:{id:"clown",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"passive",description:"",icon:""}]},tao_wa_big:{id:"tao_wa_big",skills:[{name:"",type:"mechanism",description:" 2 ",icon:""}]},product_manager:{id:"product_manager",skills:[{name:"",type:"active",description:"",icon:""}]},leech:{id:"leech",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"mechanism",description:"",icon:""}]},bonus_chest:{id:"bonus_chest",skills:[{name:"",type:"mechanism",description:"",icon:""},{name:"",type:"passive",description:"",icon:""}]},delivery_guy:{id:"delivery_guy",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"mechanism",description:"",icon:""}]},elite_manager:{id:"elite_manager",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"ultimate",description:"",icon:""}]},elite_hr:{id:"elite_hr",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"ultimate",description:"",icon:""},{name:"",type:"passive",description:"",icon:""}]},cyber_goddess:{id:"cyber_goddess",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"active",description:"",icon:""},{name:"",type:"passive",description:"",icon:""}]},capital_crocodile:{id:"capital_crocodile",skills:[{name:"",type:"mechanism",description:"",icon:""},{name:"",type:"active",description:"",icon:""}]},boss_kpi:{id:"boss_kpi",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"active",description:"",icon:""},{name:"",type:"active",description:"",icon:""},{name:"",type:"ultimate",description:"",icon:""}]},boss_glitch:{id:"boss_glitch",skills:[{name:"Lag Spike ()",type:"active",description:"Lag",icon:""},{name:"Z-Fighting",type:"active",description:"",icon:""},{name:"Stack Overflow",type:"ultimate",description:"",icon:""},{name:"BSOD Wall",type:"mechanism",description:"",icon:""}]},boss_ai:{id:"boss_ai",devNote:`  
 BOSS AI  Bug 

[ / DEPRECATED]`,skills:[{name:"Defrag Storm",type:"active",description:"",icon:""},{name:"Data Stream",type:"active",description:" DDOS ",icon:""},{name:"Fatal Exception",type:"ultimate",description:"",icon:""},{name:"Chaos Morph",type:"passive",description:"",icon:""}]}},Zv={chase:"",shooter:"",rusher:"",boss:"",circle:"",turret:"",tank:"",minion:"",bonus:"",support:"",spawner:"",linker:"",summoner_orbit:"",devourer:"",balloon:""},Jv={single:"",spread:"",spiral:"",circle:"",explode:"",burst:""},ex=({enemy:e,isUnlocked:t})=>{const i=["boss_ai","boss_ai_clone","boss_ai_node"].includes(e.type),o=Kv[e.type];if(!t)return d.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pop-in",children:[d.jsx("div",{className:"text-9xl grayscale brightness-0 opacity-50",children:"?"}),d.jsx("h2",{className:"text-3xl font-black text-slate-600",children:"???"}),d.jsx("p",{className:"text-slate-500",children:""})]});const r=e.tier||"common",c=u=>{switch(u){case"boss":case"mythic":return"text-red-500";case"epic":return"text-yellow-400";case"rare":return"text-purple-400";default:return"text-white"}},f=u=>{switch(u){case"boss":case"mythic":return"bg-red-900 text-red-300";case"epic":return"bg-yellow-900 text-yellow-300";case"rare":return"bg-purple-900 text-purple-300";default:return"bg-slate-700 text-slate-300"}},h=u=>{switch(u){case"boss":return"BOSS ()";case"epic":return" ()";case"rare":return" ()";default:return" ()"}},p=e.name||e.description.split("")[0]||e.description.split("")[0];return d.jsxs("div",{className:`flex flex-col gap-6 animate-pop-in relative ${i?"overflow-hidden":""}`,children:[i&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 transform rotate-12 opacity-30 pointer-events-none",children:d.jsx("div",{className:"border-4 border-red-500 text-red-500 font-black text-6xl px-4 py-2",children:"DEPRECATED"})}),d.jsx("style",{children:`
                        .glitch-container {
                            animation: glitch-skew 3s infinite linear alternate-reverse;
                        }
                        @keyframes glitch-skew {
                            0% { transform: skew(0deg); }
                            20% { transform: skew(-2deg); }
                            40% { transform: skew(1deg); }
                            60% { transform: skew(0deg); }
                            80% { transform: skew(3deg); }
                            100% { transform: skew(0deg); }
                        }
                    `})]}),d.jsxs("div",{className:`flex items-center gap-6 ${i?"glitch-container filter hue-rotate-90":""}`,children:[d.jsx("div",{className:`text-8xl bg-slate-800 p-6 rounded-full border-4 ${r==="boss"?"border-red-600 shadow-red-500/30 shadow-lg":r==="epic"?"border-yellow-500 shadow-yellow-500/30 shadow-lg":r==="rare"?"border-purple-500":"border-slate-600"}`,children:e.emoji}),d.jsxs("div",{children:[d.jsx("h2",{className:`text-4xl font-black mb-2 ${c(r)}`,children:p}),d.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold uppercase ${f(r)}`,children:h(r)}),e.behavior==="bonus"&&d.jsx("span",{className:"ml-2 px-2 py-0.5 rounded text-xs font-bold uppercase bg-yellow-500 text-black",children:""})]})]}),i&&(o==null?void 0:o.devNote)&&d.jsx("div",{className:"bg-red-950/50 border border-red-500/50 p-4 rounded-lg text-sm text-red-200 font-mono whitespace-pre-wrap relative z-10",children:o.devNote}),d.jsxs("div",{className:`bg-slate-800/50 p-6 rounded-xl border border-slate-700 space-y-4 ${i?"opacity-80":""}`,children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-400 border-b border-slate-700 pb-2",children:""}),d.jsx("p",{className:"text-lg text-slate-300 leading-relaxed",children:e.description}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm mt-4",children:[d.jsxs("div",{className:"flex justify-between bg-slate-900 p-2 rounded",children:[d.jsx("span",{children:":"})," ",d.jsx("span",{className:"text-green-400",children:e.hp})]}),d.jsxs("div",{className:"flex justify-between bg-slate-900 p-2 rounded",children:[d.jsx("span",{children:":"})," ",d.jsx("span",{className:"text-red-400",children:e.damage})]}),d.jsxs("div",{className:"flex justify-between bg-slate-900 p-2 rounded",children:[d.jsx("span",{children:":"})," ",d.jsx("span",{className:"text-blue-400",children:e.speed})]}),d.jsxs("div",{className:"flex justify-between bg-slate-900 p-2 rounded",children:[d.jsx("span",{children:":"})," ",d.jsx("span",{className:"text-yellow-400",children:e.score})]})]})]}),o&&o.skills&&o.skills.length>0&&d.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[d.jsxs("h3",{className:"text-xl font-bold text-purple-400 border-b border-slate-700 pb-2 mb-4 flex items-center gap-2",children:[d.jsx("span",{children:""})," "]}),d.jsx("div",{className:"grid gap-3",children:o.skills.map((u,g)=>d.jsxs("div",{className:"flex gap-3 items-start bg-slate-900/50 p-3 rounded-lg border border-slate-700/50",children:[d.jsx("div",{className:"text-2xl mt-1",children:u.icon}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"font-bold text-white text-base",children:u.name}),d.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold uppercase ${u.type==="ultimate"?"bg-red-900 text-red-200 border border-red-700":u.type==="active"?"bg-blue-900 text-blue-200 border border-blue-700":u.type==="mechanism"?"bg-purple-900 text-purple-200 border border-purple-700":"bg-slate-700 text-slate-300 border border-slate-600"}`,children:u.type==="ultimate"?"":u.type==="active"?"":u.type==="mechanism"?"":""})]}),d.jsx("p",{className:`text-sm ${i?"text-slate-500 line-through":"text-slate-400"}`,children:u.description})]})]},g))})]}),d.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[d.jsx("h3",{className:"text-xl font-bold text-red-400 border-b border-slate-700 pb-2 mb-4",children:""}),d.jsxs("div",{className:"space-y-2 text-slate-300",children:[d.jsxs("p",{children:[d.jsx("span",{className:"text-slate-500",children:":"})," ",d.jsx("span",{className:"text-white font-bold",children:Zv[e.behavior]||e.behavior})]}),d.jsxs("p",{children:[d.jsx("span",{className:"text-slate-500",children:":"})," ",d.jsx("span",{className:"text-white font-bold",children:Jv[e.attackPattern||"single"]||""})]}),e.projectileChar&&d.jsxs("p",{children:[d.jsx("span",{className:"text-slate-500",children:":"})," ",d.jsx("span",{className:"text-white bg-slate-700 px-2 rounded",children:e.projectileChar})]}),e.deathQuotes&&d.jsxs("p",{children:[d.jsx("span",{className:"text-slate-500",children:":"})," ",d.jsxs("span",{className:"italic text-slate-400",children:['"',e.deathQuotes[0],'"']})]})]})]})]})},tx=({item:e,isUnlocked:t})=>{if(!t)return d.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pop-in",children:[d.jsx("div",{className:"text-9xl grayscale brightness-0 opacity-50",children:"?"}),d.jsx("h2",{className:"text-3xl font-black text-slate-600",children:"???"}),d.jsx("p",{className:"text-slate-500",children:""})]});const i=c=>{switch(c){case"boss":case"mythic":return"text-red-500";case"consumable":return"text-amber-100 drop-shadow-[0_0_5px_rgba(251,191,36,0.8)]";case"epic":return"text-yellow-400";case"rare":return"text-purple-400";case"excellent":return"text-blue-400";default:return"text-white"}},o=c=>{switch(c){case"boss":case"mythic":return"bg-red-900 text-red-300";case"consumable":return"bg-black text-amber-200 border border-amber-400 shadow-[0_0_10px_rgba(251,191,36,0.3)]";case"epic":return"bg-yellow-900 text-yellow-300";case"rare":return"bg-purple-900 text-purple-300";case"excellent":return"bg-blue-900 text-blue-300";default:return"bg-slate-700 text-slate-300"}},r=c=>{switch(c){case"mythic":return" ()";case"consumable":return" ()";case"epic":return" ()";case"rare":return" ()";case"excellent":return" ()";default:return" ()"}};return d.jsxs("div",{className:"flex flex-col gap-6 animate-pop-in",children:[d.jsxs("div",{className:"flex items-center gap-6",children:[d.jsx("div",{className:`text-8xl bg-slate-800 p-6 rounded-xl border-4 ${e.rarity==="mythic"?"border-red-500 shadow-red-500/20 shadow-lg":e.rarity==="consumable"?"border-amber-200 shadow-amber-500/30 shadow-lg bg-slate-900":e.rarity==="epic"?"border-yellow-500 shadow-yellow-500/20 shadow-lg":e.rarity==="rare"?"border-purple-500":e.rarity==="excellent"?"border-blue-500":"border-slate-600"}`,children:e.icon}),d.jsxs("div",{children:[d.jsx("h2",{className:`text-4xl font-black mb-2 ${i(e.rarity)}`,children:e.title}),d.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:d.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold uppercase ${o(e.rarity)}`,children:r(e.rarity)})}),e.tags&&e.tags.length>0&&d.jsx("div",{className:"flex flex-wrap gap-2",children:e.tags.map(c=>{if(c==="consumable")return null;const f=wt[c];return f?d.jsxs("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded border text-xs bg-slate-900/80",style:{borderColor:f.color,color:f.color},children:[d.jsx("span",{children:f.icon}),d.jsx("span",{className:"font-bold",children:f.name})]},c):null})})]})]}),d.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700 space-y-4",children:[d.jsx("h3",{className:"text-xl font-bold text-blue-400 border-b border-slate-700 pb-2",children:""}),d.jsx("p",{className:"text-lg text-slate-300 leading-relaxed",children:e.description}),e.quote&&d.jsx("div",{className:"bg-black/30 p-3 rounded-lg border-l-4 border-yellow-600 italic text-yellow-100/80 text-sm",children:e.quote}),d.jsxs("div",{className:"mt-4 flex justify-between items-center bg-slate-900 p-3 rounded",children:[d.jsx("span",{className:"text-slate-500",children:""}),d.jsxs("span",{className:"text-yellow-400 font-mono text-xl",children:[" ",e.price]})]})]})]})},ax=({character:e,isUnlocked:t})=>{if(!t)return d.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pop-in",children:[d.jsx("div",{className:"text-9xl grayscale brightness-0 opacity-50",children:"?"}),d.jsx("h2",{className:"text-3xl font-black text-slate-600",children:"???"}),d.jsx("p",{className:"text-slate-500",children:""})]});const i=hm[e.id],o=!!(i!=null&&i.devNote);return d.jsxs("div",{className:`flex flex-col gap-6 animate-pop-in relative ${o?"overflow-hidden":""}`,children:[o&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"absolute top-0 right-0 p-4 transform rotate-12 opacity-30 pointer-events-none z-20",children:d.jsx("div",{className:"border-4 border-red-500 text-red-500 font-black text-6xl px-4 py-2",children:"SCRAPPED"})}),d.jsx("style",{children:`
                        .glitch-container {
                            animation: glitch-skew 3s infinite linear alternate-reverse;
                        }
                        @keyframes glitch-skew {
                            0% { transform: skew(0deg); }
                            20% { transform: skew(-1deg); }
                            40% { transform: skew(1deg); }
                            60% { transform: skew(0deg); }
                            80% { transform: skew(2deg); }
                            100% { transform: skew(0deg); }
                        }
                    `})]}),d.jsxs("div",{className:`flex items-center gap-6 ${o?"glitch-container filter hue-rotate-90":""}`,children:[d.jsx("div",{className:`text-8xl bg-slate-800 p-6 rounded-xl border-4 shadow-lg ${o?"border-red-600 shadow-red-500/20":"border-indigo-500"}`,children:e.emojiNormal}),d.jsxs("div",{children:[d.jsx("h2",{className:`text-4xl font-black mb-2 ${o?"text-red-500 line-through decoration-4":"text-indigo-400"}`,children:e.name}),d.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold uppercase ${o?"bg-red-900 text-red-200":"bg-indigo-900 text-indigo-200"}`,children:o?"":e.title})]})]}),o&&(i==null?void 0:i.devNote)&&d.jsx("div",{className:"bg-red-950/50 border border-red-500/50 p-4 rounded-lg text-sm text-red-200 font-mono whitespace-pre-wrap relative z-10",children:i.devNote}),i&&i.skills&&i.skills.length>0&&d.jsxs("div",{className:`bg-slate-800/50 p-6 rounded-xl border border-slate-700 ${o?"opacity-60":""}`,children:[d.jsxs("h3",{className:"text-xl font-bold text-indigo-400 border-b border-slate-700 pb-2 mb-4 flex items-center gap-2",children:[d.jsx("span",{children:""})," "]}),d.jsx("div",{className:"grid gap-3",children:i.skills.map((r,c)=>d.jsxs("div",{className:"flex gap-3 items-start bg-slate-900/50 p-3 rounded-lg border border-slate-700/50",children:[d.jsx("div",{className:"text-2xl mt-1",children:r.icon}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"font-bold text-white text-base",children:r.name}),d.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold uppercase ${r.type==="active"?"bg-blue-900 text-blue-200 border border-blue-700":r.type==="mechanism"?"bg-purple-900 text-purple-200 border border-purple-700":"bg-slate-700 text-slate-300 border border-slate-600"}`,children:r.type==="active"?"":r.type==="mechanism"?"":""})]}),d.jsx("p",{className:"text-sm text-slate-400",children:r.description})]})]},c))})]}),d.jsxs("div",{className:`bg-slate-800/50 p-6 rounded-xl border border-slate-700 space-y-4 ${o?"opacity-40 grayscale":""}`,children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-400 border-b border-slate-700 pb-2",children:""}),d.jsx("div",{className:"bg-black/20 p-4 rounded-lg border-l-4 border-indigo-500",children:d.jsx("p",{className:"text-sm text-slate-300 italic leading-relaxed",children:e.description})}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 text-sm",children:[d.jsxs("div",{className:"bg-slate-900 p-2 rounded flex justify-between",children:[d.jsx("span",{children:""})," ",d.jsx("span",{className:"text-green-400",children:e.baseStats.maxHp})]}),d.jsxs("div",{className:"bg-slate-900 p-2 rounded flex justify-between",children:[d.jsx("span",{children:""})," ",d.jsx("span",{className:"text-red-400",children:e.baseStats.attackDamage})]}),d.jsxs("div",{className:"bg-slate-900 p-2 rounded flex justify-between",children:[d.jsx("span",{children:""})," ",d.jsx("span",{className:"text-blue-400",children:e.baseStats.speed})]}),d.jsxs("div",{className:"bg-slate-900 p-2 rounded flex justify-between",children:[d.jsx("span",{children:""})," ",d.jsxs("span",{className:"text-yellow-400",children:[e.baseStats.incomeMultiplier,"x"]})]}),d.jsxs("div",{className:"bg-slate-900 p-2 rounded flex justify-between",children:[d.jsx("span",{children:""})," ",d.jsxs("span",{className:"text-orange-400",children:[(60/(e.baseStats.attackSpeed||25)).toFixed(1),"/s"]})]}),d.jsxs("div",{className:"bg-slate-900 p-2 rounded flex justify-between",children:[d.jsx("span",{children:""})," ",d.jsx("span",{className:"text-cyan-400",children:"7.5"})]})]})]})]})},Hh={temp_worker:{id:"temp_worker",skills:[{name:"",type:"active",description:"",icon:""},{name:"",type:"passive",description:"",icon:""}]},intern:{id:"intern",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"active",description:"",icon:""}]},troll:{id:"troll",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"ultimate",description:"",icon:""}]},troll_mini:{id:"troll_mini",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"active",description:"",icon:""}]},drone:{id:"drone",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"active",description:"",icon:""}]},code_mountain:{id:"code_mountain",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"active",description:"",icon:""},{name:"",type:"mechanism",description:"",icon:""}]},chatbot:{id:"chatbot",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"active",description:"",icon:""}]},clone:{id:"clone",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"active",description:"",icon:""}]},headhunter:{id:"headhunter",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"ultimate",description:"",icon:""}]},hr_pacman:{id:"hr_pacman",skills:[{name:"",type:"passive",description:"",icon:""},{name:"",type:"active",description:"",icon:""},{name:"",type:"ultimate",description:"",icon:""}]}},sx={temp_worker:" ()",intern:" ()",troll:" ()",drone:" ()",chatbot:" ()",clone:" ()",headhunter:" ()",code_mountain:" ()",troll_mini:" ()",pacman:" ()"},lx=({summon:e})=>{const t=N.unlockedCompendium.has(e.id),i=Hh[e.aiType]||Hh[e.id];if(!t)return d.jsxs("div",{className:"flex flex-col items-center gap-4 animate-pop-in",children:[d.jsx("div",{className:"text-9xl grayscale brightness-0 opacity-50",children:"?"}),d.jsx("h2",{className:"text-3xl font-black text-slate-600",children:"???"}),d.jsx("p",{className:"text-slate-500",children:""})]});const o=e.tier||"common",r=f=>{switch(f){case"mythic":return"text-red-500";case"epic":return"text-yellow-400";case"rare":return"text-purple-400";default:return"text-slate-300"}},c=f=>{switch(f){case"mythic":return d.jsx("span",{className:"bg-red-900 text-red-300 px-2 py-0.5 rounded text-xs font-bold border border-red-700",children:""});case"epic":return d.jsx("span",{className:"bg-yellow-900 text-yellow-300 px-2 py-0.5 rounded text-xs font-bold border border-yellow-700",children:""});case"rare":return d.jsx("span",{className:"bg-purple-900 text-purple-300 px-2 py-0.5 rounded text-xs font-bold border border-purple-700",children:""});default:return d.jsx("span",{className:"bg-slate-700 text-slate-300 px-2 py-0.5 rounded text-xs font-bold border border-slate-500",children:""})}};return d.jsxs("div",{className:"flex flex-col gap-6 animate-pop-in",children:[d.jsxs("div",{className:"flex items-center gap-6",children:[d.jsx("div",{className:`text-8xl bg-slate-800 p-6 rounded-xl border-4 shadow-lg ${o==="mythic"?"border-red-500 shadow-red-900/50":o==="epic"?"border-yellow-500 shadow-yellow-900/50":o==="rare"?"border-purple-500 shadow-purple-900/50":"border-slate-500"}`,style:{color:e.color},children:e.emoji}),d.jsxs("div",{children:[d.jsx("h2",{className:`text-4xl font-black mb-2 ${r(o)}`,children:e.name}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold uppercase bg-slate-800 text-slate-400 border border-slate-600",children:""}),c(o)]})]})]}),i&&i.skills&&i.skills.length>0&&d.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[d.jsxs("h3",{className:"text-xl font-bold text-purple-400 border-b border-slate-700 pb-2 mb-4 flex items-center gap-2",children:[d.jsx("span",{children:""})," "]}),d.jsx("div",{className:"grid gap-3",children:i.skills.map((f,h)=>d.jsxs("div",{className:"flex gap-3 items-start bg-slate-900/50 p-3 rounded-lg border border-slate-700/50",children:[d.jsx("div",{className:"text-2xl mt-1",children:f.icon}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"font-bold text-white text-base",children:f.name}),d.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold uppercase ${f.type==="ultimate"?"bg-red-900 text-red-200 border border-red-700":f.type==="active"?"bg-blue-900 text-blue-200 border border-blue-700":f.type==="mechanism"?"bg-purple-900 text-purple-200 border border-purple-700":"bg-slate-700 text-slate-300 border border-slate-600"}`,children:f.type==="ultimate"?"":f.type==="active"?"":f.type==="mechanism"?"":""})]}),d.jsx("p",{className:"text-sm text-slate-400",children:f.description})]})]},h))})]}),d.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700 space-y-4",children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-400 border-b border-slate-700 pb-2",children:""}),d.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[d.jsxs("div",{className:"bg-slate-900 p-2 rounded flex justify-between",children:[d.jsx("span",{className:"text-slate-400",children:""}),d.jsx("span",{className:"text-green-400 font-mono font-bold",children:e.isInvincible||e.maxHp>9e3?" ()":e.maxHp})]}),d.jsxs("div",{className:"bg-slate-900 p-2 rounded flex justify-between",children:[d.jsx("span",{className:"text-slate-400",children:""})," ",d.jsx("span",{className:"text-red-400 font-mono font-bold",children:e.damage})]}),d.jsxs("div",{className:"bg-slate-900 p-2 rounded flex justify-between",children:[d.jsx("span",{className:"text-slate-400",children:""})," ",d.jsx("span",{className:"text-blue-400 font-mono font-bold",children:e.speed})]}),d.jsxs("div",{className:"bg-slate-900 p-2 rounded flex justify-between",children:[d.jsx("span",{className:"text-slate-400",children:""}),d.jsx("span",{className:"text-yellow-400 font-mono font-bold",children:e.duration>9e3?" ()":`${(e.duration/60).toFixed(1)}s`})]}),d.jsxs("div",{className:"bg-slate-900 p-2 rounded flex justify-between",children:[d.jsx("span",{className:"text-slate-400",children:""})," ",d.jsx("span",{className:"text-orange-400 font-mono font-bold",children:e.fireRate?`${(e.fireRate/60).toFixed(1)}s`:"N/A"})]}),d.jsxs("div",{className:"bg-slate-900 p-2 rounded flex justify-between",children:[d.jsx("span",{className:"text-slate-400",children:""})," ",d.jsx("span",{className:"text-purple-400 font-mono font-bold",children:e.detectRange||e.attackRange||"N/A"})]})]})]}),d.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700 space-y-4",children:[d.jsx("h3",{className:"text-xl font-bold text-yellow-400 border-b border-slate-700 pb-2",children:""}),d.jsx("div",{className:"text-sm text-slate-300 leading-relaxed min-h-[60px]",children:e.description||""}),e.quote&&d.jsx("div",{className:"bg-black/30 p-3 rounded-lg border-l-4 border-yellow-600 italic text-yellow-100/80 text-sm",children:e.quote}),d.jsxs("div",{className:"grid grid-cols-1 gap-2 mt-4",children:[d.jsxs("div",{className:"bg-slate-900 px-3 py-2 rounded flex items-center gap-2 border border-slate-700",children:[d.jsx("span",{className:"text-slate-500 text-xs font-bold uppercase",children:""}),d.jsx("span",{className:"text-white font-bold text-sm",children:sx[e.aiType]||e.aiType})]}),e.isExplosive&&d.jsxs("div",{className:"bg-red-900/30 px-3 py-2 rounded flex items-center gap-2 border border-red-900/50",children:[d.jsx("span",{className:"text-red-400",children:""}),d.jsxs("span",{className:"text-red-200 text-xs",children:[" (: ",e.maxExplosionRadius,")"]})]}),e.isInvincible&&d.jsxs("div",{className:"bg-yellow-900/30 px-3 py-2 rounded flex items-center gap-2 border border-yellow-900/50",children:[d.jsx("span",{className:"text-yellow-400",children:""}),d.jsx("span",{className:"text-yellow-200 text-xs",children:" ()"})]})]})]})]})},ix=()=>d.jsxs("div",{className:"space-y-4 animate-pop-in",children:[d.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:""}),d.jsx("div",{className:"grid gap-4",children:Mb.map((e,t)=>{const i=e.desc.split(""),o=i[0],r=i[1]||"";return d.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700",children:[d.jsx("h3",{className:"text-xl font-bold text-cyan-400 mb-2",children:e.title}),d.jsxs("div",{className:"text-slate-300 leading-relaxed",children:[d.jsx("span",{children:o}),r&&d.jsxs(d.Fragment,{children:[d.jsx("br",{}),d.jsxs("span",{className:"text-yellow-500/80 italic text-sm mt-1 block",children:[" ",r]})]})]})]},t)})})]}),ox=()=>d.jsxs("div",{className:"space-y-6 animate-pop-in pb-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:" ()"}),d.jsx("p",{className:"text-slate-400 text-sm mb-4",children:""}),d.jsx("div",{className:"grid gap-4",children:Object.values(wt).map(e=>{const t=e.id==="board";return d.jsxs("div",{className:`
                                p-4 rounded-xl shadow-md transition-all
                                ${t?"bg-black border-2 border-[#D4AF37] shadow-[0_0_15px_rgba(212,175,55,0.4)]":"bg-slate-800 border-l-4"}
                            `,style:t?{}:{borderLeftColor:e.color},children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("span",{className:`
                                    text-3xl w-12 h-12 flex items-center justify-center rounded-full border
                                    ${t?"bg-black border-[#D4AF37] text-[#D4AF37] shadow-[inset_0_0_10px_rgba(212,175,55,0.2)]":"bg-slate-900 border-slate-700"}
                                `,children:e.icon}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-black",style:{color:e.color},children:e.name}),d.jsx("p",{className:`text-xs ${t?"text-[#D4AF37]/80":"text-slate-400"}`,children:e.description})]})]}),d.jsx("div",{className:`
                                grid gap-2 mt-3 p-3 rounded-lg
                                ${t?"bg-[#111] border border-[#D4AF37]/30":"bg-slate-900/50"}
                            `,children:e.levels.map(i=>d.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[d.jsxs("span",{className:`
                                            px-2 py-0.5 rounded font-mono font-bold text-xs
                                            ${t?"bg-[#D4AF37] text-black border border-[#facc15]":"bg-slate-700 text-white"}
                                        `,children:["(",i.count,")"]}),d.jsx("span",{className:t?"text-[#eab308]":"text-slate-300",children:i.effectDesc})]},i.count))})]},e.id)})})]}),rx=()=>d.jsxs("div",{className:"space-y-6 animate-pop-in pb-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-red-400 mb-2",children:" ()"}),d.jsx("p",{className:"text-slate-400 text-sm mb-6 bg-red-900/20 p-3 rounded border border-red-900/50",children:" 5 "}),d.jsx("div",{className:"grid gap-4",children:om.map(e=>d.jsxs("div",{className:"p-4 rounded-xl shadow-md transition-all bg-slate-800 border-l-4",style:{borderLeftColor:e.color},children:[d.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[d.jsx("span",{className:"text-3xl w-12 h-12 flex items-center justify-center rounded-full bg-slate-900 border border-slate-700",children:e.icon}),d.jsx("div",{children:d.jsx("h3",{className:"text-xl font-black",style:{color:e.color},children:e.name})})]}),d.jsx("div",{className:"mt-2 text-sm text-slate-300 leading-relaxed pl-16",children:e.description}),e.quote&&d.jsx("div",{className:"mt-3 ml-16 bg-black/30 p-2 rounded border-l-2 border-slate-600 italic text-slate-500 text-xs",children:e.quote})]},e.id))})]}),nx=({tab:e,selectedId:t})=>{const i=N.unlockedCompendium,o=N.state.achievements,r=c=>c==="ev_creator"?o.includes("boss_killer"):c==="007"?o.includes("first_blood"):!0;if(e==="glossary")return d.jsx(ix,{});if(e==="synergies")return d.jsx(ox,{});if(e==="hazards")return d.jsx(rx,{});if(!t)return d.jsx("div",{className:"text-slate-500 italic text-center mt-20",children:""});if(e==="enemies"){const c=Ns[t];return c?d.jsx(ex,{enemy:c,isUnlocked:i.has(t)}):null}if(e==="items"){const c=kt.find(f=>f.id===t);return c?d.jsx(tx,{item:c,isUnlocked:i.has(t)}):null}if(e==="employees"){const c=Object.values(jt).find(f=>f.id===t);return c?d.jsx(ax,{character:c,isUnlocked:r(c.id)}):null}if(e==="summons"){const c=ua[t];return c?d.jsx(lx,{summon:c}):null}return null},mm=({onBack:e})=>{const[t,i]=F.useState("enemies"),[o,r]=F.useState(null),c=N.unlockedCompendium,f=N.state.achievements,p=[...Object.values(Ns)].sort((T,M)=>{const k={common:1,rare:2,epic:3,boss:4},C=T.tier||"common",w=M.tier||"common";return(k[C]||1)-(k[w]||1)}),u={consumable:6,mythic:5,epic:4,rare:3,excellent:2,common:1},g=[...kt].sort((T,M)=>{const k=u[T.rarity]||1,C=u[M.rarity]||1;return k-C}),b=Object.values(jt),v=Object.values(ua),x=T=>T==="ev_creator"?f.includes("boss_killer"):T==="007"?f.includes("first_blood"):!0;return d.jsx("div",{className:"absolute inset-0 bg-slate-900 flex flex-col items-center z-50 p-8 overflow-hidden",children:d.jsxs("div",{className:"w-full max-w-6xl flex flex-col h-full",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8 shrink-0",children:[d.jsx("h1",{className:"text-4xl font-black text-white",children:" ()"}),d.jsx("div",{className:"flex gap-4",children:d.jsx(ce,{variant:"outline",onClick:e,children:""})})]}),d.jsxs("div",{className:"flex flex-1 gap-8 overflow-hidden min-h-0",children:[d.jsxs("div",{className:"w-1/2 flex flex-col gap-4 bg-slate-800/50 rounded-xl border border-slate-700 p-4",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-3 shrink-0",children:[d.jsxs(ce,{size:"sm",variant:t==="enemies"?"primary":"outline",onClick:()=>{i("enemies"),r(null)},className:"text-xs flex items-center justify-center gap-2",children:[d.jsx("span",{children:""})," "]}),d.jsxs(ce,{size:"sm",variant:t==="items"?"primary":"outline",onClick:()=>{i("items"),r(null)},className:"text-xs flex items-center justify-center gap-2",children:[d.jsx("span",{children:""})," "]}),d.jsxs(ce,{size:"sm",variant:t==="employees"?"primary":"outline",onClick:()=>{i("employees"),r(null)},className:"text-xs flex items-center justify-center gap-2",children:[d.jsx("span",{children:""})," "]}),d.jsxs(ce,{size:"sm",variant:t==="summons"?"primary":"outline",onClick:()=>{i("summons"),r(null)},className:"text-xs flex items-center justify-center gap-2",children:[d.jsx("span",{children:""})," "]}),d.jsxs(ce,{size:"sm",variant:t==="synergies"?"primary":"outline",onClick:()=>{i("synergies"),r(null)},className:"text-xs flex items-center justify-center gap-2",children:[d.jsx("span",{children:""})," "]}),d.jsxs(ce,{size:"sm",variant:t==="hazards"?"primary":"outline",onClick:()=>{i("hazards"),r(null)},className:`text-xs flex items-center justify-center gap-2 ${t==="hazards"?"bg-red-600 border-red-500 hover:bg-red-500":"text-red-300 border-red-900 hover:bg-red-900/50"}`,children:[d.jsx("span",{children:""})," "]}),d.jsxs(ce,{size:"sm",variant:t==="glossary"?"primary":"outline",onClick:()=>{i("glossary"),r(null)},className:"text-xs col-span-2 flex items-center justify-center gap-2",children:[d.jsx("span",{children:""})," "]})]}),t!=="glossary"&&t!=="synergies"&&t!=="hazards"?d.jsxs("div",{className:"flex-1 overflow-y-auto scrollbar-hide grid grid-cols-4 content-start gap-3 bg-slate-900/30 p-2 rounded-lg border border-slate-700/50",children:[t==="enemies"&&p.map(T=>d.jsx(Xv,{config:T,isUnlocked:c.has(T.type),isSelected:o===T.type,onClick:()=>r(T.type)},T.type)),t==="items"&&g.map(T=>d.jsx(Wv,{item:T,isUnlocked:c.has(T.id),isSelected:o===T.id,onClick:()=>r(T.id)},T.id)),t==="employees"&&b.map(T=>d.jsx(Qv,{character:T,isUnlocked:x(T.id),isSelected:o===T.id,onClick:()=>r(T.id)},T.id)),t==="summons"&&v.map(T=>d.jsx($v,{summon:T,isUnlocked:c.has(T.id),isSelected:o===T.id,onClick:()=>r(T.id)},T.id))]}):d.jsx("div",{className:"flex-1 flex items-center justify-center text-slate-500 bg-slate-900/30 rounded-lg border border-slate-700/50",children:d.jsxs("div",{className:"text-center space-y-2",children:[d.jsx("div",{className:"text-4xl opacity-20",children:""}),d.jsx("p",{className:"text-xs",children:""})]})})]}),d.jsx("div",{className:"w-1/2 bg-slate-900/80 rounded-xl border border-slate-700 p-8 overflow-y-auto scrollbar-hide shadow-inner",children:d.jsx(nx,{tab:t,selectedId:o})})]})]})})},cx=({onMainMenu:e,onResume:t,onLinkCode:i})=>{const[o,r]=F.useState(N.settings),[c,f]=F.useState(!1),[h,p]=F.useState(!1),[u,g]=F.useState(!!document.fullscreenElement);F.useEffect(()=>{const M=()=>g(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",M),()=>document.removeEventListener("fullscreenchange",M)},[]);const b=()=>{const M=!o.autoShoot;N.updateSettings({autoShoot:M}),r(k=>({...k,autoShoot:M}))},v=()=>{const M=!o.autoAim;N.updateSettings({autoAim:M}),r(k=>({...k,autoAim:M}))},x=M=>{const k=parseFloat(M.target.value);N.updateSettings({volume:k}),r(C=>({...C,volume:k}))},T=()=>{N.toggleFullscreen()};return h?d.jsx(mm,{onBack:()=>p(!1)}):d.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[100] animate-pop-in pointer-events-auto",children:d.jsxs("div",{className:"flex flex-col items-center gap-8",children:[d.jsx("div",{className:"text-6xl font-black text-white border-4 border-white p-12 rounded-2xl transform -rotate-6 shadow-2xl bg-black/80",children:" "}),c?d.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border-2 border-red-500 w-80 space-y-4 pointer-events-auto text-center",children:[d.jsx("h3",{className:"text-white font-bold text-xl",children:""}),d.jsx("p",{className:"text-slate-400 text-sm mb-4",children:""}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(ce,{size:"sm",variant:"secondary",onClick:()=>f(!1),className:"flex-1",children:""}),d.jsx(ce,{size:"sm",variant:"danger",onClick:e,className:"flex-1",children:""})]})]}):d.jsxs("div",{className:"bg-slate-800 p-6 rounded-xl border-2 border-slate-600 w-80 space-y-4 pointer-events-auto",children:[d.jsxs("div",{className:"flex justify-between items-center border-b border-slate-700 pb-2",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-white font-bold",children:""}),d.jsx("span",{className:"text-[10px] text-slate-400",children:u?" (ESC)":""})]}),d.jsx(ce,{size:"sm",variant:u?"primary":"outline",onClick:T,className:"w-20",children:u?"":""})]}),d.jsxs("div",{className:"space-y-2 border-b border-slate-700 pb-4",children:[d.jsxs("div",{className:"flex justify-between items-center text-white font-bold text-sm",children:[d.jsx("span",{children:""}),d.jsxs("span",{children:[(o.volume*100).toFixed(0),"%"]})]}),d.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:o.volume,onChange:x,className:"w-full accent-cyan-500 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-white font-bold",children:""}),d.jsx(ce,{size:"sm",variant:o.autoAim?"primary":"secondary",onClick:v,children:o.autoAim?"":""})]}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-white font-bold",children:""}),d.jsx(ce,{size:"sm",variant:o.autoShoot?"primary":"secondary",onClick:b,children:o.autoShoot?"":""})]}),d.jsxs("div",{className:"pt-4 border-t border-slate-700 flex flex-col gap-3",children:[d.jsx(ce,{size:"sm",variant:"secondary",onClick:()=>p(!0),className:"w-full",children:""}),d.jsx(ce,{size:"sm",onClick:i,className:"w-full bg-cyan-700 border-b-4 border-cyan-900 hover:bg-cyan-600 text-white",children:""}),d.jsx(ce,{size:"sm",variant:"primary",onClick:t,className:"w-full !border-green-800 !bg-green-600 hover:!bg-green-500",children:""}),d.jsx(ce,{size:"sm",variant:"danger",onClick:()=>f(!0),className:"w-full",children:""})]})]}),d.jsx("div",{className:"text-white text-sm animate-pulse",children:" ESC "})]})})},dx=({onNext:e})=>{const t=N.state.waveStats,i=N.state.isEndless?N.state.endlessWaveCount:N.state.currentWave,o=ye.getSynergyCounts(N.state.player.items),c=(ye.getActiveTiers(o).capital||0)>=2;return d.jsx("div",{className:"absolute inset-0 bg-slate-900/95 flex items-center justify-center z-50 animate-bounce-in p-6",children:d.jsxs("div",{className:"bg-slate-800 p-10 rounded-2xl border-4 border-slate-600 shadow-2xl max-w-2xl w-full text-center",children:[d.jsx("h1",{className:"text-4xl font-black text-white mb-2",children:""}),d.jsxs("p",{className:"text-xl text-slate-400 mb-8 font-bold",children:[" ",i,"  "]}),d.jsxs("div",{className:"grid grid-cols-2 gap-6 text-left mb-8",children:[d.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-slate-700",children:[d.jsx("div",{className:"text-sm text-slate-500 mb-1",children:" ()"}),d.jsxs("div",{className:"text-3xl font-black text-white",children:[t.enemiesKilled," ",d.jsx("span",{className:"text-sm font-normal text-slate-500",children:""})]})]}),d.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-slate-700",children:[d.jsx("div",{className:"text-sm text-slate-500 mb-1",children:" ()"}),d.jsx("div",{className:"text-3xl font-black text-red-400",children:Math.floor(t.damageDealt)})]}),d.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-slate-700",children:[d.jsx("div",{className:"text-sm text-slate-500 mb-1",children:" ()"}),d.jsxs("div",{className:"text-3xl font-black text-yellow-400",children:[" ",t.goldEarned]})]}),d.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-slate-700 relative overflow-hidden",children:[d.jsxs("div",{className:"text-sm text-slate-500 mb-1 flex justify-between relative z-10",children:[d.jsx("span",{children:" & "}),c&&d.jsx("div",{className:"flex items-center gap-1 animate-pulse",children:d.jsx("span",{className:"text-[10px] text-green-400 font-bold bg-green-900/50 px-1.5 rounded border border-green-600",children:""})})]}),d.jsxs("div",{className:"text-3xl font-black text-yellow-200 relative z-10",children:[" ",t.bonusGold]}),c&&d.jsx("div",{className:"absolute -bottom-4 -right-4 text-6xl opacity-10",children:""})]}),d.jsxs("div",{className:"bg-slate-900/50 p-4 rounded-xl border border-slate-700 col-span-2",children:[d.jsx("div",{className:"text-sm text-slate-500 mb-1",children:" ()"}),d.jsx("div",{className:"text-3xl font-black text-blue-400",children:Math.floor(t.damageMitigated)})]})]}),d.jsx(ce,{size:"lg",variant:"success",onClick:e,className:"w-full text-xl py-4",children:"!"})]})})},ux=({onBack:e})=>{const t=N.state.achievements,i=t.length,o=Es.length,r=Math.round(i/o*100);return d.jsx("div",{className:"absolute inset-0 bg-slate-900 flex flex-col items-center z-50 p-4 md:p-8 overflow-hidden",children:d.jsxs("div",{className:"w-full max-w-7xl flex flex-col h-full",children:[d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 shrink-0 gap-4 bg-slate-800/50 p-4 rounded-xl border border-slate-700 backdrop-blur-sm",children:[d.jsxs("div",{className:"flex-1 w-full",children:[d.jsxs("h1",{className:"text-2xl md:text-3xl font-black text-white mb-2 flex items-center gap-3",children:["  ",d.jsx("span",{className:"text-xs font-normal text-slate-400 bg-slate-800 px-2 py-1 rounded border border-slate-600",children:""})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-full max-w-md h-4 bg-slate-700 rounded-full overflow-hidden border border-slate-600 relative shadow-inner",children:d.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-600 to-yellow-400 transition-all duration-1000 ease-out",style:{width:`${r}%`},children:r>0&&d.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),d.jsxs("span",{className:"text-yellow-400 font-bold font-mono text-sm whitespace-nowrap",children:[i," / ",o," (",r,"%)"]})]})]}),d.jsx(ce,{variant:"outline",size:"sm",onClick:e,className:"shrink-0",children:""})]}),d.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide pr-1 -mr-1",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-3 pb-20",children:Es.map(c=>{const f=t.includes(c.id);return d.jsxs("div",{className:`
                                    relative p-4 rounded-xl border-2 transition-all duration-200 flex gap-4 items-start group
                                    ${f?"bg-slate-800 border-yellow-500/50 hover:border-yellow-400 hover:bg-slate-750 shadow-md":"bg-slate-900/50 border-slate-700 opacity-60 grayscale hover:opacity-90 hover:grayscale-0"}
                                `,children:[d.jsx("div",{className:`
                                        w-14 h-14 shrink-0 flex items-center justify-center rounded-lg text-3xl shadow-inner mt-1
                                        ${f?"bg-slate-900 border border-slate-600":"bg-black border border-slate-800"}
                                    `,children:d.jsx("div",{className:`transform transition-transform duration-500 ${f?"group-hover:scale-110 group-hover:rotate-6":""}`,children:c.icon})}),d.jsxs("div",{className:"flex-1 min-w-0 flex flex-col h-full",children:[d.jsxs("div",{className:"flex justify-between items-start mb-1",children:[d.jsx("h3",{className:`text-base font-black truncate pr-2 ${f?"text-white":"text-slate-500"}`,children:c.title}),f&&d.jsx("span",{className:"bg-green-900/80 text-green-400 text-[10px] font-bold px-1.5 py-0.5 rounded border border-green-800 whitespace-nowrap",children:""})]}),d.jsx("p",{className:"text-xs text-slate-400 mb-3 leading-relaxed line-clamp-2",children:c.description}),d.jsxs("div",{className:`
                                            mt-auto rounded p-1.5 flex items-center gap-2 transition-colors
                                            ${f?"bg-yellow-900/20 border border-yellow-500/30":"bg-slate-900 border border-slate-700"}
                                        `,children:[d.jsx("span",{className:"text-sm",children:""}),d.jsxs("div",{className:"flex flex-col leading-none",children:[d.jsx("span",{className:`text-[9px] font-bold uppercase ${f?"text-yellow-600":"text-slate-600"}`,children:""}),d.jsx("span",{className:`text-xs font-bold truncate ${f?"text-yellow-400":"text-slate-500"}`,children:c.rewardDescription})]})]})]})]},c.id)})})})]})})},fx=[{name:"",score:2502500,title:"",avatar:""},{name:"v50",score:2415678,title:"",avatar:""},{name:"",score:2387412,title:"",avatar:""},{name:"",score:2298543,title:"",avatar:""},{name:"",score:2176521,title:"",avatar:""},{name:"",score:2087432,title:"",avatar:""},{name:"",score:1965998,title:"",avatar:""},{name:"",score:1854321,title:"",avatar:""},{name:"",score:1798745,title:"",avatar:""},{name:"",score:1723687,title:"K",avatar:""},{name:"",score:1656231,title:"",avatar:""},{name:"",score:1598564,title:"O.o",avatar:""},{name:"",score:1524567,title:"",avatar:""},{name:"",score:1456789,title:"8060",avatar:""},{name:"",score:1398456,title:"",avatar:""},{name:"",score:1345140,title:"",avatar:""},{name:"",score:1298765,title:"DNA",avatar:""},{name:"",score:1254321,title:"",avatar:""},{name:"",score:1223456,title:"+1",avatar:""},{name:"1",score:1196996,title:"",avatar:""},{name:"",score:1154321,title:"",avatar:""},{name:"",score:1123456,title:"",avatar:""},{name:"",score:1087654,title:"",avatar:""},{name:"",score:1054123,title:"",avatar:""},{name:"",score:1034857,title:"",avatar:""},{name:"",score:998564,title:"",avatar:""},{name:"",score:965432,title:"",avatar:""},{name:"",score:932198,title:"",avatar:""},{name:"City Walk",score:898754,title:"",avatar:""},{name:"",score:866666,title:"",avatar:""},{name:"i",score:854321,title:"",avatar:""},{name:"",score:823456,title:"",avatar:""},{name:"",score:798765,title:"",avatar:""},{name:"",score:767890,title:"",avatar:""},{name:"1",score:743210,title:"111",avatar:""},{name:"",score:712345,title:"",avatar:""},{name:"",score:698765,title:"",avatar:""},{name:"",score:676543,title:"666",avatar:""},{name:"",score:654321,title:"",avatar:""},{name:"",score:632109,title:"",avatar:""},{name:"",score:610987,title:"",avatar:""},{name:"",score:598765,title:"",avatar:""},{name:"",score:576543,title:"",avatar:""},{name:"",score:554321,title:"",avatar:""},{name:"45",score:532109,title:"",avatar:""},{name:"00",score:510987,title:"",avatar:""},{name:"e",score:498765,title:"",avatar:""},{name:"CPU",score:487654,title:"",avatar:""},{name:"Q",score:476543,title:"",avatar:""},{name:"Q",score:465432,title:"",avatar:""},{name:"",score:454321,title:"",avatar:""},{name:"",score:443210,title:"",avatar:""},{name:"",score:432109,title:"",avatar:""},{name:"",score:421098,title:"",avatar:""},{name:"",score:419876,title:"",avatar:""},{name:"",score:408765,title:"",avatar:""},{name:"",score:395432,title:"",avatar:""},{name:"",score:382345,title:"",avatar:""},{name:"",score:379876,title:"",avatar:""},{name:"",score:366543,title:"",avatar:""},{name:"",score:353210,title:"",avatar:""},{name:"",score:349765,title:"SOS",avatar:""},{name:"",score:336543,title:"",avatar:""},{name:"",score:323210,title:"",avatar:""},{name:"",score:319865,title:"",avatar:""},{name:"",score:306543,title:"",avatar:""},{name:"",score:293210,title:"",avatar:""},{name:"",score:280123,title:"",avatar:""},{name:"",score:278421,title:"",avatar:""},{name:"",score:265432,title:"",avatar:""},{name:"momo",score:254321,title:"",avatar:""},{name:"",score:10001,title:"",avatar:""}],hx=({onBack:e})=>{const t=N.state.highScore,i=[...fx,{name:" ()",score:t,title:"",avatar:"",isPlayer:!0}].sort((r,c)=>c.score-r.score),o=i.findIndex(r=>r.isPlayer)+1;return d.jsx("div",{className:"absolute inset-0 bg-slate-900 flex flex-col items-center z-50 p-8 overflow-hidden",children:d.jsxs("div",{className:"w-full max-w-3xl flex flex-col h-full",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8 shrink-0",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-black text-white mb-2",children:""}),d.jsxs("p",{className:"text-slate-400",children:[": ",d.jsx("span",{className:"text-yellow-400 font-bold",children:t})," (: ",o,")"]})]}),d.jsx(ce,{variant:"outline",onClick:e,children:""})]}),d.jsxs("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden flex flex-col flex-1",children:[d.jsxs("div",{className:"grid grid-cols-12 bg-slate-900 p-4 text-slate-400 font-bold text-sm border-b border-slate-700",children:[d.jsx("div",{className:"col-span-2 text-center",children:""}),d.jsx("div",{className:"col-span-6",children:""}),d.jsx("div",{className:"col-span-4 text-right",children:" ()"})]}),d.jsx("div",{className:"overflow-y-auto scrollbar-hide flex-1 p-2",children:i.map((r,c)=>{const f=c+1,h=f===1?"text-yellow-400":f===2?"text-gray-300":f===3?"text-orange-400":"text-slate-500";return d.jsxs("div",{className:`
                                    grid grid-cols-12 items-center p-4 rounded-lg mb-1 transition-colors
                                    ${r.isPlayer?"bg-indigo-900/50 border border-indigo-500 shadow-lg transform scale-[1.02]":"hover:bg-slate-700/50"}
                                `,children:[d.jsx("div",{className:`col-span-2 text-center font-black text-xl ${h}`,children:f}),d.jsxs("div",{className:"col-span-6 flex items-center gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-slate-700 rounded-full flex items-center justify-center text-xl shadow-inner",children:r.avatar}),d.jsxs("div",{children:[d.jsx("div",{className:`font-bold ${r.isPlayer?"text-indigo-300":"text-white"}`,children:r.name}),d.jsx("div",{className:"text-xs text-slate-500",children:r.title})]})]}),d.jsx("div",{className:"col-span-4 text-right font-mono text-lg font-bold text-yellow-500",children:r.score.toLocaleString()})]},c)})})]})]})})},Bt={CHARACTERS:["9527","007","1024","ev_creator","cleaner"],DIFFICULTIES:["easy","normal","hard","ultimate"],ACHIEVEMENTS:["onboarding","probation_fail","too_young","probation_pass","wage_slave","abyss_gazer","tank_build","speed_demon","shield_master","hoarder","immortal","regen_master","killer_novice","cleaner_pro","genocide","keyboard_warrior","one_punch","bullet_rain","sniper","hedgehog","vampire","glass_cannon","kpi_crusher","boss_killer","rectify_workplace","involution_king","endless_madness","pacifist","capitalist","accumulate_wealth","oil_prince","miser","shopping_addict","bad_debt","luck_dog","big_spender","item_collector","broke","all_clear","first_blood","kpi_crusher"],ENCYCLOPEDIA:["keyboard_man","tian_gou","tian_gou_frenzy","spoiler_dog","balloon","minion","tao_wa_small","boss_ai_clone","boss_ai_node","lemon_head","gai_liu_zi","chi_gua","marketing_account","tao_wa_med","river_crab","hr_specialist","micro_manager","pie_painter","da_ye","clown","tao_wa_big","product_manager","leech","bonus_chest","delivery_guy","elite_manager","elite_hr","cyber_goddess","capital_crocodile","boss_kpi","boss_glitch","boss_ai","membrane_keyboard","coffee","quantum_reading","mechanical_keyboard","mouse_macro","rgb_keyboard","keyboard_cleaner","big_lung","shared_folder","ipo","binary_thinking","firewall_404","involution_field","retweet_raffle","wifi_booster","fan_group","layoff_letter","capital_power","street_lamp","quirky_gun","5g_speed","energy_drink","screen_protector","blue_screen_glasses","thick_face","goji_berry","team_building","work_fat","fish_pond","stress_response","paid_pooping","hot_coffee_splash","noise_cancelling_headphones","golden_parachute","black_pot","fishing_guide","cyber_amulet","fishing_license","e_wooden_fish","red_envelope","knowledge_pay","koi_fish","n_plus_one","lottery_ticket","cut_one","pig_scam","crypto_miner","cracked_soft","coupon","insurance","ppt_master","wolf_culture","health_for_damage","standing_desk","soft_landing","ddl","brain_drain","revive_coin","pay_to_work","legacy_code","memory_leak","temp_contract","paid_trolls","the_intern","chatbot","outsourcing_team","shadow_clone","headhunter","legacy_summon","job_poster","punch_card","megaphone","performance_review","team_pizza","wolf_protocol","explosive_contract","stock_options","remote_work","macro","full_time_offer","power_24h","distributed_computing","mirror_server","hot_search","algorithm_push","shocking_title","viral_marketing","popup_ad","live_stream","brainwashing_loop","infinite_black_card","private_driver","hr_pacman"],INVENTORY_ITEMS:["","","5G","","","WiFi","","","","","","","","","","","","N+1","","","","","","RGB","","","PPT","","","","IPO","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","24","","","","","","","","","","","","","404","","","","","","","","","","",""]};class Pc{constructor(t=4096){this.byteOffset=0,this.bitOffset=0,this.capacity=t,this.buffer=new Uint8Array(t)}ensureCapacity(t){const i=this.byteOffset*8+this.bitOffset+t,o=Math.ceil(i/8);if(o>this.capacity){const r=Math.max(this.capacity*2,o+128),c=new Uint8Array(r);c.set(this.buffer),this.buffer=c,this.capacity=r}}writeBit(t){this.ensureCapacity(1),t?this.buffer[this.byteOffset]|=1<<this.bitOffset:this.buffer[this.byteOffset]&=~(1<<this.bitOffset),this.bitOffset++,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}writeBits(t,i){for(let o=0;o<i;o++)this.writeBit(t>>o&1)}writeVarInt(t){let i=Math.floor(Math.max(0,t));do{let o=i&127;i>>>=7,i!==0&&(o|=128),this.writeBits(o,8)}while(i!==0)}writeString(t){this.writeVarInt(t.length);for(let i=0;i<t.length;i++)this.writeVarInt(t.charCodeAt(i))}resetReading(){this.byteOffset=0,this.bitOffset=0}readBit(){if(this.byteOffset>=this.capacity)return 0;const t=this.buffer[this.byteOffset]>>this.bitOffset&1;return this.bitOffset++,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++),t}readBits(t){let i=0;for(let o=0;o<t;o++)i|=this.readBit()<<o;return i}readVarInt(){let t=0,i=0;for(;;){const o=this.readBits(8);if(t|=(o&127)<<i,i+=7,(o&128)===0||i>35)break}return t}readString(){const t=this.readVarInt();let i="";for(let o=0;o<t;o++)i+=String.fromCharCode(this.readVarInt());return i}toBase64(){const t=this.byteOffset+(this.bitOffset>0?1:0),i=this.buffer.subarray(0,t);let o="";const r=i.byteLength;for(let c=0;c<r;c++)o+=String.fromCharCode(i[c]);return btoa(o)}fromBase64(t){try{const i=atob(t);this.capacity=i.length,this.buffer=new Uint8Array(this.capacity);for(let o=0;o<this.capacity;o++)this.buffer[o]=i.charCodeAt(o);this.resetReading()}catch(i){console.error("BitBuffer decode failed",i),this.capacity=0,this.buffer=new Uint8Array(0)}}}const mx={encodeV3:(e,t,i,o)=>{const r=new Pc;if(r.writeVarInt(e.highScore),r.writeVarInt(t.totalKills||0),r.writeVarInt(t.totalTimePlayed||0),r.writeVarInt(t.totalGamesPlayed||0),Bt.ACHIEVEMENTS.forEach(c=>{r.writeBit(e.achievements.includes(c)?1:0)}),Bt.ENCYCLOPEDIA.forEach(c=>{r.writeBit(i.has(c)?1:0)}),o&&e.player.hp>0){r.writeBit(1);const c=e.player,f=Bt.CHARACTERS.indexOf(c.characterId);r.writeBits(Math.max(0,f),5);const h=Bt.DIFFICULTIES.indexOf(e.difficultyId);r.writeBits(Math.max(0,h),3),r.writeVarInt(e.currentWave),r.writeVarInt(c.gold),r.writeVarInt(Math.ceil(c.hp)),r.writeVarInt(Math.ceil(c.maxHp)),r.writeVarInt(Math.ceil(c.shield)),r.writeBit(e.isEndless?1:0),r.writeVarInt(e.endlessWaveCount);const p=[];c.items.forEach(g=>{const b=Bt.INVENTORY_ITEMS.indexOf(g);b!==-1&&p.push(b)}),r.writeVarInt(p.length),p.forEach(g=>{r.writeVarInt(g)});const u=c.pigDebts||[];r.writeVarInt(u.length),u.forEach(g=>r.writeVarInt(g))}else r.writeBit(0);return r.toBase64()}},Ph={compress:e=>e,decompress:e=>{if(e.includes("%"))try{return decodeURIComponent(atob(e))}catch{return e}return e}},Bh={getPreview:e=>{try{if(e.startsWith("V1$")){const t=e.substring(3);if(!t.includes("%")&&!t.includes("|")){const i=new Pc;i.fromBase64(t);const o=i.readVarInt(),r=i.readVarInt(),c=i.readVarInt(),f=i.readVarInt(),h=Bt.ACHIEVEMENTS.length,p=Bt.ENCYCLOPEDIA.length;for(let b=0;b<h;b++)i.readBit();for(let b=0;b<p;b++)i.readBit();const u=i.readBit()===1;let g;if(u){const b=i.readBits(5),v=i.readBits(3),x=i.readVarInt(),T=i.readVarInt(),M=Bt.CHARACTERS[b]||"9527";i.readVarInt(),i.readVarInt(),i.readVarInt();const k=i.readBit()===1;g={characterName:M,wave:x,gold:T,isEndless:k}}return{valid:!0,version:"V1(Bin)",highScore:o,totalGames:f,hasRun:u,runDetails:g}}}}catch{}try{const[t,i]=e.split("$");if(!i)throw new Error("Invalid Format");const r=Ph.decompress(i).split("|"),c=r[0].split(";"),f=parseInt(c[0]||"0",36),h=parseInt(c[3]||"0",36),p=r[2];let u=!1,g;if(p&&p!=="0"){u=!0;const b=p.split(";");g={characterName:b[0]||"Unknown",wave:parseInt(b[2]||"1",36),gold:parseInt(b[3]||"0",36),isEndless:b[8]==="1"}}return{valid:!0,version:t||"Legacy",highScore:f,totalGames:h,hasRun:u,runDetails:g}}catch{return{valid:!1,version:"Error",highScore:0,totalGames:0,hasRun:!1,error:""}}},decode:e=>{try{if(e.startsWith("V1$")){const h=e.substring(3);if(!h.includes("%")&&!h.includes("|")){const p=new Pc;p.fromBase64(h);const u={highScore:p.readVarInt(),globalStats:{totalKills:p.readVarInt(),totalTimePlayed:p.readVarInt(),totalGamesPlayed:p.readVarInt()},achievements:[],unlockedCompendium:[]};if(Bt.ACHIEVEMENTS.forEach(b=>{p.readBit()&&u.achievements.push(b)}),Bt.ENCYCLOPEDIA.forEach(b=>{p.readBit()&&u.unlockedCompendium.push(b)}),p.readBit()===1){const b=p.readBits(5),v=p.readBits(3),x=p.readVarInt(),T=p.readVarInt(),M=p.readVarInt(),k=p.readVarInt(),C=p.readVarInt(),w=p.readBit()===1,j=p.readVarInt(),O=p.readVarInt(),V=[];for(let ee=0;ee<O;ee++){const re=p.readVarInt(),J=Bt.INVENTORY_ITEMS[re];J&&V.push(J)}const H=p.readVarInt(),X=[];for(let ee=0;ee<H;ee++)X.push(p.readVarInt());u.runState={characterId:Bt.CHARACTERS[b]||"9527",difficultyId:Bt.DIFFICULTIES[v]||"normal",currentWave:x,isEndless:w,endlessWaveCount:j,player:{gold:T,hp:M,maxHp:k,shield:C,items:V,pigDebts:X}}}return u}}}catch(h){console.warn("Binary decode failed, falling back to legacy",h)}const[t,i]=e.split("$"),c=Ph.decompress(i).split("|")[0].split(";");return{highScore:parseInt(c[0]||"0",36),globalStats:{totalKills:parseInt(c[1]||"0",36),totalTimePlayed:parseInt(c[2]||"0",36),totalGamesPlayed:parseInt(c[3]||"0",36)},achievements:[],unlockedCompendium:[]}}};let Lh=0;const os=()=>{N.state.modalMessage={title:"SYSTEM WARNING",text:"",type:"win"}},px=e=>{const t=e.trim().toUpperCase(),i=e.trim().replace(/\s/g,"");return t==="GYW223"||i===""?(os(),yx()):i===""?(Lh++,Lh===1?(N.unlockAchievement("luck_dog"),N.state.modalMessage={title:"",text:"",type:"win"},N.audio.playAchievementSound(),"  [] "):(N.state.modalMessage={title:"",text:"~ (  )",type:"info"},N.audio.play("ui_typewriter"),"~")):t==="GYWJY1"||i==="1"?(os(),_i(4,"ev_creator",999,100,"()")):t==="GYWJY2"||i==="2"?(os(),_i(6,"ev_creator",999,100,"()")):t==="GYWBOSS"||i==="BOSS"?(os(),_i(8,"9527",999,100,"KPI")):t==="EVBOSS"||i==="EV"?(os(),_i(8,"ev_creator",999,100,"KPI(EV)")):t==="1024BOSS"||i==="1024"?(os(),_i(8,"1024",999,100,"Bug")):i===""?(os(),bx()):i===""||t==="DEBUG"?(os(),""):null};function yx(){const e=Es.map(f=>f.id),t=new Set(N.state.achievements);e.forEach(f=>t.add(f)),t.add("first_blood"),t.add("kpi_crusher"),t.add("boss_killer"),N.state.achievements=Array.from(t);const i=Object.keys(Ns),o=kt.map(f=>f.id),r=Object.keys(ua);return[...i,...o,...r].forEach(f=>N.unlockedCompendium.add(f)),N.saveAchievements(),N.saveEncyclopedia(),""}function _i(e,t,i,o,r){N.init(N.canvasWidth,N.canvasHeight,t,"hard");const c=N.state.player;return c.maxHp=i,c.hp=i,c.attackDamage=o,c.gold=9999,N.state.currentWave=e-1,N.state.waveEnded=!0,N.saveGame(),`${r}`}function bx(){return N.init(N.canvasWidth,N.canvasHeight,"9527","normal"),N.state.player.gold=5e4,N.state.currentWave=1,N.state.waveEnded=!0,N.saveGame(),"(5) (/)"}const Ac={generateCode:e=>{try{let t=e;const i=N.state.currentWave,o=N.state.waveEnded;return i<=1&&!o&&(t=!1),`V1$${mx.encodeV3(N.state,N.globalStats,N.unlockedCompendium,t)}`}catch(t){return console.error("Save generation failed",t),"ERROR"}},getPreview:e=>{const t=Bh.getPreview(e);return t.valid?{success:!0,data:t}:{success:!1,message:t.error||""}},importCode:e=>{const t=px(e);if(t)return{success:!0,message:t};try{const i=Bh.decode(e);N.state.highScore=Math.max(N.state.highScore,i.highScore),N.globalStats.totalKills=Math.max(N.globalStats.totalKills,i.globalStats.totalKills),N.globalStats.totalTimePlayed=Math.max(N.globalStats.totalTimePlayed,i.globalStats.totalTimePlayed),N.globalStats.totalGamesPlayed=Math.max(N.globalStats.totalGamesPlayed,i.globalStats.totalGamesPlayed);let o=0;if(i.achievements.forEach(r=>{N.state.achievements.includes(r)||(N.state.achievements.push(r),o++)}),i.unlockedCompendium.forEach(r=>{N.unlockedCompendium.has(r)||N.unlockedCompendium.add(r)}),N.saveAchievements(),N.saveEncyclopedia(),i.runState){const r=i.runState,c=i.runState.player;return N.init(N.canvasWidth,N.canvasHeight,r.characterId,r.difficultyId),N.state.currentWave=r.currentWave,N.state.isEndless=r.isEndless,N.state.endlessWaveCount=r.endlessWaveCount,N.state.player.gold=c.gold,N.state.player.maxHp=c.maxHp,N.state.player.hp=c.hp,N.state.player.shield=c.shield,N.state.player.items=c.items,N.state.player.pigDebts=c.pigDebts,N.state.waveEnded=!0,N.state.isWaveClearing=!1,{success:!0,message:" (/)"}}else N.resetCurrentRun();return{success:!0,message:`! ( ${o} )`}}catch(i){return console.error(i),{success:!1,message:"HR ()"}}}},Dc={title:"",textPart1:"",textPart2:"(  )"},zh=[" (  )","~","...","... ","","~","......","",""," "," "," CPU "," "],Rc={title:"",text:`FATAL ERROR: 
StackOverflow Exception: Too_Handsome_To_Handle`,buttonText:" (System Reboot)"},gx=({active:e})=>{const[t,i]=F.useState(!1),[o,r]=F.useState(!1);return F.useEffect(()=>{if(e)i(!0),r(!1);else{r(!0);const c=setTimeout(()=>{i(!1)},2e3);return()=>clearTimeout(c)}},[e]),t?d.jsx("div",{className:`confetti-container ${o?"opacity-0 transition-opacity duration-[2000ms] ease-out":"opacity-100"}`,children:Array.from({length:60}).map((c,f)=>{const h=["#f43f5e","#10b981","#3b82f6","#facc15","#a855f7"],p=h[Math.floor(Math.random()*h.length)],u=Math.random()*100,g=Math.random()*3,b=3+Math.random()*2;return d.jsx("div",{className:"confetti-piece",style:{left:`${u}%`,backgroundColor:p,animation:`confetti-fall ${b}s linear infinite`,animationDelay:`${g}s`}},f)})}):null},qh=["HR ()","? ()",""," ()","404 Resume Not Found","? "],vx=({onBack:e,onImportSuccess:t})=>{var q;const[i,o]=F.useState("generate"),[r,c]=F.useState(""),[f,h]=F.useState(null),[p,u]=F.useState(!0),[g,b]=F.useState(null),[v,x]=F.useState(null),[T,M]=F.useState(!1),[k,C]=F.useState(0),[w,j]=F.useState(!1),[O,V]=F.useState(null),H=F.useRef(null),[X,ee]=F.useState(!1);F.useEffect(()=>()=>{H.current&&window.clearTimeout(H.current)},[]),F.useEffect(()=>{const Z=setInterval(()=>{N.state.modalMessage&&(H.current&&window.clearTimeout(H.current),x(N.state.modalMessage),N.state.modalMessage=null,H.current=window.setTimeout(()=>{x(null),H.current=null},3e3))},200);return()=>clearInterval(Z)},[]);const re=N.state.currentWave>1||N.state.currentWave===1&&N.state.waveEnded,J=()=>{try{const Z=Ac.generateCode(p);c(Z),h(p&&!re?{text:" ()",type:"info"}:{text:"",type:"success"})}catch{h({text:"",type:"error"})}},ue=()=>{r&&navigator.clipboard.writeText(r).then(()=>{h({text:"",type:"success"})}).catch(()=>{h({text:"",type:"error"})})},pe=async()=>{try{const Z=await navigator.clipboard.readText();Z&&be(Z)}catch{h({text:"",type:"info"})}},be=Z=>{if(c(Z),Z.trim().replace(/\s/g,"")===""){M(!0),b(null),h(null);return}else M(!1);if(!Z.trim()){b(null),h(null);return}const U=Ac.getPreview(Z);U.success&&U.data?(b(U.data),h({text:" ",type:"success"})):(b(null),h(null))},K=()=>{ee(!0),N.audio.play("ui_power_down"),V(null),setTimeout(()=>{o("generate"),c(""),M(!1),C(0),ee(!1),e()},1500)},fe=()=>{const Z=k+1;if(C(Z),Z===1)j(!0),N.audio.playAchievementSound(),N.unlockAchievement("luck_dog"),V({title:Dc.title,textPart1:Dc.textPart1,textPart2:Dc.textPart2,type:"win",buttonText:""});else if(Z>15)N.audio.play("ui_glitch_severe"),V({title:Rc.title,textPart1:Rc.text,type:"glitch",buttonText:Rc.buttonText,action:K});else{const A=Z-2;if(A>=0&&A<zh.length){const U=zh[A];N.audio.play("ui_typewriter"),Z>=11&&N.audio.play("ui_glitch_minor"),H.current&&window.clearTimeout(H.current),x({title:Z>=11?" ":"",text:U,type:Z>=11?"error":"info"}),H.current=window.setTimeout(()=>{x(null),H.current=null},2e3)}}},R=()=>{O!=null&&O.action?O.action():(V(null),j(!1))},Y=()=>{if(T){fe();return}if(!r){h({text:"",type:"error"});return}const Z=Ac.importCode(r);if(Z.success)Z.message.includes("")||Z.message.includes("")?h({text:Z.message,type:"success"}):t(Z.message);else{const A=qh[Math.floor(Math.random()*qh.length)];h({text:A,type:"error"})}},ie=()=>{if(T){if(k===0)return d.jsx(ce,{onClick:Y,variant:"danger",className:"w-full mt-auto transition-all duration-100 bg-red-700 hover:bg-red-600 border-red-900 shadow-[0_0_15px_rgba(239,68,68,0.5)]",children:d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[" ",d.jsx("span",{className:"animate-nervous inline-block",children:""})," "]})});{const Z=k>=11;return d.jsx(ce,{onClick:Y,variant:"danger",className:`w-full mt-auto transition-all duration-100 ${Z?"bg-red-950 border-red-950 text-red-500 animate-pulse border-2":"bg-red-600 border-red-800 hover:bg-red-500"}`,children:d.jsx("span",{className:"flex items-center justify-center gap-2",children:Z?" SYSTEM UNSTABLE ":"..."})})}}return d.jsx(ce,{onClick:Y,variant:"danger",className:"w-full mt-auto",disabled:!r,children:g?"":""})};return d.jsxs("div",{className:"absolute inset-0 bg-slate-900 flex flex-col items-center justify-center z-50 p-6 overflow-hidden",children:[d.jsx(gx,{active:w}),X&&d.jsxs("div",{className:"absolute inset-0 z-[999] bg-black flex items-center justify-center animate-crt-off overflow-hidden",children:[d.jsx("div",{className:"absolute w-full h-[2px] bg-white top-1/2 -translate-y-1/2 shadow-[0_0_20px_white] opacity-80"}),d.jsx("div",{className:"absolute inset-0 static-noise opacity-20"})]}),O&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-[110] bg-black/80 backdrop-blur-sm animate-pop-in",children:d.jsxs("div",{className:`
                        border-4 p-8 rounded-2xl shadow-2xl text-center max-w-md transform scale-110 pointer-events-auto relative overflow-hidden
                        ${O.type==="win"?"bg-slate-800 border-yellow-500":"bg-fuchsia-900 border-fuchsia-500"}
                    `,children:[O.type==="glitch"&&d.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIi8+Cjwvc3ZnPg==')]"}),d.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:O.type==="win"?"":""}),d.jsx("h3",{className:`text-3xl font-black mb-4 tracking-wider ${O.type==="win"?"text-yellow-400":"text-fuchsia-300 glitch-text"}`,"data-text":O.title,children:O.title}),d.jsxs("div",{className:`font-bold text-lg mb-8 flex flex-col gap-2 ${O.type==="win"?"text-white":"text-fuchsia-100"}`,children:[d.jsx("p",{children:O.textPart1}),O.textPart2&&d.jsx("p",{className:"text-2xl mt-2",children:O.textPart2})]}),d.jsx(ce,{onClick:R,className:`w-full text-xl py-3 ${O.type==="win"?"bg-yellow-600 border-yellow-800 hover:bg-yellow-500":"bg-fuchsia-600 border-fuchsia-800 hover:bg-fuchsia-500"}`,children:O.buttonText})]})}),v&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-[100] bg-black/60 backdrop-blur-sm animate-pop-in pointer-events-none",children:d.jsxs("div",{className:`
                        border-4 p-8 rounded-2xl shadow-2xl text-center max-w-md transform scale-110 pointer-events-auto
                        ${v.type==="win"?"bg-slate-800 border-yellow-500":"bg-slate-800 border-slate-500"}
                    `,children:[d.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:v.type==="win"?"":""}),d.jsx("h3",{className:`text-3xl font-black mb-4 tracking-wider ${v.type==="win"?"text-yellow-400":"text-white"}`,children:v.title}),d.jsx("p",{className:"text-white font-bold text-lg",children:v.text})]})}),d.jsxs("div",{className:"w-full max-w-2xl bg-slate-800 p-8 rounded-2xl border-4 border-cyan-500 shadow-2xl flex flex-col h-[600px] relative z-10",children:[d.jsx("h1",{className:"text-4xl font-black text-white mb-6 text-center",children:" ()"}),d.jsxs("div",{className:"flex gap-4 justify-center mb-6 shrink-0",children:[d.jsx(ce,{variant:i==="generate"?"primary":"outline",onClick:()=>{o("generate"),c(""),h(null),b(null),M(!1),C(0)},children:""}),d.jsx(ce,{variant:i==="import"?"primary":"outline",onClick:()=>{o("import"),c(""),h(null),b(null),M(!1),C(0)},children:""})]}),d.jsx("div",{className:"flex-1 bg-slate-900 p-6 rounded-xl border border-slate-700 flex flex-col gap-4 relative overflow-hidden",children:i==="generate"?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex items-center justify-between bg-slate-800 p-3 rounded-lg border border-slate-700",children:[d.jsxs("div",{className:"flex flex-col",children:[d.jsx("span",{className:"text-white font-bold text-sm",children:""}),d.jsx("span",{className:"text-xs text-slate-500",children:p&&!re?" ":""})]}),d.jsx("div",{className:`w-12 h-7 rounded-full p-1 cursor-pointer transition-colors relative ${p?"bg-green-500":"bg-slate-600"}`,onClick:()=>u(!p),children:d.jsx("div",{className:`bg-white w-5 h-5 rounded-full shadow-md transform transition-transform duration-200 ${p?"translate-x-5":"translate-x-0"}`})})]}),d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("textarea",{readOnly:!0,value:r,placeholder:"...",className:"w-full h-full bg-black text-green-400 font-mono text-sm p-4 rounded border border-slate-600 resize-none focus:outline-none focus:border-green-500",onClick:Z=>Z.target.select()}),!r&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:d.jsx("span",{className:"text-slate-600 text-sm",children:""})})]}),d.jsxs("div",{className:"flex gap-3 mt-auto",children:[d.jsx(ce,{onClick:J,className:"flex-1",children:""}),r&&d.jsx(ce,{onClick:ue,variant:"secondary",className:"w-32",children:""})]})]}):d.jsxs(d.Fragment,{children:[g&&d.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-lg border border-indigo-500/50 mb-2 animate-pop-in",children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsx("span",{className:"text-indigo-300 font-bold text-sm",children:""}),g.hasRun&&d.jsx("span",{className:"bg-green-900 text-green-400 text-[10px] px-2 py-0.5 rounded",children:""})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-300",children:[d.jsxs("div",{children:[" : ",d.jsx("span",{className:"text-yellow-400",children:g.highScore})]}),d.jsxs("div",{children:[" : ",g.totalGames]}),g.runDetails&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"col-span-2 border-t border-slate-700 my-1"}),d.jsxs("div",{children:[" : ",d.jsx("span",{className:"text-white font-bold",children:((q=jt[g.runDetails.characterName])==null?void 0:q.name)||g.runDetails.characterName})]}),d.jsxs("div",{children:[" : ",g.runDetails.wave," ",g.runDetails.isEndless?"()":""]}),d.jsxs("div",{children:[" : ",d.jsx("span",{className:"text-yellow-400",children:g.runDetails.gold})]})]})]})]}),d.jsxs("div",{className:"flex-1 relative",children:[d.jsx("textarea",{value:r,onChange:Z=>be(Z.target.value),placeholder:"...",className:"w-full h-full bg-black text-white font-mono text-sm p-4 rounded border border-slate-600 resize-none focus:outline-none focus:border-cyan-500"}),d.jsx("button",{onClick:pe,className:"absolute top-2 right-2 text-xs bg-slate-700 hover:bg-slate-600 text-white px-2 py-1 rounded border border-slate-500",children:""})]}),ie()]})}),f&&d.jsx("div",{className:`mt-4 p-3 rounded text-center font-bold text-sm animate-pop-in shrink-0 ${f.type==="success"?"bg-green-900/50 text-green-400 border border-green-600":f.type==="error"?"bg-red-900/50 text-red-400 border border-red-600":"bg-blue-900/50 text-blue-400 border border-blue-600"}`,children:f.text}),d.jsx("div",{className:"mt-6 flex justify-center shrink-0",children:d.jsx(ce,{variant:"outline",onClick:e,children:""})})]})]})},xx=({onExit:e})=>{const[t,i]=F.useState("spawn"),[o,r]=F.useState(0),[c,f]=F.useState(!1),[h,p]=F.useState("all"),[u,g]=F.useState(null),[b,v]=F.useState("random"),[x,T]=F.useState(!1),[M,k]=F.useState(new Set),[C,w]=F.useState(60),j=N.state.player;F.useEffect(()=>{const q=setInterval(()=>{r(Z=>Z+1)},200);return()=>clearInterval(q)},[]),F.useEffect(()=>{if(!x||M.size===0)return;const q=setInterval(()=>{if(N.state.isPaused)return;const Z=Array.from(M),A=Z[Math.floor(Math.random()*Z.length)];A&&O(A,b)},C/60*1e3);return()=>clearInterval(q)},[x,M,b,C]);const O=(q,Z)=>{Z==="random"?Pt.spawnEnemyRandomly(N,q):Aa(N,q,N.mousePos.x,N.mousePos.y)},V=q=>{O(q,b)},H=q=>{const Z=new Set(M);Z.has(q)?Z.delete(q):Z.add(q),k(Z)},X=()=>{N.state.enemies=[],N.state.projectiles=[]},ee=()=>{N.state.isDebugFrozen=!N.state.isDebugFrozen,f(!!N.state.isDebugFrozen)},re=q=>{const Z=kt.find(A=>A.id===q);Z&&(Z.effect(N.state),(!Z.items||Z.items.length===0)&&j.items.push(Z.title),ye.refreshDerivedStats(N.state),N.spawnFloatingText(j.x,j.y-50,`: ${Z.title}`,"#ffffff","chat"))},J=q=>{const Z=j.items[q];j.items.splice(q,1),ye.refreshDerivedStats(N.state),N.spawnFloatingText(j.x,j.y-50,`: ${Z}`,"#ef4444","chat")},ue=q=>{const Z=jt[q];Z&&(j.characterId=q,j.emoji=Z.emojiNormal,N.spawnFloatingText(j.x,j.y-50,`: ${Z.name}`,"#fbbf24","chat"))},pe=()=>{const q=N.state.currentWave+1;Pt.startWave(N,q),N.spawnFloatingText(j.x,j.y-100,` ${q} `,"#a855f7","chat"),N.spawnFloatingText(j.x,j.y-70,"(//)","#cbd5e1","chat")},be=Object.values(Ns),K=Object.values(jt),R=(()=>{let q=[];switch(h){case"weapon":q=[...Fh,...Zh];break;case"survival":q=Xh;break;case"economy":q=Wh;break;case"summon":q=Kh;break;case"special":q=[...Qh,...em,...Jh];break;default:q=kt}return u&&(q=q.filter(Z=>Z.tags&&Z.tags.includes(u))),q})(),Y=N.state.fps,ie=Y>=50?"text-green-400":Y>=30?"text-yellow-400":"text-red-500";return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"fixed top-2 left-1/2 -translate-x-1/2 bg-black/80 backdrop-blur-sm border border-slate-600 rounded-lg p-3 z-[100] pointer-events-none shadow-xl flex gap-6 font-mono text-xs",children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("span",{className:"text-slate-400 uppercase tracking-wider text-[10px] font-bold",children:"FPS"}),d.jsx("span",{className:`text-xl font-black ${ie}`,children:Y})]}),d.jsx("div",{className:"w-px bg-slate-700"}),d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("span",{className:"text-slate-400 uppercase tracking-wider text-[10px] font-bold",children:"Enemies"}),d.jsx("span",{className:"text-xl font-bold text-white",children:N.state.enemies.length})]}),d.jsx("div",{className:"w-px bg-slate-700"}),d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("span",{className:"text-slate-400 uppercase tracking-wider text-[10px] font-bold",children:"Projectiles"}),d.jsx("span",{className:"text-xl font-bold text-cyan-300",children:N.state.projectiles.length})]})]}),d.jsxs("div",{className:"absolute inset-0 pointer-events-none z-50 flex justify-end",children:[d.jsxs("div",{className:"w-96 bg-black/90 pointer-events-auto border-l border-slate-700 flex flex-col h-full shadow-2xl",children:[d.jsxs("div",{className:"p-4 border-b border-slate-700 bg-slate-900",children:[d.jsx("h2",{className:"text-green-400 font-black text-xl flex items-center gap-2",children:"  v2.0"}),d.jsxs("div",{className:"text-xs text-slate-500 font-mono mt-1",children:["Pools: E",N.state.enemyPool.length," | P",N.state.projectilePool.length," | FX",N.state.particlePool.length]})]}),d.jsxs("div",{className:"flex border-b border-slate-700",children:[d.jsx("button",{onClick:()=>i("spawn"),className:`flex-1 py-2 text-xs font-bold ${t==="spawn"?"bg-slate-700 text-white":"text-slate-400 hover:bg-slate-800"}`,children:""}),d.jsx("button",{onClick:()=>i("stats"),className:`flex-1 py-2 text-xs font-bold ${t==="stats"?"bg-slate-700 text-white":"text-slate-400 hover:bg-slate-800"}`,children:""}),d.jsx("button",{onClick:()=>i("items"),className:`flex-1 py-2 text-xs font-bold ${t==="items"?"bg-slate-700 text-white":"text-slate-400 hover:bg-slate-800"}`,children:""}),d.jsx("button",{onClick:()=>i("identity"),className:`flex-1 py-2 text-xs font-bold ${t==="identity"?"bg-slate-700 text-white":"text-slate-400 hover:bg-slate-800"}`,children:""})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-4 scrollbar-hide bg-slate-900/50",children:[t==="spawn"&&d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[d.jsx(ce,{size:"sm",variant:"danger",onClick:X,children:""}),d.jsx(ce,{size:"sm",variant:c?"primary":"secondary",onClick:ee,children:c?"AI ":"AI "})]}),d.jsx(ce,{size:"sm",variant:"outline",className:"w-full border-dashed border-slate-500 text-slate-300 hover:text-white hover:border-white",onClick:pe,children:"  (/)"}),d.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-600",children:[d.jsx("div",{className:"text-xs text-slate-400 font-bold mb-2 uppercase",children:""}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>v("mouse"),className:`flex-1 py-1 text-xs rounded border ${b==="mouse"?"bg-indigo-600 border-indigo-400 text-white":"bg-slate-700 border-slate-600 text-slate-300"}`,children:" "}),d.jsx("button",{onClick:()=>v("random"),className:`flex-1 py-1 text-xs rounded border ${b==="random"?"bg-indigo-600 border-indigo-400 text-white":"bg-slate-700 border-slate-600 text-slate-300"}`,children:" /"})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs text-slate-400 mb-2 font-bold uppercase",children:" ()"}),d.jsx("div",{className:"grid grid-cols-5 gap-2",children:be.map(q=>d.jsxs("button",{onClick:()=>V(q.type),className:"aspect-square bg-slate-800 rounded hover:bg-slate-700 border border-slate-600 flex items-center justify-center text-xl relative group",title:q.description,children:[q.emoji,d.jsx("span",{className:`absolute bottom-0 right-0 w-2 h-2 rounded-full ${q.tier==="boss"?"bg-red-500":q.tier==="epic"?"bg-yellow-500":q.tier==="rare"?"bg-purple-500":"bg-slate-500"}`})]},q.type))})]}),d.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-600",children:[d.jsxs("div",{className:"flex justify-between items-center mb-2",children:[d.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase",children:" ()"}),d.jsx("div",{className:`w-3 h-3 rounded-full ${x?"bg-green-500 animate-pulse":"bg-red-900"}`})]}),d.jsxs("div",{className:"mb-3",children:[d.jsx("div",{className:"text-[10px] text-slate-500 mb-1",children:" ():"}),d.jsx("div",{className:"grid grid-cols-6 gap-1 max-h-32 overflow-y-auto",children:be.map(q=>d.jsx("button",{onClick:()=>H(q.type),className:`aspect-square rounded flex items-center justify-center text-lg border ${M.has(q.type)?"bg-green-900 border-green-500 opacity-100":"bg-slate-900 border-slate-700 opacity-50 hover:opacity-80"}`,children:q.emoji},"auto-"+q.type))})]}),d.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[d.jsxs("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:[": ",C,"/"]}),d.jsx("input",{type:"range",min:"1",max:"180",value:C,onChange:q=>w(parseInt(q.target.value)),className:"w-full h-1 bg-slate-600 rounded-lg appearance-none cursor-pointer accent-green-500"})]}),d.jsx(ce,{size:"sm",className:`w-full ${x?"bg-red-600 hover:bg-red-500 border-red-800":"bg-green-600 hover:bg-green-500 border-green-800"}`,onClick:()=>T(!x),disabled:M.size===0,children:x?"":""})]})]}),t==="stats"&&d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex gap-2 mb-4",children:[d.jsx(ce,{size:"sm",variant:"success",onClick:()=>{j.hp=j.maxHp=99999,j.shield=99999},className:"flex-1",children:" (God)"}),d.jsx(ce,{size:"sm",variant:"secondary",onClick:()=>j.gold+=1e4,className:"flex-1",children:"+1"})]}),d.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-600 overflow-hidden",children:[d.jsx("div",{className:"bg-slate-700 px-3 py-1 text-xs font-bold text-white",children:""}),d.jsx("div",{className:"grid grid-cols-2 gap-px bg-slate-600 p-px",children:[{label:"",value:`${Math.floor(j.hp)} / ${j.maxHp}`},{label:"",value:`${Math.floor(j.shield)} / ${j.maxShield}`},{label:"",value:j.attackDamage.toFixed(1)},{label:"",value:`${(60/Math.max(1,j.attackSpeed)).toFixed(1)} /`},{label:"",value:j.projectileCount},{label:"",value:j.projectilePierce},{label:"",value:j.speed.toFixed(1)},{label:"",value:`${(j.dodgeChance*100).toFixed(0)}%`},{label:"",value:`${(j.lifeSteal*100).toFixed(0)}%`},{label:"",value:`${(j.dropRate*100).toFixed(0)}%`},{label:"",value:`${(j.damageReflection*100).toFixed(0)}%`},{label:"",value:`${j.incomeMultiplier.toFixed(2)}x`}].map((q,Z)=>d.jsxs("div",{className:"bg-slate-900 px-3 py-2 flex justify-between items-center",children:[d.jsx("span",{className:"text-[10px] text-slate-400",children:q.label}),d.jsx("span",{className:"text-xs font-mono text-yellow-300",children:q.value})]},Z))})]}),d.jsxs("div",{className:"space-y-4 text-sm text-white pt-2 border-t border-slate-700",children:[d.jsx("div",{className:"text-xs text-slate-500 font-bold mb-2 uppercase",children:""}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[d.jsx("span",{children:""})," ",d.jsx("span",{children:j.attackDamage.toFixed(1)})]}),d.jsx("input",{type:"range",min:"1",max:"500",value:j.attackDamage,onChange:q=>j.attackDamage=parseFloat(q.target.value),className:"w-full accent-indigo-500"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[d.jsx("span",{children:" (, )"})," ",d.jsx("span",{children:j.attackSpeed.toFixed(1)})]}),d.jsx("input",{type:"range",min:"1",max:"60",value:j.attackSpeed,onChange:q=>j.attackSpeed=parseFloat(q.target.value),className:"w-full accent-indigo-500"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[d.jsx("span",{children:""})," ",d.jsx("span",{children:j.speed.toFixed(1)})]}),d.jsx("input",{type:"range",min:"1",max:"30",value:j.speed,onChange:q=>j.speed=parseFloat(q.target.value),className:"w-full accent-indigo-500"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mb-1",children:[d.jsx("span",{children:""})," ",d.jsx("span",{children:j.projectileCount})]}),d.jsx("input",{type:"range",min:"1",max:"20",value:j.projectileCount,onChange:q=>j.projectileCount=parseFloat(q.target.value),className:"w-full accent-indigo-500"})]})]})]}),t==="items"&&d.jsxs("div",{className:"flex flex-col h-full gap-4",children:[d.jsxs("div",{className:"bg-slate-800 p-3 rounded-lg border border-slate-600 min-h-[150px] shrink-0",children:[d.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase mb-2 flex justify-between",children:[d.jsx("span",{children:" ()"}),d.jsx("span",{children:j.items.length})]}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[j.items.map((q,Z)=>{const A=kt.find(ae=>ae.title===q||ae.items&&ae.items.includes(q)),U=A?A.icon:"";return d.jsxs("button",{onClick:()=>J(Z),className:"w-8 h-8 bg-slate-700 border border-slate-500 rounded flex items-center justify-center text-lg hover:bg-red-900 hover:border-red-500 relative group",title:`: ${q}`,children:[U,d.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full opacity-0 group-hover:opacity-100 text-[8px] flex items-center justify-center",children:"x"})]},Z)}),j.items.length===0&&d.jsx("span",{className:"text-xs text-slate-600 italic",children:""})]}),d.jsx("div",{className:"text-[10px] text-yellow-600 mt-2 italic",children:" (+5)"})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto flex flex-col",children:[d.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase mb-2",children:" ()"}),d.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:[{id:"all",label:""},{id:"weapon",label:""},{id:"survival",label:""},{id:"economy",label:""},{id:"summon",label:""},{id:"special",label:""}].map(q=>d.jsx("button",{onClick:()=>p(q.id),className:`px-2 py-1 text-[10px] rounded border ${h===q.id?"bg-indigo-600 border-indigo-400 text-white":"bg-slate-800 border-slate-600 text-slate-400 hover:bg-slate-700"}`,children:q.label},q.id))}),d.jsxs("div",{className:"mb-2 bg-slate-800 p-2 rounded border border-slate-600",children:[d.jsx("div",{className:"text-[10px] text-slate-500 mb-1",children:""}),d.jsxs("div",{className:"flex flex-wrap gap-1",children:[d.jsx("button",{onClick:()=>g(null),className:`px-2 py-1 text-[10px] rounded border ${u?"bg-slate-900 border-slate-700 text-slate-400":"bg-slate-200 text-black border-white"}`,children:""}),Object.values(wt).map(q=>d.jsxs("button",{onClick:()=>g(u===q.id?null:q.id),className:`px-2 py-1 text-[10px] rounded border flex items-center gap-1 ${u===q.id?"bg-slate-700 text-white border-white":"bg-slate-900 border-slate-700 text-slate-400"}`,style:u===q.id?{borderColor:q.color}:{},children:[d.jsx("span",{children:q.icon}),d.jsx("span",{children:q.name})]},q.id))]})]}),d.jsx("div",{className:"grid grid-cols-5 gap-2 overflow-y-auto scrollbar-hide pb-4",children:R.map(q=>{var Z;return d.jsxs("button",{onClick:()=>re(q.id),className:"aspect-square bg-slate-800 rounded hover:bg-slate-700 border border-slate-600 flex flex-col items-center justify-center p-1 group relative",title:q.description,children:[d.jsx("span",{className:"text-xl",children:q.icon}),d.jsx("span",{className:"text-[8px] text-slate-400 truncate w-full text-center",children:q.title.substring(0,2)}),d.jsx("span",{className:`absolute top-1 right-1 w-1.5 h-1.5 rounded-full ${q.category==="upgrade"?"bg-blue-500":"bg-orange-500"}`}),q.tags&&q.tags.length>0&&d.jsx("span",{className:"absolute top-1 left-1 w-1.5 h-1.5 rounded-full",style:{backgroundColor:((Z=wt[q.tags[0]])==null?void 0:Z.color)||"#fff"}})]},q.uuid||q.id)})})]})]}),t==="identity"&&d.jsx("div",{className:"grid grid-cols-1 gap-2",children:K.map(q=>d.jsxs("button",{onClick:()=>ue(q.id),className:`p-3 rounded border flex items-center gap-3 ${j.characterId===q.id?"bg-green-900/50 border-green-500":"bg-slate-800 border-slate-600 hover:bg-slate-700"}`,children:[d.jsx("span",{className:"text-3xl",children:q.emojiNormal}),d.jsxs("div",{className:"text-left overflow-hidden",children:[d.jsx("div",{className:"text-sm font-bold text-white truncate",children:q.name}),d.jsx("div",{className:"text-xs text-slate-400 truncate",children:q.title}),d.jsx("div",{className:"text-[10px] text-slate-500 mt-1 line-clamp-1",children:q.description})]})]},q.id))})]}),d.jsx("div",{className:"p-4 border-t border-slate-700 bg-slate-900",children:d.jsx(ce,{onClick:e,variant:"outline",className:"w-full text-sm",children:" ()"})})]}),t==="spawn"&&b==="mouse"&&d.jsx("div",{className:"fixed pointer-events-none text-white text-xs bg-black/50 px-2 py-1 rounded transform -translate-y-full -translate-x-1/2 mt-[-10px]",style:{left:N.mousePos.x*.6+window.innerWidth/2-N.state.camera.x*.6,top:N.mousePos.y*.6+window.innerHeight/2-N.state.camera.y*.6},children:""})]})]})},Sx=()=>{const[e,t]=F.useState(null),[i,o]=F.useState(!1),r=F.useRef(!1);return F.useEffect(()=>{let c;const f=async()=>{if(r.current)return;const h=N.state.achievementNotificationQueue;if(h&&h.length>0){r.current=!0;const p=h.shift();p&&(t(p),o(!0),await new Promise(u=>setTimeout(u,2500)),o(!1),await new Promise(u=>setTimeout(u,300)),t(null)),r.current=!1,h.length>0&&setTimeout(f,100)}};return c=window.setInterval(f,200),()=>clearInterval(c)},[]),e?d.jsxs("div",{className:`fixed bottom-4 right-4 bg-slate-800/95 backdrop-blur border-2 border-yellow-500 p-3 rounded-lg shadow-2xl flex items-center gap-4 z-[999] pointer-events-none transition-all duration-300 transform
            ${i?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,style:{maxWidth:"320px"},children:[d.jsx("div",{className:"text-3xl bg-slate-700/50 w-12 h-12 flex items-center justify-center rounded shrink-0 border border-slate-600",children:e.icon}),d.jsxs("div",{className:"min-w-0",children:[d.jsx("div",{className:"text-yellow-400 font-bold text-[10px] uppercase tracking-wider mb-0.5",children:""}),d.jsx("div",{className:"text-white font-bold text-sm truncate",children:e.title}),d.jsx("div",{className:"text-slate-400 text-xs truncate",children:e.description})]})]}):null};class Tx{constructor(){this.particles=[],this.lastPos={x:0,y:0},this.hoverTarget=!1,this.isTitleHover=!1,this.chars="01XYZA"}update(t,i,o){const r=t-this.lastPos.x,c=i-this.lastPos.y,f=Math.sqrt(r*r+c*c);this.lastPos={x:t,y:i};const h=document.elementFromPoint(t,i);this.hoverTarget=!!(h!=null&&h.closest('button, a, [role="button"], input, .cursor-pointer, [onClick]')),this.isTitleHover=!!(h!=null&&h.closest(".cyber-glitch-title")),o===se.SHOP?(f>2||Math.random()<.1)&&this.spawnTrail(t,i,"coin",f):o===se.WELCOME&&this.isTitleHover?(this.spawnTrail(t,i,"code",f),Math.random()<.7&&this.spawnTrail(t,i,"code",f)):f>5&&(o===se.PLAYING&&!N.state.isPaused||this.hoverTarget&&Math.random()<.3&&this.spawnTrail(t,i,"ripple",f));for(let p=this.particles.length-1;p>=0;p--){const u=this.particles[p];u.x+=u.vx,u.y+=u.vy,u.type==="coin"&&(u.vy+=.2),u.type==="code"&&(u.vy+=.4,u.vx*=.95),u.type==="ripple"&&(u.size+=.5),u.life--,u.life<=0&&this.particles.splice(p,1)}}spawnTrail(t,i,o,r){const c=20+Math.random()*15;if(o==="coin")this.particles.push({x:t+(Math.random()-.5)*10,y:i+(Math.random()-.5)*10,vx:Math.random()-.5,vy:Math.random()*2,life:c,maxLife:c,color:Math.random()>.5?"#facc15":"#fbbf24",size:8+Math.random()*4,type:"coin"});else if(o==="code"){const f=-Math.PI/2+(Math.random()-.5)*1.5,h=3+Math.random()*5,p=["#FFFFFF","#FF00FF","#00FFFF"];this.particles.push({x:t,y:i,vx:Math.cos(f)*h,vy:Math.sin(f)*h,life:30+Math.random()*20,maxLife:50,color:p[Math.floor(Math.random()*p.length)],size:3+Math.random()*5,type:"code"})}else o==="ripple"&&this.particles.push({x:t,y:i,vx:0,vy:0,life:20,maxLife:20,color:"#22d3ee",size:2,type:"ripple"})}render(t,i,o,r){t.clearRect(0,0,i,o);const{x:c,y:f}=this.lastPos,h=Date.now();this.particles.forEach(u=>{const g=u.life/u.maxLife;t.globalAlpha=g,t.fillStyle=u.color,u.type==="code"?t.fillRect(u.x,u.y,u.size,u.size*(1+Math.random())):u.type==="coin"?(t.font="10px monospace",t.fillText("$",u.x,u.y)):u.type==="ripple"&&(t.strokeStyle=u.color,t.lineWidth=2,t.beginPath(),t.arc(u.x,u.y,u.size,0,Math.PI*2),t.stroke())}),t.globalAlpha=1;const p=N.state.isPaused;r===se.PLAYING||r===se.SANDBOX?p?this.hoverTarget?this.renderHoverCursor(t,c,f,h):this.renderSystemCursor(t,c,f):this.renderCombatReticle(t,c,f):r===se.SHOP?this.renderShopCursor(t,c,f,h):[se.STORY,se.BOSS_INTRO,se.ELITE_INTRO].includes(r)?this.renderDialogueCursor(t,c,f,h):r===se.WELCOME&&this.isTitleHover?this.renderGlitchCursor(t,c,f,h):this.hoverTarget?this.renderHoverCursor(t,c,f,h):this.renderSystemCursor(t,c,f)}renderCombatReticle(t,i,o){const r=N.keysPressed.mousedown;t.save(),t.translate(i,o);const c=r?.8:1,f=r?10:1;t.strokeStyle="#ffffff",t.fillStyle="#ffffff",t.lineWidth=4,t.beginPath(),t.arc(0,0,4,0,Math.PI*2),t.fill();const h=Date.now()/1e3;t.rotate(h*f),t.scale(c,c);const p=16,u=Math.PI/3;for(let g=0;g<4;g++){const b=g*(Math.PI/2)+u/2,v=(g+1)*(Math.PI/2)-u/2;t.beginPath(),t.arc(0,0,p,b,v),t.stroke()}r&&(t.strokeStyle="#ff0000",t.lineWidth=2,t.beginPath(),t.arc(0,0,p+6,0,Math.PI*2),t.stroke()),t.restore()}renderSystemCursor(t,i,o){t.save(),t.translate(i,o),t.beginPath(),t.moveTo(0,0),t.lineTo(0,24),t.lineTo(6,18),t.lineTo(12,28),t.lineTo(16,26),t.lineTo(10,16),t.lineTo(18,16),t.closePath(),t.fillStyle="rgba(0, 0, 0, 0.9)",t.fill(),t.lineWidth=2,t.strokeStyle="#22d3ee",t.stroke(),t.fillStyle="#fff",t.beginPath(),t.arc(6,10,1,0,Math.PI*2),t.fill(),t.restore()}renderHoverCursor(t,i,o,r){const c=Math.sin(r/200)*3;t.save(),t.translate(i,o+c),t.rotate(-Math.PI/6),t.font="30px sans-serif",t.fillStyle="#ffffff",t.shadowColor="#22d3ee",t.shadowBlur=10,t.fillText("",-8,24),t.restore()}renderShopCursor(t,i,o,r){const c=Math.sin(r/200)*2;t.save(),t.translate(i,o+c),t.rotate(-Math.PI/6),t.font="30px sans-serif",t.fillStyle="#facc15",t.shadowColor="#b45309",t.shadowBlur=5,t.fillText("",-8,24),t.restore()}renderDialogueCursor(t,i,o,r){t.save(),t.translate(i,o),this.renderSystemCursor(t,0,0);const c=Math.sin(r/150)*3;t.font="24px sans-serif",t.shadowColor="rgba(0,0,0,0.5)",t.shadowBlur=5,t.fillText("",20+c,30),t.restore()}renderGlitchCursor(t,i,o,r){}}const Mx=({phase:e,isPaused:t=!1})=>{const i=F.useRef(null),o=F.useRef(new Tx),r=F.useRef({x:window.innerWidth/2,y:window.innerHeight/2});F.useEffect(()=>{const h=p=>{r.current={x:p.clientX,y:p.clientY}};return window.addEventListener("mousemove",h),()=>window.removeEventListener("mousemove",h)},[]),F.useEffect(()=>{const h=i.current;if(!h)return;const p=h.getContext("2d");if(!p)return;let u;const g=()=>{(h.width!==window.innerWidth||h.height!==window.innerHeight)&&(h.width=window.innerWidth,h.height=window.innerHeight);const{x:b,y:v}=r.current;o.current.update(b,v,e),o.current.render(p,h.width,h.height,e),u=requestAnimationFrame(g)};return u=requestAnimationFrame(g),()=>cancelAnimationFrame(u)},[e]);const f=(e===se.PLAYING||e===se.SANDBOX)&&!t?"difference":"normal";return d.jsx("canvas",{ref:i,className:"fixed inset-0 pointer-events-none z-[9999]",style:{mixBlendMode:f}})},_x=({onComplete:e})=>{const[t,i]=F.useState(0),[o,r]=F.useState(""),[c,f]=F.useState(!1),[h,p]=F.useState(1),[u,g]=F.useState(!1),[b,v]=F.useState(0),[x,T]=F.useState(!1),M=F.useRef(null),k=F.useRef(null),[C]=F.useState(()=>Array.from({length:30}).map((H,X)=>({id:X,left:Math.random()*100,top:Math.random()*100+100,delay:Math.random()*5,duration:10+Math.random()*10,size:Math.random()*3+1,opacity:Math.random()*.5+.1}))),w=(H,X)=>{M.current&&clearTimeout(M.current),M.current=window.setTimeout(()=>{p(0),T(!1),setTimeout(()=>{i(H),p(1)},800)},X)};F.useEffect(()=>{if(t!==0)return;const H=[" BIOS...",": 'MO_YU' ()  V2.0...",": ...","...",""];let X=0,ee=0;r(""),f(!1);const re=setInterval(()=>{if(X>=H.length){clearInterval(re),f(!0);return}const J=H[X],ue=H.slice(0,X).join(`
`),pe=J.substring(0,ee+1);r((ue?ue+`
`:"")+pe),ee++,ee>=J.length&&(X++,ee=0)},30);return()=>clearInterval(re)},[t]),F.useEffect(()=>{h!==0&&(t===1?(setTimeout(()=>{N.audio.play("boot_engine")},50),setTimeout(()=>T(!0),1500),w(2,5e3)):t===2?(N.audio.play("boot_studio"),w(3,4500)):t===3?(N.audio.play("boot_warning"),w(4,7500)):t===4&&e())},[t,h]);const j=()=>{if(t===0){N.audio.resume(),N.audio.play("ui_typewriter");try{document.fullscreenElement||document.documentElement.requestFullscreen().then(()=>{"keyboard"in navigator&&navigator.keyboard.lock&&navigator.keyboard.lock(["Escape"]).catch(H=>{console.log("Keyboard Lock failed:",H)})}).catch(()=>{})}catch{}p(0),setTimeout(()=>{i(1),p(1)},1e3)}},O=()=>{t>0&&g(!0)},V=()=>{g(!1)};return F.useEffect(()=>(u?k.current=window.setInterval(()=>{v(H=>{const X=H+2;return X>=100?(k.current&&clearInterval(k.current),e(),100):X})},20):(k.current&&clearInterval(k.current),v(0)),()=>{k.current&&clearInterval(k.current)}),[u]),d.jsxs("div",{className:"absolute inset-0 bg-black z-[9999] flex flex-col items-center justify-center overflow-hidden cursor-pointer select-none font-sans",onMouseDown:t===0?j:O,onMouseUp:V,onMouseLeave:V,onTouchStart:t===0?j:O,onTouchEnd:V,children:[d.jsx("style",{children:`
                @keyframes float-up {
                    from { transform: translateY(0); opacity: 0; }
                    10% { opacity: 1; }
                    to { transform: translateY(-100vh); opacity: 0; }
                }
                @keyframes fade-slide-up {
                    from { transform: translateY(20px); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
                @keyframes rgb-split {
                    0% { text-shadow: 0 0 0 transparent; transform: translate(0,0); }
                    20% { text-shadow: -2px 0 red, 2px 0 blue; transform: translate(-1px, 1px); }
                    40% { text-shadow: 2px 0 red, -2px 0 blue; transform: translate(1px, -1px); }
                    60% { text-shadow: -1px 0 red, 1px 0 blue; transform: translate(-1px, 0); }
                    80% { text-shadow: 1px 0 red, -1px 0 blue; transform: translate(0, 1px); }
                    100% { text-shadow: 0 0 0 transparent; transform: translate(0,0); }
                }
                .glitch-active {
                    animation: rgb-split 0.2s steps(2) infinite;
                }
                .tracking-widest-plus {
                    letter-spacing: 0.5em;
                }
            `}),d.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:C.map(H=>d.jsx("div",{className:"absolute bg-white rounded-full",style:{left:`${H.left}%`,top:"100%",width:`${H.size}px`,height:`${H.size}px`,opacity:H.opacity,animation:`float-up ${H.duration}s linear infinite`,animationDelay:`-${H.delay}s`}},H.id))}),d.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center transition-opacity duration-700 ease-in-out relative z-10",style:{opacity:h},children:[t===0&&d.jsxs("div",{className:"w-full max-w-3xl p-8 flex flex-col items-center",children:[d.jsxs("div",{className:"text-green-500 whitespace-pre-wrap leading-relaxed text-lg md:text-xl font-mono drop-shadow-[0_0_8px_rgba(34,197,94,0.6)] min-h-[120px]",children:[o,!c&&d.jsx("span",{className:"animate-pulse inline-block w-3 h-6 bg-green-500 ml-1 align-middle"})]}),c&&d.jsx("div",{className:"mt-6 text-xl md:text-2xl font-bold text-green-400 animate-pulse tracking-widest cursor-pointer self-center",children:">>  <<"})]}),t===1&&d.jsxs("div",{className:`flex flex-col items-center gap-12 ${x?"glitch-active":""}`,children:[d.jsxs("div",{className:"w-40 h-40 border-[6px] border-white relative transform rotate-45 flex items-center justify-center shadow-[0_0_60px_rgba(255,255,255,0.15)] bg-black",children:[d.jsx("div",{className:"w-20 h-20 bg-white transform rotate-90 opacity-90"}),d.jsx("div",{className:"absolute w-full h-[2px] bg-black transform rotate-90"}),d.jsx("div",{className:"absolute w-[2px] h-full bg-black transform rotate-90"})]}),d.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[d.jsx("h1",{className:"text-5xl md:text-6xl font-black text-white tracking-widest-plus font-sans",children:"SPAGHETTI ENGINE"}),d.jsx("div",{className:"h-px w-64 bg-slate-500"}),d.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-200 font-serif tracking-widest",children:"   "}),d.jsxs("div",{className:"text-sm md:text-base text-slate-500 tracking-[0.2em] uppercase mt-4 font-mono",children:["Powered by Legacy Code & Prayers",d.jsx("br",{}),d.jsx("span",{className:"text-[10px] opacity-60",children:"  "})]})]})]}),t===2&&d.jsxs("div",{className:"flex flex-col items-center gap-8",children:[d.jsx("div",{className:"text-9xl mb-6 animate-pulse filter drop-shadow-[0_0_30px_rgba(255,255,255,0.2)]",children:""}),d.jsxs("div",{className:"flex flex-col items-center gap-2",children:[d.jsx("h1",{className:"text-6xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-br from-white to-slate-400 tracking-tighter",children:"Ev Studio"}),d.jsx("div",{className:"text-2xl md:text-3xl text-slate-300 font-light tracking-widest uppercase",children:"Ev "})]}),d.jsx("div",{className:"w-16 h-1 bg-gradient-to-r from-cyan-500 to-purple-500 my-4"}),d.jsxs("div",{className:"text-center space-y-2",children:[d.jsxs("p",{className:"text-slate-400 text-sm tracking-widest uppercase",children:["A Subsidiary of ",d.jsx("span",{className:"text-white font-bold",children:"Touch Fish Group"})]}),d.jsx("p",{className:"text-slate-500 text-xs tracking-widest",children:" (Touch Fish Group) "})]}),d.jsx("p",{className:"text-xs text-slate-600 mt-12 italic font-serif opacity-0 animate-[fade-slide-up_1s_ease-out_forwards] animation-delay-1000",children:"Crafting Digital Chaos since 2025"})]}),t===3&&d.jsxs("div",{className:"max-w-4xl px-12 py-10 border border-red-900/30 bg-red-950/10 backdrop-blur-sm text-center flex flex-col gap-8 shadow-2xl",children:[d.jsxs("div",{className:"flex items-center justify-center gap-6 text-red-500 border-b border-red-800/50 pb-6",children:[d.jsx("span",{className:"text-5xl",children:""}),d.jsxs("div",{className:"flex flex-col",children:[d.jsx("h2",{className:"text-3xl font-black uppercase tracking-[0.2em] text-white",children:"Health & Safety"}),d.jsx("h3",{className:"text-xl font-bold tracking-widest text-red-400",children:""})]}),d.jsx("span",{className:"text-5xl",children:""})]}),d.jsxs("div",{className:"space-y-6 text-slate-300 text-lg leading-relaxed font-serif",children:[d.jsx("p",{children:d.jsx("span",{className:"text-white font-bold",children:"PLEASE READ BEFORE PLAYING"})}),d.jsxs("p",{children:["",d.jsx("br",{}),"This game contains intense memes, flashing images, and extreme procrastination triggers."]}),d.jsxs("p",{className:"text-sm text-slate-400 border-l-2 border-red-800 pl-4 py-2 mx-auto max-w-2xl text-left",children:[" ",d.jsx("span",{className:"text-red-400 font-bold",children:" (Boss Footsteps)"}),"  ",d.jsx("span",{className:"text-yellow-500 font-bold",children:" (Fired)"}),"  ",d.jsx("span",{className:"text-yellow-500 font-bold",children:" (KPI Loss)"})," "]})]}),d.jsxs("div",{className:"mt-4 flex justify-between items-center text-xs text-slate-600 font-mono border-t border-slate-800 pt-4",children:[d.jsx("span",{children:"V1.9999.PRO.MAX"}),d.jsx("span",{className:"animate-pulse",children:"LOADING ASSETS... 99%"})]})]})]}),d.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-slate-600 text-xs font-mono tracking-wider opacity-60 z-20 pointer-events-none",children:"[F11]  |  P  Esc"}),t>0&&d.jsxs("div",{className:"absolute bottom-8 right-8 flex items-center gap-4 transition-opacity duration-300 opacity-80 hover:opacity-100 z-30",children:[d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-white font-bold text-sm tracking-widest",children:""}),d.jsx("div",{className:"text-[10px] text-slate-500",children:"HOLD TO SKIP"})]}),d.jsx("div",{className:"relative w-12 h-12",children:d.jsxs("svg",{className:"w-full h-full transform -rotate-90 overflow-visible",children:[d.jsx("circle",{cx:"24",cy:"24",r:"18",stroke:"rgba(255,255,255,0.2)",strokeWidth:"4",fill:"none"}),d.jsx("circle",{cx:"24",cy:"24",r:"18",stroke:"#ffffff",strokeWidth:"4",fill:"none",strokeDasharray:"113.1",strokeDashoffset:113.1*(1-b/100),strokeLinecap:"round",className:"transition-all duration-75 ease-linear"})]})})]})]})},Oc=({script:e,onFinish:t})=>{const[i,o]=F.useState(0),[r,c]=F.useState(""),[f,h]=F.useState(!1),[p,u]=F.useState("enter"),[g,b]=F.useState([]),v=F.useRef(null),x=F.useRef(null),T=e[Math.min(i,e.length-1)];F.useEffect(()=>()=>{v.current&&window.clearInterval(v.current),x.current&&window.clearInterval(x.current)},[]),F.useEffect(()=>{if(T)if(b([]),x.current&&(window.clearInterval(x.current),x.current=null),T.vfx==="code_rain"){const J=()=>{const ue="01<>{}bug;KPI",pe=Math.random()*100,be=1+Math.random()*2,K=10+Math.random()*20,fe=ue[Math.floor(Math.random()*ue.length)],R=d.jsx("div",{className:"absolute text-green-500 font-mono font-bold animate-fall pointer-events-none",style:{left:`${pe}%`,top:"-50px",fontSize:`${K}px`,animationDuration:`${be}s`,opacity:.7},children:fe},Date.now()+Math.random());b(Y=>[...Y.slice(-50),R])};x.current=window.setInterval(J,50)}else T.vfx==="sweep"?(b([d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/80 to-transparent animate-swipe pointer-events-none z-0"},"sweep")]),N.audio.play("ui_shield_break")):T.vfx==="shake"&&N.audio.playExplosion()},[T]),F.useEffect(()=>{if(!T)return;u("enter");const J=T.text;c(""),h(!0);let ue=0;v.current&&window.clearInterval(v.current),v.current=window.setInterval(()=>{ue<J.length?(c(J.substring(0,ue+1)),ue%3===0&&N.audio.playTypewriter(),ue++):(h(!1),u("idle"),v.current&&window.clearInterval(v.current))},30)},[i,T]);const M=()=>{f?(v.current&&window.clearInterval(v.current),c(T.text),h(!1),u("idle")):i<e.length-1?o(J=>J+1):t()};if(!T)return null;let k="bg-slate-950",C="";T.bgTheme==="boss"||T.bgTheme==="red"?(k="bg-red-950",C="radial-gradient(circle at center, rgba(153,27,27,0.4) 0%, rgba(0,0,0,0.8) 100%)"):T.bgTheme==="elite"||T.bgTheme==="purple"?(k="bg-purple-950",C="radial-gradient(circle at center, rgba(107,33,168,0.4) 0%, rgba(0,0,0,0.8) 100%)"):C="radial-gradient(circle at bottom left, rgba(15,23,42,1) 0%, rgba(0,0,0,1) 100%)";let w="border-slate-500",j="text-slate-200",O="shadow-slate-500/20",V="bg-slate-700";T.speaker==="boss"?(w="border-red-500",j="text-red-100",O="shadow-red-500/40",V="bg-red-800"):T.speaker==="player"?(w="border-cyan-400",j="text-cyan-100",O="shadow-cyan-400/40",V="bg-cyan-700"):T.speaker==="narrator"?(w="border-yellow-400",j="text-yellow-100",O="shadow-yellow-400/40",V="bg-yellow-700"):T.speaker==="elite"&&(w="border-purple-400",j="text-purple-100",O="shadow-purple-400/40",V="bg-purple-800");const H=T.side==="center",X=T.side==="right",ee=p==="enter"?"animate-pop-in":"",re=T.vfx==="shake"?"animate-shake":"";return d.jsxs("div",{className:`absolute inset-0 flex flex-col items-center justify-center z-[90] cursor-pointer select-none overflow-hidden ${k} ${re}`,onClick:M,style:{background:C},children:[d.jsx("style",{children:`
                @keyframes fall {
                    0% { transform: translateY(0); opacity: 1; }
                    100% { transform: translateY(100vh); opacity: 0; }
                }
                .animate-fall { animation-name: fall; animation-timing-function: linear; }
                
                @keyframes swipe {
                    0% { transform: translateX(-100%) skewX(-20deg); }
                    100% { transform: translateX(200%) skewX(-20deg); }
                }
                .animate-swipe { animation: swipe 0.5s ease-out forwards; }

                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
                    20%, 40%, 60%, 80% { transform: translateX(5px); }
                }
                .animate-shake { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }
            `}),d.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none z-0",children:g}),(T.bgTheme==="boss"||T.bgTheme==="elite")&&d.jsx("div",{className:"absolute inset-0 pointer-events-none z-0 opacity-10",style:{backgroundImage:"linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06))",backgroundSize:"100% 2px, 3px 100%"}}),d.jsx("div",{className:`w-full max-w-5xl px-4 relative z-10 transition-all duration-300 ${ee}`,children:H?d.jsxs("div",{className:"flex flex-col items-center text-center space-y-8",children:[d.jsxs("div",{className:"text-9xl filter drop-shadow-[0_0_30px_rgba(255,255,255,0.3)] animate-pulse relative",children:[T.avatar,T.emotion&&d.jsx("div",{className:"absolute -top-4 -right-8 text-6xl animate-bounce drop-shadow-md",children:T.emotion})]}),d.jsxs("div",{className:`
                            relative bg-black/80 px-12 py-10 rounded-2xl border-4 backdrop-blur-md max-w-3xl w-full
                            ${w} ${O} shadow-2xl
                        `,children:[d.jsx("div",{className:`
                                absolute -top-5 left-1/2 -translate-x-1/2 px-6 py-1 rounded-full text-sm font-black tracking-[0.2em] uppercase shadow-lg border border-white/20
                                ${V} text-white
                            `,children:T.name}),d.jsxs("div",{className:`text-3xl md:text-4xl font-bold leading-relaxed ${j}`,children:[r,d.jsx("span",{className:`inline-block w-3 h-8 ml-1 align-middle bg-current ${f?"animate-pulse":"opacity-0"}`})]})]})]}):d.jsxs("div",{className:`
                        flex items-end gap-6 md:gap-10
                        ${X?"flex-row-reverse":"flex-row"}
                    `,children:[d.jsxs("div",{className:"flex flex-col items-center shrink-0 relative group",children:[d.jsxs("div",{className:`
                                w-32 h-32 md:w-48 md:h-48 rounded-full border-4 shadow-2xl flex items-center justify-center bg-black/40 backdrop-blur-sm overflow-visible relative
                                ${w} ${O}
                                transition-transform duration-300 ${f?"scale-105":"scale-100"}
                            `,children:[d.jsx("div",{className:"text-7xl md:text-9xl transform transition-transform group-hover:scale-110 duration-500",children:T.avatar}),T.emotion&&d.jsx("div",{className:`
                                        absolute -top-4 -right-4 w-16 h-16 md:w-20 md:h-20 bg-white rounded-full border-4 ${w} 
                                        flex items-center justify-center text-3xl md:text-5xl shadow-lg animate-bounce z-20
                                    `,children:T.emotion})]}),d.jsx("div",{className:`
                                mt-[-20px] z-10 px-6 py-1.5 rounded-full text-sm md:text-base font-black tracking-widest uppercase shadow-lg border border-white/10
                                ${V} text-white transform transition-transform group-hover:-translate-y-1
                            `,children:T.name})]}),d.jsxs("div",{className:`
                            flex-1 relative p-6 md:p-10 rounded-3xl min-h-[160px] flex items-center shadow-xl border-2 bg-slate-900/80 backdrop-blur-md
                            ${w}
                            ${X?"mr-4":"ml-4"}
                        `,children:[d.jsxs("div",{className:`text-2xl md:text-3xl font-bold leading-relaxed ${j} w-full`,children:[r,d.jsx("span",{className:`inline-block w-3 h-6 md:h-8 ml-2 bg-current align-bottom ${f?"animate-pulse":"opacity-0"}`})]}),!f&&d.jsx("div",{className:"absolute bottom-4 right-4 text-xs font-mono animate-bounce opacity-50",children:" "})]})]})}),d.jsx("div",{className:"absolute bottom-8 w-full text-center text-white/20 text-sm font-mono tracking-[0.3em] uppercase animate-pulse",children:f?"Rendering...":"Waiting for Input"})]})},Gh={9527:[{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:"9527",bgTheme:"red",vfx:"shake"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"9527",text:"......"},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:""},{side:"left",speaker:"player",avatar:"",emotion:"",name:"9527",text:"... "},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:""},{side:"center",speaker:"narrator",avatar:"",name:"",text:" 9527"}],"007":[{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:"007"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"007",text:""},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:""},{side:"left",speaker:"player",avatar:"",emotion:"",name:"007",text:".........",vfx:"shake"},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:""},{side:"center",speaker:"narrator",avatar:"",name:"",text:" 007"}],1024:[{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:"1024"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"1024",text:"FeatureBug..."},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:""},{side:"left",speaker:"player",avatar:"",emotion:"",name:"1024",text:"..."},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:""},{side:"center",speaker:"narrator",avatar:"",name:"",text:" 1024"}],ev_creator:[{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:""},{side:"left",speaker:"player",avatar:"",emotion:"",name:"EV",text:"EV......"},{side:"center",speaker:"narrator",avatar:"",emotion:"",name:"EV",text:"..."},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:"Bug"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"EV",text:"..."},{side:"center",speaker:"narrator",avatar:"",name:"",text:" EV"}],cleaner:[{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:"",vfx:"code_rain"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"",text:""},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI",text:"..."},{side:"left",speaker:"player",avatar:"",emotion:"",name:"",text:""},{side:"left",speaker:"player",avatar:"",emotion:"",name:"",text:"",vfx:"sweep"},{side:"center",speaker:"narrator",avatar:"",name:"",text:""}]},bl={boss_kpi:[{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI ",text:"...",bgTheme:"red"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"",text:"",bgTheme:"red"},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI ",text:"''",bgTheme:"red"},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"KPI ",text:" KPI ",bgTheme:"red"}],boss_ai:[{side:"right",speaker:"boss",avatar:"",emotion:"",name:"AI ",text:"...  (Creator Signature)",bgTheme:"boss"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"EV ()",text:"... ",bgTheme:"boss"},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"AI ",text:"",bgTheme:"boss"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"EV ()",text:"",bgTheme:"boss"},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"AI ",text:"",bgTheme:"boss"}],boss_glitch:[{side:"right",speaker:"boss",avatar:"",emotion:"",name:"Bug ",text:" FATAL ERROR: NullReferenceException...",bgTheme:"boss"},{side:"left",speaker:"player",avatar:"",emotion:"",name:" 1024",text:"",bgTheme:"boss"},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"Bug ",text:"System.CriticalError: ",bgTheme:"boss"},{side:"left",speaker:"player",avatar:"",emotion:"",name:" 1024",text:" sudo rm -rf ",bgTheme:"boss"},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"Bug ",text:"Initiating: Blue Screen of Death ()...",bgTheme:"boss"}],boss_glitch_ev:[{side:"right",speaker:"boss",avatar:"",emotion:"",name:"Bug ",text:`Loading [Boss_AI_Terminator]... FAILED. 
Fallback to [Legacy_Shit_Code_V1]...`,bgTheme:"boss"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"EV ()",text:"AI  Bug",bgTheme:"boss"},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"Bug ",text:" BOSS ... ",bgTheme:"boss"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"EV ()",text:"... ",bgTheme:"boss"},{side:"center",speaker:"narrator",avatar:"",name:"",text:"EVBOSSBOSS......BOSS..."}],boss_glitch_1024:[{side:"right",speaker:"boss",avatar:"",emotion:"",name:"Bug ",text:"Warning:  'TODO'  'FIXME' ... ",bgTheme:"boss"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"1024",text:" '' "},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"Bug ",text:"Error:  System32...",bgTheme:"boss"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"1024",text:"",vfx:"shake"},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"Bug ",text:"Executing: Ctr+C, Ctr+V Loop...  Bug...",bgTheme:"boss"},{side:"left",speaker:"player",avatar:"",emotion:"",name:"1024",text:"... "}]},wx={4:[{side:"center",speaker:"elite",avatar:"",name:"",text:"...",bgTheme:"purple"},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"",text:"",bgTheme:"purple"},{side:"center",speaker:"narrator",avatar:"",name:"",text:"()",bgTheme:"purple"},{side:"right",speaker:"elite",avatar:"",emotion:"",name:"",text:"",bgTheme:"purple"}],6:[{side:"center",speaker:"elite",avatar:"",name:"",text:"...",bgTheme:"purple"},{side:"right",speaker:"boss",avatar:"",emotion:"",name:"",text:"",bgTheme:"purple"},{side:"center",speaker:"narrator",avatar:"",name:"",text:"()",bgTheme:"purple"},{side:"right",speaker:"elite",avatar:"",emotion:"",name:"",text:"...",bgTheme:"purple"}]};function kx(){const{canvasRef:e,phase:t,selectedChar:i,inTransition:o,isPausedUI:r,handleStart:c,handleEncyclopedia:f,handleAchievements:h,handleLeaderboard:p,handleContinue:u,handleSettingsBack:g,handleSettingsNext:b,handleBack:v,handleDifficultySelect:x,handleCharSelect:T,finishStory:M,handleNextWave:k,startEliteWave:C,handleWaveSummaryConfirm:w,startEndlessMode:j,startBossBattle:O,restartGame:V,goToMainMenu:H,resumeGame:X,handleLinkCode:ee,handleImportSuccess:re}=Ev(),J=()=>Gh[i]||Gh[9527],ue=()=>{const be=Pt.getBossTypeForPlayer(N.state.player.characterId),K=N.state.player.characterId;return be==="boss_glitch"&&K==="ev_creator"?bl.boss_glitch_ev||bl.boss_glitch:be==="boss_glitch"&&K==="1024"?bl.boss_glitch_1024||bl.boss_glitch:bl[be]||bl.boss_kpi},pe=()=>{const be=N.state.currentWave+1;return wx[be]||[]};return d.jsxs("div",{className:"w-full h-full bg-black relative overflow-hidden cursor-none",children:[d.jsx("canvas",{ref:e,className:"block w-full h-full"}),d.jsx("div",{className:`absolute inset-0 bg-black z-[60] pointer-events-none transition-opacity duration-500 ${o?"opacity-100":"opacity-0"}`}),d.jsx(Sx,{}),(t===se.PLAYING||t===se.SANDBOX)&&d.jsx(Mg,{}),t===se.SANDBOX&&d.jsx(xx,{onExit:H}),(t===se.PLAYING||t===se.SHOP||t===se.SANDBOX)&&r&&d.jsx(cx,{onMainMenu:H,onResume:X,onLinkCode:ee}),t===se.BOOT&&d.jsx(_x,{onComplete:H}),t===se.WELCOME&&d.jsx(Vv,{onStart:c,onEncyclopedia:f,onAchievements:h,onLeaderboard:p,onContinue:u,onLinkCode:ee}),t===se.SETTINGS&&d.jsx(Hv,{onNext:b,onBack:g}),t===se.DIFFICULTY_SELECT&&d.jsx(Pv,{onSelect:x,onBack:v}),t===se.CHARACTER_SELECT&&d.jsx(Bv,{onSelect:T,onBack:v}),t===se.STORY&&d.jsx(Oc,{script:J(),onFinish:M}),t===se.BOSS_INTRO&&d.jsx(Oc,{script:ue(),onFinish:O}),t===se.ELITE_INTRO&&d.jsx(Oc,{script:pe(),onFinish:C}),t===se.WAVE_SUMMARY&&d.jsx(dx,{onNext:w}),t===se.SHOP&&d.jsx(Yv,{onNextWave:k,onLinkCode:ee}),t===se.VICTORY&&d.jsx(Uv,{onMainMenu:H,onEndless:j}),t===se.GAME_OVER&&d.jsx(Fv,{onRestart:V,onMainMenu:H}),t===se.ENCYCLOPEDIA&&d.jsx(mm,{onBack:v}),t===se.ACHIEVEMENTS&&d.jsx(ux,{onBack:v}),t===se.LEADERBOARD&&d.jsx(hx,{onBack:v}),t===se.LINK_CODE&&d.jsx(vx,{onBack:v,onImportSuccess:re}),d.jsx(Mx,{phase:t,isPaused:r})]})}const pm=document.getElementById("root");if(!pm)throw new Error("Could not find root element to mount to");const jx=Qy.createRoot(pm);jx.render(d.jsx(zy.StrictMode,{children:d.jsx(kx,{})}));
